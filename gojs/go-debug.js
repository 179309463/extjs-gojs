/*
 * GoJS� v0.9.0rc JavaScript Library for HTML Canvas Diagrams
 * Northwoods Software�, http://www.nwoods.com/
 *
 * Copyright � 1998-2012 by Northwoods Software Corporation.  All Rights Reserved.
 * THIS SOFTWARE IS LICENSED.  THE LICENSE AGREEMENT IS AT: http://www.gojs.net/0.9.0rc/license.html.
 */
(function(window) { var f=void 0,h=!0,m=null,o=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function r(a){return function(){return this[a]}}function ca(a){return function(){return a}}var ea,ga={};if(!Object.prototype.__defineGetter__&&!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(a,b,c){c.get&&a.__defineGetter__(b,c.get);c.set&&a.__defineSetter__(b,c.set)});
Object.prototype.__lookupGetter__&&!Object.getOwnPropertyDescriptor&&(Object.getOwnPropertyDescriptor=function(a,b){return{get:a.__lookupGetter__(b),set:a.__lookupSetter__(b)}});Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__});Object.isFrozen||(Object.isFrozen=function(a){return a.SD===h});Object.freeze||(Object.freeze=function(a){a.SD=h});
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return g.apply(a,e.concat(d.call(arguments)))}function c(){}var d=Array.prototype.slice,e=d.call(arguments,1),g=this;c.prototype=this.prototype;b.prototype=new c;return b});var s={KE:o,lI:o,ry:o,KB:o,trace:aa(),JE:o,assert:o,TH:m,dI:aa(),fI:aa(),eI:aa(),cI:aa(),kI:aa(),gI:aa(),iI:aa(),hI:aa(),YH:o,FJ:o,AJ:o,BJ:o,eF:o,jI:aa()},s=m;ga.Debug=m;
var u={Zv:{},xz:0,RD:{},At:document.createElement("canvas").getContext("2d"),Bt:"",Zw:[],pt:m,qz:[],Ow:"ontouchstart"in window,pA:"ongesturestart"in window,oz:o,g:function(a){s&&s.JE&&alert(a);throw Error(a);},v:function(a,b){if(a.Ha){var c="The object is frozen, so its properties cannot be set: "+a.toString();b!==f&&(c=c+("  to value: "+b));u.g(c)}},c:function(a,b,c,d){if(!(a instanceof b)){c=u.Ug(c);d!==f&&(c=c+("."+d));u.sc(a,b,c)}},e:function(a,b,c,d){if(typeof a!==b){c=u.Ug(c);d!==f&&(c=c+("."+
d));u.sc(a,b,c)}},i:function(a,b,c){if(!isFinite(a)){b=u.Ug(b);c!==f&&(b=b+("."+c));u.g(b+" must be a real number and not NaN or Infinity: "+a)}},Sa:function(a,b,c,d){if(!(a instanceof ja)||a.Id!==b){c=u.Ug(c);d!==f&&(c=c+("."+d));u.sc(a,"a constant of class "+u.Ii(b),c)}},sc:function(a,b,c,d){b=u.Ug(b);c=u.Ug(c);d!==f&&(c=c+("."+d));u.g(c+" value is not an instance of "+b+": "+a)},ha:function(a,b,c,d){c=u.Ug(c);d!==f&&(c=c+("."+d));u.g(c+" is not in the range "+b+": "+a)},trace:function(a){window&&
window.console&&window.console.log(a)},isArray:function(a){return a instanceof Array||a instanceof NodeList||a instanceof HTMLCollection},PA:function(a,b,c){u.isArray(a)||u.sc(a,"Array or NodeList or HTMLCollection",b,c)},vb:function(a){return a.length},lb:function(a,b){return a[b]},IE:function(a,b,c){a instanceof Array?a[b]=c:u.g("Cannot replace an object in an HTMLCollection or NodeList at "+b)},mx:function(a,b){if(a instanceof Array)return a.indexOf(b);for(var c=a.length,d=0;d<c;d++)if(a[d]===
b)return d;return-1},Jh:function(a,b,c){a instanceof Array?b>=a.length?a.push(c):a.splice(b,0,c):u.g("Cannot insert an object into an HTMLCollection or NodeList: "+c+" at "+b)},Kh:function(a,b){a instanceof Array?b>=a.length?a.pop():a.splice(b,1):u.g("Cannot remove an object from an HTMLCollection or NodeList at "+b)},$y:1,Fb:function(a){a.__gohashid=u.$y++},nn:function(a){var b=a.__gohashid;if(b===f){b=u.$y++;a.__gohashid=b}return b},cc:function(a){return a.__gohashid},a:function(a,b,c){a[b]=c},
H:function(a,b){b.fz=a;ga[a]=b},ma:function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},defineProperty:function(a,b,c,d,e){u.e(a,"function","Util.defineProperty:classfunc");u.e(b,"object","Util.defineProperty:propname");u.e(c,"function","Util.defineProperty:getter");u.e(d,"function","Util.defineProperty:setter");c={get:c,set:d};if(e!==f)for(var g in e)c[g]=e[g];for(var i in b){Object.defineProperty(a.prototype,i,c);e=Object.getOwnPropertyDescriptor(a.prototype,
i);b[i]&&e&&Object.defineProperty(a.prototype,b[i],e)}},m:function(a,b,c,d){u.e(a,"function","Util.defineReadOnlyProperty:classfunc");u.e(b,"object","Util.defineReadOnlyProperty:propname");u.e(c,"function","Util.defineReadOnlyProperty:getter");c={get:c,set:function(a){u.g("The property "+b+" is read-only and cannot be set to "+a)}};if(d!==f)for(var e in d)c[e]=d[e];for(var g in b){Object.defineProperty(a.prototype,g,c);d=Object.getOwnPropertyDescriptor(a.prototype,g);b[g]&&d&&Object.defineProperty(a.prototype,
b[g],d)}},jd:function(a,b){for(var c in b)b[c]=h;a.prototype.WD=b},Ug:function(a){return a===f?"":typeof a==="string"?a:typeof a==="function"?u.Ii(a):a===m?"*":""},Ii:function(a){return typeof a==="function"?a.fz:typeof a==="object"&&a.constructor?a.constructor.fz:typeof a},l:function(a,b,c){u.e(a,"function","Util.defineEnumValue:classfunc");u.e(b,"string","Util.defineEnumValue:name");u.e(c,"number","Util.defineEnumValue:num");c=new ja(a,b,c);Object.freeze(c);a[b]=c;var d=a.Zy;if(!d){d=new ka("string",
ja);a.Zy=d}d.add(b,c);return c},Lx:function(a,b){if(!b)return m;u.e(a,"function","Util.findEnumValueForName:classfunc");u.e(b,"string","Util.findEnumValueForName:name");var c=a.Zy;return!c?m:c.$(b)},QE:function(a,b,c,d){var e={},g;for(g in a){for(var i=o,j=1;j<arguments.length;j++)if(arguments[j]===g){i=h;break}i||(e[g]=a[g])}return e},Wa:function(a,b){if(!a||!b)return m;var c=f;try{if(b instanceof Function)c=b(a);else if(typeof a.getAttribute==="function"){c=a.getAttribute(b);c===m&&(c=f)}else c=
a[b]}catch(d){s&&u.trace("property get error: "+d.toString())}return c},Ra:function(a,b,c){if(a&&b)try{b instanceof Function?b(a,c):typeof a.setAttribute==="function"?a.setAttribute(b,c):a[b]=c}catch(d){s&&u.trace("property set error: "+d.toString())}},Dy:function(a,b){u.e(a,"object","Setting properties requires Objects as arguments");u.e(b,"object","Setting properties requires Objects as arguments");b.constructor!==Object&&u.g("Properties must be on a plain Object, not: "+b.toString());var c=s;c||
(s=u);var d=a instanceof v,e;for(e in b){var g=a,i=e;if(d){var j=e.indexOf(".");if(j>0){var k=e.substring(0,j),g=a.Le(k);g!==m?i=e.substr(j+1):u.g("Unable to find object named: "+k+" in panel "+a.toString()+" when trying to set property: "+e)}}i[0]!=="_"&&!u.Vx(g,i)&&u.g('Trying to set undefined property "'+i+'" on object: '+g.toString());g[i]=b[e]}s=c;return a},Vx:function(a,b){for(var c=Object.getPrototypeOf(a);c&&c!==Function;){if(c.hasOwnProperty(b))return h;var d=c.WD;if(d&&d[b])return h;c=Object.getPrototypeOf(c)}return o},
QA:function(a,b){if(!(b instanceof Object)||b instanceof Element||b instanceof CanvasRenderingContext2D)return"";var c="",d;for(d in b)if(typeof d!=="string"){c===""&&(c=b+"\n");c=c+("  "+d+" is not a string property\n")}else if(d.charAt(0)!=="_"&&!(d.length<=2)){var e=u.Wa(b,d);if(e!==m&&typeof e!=="function"&&!u.Vx(b,d)){c===""&&(c=b+"\n");c=c+('  unknown property "'+d+'" has value: '+e+" at "+a+"\n")}}return c},js:function(a,b){if(b&&!(typeof b==="number"||typeof b==="string"||typeof b==="boolean"||
typeof b==="function"))if(u.cc(b)!==f){if(!u.yt.contains(b)){u.yt.add(b);u.Ys.add(u.QA(a,b));if(b instanceof z||b instanceof la||b instanceof ka)for(var c=b.f;c.next();)u.js(a+"["+c.key+"]",c.value);else for(c in b){var d=u.Wa(b,c);if(!(d===f||d===m||!(d instanceof Object))&&c!=="_ownProperties"){if(b instanceof na){if(c==="_lines")continue}else if(b instanceof v){if(c==="data"||c==="_data")continue;if(c==="itemArray"||c==="_itemArray")continue}else if(!(b instanceof B))if(b instanceof C){if(c===
"archetypeGroupData"||c==="_archetypeGroupData")continue}else if(b instanceof oa){if(c==="archetypeLinkData"||c==="_archetypeLinkData")continue;if(c==="archetypeLabelNodeData"||c==="_archetypeLabelNodeData")continue}else if(b instanceof pa){if(c==="archetypeNodeData"||c==="_archetypeNodeData")continue}else if(b instanceof D){if(c==="nodeDataArray"||c==="_nodeDataArray")continue;if(c==="linkDataArray"||c==="_linkDataArray"||c==="_linkDataSet")continue;if(c==="_mapKeyNodeData"||c==="_delayedNodeReferences")continue}u.js(a+
"."+c,d)}}}}else if(b instanceof Array)for(c=0;c<b.length;c++)u.js(a+"["+c+"]",b[c]);else u.Ys.add(u.QA(a,b))},NE:function(a){u.yt===f?u.yt=new la:u.yt.clear();u.Ys=new ra;u.js("",a);a=u.Ys.toString();u.Ys=m;return a},dG:function(a){for(var b=[],c=0;c<256;c++)b[c]=c;for(var d=0,e,c=0;c<256;c++){d=(d+b[c]+119)%256;e=b[c];b[c]=b[d];b[d]=e}for(var d=c=0,g="",i=0;i<a.length;i++){c=(c+1)%256;d=(d+b[c])%256;e=b[c];b[c]=b[d];b[d]=e;g=g+String.fromCharCode(a.charCodeAt(i)^b[(b[c]+b[d])%256])}return g},tF:function(a){for(var b=
[],c=0;c<256;c++)b["0123456789abcdef".charAt(c>>4)+"0123456789abcdef".charAt(c&15)]=String.fromCharCode(c);a.length%2&&(a="0"+a);for(var d=[],e=0,c=0;c<a.length;c=c+2)d[e++]=b[a.substr(c,2)];a=d.join("");return a===""?"0":a},$d:function(a){return u.dG(u.tF(a))},$u:m,nE:"7da71ca0ad381e90"},ta=u,va=document.createElement("canvas"),wa=va.getContext("2d");wa[u.$d("7ca11abfd022028846")]=u.$d("398c3597c01238");
for(var xa=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22462913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],ya=1;5>ya;ya++)wa[u.$d("7ca11abfd7330390")](u.$d(xa[ya-1]),10,15*ya+0);wa[u.$d("7ca11abfd022028846")]=u.$d("39f046ebb36e4b");for(ya=1;5>ya;ya++)wa[u.$d("7ca11abfd7330390")](u.$d(xa[ya-1]),10,15*ya+0);ta.$u=va;function ja(a,b,c){u.Fb(this);this.ez=a;this.pb=b;this.cE=c}
ja.prototype.toString=function(){return u.Ii(this.ez)+"."+this.pb};u.m(ja,{Id:"classType"},r("ez"));u.m(ja,{name:"name"},r("pb"));u.m(ja,{value:"value"},r("cE"));function ra(){this.Hv=[];this.rj=0;this.rA="  "}ra.prototype.toString=function(){return this.Hv.join("")};ra.prototype.add=function(a){a&&this.Hv.push(a)};function Aa(a){a.rj--;if(a.rj<0)a.rj=0}function Da(a){for(var b="\n",c=a.rj;c>0;c--)b=b+a.rA;a.Hv.push(b)}function Fa(){}u.m(Fa,{f:"iterator"},function(){return this});
Fa.prototype.reset=Fa.prototype.reset=aa();Fa.prototype.next=Fa.prototype.next=ca(o);u.m(Fa,{count:"count"},ca(0));Fa.prototype.Ff=aa();Fa.prototype.toString=ca("EmptyIterator");u.yf=new Fa;function Ga(a){this.key=-1;this.value=a}u.jd(Ga,{key:h,value:h});u.m(Ga,{f:"iterator"},function(){return this});Ga.prototype.reset=Ga.prototype.reset=function(){this.key=-1};Ga.prototype.next=Ga.prototype.next=function(){if(this.key===-1){this.key=0;return h}return o};u.m(Ga,{count:"count"},ca(1));
Ga.prototype.Ff=function(){this.value=m};Ga.prototype.toString=function(){return"SingletonIterator("+this.value+")"};function Ha(a){this.Mf=a;this.qt=m;this.reset()}u.jd(Ha,{key:h,value:h});u.m(Ha,{f:"iterator"},function(){return this});u.a(Ha,"predicate",Ha.prototype.Iu);u.defineProperty(Ha,{Iu:"predicate"},r("qt"),ba("qt"));Ha.prototype.reset=Ha.prototype.reset=function(){var a=this.Mf;a.tg=m;this.$a=a.Ob;this.T=-1};
Ha.prototype.next=Ha.prototype.next=function(){var a=this.Mf;a.Ob!==this.$a&&u.g("the List has been modified during iteration");var a=a.j,b=a.length,c=++this.T,d=this.qt;if(d!==m)for(;c<b;){var e=a[c];if(d(e)){this.key=this.T=c;this.value=e;return h}c++}else{if(c<b){this.key=c;this.value=a[c];return h}this.Ff()}return o};u.m(Ha,{count:"count"},function(){var a=this.qt;if(a!==m){for(var b=0,c=this.Mf.j,d=c.length,e=0;e<d;e++)a(c[e])&&b++;return b}return this.Mf.j.length});
Ha.prototype.Ff=function(){this.key=-1;this.value=m;this.$a=-1;this.Mf.tg=this};Ha.prototype.toString=function(){return"ListIterator@"+this.T+"/"+this.Mf.count};function Ia(a){this.Mf=a;this.reset()}u.jd(Ia,{key:h,value:h});u.m(Ia,{f:"iterator"},function(){return this});Ia.prototype.reset=Ia.prototype.reset=function(){var a=this.Mf;a.lw=m;this.$a=a.Ob;this.T=a.j.length};
Ia.prototype.next=Ia.prototype.next=function(){var a=this.Mf;a.Ob!==this.$a&&u.g("the List has been modified during iteration");var b=--this.T;if(b>=0){this.key=b;this.value=a.j[b];return h}this.Ff();return o};u.m(Ia,{count:"count"},function(){return this.Mf.j.length});Ia.prototype.Ff=function(){this.key=-1;this.value=m;this.$a=-1;this.Mf.lw=this};Ia.prototype.toString=function(){return"ListIteratorBackwards("+this.T+"/"+this.Mf.count+")"};
function z(a){u.Fb(this);this.Ha=o;this.j=[];this.Ob=0;this.lw=this.tg=m;a===f||a===m?this.I=m:typeof a==="string"?a==="string"||a==="number"||a==="boolean"||a==="function"?this.I=a:u.ha(a,"the string 'number', 'string', 'boolean', or 'function'","List constructor: type"):typeof a==="function"?this.I=a:u.ha(a,"null, a primitive type name, or a class type","List constructor: type")}u.H("List",z);
z.prototype.Af=function(a){this.I!==m&&(typeof this.I==="string"?typeof a!==this.I&&u.sc(a,this.I):a instanceof this.I||u.sc(a,this.I))};z.prototype.Tc=function(){var a=this.Ob;a++;a>999999999&&(a=0);this.Ob=a};z.prototype.freeze=z.prototype.freeze=function(){this.Ha=h;return this};z.prototype.thaw=z.prototype.xa=function(){this.Ha=o;return this};z.prototype.toString=function(){return"List("+u.Ug(this.I)+")#"+u.cc(this)};
z.prototype.add=z.prototype.add=function(a){if(a!==m){s&&this.Af(a);u.v(this,a);this.j.push(a);this.Tc()}};z.prototype.addAll=z.prototype.Xf=function(a){if(a===m)return this;u.v(this);var b=this.j;if(u.isArray(a))for(var c=u.vb(a),d=0;d<c;d++){var e=u.lb(a,d);s&&this.Af(e);b.push(e)}else for(a=a.f;a.next();){e=a.value;s&&this.Af(e);b.push(e)}this.Tc();return this};z.prototype.clear=z.prototype.clear=function(){u.v(this);this.j=[];this.Tc()};
z.prototype.contains=z.prototype.contains=function(a){if(a===m)return o;s&&this.Af(a);return this.j.indexOf(a)!==-1};z.prototype.indexOf=z.prototype.indexOf=function(a){if(a===m)return-1;s&&this.Af(a);return this.j.indexOf(a)};z.prototype.elt=z.prototype.Z=function(a){s&&u.i(a,z,"elt:i");var b=this.j;(a<0||a>=b.length)&&u.ha(a,"0 <= i < length",z,"elt:i");return b[a]};
z.prototype.setElt=z.prototype.Pu=function(a,b){if(s){this.Af(b);u.i(a,z,"setElt:i")}var c=this.j;(a<0||a>=c.length)&&u.ha(a,"0 <= i < length",z,"setElt:i");u.v(this,a);c[a]=b};z.prototype.first=z.prototype.ac=function(){var a=this.j;return a.length===0?m:a[0]};z.prototype.insertAt=z.prototype.dc=function(a,b){if(s){this.Af(b);u.i(a,z,"insertAt:i")}a<0&&u.ha(a,">= 0",z,"insertAt:i");u.v(this,a);var c=this.j;a>=c.length?c.push(b):c.splice(a,0,b);this.Tc();return h};
z.prototype.remove=z.prototype.remove=function(a){if(a===m)return o;s&&this.Af(a);u.v(this,a);var b=this.j,a=b.indexOf(a);if(a===-1)return o;a===b.length-1?b.pop():b.splice(a,1);this.Tc();return h};z.prototype.removeAt=z.prototype.Se=function(a){s&&u.i(a,z,"removeAt:i");var b=this.j;(a<0||a>=b.length)&&u.ha(a,"0 <= i < length",z,"removeAt:i");u.v(this,a);a===b.length-1?b.pop():b.splice(a,1);this.Tc()};
z.prototype.removeRange=z.prototype.removeRange=function(a,b){if(s){u.i(a,z,"removeRange:from");u.i(b,z,"removeRange:to")}var c=this.j;(a<0||a>=c.length)&&u.ha(a,"0 <= from < length",z,"elt:from");(b<0||b>=c.length)&&u.ha(b,"0 <= to < length",z,"elt:to");u.v(this,a);var d=c.slice((b||a)+1||c.length);c.length=a<0?c.length+a:a;c.push.apply(c,d);this.Tc()};z.prototype.copy=z.prototype.copy=function(){for(var a=new z(this.I),b=this.j,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};
z.prototype.toArray=z.prototype.xf=function(){for(var a=[],b=this.j,c=this.count,d=0;d<c;d++)a.push(b[d]);return a};z.prototype.toSet=z.prototype.FG=function(){for(var a=new la(this.I),b=this.j,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};z.prototype.sort=z.prototype.sort=function(a){s&&u.e(a,"function",z,"sort:sortfunc");u.v(this);this.j.sort(a);this.Tc();return this};
z.prototype.sortRange=z.prototype.Nn=function(a,b,c){var d=this.j,e=d.length;b===f&&(b=0);c===f&&(c=e);if(s){u.e(a,"function",z,"sortRange:sortfunc");u.i(b,z,"sortRange:from");u.i(c,z,"sortRange:to")}u.v(this);var g=c-b;if(g<=1)return this;(b<0||b>=e-1)&&u.ha(b,"0 <= from < length",z,"sortRange:from");if(g===2){c=d[b];e=d[b+1];if(a(c,e)>0){d[b]=e;d[b+1]=c;this.Tc()}return this}if(b===0)if(c>=e)d.sort(a);else{g=d.slice(0,c);g.sort(a);for(a=0;a<c;a++)d[a]=g[a]}else if(c>=e){g=d.slice(b);g.sort(a);for(a=
b;a<e;a++)d[a]=g[a-b]}else{g=d.slice(b,c);g.sort(a);for(a=b;a<c;a++)d[a]=g[a-b]}this.Tc();return this};z.prototype.reverse=z.prototype.reverse=function(){u.v(this);this.j.reverse();this.Tc();return this};u.m(z,{count:"count"},function(){return this.j.length});u.m(z,{length:"length"},function(){return this.j.length});u.m(z,{f:"iterator"},function(){if(this.j.length<=0)return u.yf;var a=this.tg;if(a!==m){a.reset();return a}return new Ha(this)});
u.m(z,{rn:"iteratorBackwards"},function(){if(this.j.length<=0)return u.yf;var a=this.lw;if(a!==m){a.reset();return a}return new Ia(this)});function Ja(a){this.Vd=a;this.reset()}u.jd(Ja,{key:h,value:h});u.m(Ja,{f:"iterator"},function(){return this});Ja.prototype.reset=Ja.prototype.reset=function(){var a=this.Vd;a.tg=m;this.$a=a.Ob;this.Sd=m};
Ja.prototype.next=Ja.prototype.next=function(){var a=this.Vd;a.Ob!==this.$a&&u.g("the Set has been modified during iteration");var b=this.Sd,b=b===m?a.We:b.ni;if(b!==m){this.Sd=b;this.value=b.value;this.key=b.key;return h}this.Ff();return o};u.m(Ja,{count:"count"},function(){return this.Vd.Pd});Ja.prototype.Ff=function(){this.value=m;this.$a=-1;this.Vd.tg=this};Ja.prototype.toString=function(){return this.Sd!==m?"SetIterator@"+this.Sd.value:"SetIterator"};
function la(a){u.Fb(this);this.Ha=o;a===f||a===m?this.I=m:typeof a==="string"?a==="string"||a==="number"?this.I=a:u.ha(a,"the string 'number' or 'string'","Set constructor: type"):typeof a==="function"?this.I=a:u.ha(a,"null, a primitive type name, or a class type","Set constructor: type");this.gc={};this.Pd=0;this.tg=m;this.Ob=0;this.ug=this.We=m}u.H("Set",la);la.prototype.Af=function(a){this.I!==m&&(typeof this.I==="string"?typeof a!==this.I&&u.sc(a,this.I):a instanceof this.I||u.sc(a,this.I))};
la.prototype.Tc=function(){var a=this.Ob;a++;a>999999999&&(a=0);this.Ob=a};la.prototype.freeze=la.prototype.freeze=function(){this.Ha=h;return this};la.prototype.thaw=la.prototype.xa=function(){this.Ha=o;return this};la.prototype.toString=function(){return"Set("+u.Ug(this.I)+")#"+u.cc(this)};
la.prototype.add=la.prototype.add=function(a){if(a===m)return o;s&&this.Af(a);u.v(this,a);var b=a;a instanceof Object&&(b=u.nn(a));if(this.gc[b]===f){this.Pd++;a=new Ka(a,a);this.gc[b]=a;b=this.ug;if(b===m)this.We=a;else{a.tm=b;b.ni=a}this.ug=a;this.Tc();return h}return o};la.prototype.addAll=la.prototype.Xf=function(a){if(a===m)return this;u.v(this);if(u.isArray(a))for(var b=u.vb(a),c=0;c<b;c++)this.add(u.lb(a,c));else for(a=a.f;a.next();)this.add(a.value);return this};
la.prototype.contains=la.prototype.contains=function(a){if(a===m)return o;s&&this.Af(a);var b=a;if(a instanceof Object){b=u.cc(a);if(b===f)return o}return this.gc[b]!==f};la.prototype.containsAll=la.prototype.LH=function(a){if(a===m)return h;for(a=a.f;a.next();)if(!this.contains(a.value))return o;return h};la.prototype.containsAny=la.prototype.MH=function(a){if(a===m)return h;for(a=a.f;a.next();)if(this.contains(a.value))return h;return o};
la.prototype.first=la.prototype.ac=function(){var a=this.We;return a===m?m:a.value};la.prototype.remove=la.prototype.remove=function(a){if(a===m)return o;s&&this.Af(a);u.v(this,a);var b=a;if(a instanceof Object){b=u.cc(a);if(b===f)return o}a=this.gc[b];if(a===f)return o;var c=a.ni,d=a.tm;if(c!==m)c.tm=d;if(d!==m)d.ni=c;if(this.We===a)this.We=c;if(this.ug===a)this.ug=d;delete this.gc[b];this.Pd--;this.Tc();return h};
la.prototype.removeAll=la.prototype.LJ=function(a){if(a===m)return this;u.v(this);for(a=a.f;a.next();)this.remove(a.value);return this};la.prototype.retainAll=la.prototype.TJ=function(a){if(a===m||this.count===0)return this;u.v(this);var b=new la(this.I);b.Xf(a);for(var a=new z(this.I),c=this.f;c.next();)b.contains(c.value)||a.add(c.value);for(b=a.f;b.next();)this.remove(b.value);return this};la.prototype.clear=la.prototype.clear=function(){u.v(this);this.gc={};this.Pd=0;this.ug=this.We=m;this.Tc()};
la.prototype.copy=la.prototype.copy=function(){var a=new la(this.I),b=this.gc,c;for(c in b)a.add(b[c].value);return a};la.prototype.toArray=la.prototype.xf=function(){var a=[],b=this.gc,c;for(c in b)a.push(b[c].value);return a};la.prototype.toList=la.prototype.EG=function(){var a=new z(this.I),b=this.gc,c;for(c in b)a.add(b[c]);return a};u.m(la,{count:"count"},r("Pd"));u.m(la,{f:"iterator"},function(){if(this.Pd<=0)return u.yf;var a=this.tg;if(a!==m){a.reset();return a}return new Ja(this)});
function La(a){this.Sc=a;this.reset()}u.jd(La,{key:h,value:h});u.m(La,{f:"iterator"},function(){return this});La.prototype.reset=La.prototype.reset=function(){this.$a=this.Sc.Ob;this.Sd=m};La.prototype.next=La.prototype.next=function(){var a=this.Sc;a.Ob!==this.$a&&u.g("the Map has been modified during iteration");var b=this.Sd,b=b===m?a.We:b.ni;if(b!==m){this.Sd=b;this.value=b.key;return h}this.Ff();return o};u.m(La,{count:"count"},function(){return this.Sc.Pd});
La.prototype.Ff=function(){this.value=m;this.$a=-1};La.prototype.toString=function(){return this.Sd!==m?"MapKeySetIterator@"+this.Sd.value:"MapKeySetIterator"};function Ma(a){u.Fb(this);this.Sc=a}u.ma(Ma,la);Ma.prototype.freeze=function(){return this};Ma.prototype.xa=function(){return this};Ma.prototype.toString=function(){return"MapKeySet("+this.Sc.toString()+")"};Ma.prototype.add=Ma.prototype.add=function(){u.g("This Set is read-only: "+this.toString());return o};
Ma.prototype.contains=Ma.prototype.contains=function(a){return this.Sc.contains(a)};Ma.prototype.remove=Ma.prototype.remove=function(){u.g("This Set is read-only: "+this.toString());return o};Ma.prototype.clear=Ma.prototype.clear=function(){u.g("This Set is read-only: "+this.toString())};Ma.prototype.copy=Ma.prototype.copy=function(){return new Ma(this.Sc)};Ma.prototype.toSet=Ma.prototype.FG=function(){var a=new la(this.Sc.I),b=this.Sc.gc,c;for(c in b)a.add(b[c].key);return a};
Ma.prototype.toArray=Ma.prototype.xf=function(){var a=[],b=this.Sc.gc,c;for(c in b)a.push(b[c].key);return a};Ma.prototype.toList=Ma.prototype.EG=function(){var a=new z(this.I),b=this.Sc.gc,c;for(c in b)a.add(b[c].key);return a};u.m(Ma,{count:"count"},function(){return this.Sc.Pd});u.m(Ma,{f:"iterator"},function(){return this.Sc.Pd<=0?u.yf:new La(this.Sc)});function Ka(a,b){this.key=a;this.value=b;this.tm=this.ni=m}u.jd(Ka,{key:h,value:h});
Ka.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};function Na(a){this.Sc=a;this.reset()}u.jd(Na,{key:h,value:h});u.m(Na,{f:"iterator"},function(){return this});Na.prototype.reset=Na.prototype.reset=function(){var a=this.Sc;a.tg=m;this.$a=a.Ob;this.Sd=m};
Na.prototype.next=Na.prototype.next=function(){var a=this.Sc;a.Ob!==this.$a&&u.g("the Map has been modified during iteration");var b=this.Sd,b=b===m?a.We:b.ni;if(b!==m){this.Sd=b;this.key=b.key;this.value=b.value;return h}this.Ff();return o};u.m(Na,{count:"count"},function(){return this.Sc.Pd});Na.prototype.Ff=function(){this.value=this.key=m;this.$a=-1;this.Sc.tg=this};Na.prototype.toString=function(){return this.Sd!==m?"MapIterator@"+this.Sd:"MapIterator"};
function ka(a,b){u.Fb(this);this.Ha=o;a===f||a===m?this.rh=m:typeof a==="string"?a==="string"||a==="number"?this.rh=a:u.ha(a,"the string 'number' or 'string'","Map constructor: keytype"):typeof a==="function"?this.rh=a:u.ha(a,"null, a primitive type name, or a class type","Map constructor: keytype");b===f||b===m?this.Gh=m:typeof b==="string"?b==="string"||b==="boolean"||b==="number"||b==="function"?this.Gh=b:u.ha(b,"the string 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):
typeof b==="function"?this.Gh=b:u.ha(b,"null, a primitive type name, or a class type","Map constructor: valtype");this.gc={};this.Pd=0;this.tg=m;this.Ob=0;this.ug=this.We=m}u.H("Map",ka);function Pa(a,b){a.rh!==m&&(typeof a.rh==="string"?typeof b!==a.rh&&u.sc(b,a.rh):b instanceof a.rh||u.sc(b,a.rh))}ka.prototype.Tc=function(){var a=this.Ob;a++;a>999999999&&(a=0);this.Ob=a};ka.prototype.freeze=ka.prototype.freeze=function(){this.Ha=h;return this};
ka.prototype.thaw=ka.prototype.xa=function(){this.Ha=o;return this};ka.prototype.toString=function(){return"Map("+u.Ug(this.rh)+","+u.Ug(this.Gh)+")#"+u.cc(this)};
ka.prototype.add=ka.prototype.add=function(a,b){if(s){Pa(this,a);this.Gh!==m&&(typeof this.Gh==="string"?typeof b!==this.Gh&&u.sc(b,this.Gh):b instanceof this.Gh||u.sc(b,this.Gh))}u.v(this,a);var c=a;a instanceof Object&&(c=u.nn(a));var d=this.gc[c];if(d===f){this.Pd++;d=new Ka(a,b);this.gc[c]=d;c=this.ug;if(c===m)this.We=d;else{d.tm=c;c.ni=d}this.ug=d;this.Tc();return h}d.value=b;return o};
ka.prototype.addAll=ka.prototype.Xf=function(a){if(a===m)return this;s&&u.c(a,ka,ka,"addAll:map");for(a=a.f;a.next();)this.add(a.key,a.value);return this};ka.prototype.contains=ka.prototype.contains=function(a){s&&Pa(this,a);var b=a;if(a instanceof Object){b=u.cc(a);if(b===f)return o}return this.gc[b]!==f};ka.prototype.getValue=ka.prototype.$=function(a){s&&Pa(this,a);var b=a;if(a instanceof Object){b=u.cc(a);if(b===f)return m}a=this.gc[b];return a===f?m:a.value};
ka.prototype.remove=ka.prototype.remove=function(a){if(a===m)return o;s&&Pa(this,a);u.v(this,a);var b=a;if(a instanceof Object){b=u.cc(a);if(b===f)return o}a=this.gc[b];if(a===f)return o;var c=a.ni,d=a.tm;if(c!==m)c.tm=d;if(d!==m)d.ni=c;if(this.We===a)this.We=c;if(this.ug===a)this.ug=d;delete this.gc[b];this.Pd--;this.Tc();return h};ka.prototype.clear=ka.prototype.clear=function(){u.v(this);this.gc={};this.Pd=0;this.ug=this.We=m;this.Tc()};
ka.prototype.copy=ka.prototype.copy=function(){var a=new ka(this.rh,this.Gh),b=this.gc,c;for(c in b){var d=b[c];a.add(d.key,d.value)}return a};ka.prototype.toArray=ka.prototype.xf=function(){var a=[],b=this.gc,c;for(c in b){var d=b[c];a.push(new Ka(d.key,d.value))}return a};ka.prototype.toKeySet=ka.prototype.Vi=function(){return new Ma(this)};u.m(ka,{count:"count"},r("Pd"));u.m(ka,{f:"iterator"},function(){if(this.count<=0)return u.yf;var a=this.tg;if(a!==m){a.reset();return a}return new Na(this)});
function E(a,b){if(a===f)this.y=this.x=0;else if(typeof a==="number"&&typeof b==="number"){this.x=a;this.y=b}else u.g("Invalid arguments to Point constructor")}u.H("Point",E);u.jd(E,{x:h,y:h});E.prototype.Oa=function(a){s&&u.c(a,E,E,"assign:p");this.x=a.x;this.y=a.y};E.prototype.Vd=function(a,b){this.x=a;this.y=b};E.prototype.setTo=E.prototype.Mr=function(a,b){if(s){u.e(a,"number",E,"setTo:x");u.e(b,"number",E,"setTo:y")}u.v(this);this.x=a;this.y=b;return this};
E.prototype.set=E.prototype.set=function(a){s&&u.c(a,E,E,"set:p");u.v(this);this.x=a.x;this.y=a.y;return this};E.prototype.copy=E.prototype.copy=function(){var a=new E;a.x=this.x;a.y=this.y;return a};E.prototype.Ga=function(){this.Ha=h;Object.freeze(this);return this};E.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};E.prototype.freeze=function(){this.Ha=h;return this};E.prototype.xa=function(){Object.isFrozen(this)&&u.g("cannot thaw constant: "+this);this.Ha=o;return this};
E.parse=function(a){if(typeof a==="string"){for(var a=a.split(" "),b=0,c=0;a[b]==="";)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;a[b]==="";)b++;(d=a[b++])&&(e=parseFloat(d));return new E(c,e)}return new E};var Ra;E.stringify=Ra=function(a){return a instanceof E?a.x.toString()+" "+a.y.toString():a.toString()};E.prototype.toString=function(){return"Point("+this.x+","+this.y+")"};E.prototype.equals=E.prototype.u=function(a){return!(a instanceof E)?o:this.x===a.x&&this.y===a.y};
E.prototype.equalTo=E.prototype.Kx=function(a,b){return this.x===a&&this.y===b};E.prototype.mu=function(a){return Sa(this.x,a.x)&&Sa(this.y,a.y)};E.prototype.Zj=function(a){return Ua(this.x,a.x)&&Ua(this.y,a.y)};E.prototype.add=E.prototype.add=function(a){s&&u.c(a,E,E,"add:p");u.v(this);this.x=this.x+a.x;this.y=this.y+a.y;return this};E.prototype.subtract=E.prototype.Rr=function(a){s&&u.c(a,E,E,"subtract:p");u.v(this);this.x=this.x-a.x;this.y=this.y-a.y;return this};
E.prototype.offset=E.prototype.offset=function(a,b){if(s){u.i(a,E,"offset:dx");u.i(b,E,"offset:dy")}u.v(this);this.x=this.x+a;this.y=this.y+b;return this};E.prototype.rotate=E.prototype.rotate=function(a){s&&u.i(a,E,"rotate:angle");u.v(this);if(a===0)return this;var b=this.x,c=this.y;if(b===0&&c===0)return this;var d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d);this.x=a*b-d*c;this.y=d*b+a*c;return this};
E.prototype.scale=E.prototype.scale=function(a,b){if(s){u.i(a,E,"scale:sx");u.i(b,E,"scale:sy")}this.x=this.x*a;this.y=this.y*b;return this};E.prototype.distanceSquaredPoint=E.prototype.Ph=function(a){s&&u.c(a,E,E,"distanceSquaredPoint:p");var b=a.x-this.x,a=a.y-this.y;return b*b+a*a};E.prototype.distanceSquared=E.prototype.ZH=function(a,b){if(s){u.i(a,E,"distanceSquared:px");u.i(b,E,"distanceSquared:py")}var c=a-this.x,d=b-this.y;return c*c+d*d};
E.prototype.normalize=E.prototype.normalize=function(){u.v(this);var a=this.x,b=this.y,c=Math.sqrt(a*a+b*b);if(c>0){this.x=a/c;this.y=b/c}return this};E.prototype.directionPoint=E.prototype.Oh=function(a){s&&u.c(a,E,E,"directionPoint:p");return Xa(a.x-this.x,a.y-this.y)};E.prototype.direction=E.prototype.direction=function(a,b){if(s){u.i(a,E,"direction:px");u.i(b,E,"direction:py")}return Xa(a-this.x,b-this.y)};
function Xa(a,b){if(a===0)return b>0?90:b<0?270:0;if(b===0)return a>0?0:180;if(isNaN(a)||isNaN(b))return 0;var c=Math.atan(Math.abs(b/a))*180/Math.PI;a<0?c=b<0?c+180:180-c:b<0&&(c=360-c);return c}E.prototype.setRectSpot=E.prototype.Mn=function(a,b){if(s){u.c(a,J,E,"setRectSpot:r");u.c(b,K,E,"setRectSpot:spot")}u.v(this);this.x=a.x+b.x*a.width+b.offsetX;this.y=a.y+b.y*a.height+b.offsetY;return this};
E.prototype.setSpot=E.prototype.zl=function(a,b,c,d,e){if(s){u.i(a,E,"setSpot:x");u.i(b,E,"setSpot:y");u.i(c,E,"setSpot:w");u.i(d,E,"setSpot:h");(c<0||d<0)&&u.g("Point.setSpot:Width and height cannot be negative");u.c(e,K,E,"setSpot:spot")}u.v(this);this.x=a+e.x*c+e.offsetX;this.y=b+e.y*d+e.offsetY;return this};E.prototype.transform=function(a){s&&u.c(a,Ya,E,"transform:t");a.ub(this);return this};function ab(a,b){s&&u.c(b,Ya,E,"transformInverted:t");b.Vh(a);return a}var bb;
E.distanceLineSegmentSquared=bb=function(a,b,c,d,e,g){if(s){u.i(a,E,"distanceLineSegmentSquared:px");u.i(b,E,"distanceLineSegmentSquared:py");u.i(c,E,"distanceLineSegmentSquared:ax");u.i(d,E,"distanceLineSegmentSquared:ay");u.i(e,E,"distanceLineSegmentSquared:bx");u.i(g,E,"distanceLineSegmentSquared:by")}var i=e-c,j=g-d,k=i*i+j*j,c=c-a,d=d-b,l=-c*i-d*j;if(l<=0||l>=k){i=e-a;j=g-b;return Math.min(c*c+d*d,i*i+j*j)}a=i*d-j*c;return a*a/k};
E.distanceSquared=function(a,b,c,d){if(s){u.i(a,E,"distanceSquared:px");u.i(b,E,"distanceSquared:py");u.i(c,E,"distanceSquared:qx");u.i(d,E,"distanceSquared:qy")}a=c-a;b=d-b;return a*a+b*b};var cb;
E.direction=cb=function(a,b,c,d){if(s){u.i(a,E,"direction:px");u.i(b,E,"direction:py");u.i(c,E,"direction:qx");u.i(d,E,"direction:qy")}a=c-a;b=d-b;if(a===0)return b>0?90:b<0?270:0;if(b===0)return a>0?0:180;if(isNaN(a)||isNaN(b))return 0;d=Math.atan(Math.abs(b/a))*180/Math.PI;a<0?d=b<0?d+180:180-d:b<0&&(d=360-d);return d};E.prototype.isReal=E.prototype.V=function(){return isFinite(this.x)&&isFinite(this.y)};
function eb(a,b){if(a===f)this.height=this.width=0;else if(typeof a==="number"&&(a>=0||isNaN(a))&&typeof b==="number"&&(b>=0||isNaN(b))){this.width=a;this.height=b}else u.g("Invalid arguments to Size constructor")}u.H("Size",eb);u.jd(eb,{width:h,height:h});eb.prototype.Oa=function(a){s&&u.c(a,eb,eb,"assign:s");this.width=a.width;this.height=a.height};eb.prototype.Vd=function(a,b){this.width=a;this.height=b};
eb.prototype.setTo=eb.prototype.Mr=function(a,b){if(s){u.e(a,"number",eb,"setTo:w");u.e(b,"number",eb,"setTo:h")}a<0&&u.ha(a,">= 0",eb,"setTo:w");b<0&&u.ha(b,">= 0",eb,"setTo:h");u.v(this);this.width=a;this.height=b;return this};eb.prototype.set=eb.prototype.set=function(a){s&&u.c(a,eb,eb,"set:s");u.v(this);this.width=a.width;this.height=a.height;return this};eb.prototype.copy=eb.prototype.copy=function(){var a=new eb;a.width=this.width;a.height=this.height;return a};
eb.prototype.Ga=function(){this.Ha=h;Object.freeze(this);return this};eb.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};eb.prototype.freeze=function(){this.Ha=h;return this};eb.prototype.xa=function(){Object.isFrozen(this)&&u.g("cannot thaw constant: "+this);this.Ha=o;return this};
eb.parse=function(a){if(typeof a==="string"){for(var a=a.split(" "),b=0,c=0;a[b]==="";)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;a[b]==="";)b++;(d=a[b++])&&(e=parseFloat(d));return new eb(c,e)}return new eb};var hb;eb.stringify=hb=function(a){return a instanceof eb?a.width.toString()+" "+a.height.toString():a.toString()};eb.prototype.toString=function(){return"Size("+this.width+","+this.height+")"};
eb.prototype.equals=eb.prototype.u=function(a){return!(a instanceof eb)?o:this.width===a.width&&this.height===a.height};eb.prototype.equalTo=eb.prototype.Kx=function(a,b){return this.width===a&&this.height===b};eb.prototype.mu=function(a){return Sa(this.width,a.width)&&Sa(this.height,a.height)};eb.prototype.Zj=function(a){return Ua(this.width,a.width)&&Ua(this.height,a.height)};eb.prototype.isReal=eb.prototype.V=function(){return isFinite(this.width)&&isFinite(this.height)};
function J(a,b,c,d){if(a===f)this.height=this.width=this.y=this.x=0;else if(a instanceof E)if(b instanceof E){this.x=Math.min(a.x,b.x);this.y=Math.min(a.y,b.y);this.width=Math.abs(a.x-b.x);this.height=Math.abs(a.y-b.y)}else if(b instanceof eb){this.x=a.x;this.y=a.y;this.width=b.width;this.height=b.height}else u.g("Incorrect arguments supplied");else if(!s||typeof a==="number"&&typeof b==="number"&&typeof c==="number"&&(c>=0||isNaN(c))&&typeof d==="number"&&(d>=0||isNaN(d))){this.x=a;this.y=b;this.width=
c;this.height=d}else u.g("Invalid arguments to Rect constructor")}u.H("Rect",J);u.jd(J,{x:h,y:h,width:h,height:h});J.prototype.Oa=function(a){s&&u.c(a,J,J,"assign:r");this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};J.prototype.Vd=function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d};function jb(a,b,c){a.width=b;a.height=c}
J.prototype.setTo=J.prototype.Mr=function(a,b,c,d){if(s){u.e(a,"number",J,"setTo:x");u.e(b,"number",J,"setTo:y");u.e(c,"number",J,"setTo:w");u.e(d,"number",J,"setTo:h")}c<0&&u.ha(c,">= 0",J,"setTo:w");d<0&&u.ha(d,">= 0",J,"setTo:h");u.v(this);this.x=a;this.y=b;this.width=c;this.height=d;return this};J.prototype.set=J.prototype.set=function(a){s&&u.c(a,J,J,"set:r");u.v(this);this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;return this};
J.prototype.setPoint=J.prototype.w=function(a){s&&u.c(a,E,J,"setPoint:p");u.v(this);this.x=a.x;this.y=a.y;return this};J.prototype.setSize=J.prototype.uG=function(a){s&&u.c(a,eb,J,"setSize:s");u.v(this);this.width=a.width;this.height=a.height;return this};J.prototype.copy=J.prototype.copy=function(){var a=new J;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;return a};J.prototype.Ga=function(){this.Ha=h;Object.freeze(this);return this};
J.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};J.prototype.freeze=function(){this.Ha=h;return this};J.prototype.xa=function(){Object.isFrozen(this)&&u.g("cannot thaw constant: "+this);this.Ha=o;return this};function kb(a){var b=a.count,c=h,d=m;if(b===0)return new J;for(var e=0;e<b;e++){var g=a.j[e];if(c){d=new J(g.x,g.y,0,0);c=o}else mb(d,g.x,g.y,0,0)}return d}
J.parse=function(a){if(typeof a==="string"){for(var a=a.split(" "),b=0,c=0;a[b]==="";)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;a[b]==="";)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;a[b]==="";)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;a[b]==="";)b++;(d=a[b++])&&(i=parseFloat(d));return new J(c,e,g,i)}return new J};var nb;J.stringify=nb=function(a){return a instanceof J?a.x.toString()+" "+a.y.toString()+" "+a.width.toString()+" "+a.height.toString():a.toString()};
J.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"};J.prototype.equals=J.prototype.u=function(a){return!(a instanceof J)?o:this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height};J.prototype.equalTo=J.prototype.Kx=function(a,b,c,d){return this.x===a&&this.y===b&&this.width===c&&this.height===d};J.prototype.mu=function(a){return Sa(this.x,a.x)&&Sa(this.y,a.y)&&Sa(this.width,a.width)&&Sa(this.height,a.height)};
J.prototype.Zj=function(a){return Ua(this.x,a.x)&&Ua(this.y,a.y)&&Ua(this.width,a.width)&&Ua(this.height,a.height)};J.prototype.containsPoint=J.prototype.da=function(a){s&&u.c(a,E,J,"containsPoint:p");return this.x<=a.x&&this.x+this.width>=a.x&&this.y<=a.y&&this.y+this.height>=a.y};J.prototype.containsRect=J.prototype.el=function(a){s&&u.c(a,J,J,"containsRect:r");return this.x<=a.x&&a.x+a.width<=this.x+this.width&&this.y<=a.y&&a.y+a.height<=this.y+this.height};
J.prototype.contains=J.prototype.contains=function(a,b,c,d){if(s){u.i(a,J,"contains:x");u.i(b,J,"contains:y");c===f?c=0:u.i(c,J,"contains:w");d===f?d=0:u.i(d,J,"contains:h");(c<0||d<0)&&u.g("Rect.contains:Width and height cannot be negative")}else{c===f&&(c=0);d===f&&(d=0)}return this.x<=a&&a+c<=this.x+this.width&&this.y<=b&&b+d<=this.y+this.height};J.prototype.reset=function(){u.v(this);this.height=this.width=this.y=this.x=0};
J.prototype.offset=J.prototype.offset=function(a,b){if(s){u.i(a,J,"offset:dx");u.i(b,J,"offset:dy")}u.v(this);this.x=this.x+a;this.y=this.y+b;return this};J.prototype.inflate=J.prototype.hf=function(a,b){if(s){u.i(a,J,"inflate:w");u.i(b,J,"inflate:h")}return pb(this,b,a,b,a)};J.prototype.addMargin=J.prototype.ix=function(a){s&&u.c(a,qb,J,"addMargin:m");return pb(this,a.top,a.right,a.bottom,a.left)};
J.prototype.subtractMargin=J.prototype.jK=function(a){s&&u.c(a,qb,J,"subtractMargin:m");return pb(this,-a.top,-a.right,-a.bottom,-a.left)};J.prototype.grow=J.prototype.MI=function(a,b,c,d){if(s){u.i(a,J,"grow:t");u.i(b,J,"grow:r");u.i(c,J,"grow:b");u.i(d,J,"grow:l")}return pb(this,a,b,c,d)};
function pb(a,b,c,d,e){u.v(a);var g=a.width;if(c+e<=-g){a.x=a.x+g/2;a.width=0}else{a.x=a.x-e;a.width=a.width+(c+e)}c=a.height;if(b+d<=-c){a.y=a.y+c/2;a.height=0}else{a.y=a.y-b;a.height=a.height+(b+d)}return a}J.prototype.intersectRect=J.prototype.XI=function(a){s&&u.c(a,J,J,"intersectRect:r");return sb(this,a.x,a.y,a.width,a.height)};
J.prototype.intersect=J.prototype.WI=function(a,b,c,d){if(s){u.i(a,J,"intersect:x");u.i(b,J,"intersect:y");u.i(c,J,"intersect:w");u.i(d,J,"intersect:h");(c<0||d<0)&&u.g("Rect.intersect:Width and height cannot be negative")}return sb(this,a,b,c,d)};function sb(a,b,c,d,e){u.v(a);var g=Math.max(a.x,b),i=Math.max(a.y,c),b=Math.min(a.x+a.width,b+d),c=Math.min(a.y+a.height,c+e);a.x=g;a.y=i;a.width=Math.max(0,b-g);a.height=Math.max(0,c-i);return a}
J.prototype.intersectsRect=J.prototype.de=function(a){s&&u.c(a,J,J,"intersectsRect:r");return this.zF(a.x,a.y,a.width,a.height)};
J.prototype.intersects=J.prototype.zF=function(a,b,c,d){if(s){u.i(a,J,"intersects:x");u.i(b,J,"intersects:y");u.i(a,J,"intersects:w");u.i(b,J,"intersects:h");(c<0||d<0)&&u.g("Rect.intersects:Width and height cannot be negative")}var e=this.width,g=this.x;if(e!==Infinity&&c!==Infinity){e=e+g;c=c+a;if(isNaN(c)||isNaN(e)||g>c||a>e)return o}a=this.height;e=this.y;if(a!==Infinity&&d!==Infinity){a=a+e;d=d+b;if(isNaN(d)||isNaN(a)||e>d||b>a)return o}return h};
J.prototype.unionPoint=J.prototype.Wu=function(a){s&&u.c(a,E,J,"unionPoint:p");return mb(this,a.x,a.y,0,0)};J.prototype.unionRect=J.prototype.mk=function(a){s&&u.c(a,J,J,"unionRect:r");return mb(this,a.x,a.y,a.width,a.height)};
J.prototype.union=J.prototype.nK=function(a,b,c,d){u.v(this);if(s){u.i(a,J,"union:x");u.i(b,J,"union:y");c===f?c=0:u.i(c,J,"union:w");d===f?d=0:u.i(d,J,"union:h");(c<0||d<0)&&u.g("Rect.union:Width and height cannot be negative")}else{c===f&&(c=0);d===f&&(d=0)}return mb(this,a,b,c,d)};function mb(a,b,c,d,e){var g=Math.min(a.x,b),i=Math.min(a.y,c),b=Math.max(a.x+a.width,b+d),c=Math.max(a.y+a.height,c+e);a.x=g;a.y=i;a.width=b-g;a.height=c-i;return a}
J.prototype.setSpot=J.prototype.zl=function(a,b,c){if(s){u.i(a,J,"setSpot:x");u.i(b,J,"setSpot:y");u.c(c,K,J,"setSpot:spot")}u.v(this);this.x=a-c.offsetX-c.x*this.width;this.y=b-c.offsetY-c.y*this.height;return this};var tb;
J.contains=tb=function(a,b,c,d,e,g,i,j){if(s){u.i(a,J,"contains:rx");u.i(b,J,"contains:ry");u.i(c,J,"contains:rw");u.i(d,J,"contains:rh");u.i(e,J,"contains:x");u.i(g,J,"contains:y");i===f?i=0:u.i(i,J,"contains:w");j===f?j=0:u.i(j,J,"contains:h");(c<0||d<0||i<0||j<0)&&u.g("Rect.contains:Width and height cannot be negative")}else{i===f&&(i=0);j===f&&(j=0)}return a<=e&&e+i<=a+c&&b<=g&&g+j<=b+d};
J.intersects=function(a,b,c,d,e,g,i,j){if(s){u.i(a,J,"intersects:rx");u.i(b,J,"intersects:ry");u.i(c,J,"intersects:rw");u.i(d,J,"intersects:rh");u.i(e,J,"intersects:x");u.i(g,J,"intersects:y");u.i(i,J,"intersects:w");u.i(j,J,"intersects:h");(c<0||d<0||i<0||j<0)&&u.g("Rect.intersects:Width and height cannot be negative")}return a>i+e||e>c+a?o:b>j+g||g>d+b?o:h};u.a(J,"left",J.prototype.left);u.defineProperty(J,{left:"left"},r("x"),function(a){u.v(this,a);s&&u.e(a,"number",J,"left");this.x=a});
u.a(J,"top",J.prototype.top);u.defineProperty(J,{top:"top"},r("y"),function(a){u.v(this,a);s&&u.e(a,"number",J,"top");this.y=a});u.a(J,"right",J.prototype.right);u.defineProperty(J,{right:"right"},function(){return this.x+this.width},function(a){u.v(this,a);s&&u.i(a,J,"right");this.x=this.x+(a-(this.x+this.width))});u.a(J,"bottom",J.prototype.bottom);u.defineProperty(J,{bottom:"bottom"},function(){return this.y+this.height},function(a){u.v(this,a);s&&u.i(a,J,"top");this.y=this.y+(a-(this.y+this.height))});
u.a(J,"position",J.prototype.position);u.defineProperty(J,{position:"position"},function(){return new E(this.x,this.y)},function(a){u.v(this,a);s&&u.c(a,E,J,"position");this.x=a.x;this.y=a.y});u.a(J,"size",J.prototype.size);u.defineProperty(J,{size:"size"},function(){return new eb(this.width,this.height)},function(a){u.v(this,a);s&&u.c(a,eb,J,"size");this.width=a.width;this.height=a.height});u.a(J,"center",J.prototype.Zt);
u.defineProperty(J,{Zt:"center"},function(){return new E(this.x+this.width/2,this.y+this.height/2)},function(a){u.v(this,a);s&&u.c(a,E,J,"center");this.x=a.x-this.width/2;this.y=a.y-this.height/2});u.a(J,"centerX",J.prototype.za);u.defineProperty(J,{za:"centerX"},function(){return this.x+this.width/2},function(a){u.v(this,a);s&&u.i(a,J,"centerX");this.x=a-this.width/2});u.a(J,"centerY",J.prototype.Aa);
u.defineProperty(J,{Aa:"centerY"},function(){return this.y+this.height/2},function(a){u.v(this,a);s&&u.i(a,J,"centerY");this.y=a-this.height/2});J.prototype.isReal=J.prototype.V=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)};J.prototype.isEmpty=J.prototype.ZI=function(){return this.width===0&&this.height===0};
function qb(a,b,c,d){if(a===f)this.left=this.bottom=this.right=this.top=0;else if(b===f)this.left=this.bottom=this.right=this.top=a;else if(c===f){this.top=a;this.right=b;this.bottom=a;this.left=b}else if(d!==f){this.top=a;this.right=b;this.bottom=c;this.left=d}else u.g("Invalid arguments to Margin constructor")}u.H("Margin",qb);u.jd(qb,{top:h,right:h,bottom:h,left:h});qb.prototype.Oa=function(a){s&&u.c(a,qb,qb,"assign:m");this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left};
qb.prototype.setTo=qb.prototype.Mr=function(a,b,c,d){if(s){u.e(a,"number",qb,"setTo:t");u.e(b,"number",qb,"setTo:r");u.e(c,"number",qb,"setTo:b");u.e(d,"number",qb,"setTo:l")}u.v(this);this.top=a;this.right=b;this.bottom=c;this.left=d;return this};qb.prototype.set=qb.prototype.set=function(a){s&&u.c(a,qb,qb,"assign:m");u.v(this);this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left;return this};
qb.prototype.copy=qb.prototype.copy=function(){var a=new qb;a.top=this.top;a.right=this.right;a.bottom=this.bottom;a.left=this.left;return a};qb.prototype.Ga=function(){this.Ha=h;Object.freeze(this);return this};qb.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};qb.prototype.freeze=function(){this.Ha=h;return this};qb.prototype.xa=function(){Object.isFrozen(this)&&u.g("cannot thaw constant: "+this);this.Ha=o;return this};
qb.parse=function(a){if(typeof a==="string"){for(var a=a.split(" "),b=0,c=0;a[b]==="";)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;a[b]==="";)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;a[b]==="";)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;a[b]==="";)b++;(d=a[b++])&&(i=parseFloat(d));return new qb(c,e,g,i)}return new qb};var ub;qb.stringify=ub=function(a){return a instanceof qb?a.top.toString()+" "+a.right.toString()+" "+a.bottom.toString()+" "+a.left.toString():a.toString()};
qb.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"};qb.prototype.equals=qb.prototype.u=function(a){return!(a instanceof qb)?o:this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left};qb.prototype.equalTo=qb.prototype.Kx=function(a,b,c,d){return this.top===a&&this.right===b&&this.bottom===c&&this.left===d};
qb.prototype.mu=function(a){return Sa(this.top,a.top)&&Sa(this.right,a.right)&&Sa(this.bottom,a.bottom)&&Sa(this.left,a.left)};qb.prototype.Zj=function(a){return Ua(this.top,a.top)&&Ua(this.right,a.right)&&Ua(this.bottom,a.bottom)&&Ua(this.left,a.left)};qb.prototype.isReal=qb.prototype.V=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)};function Ya(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.Qa=this.Pa=0}
u.jd(Ya,{m11:h,m12:h,m21:h,m22:h,Pa:h,Qa:h});Ya.prototype.set=Ya.prototype.set=function(a){s&&u.c(a,Ya,Ya,"set:t");this.m11=a.m11;this.m12=a.m12;this.m21=a.m21;this.m22=a.m22;this.Pa=a.Pa;this.Qa=a.Qa;return this};Ya.prototype.copy=Ya.prototype.copy=function(){var a=new Ya;a.m11=this.m11;a.m12=this.m12;a.m21=this.m21;a.m22=this.m22;a.Pa=this.Pa;a.Qa=this.Qa;return a};Ya.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.Pa+","+this.Qa+")"};
Ya.prototype.equals=Ya.prototype.u=function(a){return!(a instanceof Ya)?o:this.m11===a.m11&&this.m12===a.m12&&this.m21===a.m21&&this.m22===a.m22&&this.Pa===a.Pa&&this.Qa===a.Qa};Ya.prototype.reset=Ya.prototype.reset=function(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.Qa=this.Pa=0};
Ya.prototype.multiply=Ya.prototype.multiply=function(a){s&&u.c(a,Ya,Ya,"multiply:matrix");var b=this.m12*a.m11+this.m22*a.m12,c=this.m11*a.m21+this.m21*a.m22,d=this.m12*a.m21+this.m22*a.m22,e=this.m11*a.Pa+this.m21*a.Qa+this.Pa,g=this.m12*a.Pa+this.m22*a.Qa+this.Qa;this.m11=this.m11*a.m11+this.m21*a.m12;this.m12=b;this.m21=c;this.m22=d;this.Pa=e;this.Qa=g;return this};
Ya.prototype.multiplyInverted=Ya.prototype.yJ=function(a){s&&u.c(a,Ya,Ya,"multiplyInverted:matrix");var b=1/(a.m11*a.m22-a.m12*a.m21),c=a.m22*b,d=-a.m12*b,e=-a.m21*b,g=a.m11*b,i=b*(a.m21*a.Qa-a.m22*a.Pa),j=b*(a.m12*a.Pa-a.m11*a.Qa),a=this.m12*c+this.m22*d,b=this.m11*e+this.m21*g,e=this.m12*e+this.m22*g,g=this.m11*i+this.m21*j+this.Pa,i=this.m12*i+this.m22*j+this.Qa;this.m11=this.m11*c+this.m21*d;this.m12=a;this.m21=b;this.m22=e;this.Pa=g;this.Qa=i;return this};
Ya.prototype.invert=Ya.prototype.xu=function(){var a=1/(this.m11*this.m22-this.m12*this.m21),b=-this.m12*a,c=-this.m21*a,d=this.m11*a,e=a*(this.m21*this.Qa-this.m22*this.Pa),g=a*(this.m12*this.Pa-this.m11*this.Qa);this.m11=this.m22*a;this.m12=b;this.m21=c;this.m22=d;this.Pa=e;this.Qa=g};
Ya.prototype.rotate=Ya.prototype.rotate=function(a,b,c){if(s){u.i(a,Ya,"rotate:angle");u.i(b,Ya,"rotate:rx");u.i(c,Ya,"rotate:ry")}this.translate(b,c);var d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d),e=this.m12*a+this.m22*d,g=this.m11*-d+this.m21*a,i=this.m12*-d+this.m22*a;this.m11=this.m11*a+this.m21*d;this.m12=e;this.m21=g;this.m22=i;this.translate(-b,-c)};
Ya.prototype.translate=Ya.prototype.translate=function(a,b){if(s){u.i(a,Ya,"translate:x");u.i(b,Ya,"translate:y")}this.Pa=this.Pa+(this.m11*a+this.m21*b);this.Qa=this.Qa+(this.m12*a+this.m22*b)};Ya.prototype.scale=Ya.prototype.scale=function(a,b){b===f&&(b=a);if(s){u.i(a,Ya,"translate:sx");u.i(b,Ya,"translate:sy")}this.m11=this.m11*a;this.m12=this.m12*a;this.m21=this.m21*b;this.m22=this.m22*b};
Ya.prototype.transformPoint=Ya.prototype.ub=function(a){s&&u.c(a,E,Ya,"transformPoint:p");var b=a.x,c=a.y;a.x=b*this.m11+c*this.m21+this.Pa;a.y=b*this.m12+c*this.m22+this.Qa;return a};Ya.prototype.invertedTransformPoint=Ya.prototype.Vh=function(a){s&&u.c(a,E,Ya,"invertedTransformPoint:p");var b=1/(this.m11*this.m22-this.m12*this.m21),c=-this.m12*b,d=this.m11*b,e=b*(this.m12*this.Pa-this.m11*this.Qa),g=a.x,i=a.y;a.x=g*this.m22*b+i*-this.m21*b+b*(this.m21*this.Qa-this.m22*this.Pa);a.y=g*c+i*d+e;return a};
Ya.prototype.transformRect=Ya.prototype.qD=function(a){s&&u.c(a,J,Ya,"transformRect:rect");var b=a.x,c=a.y,d=b+a.width,e=c+a.height,g=this.m11,i=this.m12,j=this.m21,k=this.m22,l=this.Pa,n=this.Qa,q=b*g+c*j+l,p=b*i+c*k+n,t=d*g+c*j+l,c=d*i+c*k+n,w=b*g+e*j+l,b=b*i+e*k+n,g=d*g+e*j+l,d=d*i+e*k+n,e=q,i=p,q=Math.min(q,t),e=Math.max(e,t),i=Math.min(i,c),p=Math.max(p,c),q=Math.min(q,w),e=Math.max(e,w),i=Math.min(i,b),p=Math.max(p,b),q=Math.min(q,g),e=Math.max(e,g),i=Math.min(i,d),p=Math.max(p,d);a.x=q;a.y=
i;a.width=e-q;a.height=p-i};function Ab(a,b){return new E(b.x*a.m11+b.y*a.m21+a.Pa,b.x*a.m12+b.y*a.m22+a.Qa)}Ya.prototype.isIdentity=Ya.prototype.Zx=function(){return this.m11===1&&this.m12===0&&this.m21===0&&this.m22===1&&this.Pa===0&&this.Qa===0};function K(a,b,c,d){if(a===f)this.offsetY=this.offsetX=this.y=this.x=0;else{b===f&&(b=0);c===f&&(c=0);d===f&&(d=0);this.x=a;this.y=b;this.offsetX=c;this.offsetY=d}}u.H("Spot",K);u.jd(K,{x:h,y:h,offsetX:h,offsetY:h});
K.prototype.Oa=function(a){s&&u.c(a,K,K,"assign:s");this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY};K.prototype.setTo=K.prototype.Mr=function(a,b,c,d){if(s){Bb(a,"setTo:x");Bb(b,"setTo:y");Eb(c,"setTo:offx");Eb(d,"setTo:offy")}u.v(this);this.x=a;this.y=b;this.offsetX=c;this.offsetY=d;return this};K.prototype.set=K.prototype.set=function(a){s&&u.c(a,K,K,"set:s");u.v(this);this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY;return this};
K.prototype.copy=K.prototype.copy=function(){var a=new K;a.x=this.x;a.y=this.y;a.offsetX=this.offsetX;a.offsetY=this.offsetY;return a};K.prototype.Ga=function(){this.Ha=h;Object.freeze(this);return this};K.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};K.prototype.freeze=function(){this.Ha=h;return this};K.prototype.xa=function(){Object.isFrozen(this)&&u.g("cannot thaw constant: "+this);this.Ha=o;return this};function Fb(a,b){a.x=NaN;a.y=NaN;a.offsetX=b;return a}
function Bb(a,b){(isNaN(a)||a>1||a<0)&&u.ha(a,"0 <= "+b+" <= 1",K,b)}function Eb(a,b){(isNaN(a)||a===Infinity||a===-Infinity)&&u.ha(a,"real number, not NaN or Infinity",K,b)}var Lb;
K.parse=Lb=function(a){if(typeof a==="string"){a=a.trim();if(a==="None")return u.NONE;if(a==="TopLeft")return u.uv;if(a==="Top"||a==="TopCenter"||a==="MiddleTop")return u.Un;if(a==="TopRight")return u.wv;if(a==="Left"||a==="LeftCenter"||a==="MiddleLeft")return u.Sn;if(a==="Center")return u.kv;if(a==="Right"||a==="RightCenter"||a==="MiddleRight")return u.Tn;if(a==="BottomLeft")return u.fv;if(a==="Bottom"||a==="BottomCenter"||a==="MiddleBottom")return u.Rn;if(a==="BottomRight")return u.hv;if(a==="TopSide")return u.yv;
if(a==="LeftSide")return u.nv;if(a==="RightSide")return u.sv;if(a==="BottomSide")return u.jv;if(a==="TopBottomSides")return u.tv;if(a==="LeftRightSides")return u.mv;if(a==="TopLeftSides")return u.vv;if(a==="TopRightSides")return u.xv;if(a==="BottomLeftSides")return u.gv;if(a==="BottomRightSides")return u.iv;if(a==="NotTopSide")return u.rv;if(a==="NotLeftSide")return u.pv;if(a==="NotRightSide")return u.qv;if(a==="NotBottomSide")return u.ov;if(a==="AllSides")return u.ev;if(a==="Default")return u.lv;
for(var a=a.split(" "),b=0,c=0;a[b]==="";)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;a[b]==="";)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;a[b]==="";)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;a[b]==="";)b++;(d=a[b++])&&(i=parseFloat(d));return new K(c,e,g,i)}return new K};var Mb;K.stringify=Mb=function(a){return a instanceof K?Nb(a)?a.x.toString()+" "+a.y.toString()+" "+a.offsetX.toString()+" "+a.offsetY.toString():a.toString():a.toString()};
K.prototype.toString=function(){return Nb(this)?this.offsetX===0&&this.offsetY===0?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.u(u.NONE)?"None":this.u(u.uv)?"TopLeft":this.u(u.Un)?"Top":this.u(u.wv)?"TopRight":this.u(u.Sn)?"Left":this.u(u.kv)?"Center":this.u(u.Tn)?"Right":this.u(u.fv)?"BottomLeft":this.u(u.Rn)?"Bottom":this.u(u.hv)?"BottomRight":this.u(u.yv)?"TopSide":this.u(u.nv)?"LeftSide":this.u(u.sv)?"RightSide":this.u(u.jv)?"BottomSide":
this.u(u.tv)?"TopBottomSides":this.u(u.mv)?"LeftRightSides":this.u(u.vv)?"TopLeftSides":this.u(u.xv)?"TopRightSides":this.u(u.gv)?"BottomLeftSides":this.u(u.iv)?"BottomRightSides":this.u(u.rv)?"NotTopSide":this.u(u.pv)?"NotLeftSide":this.u(u.qv)?"NotRightSide":this.u(u.ov)?"NotBottomSide":this.u(u.ev)?"AllSides":this.u(u.lv)?"Default":"None"};
K.prototype.equals=K.prototype.u=function(a){return!(a instanceof K)?o:(this.x===a.x||isNaN(this.x)&&isNaN(a.x))&&(this.y===a.y||isNaN(this.y)&&isNaN(a.y))&&this.offsetX===a.offsetX&&this.offsetY===a.offsetY};K.prototype.opposite=K.prototype.zJ=function(){return new K(0.5-(this.x-0.5),0.5-(this.y-0.5),-this.offsetX,-this.offsetY)};K.prototype.includesSide=K.prototype.QI=function(a){if(!Ob(this)||!Ob(a))return o;a=a.offsetY;return(this.offsetY&a)===a};
function Nb(a){return!isNaN(a.x)&&!isNaN(a.y)}function Pb(a){return isNaN(a.x)||isNaN(a.y)}function Ob(a){return Pb(a)&&a.offsetX===1&&a.offsetY!==0}function Qb(a){return isNaN(a.x)&&isNaN(a.y)&&a.offsetX===-1&&a.offsetY===0}u.Mc=1;u.tc=2;u.Dc=4;u.Cc=8;u.NONE=Fb(new K(0,0,0,0),0).Ga();u.lv=Fb(new K(0,0,-1,0),-1).Ga();u.uv=(new K(0,0,0,0)).Ga();u.Un=(new K(0.5,0,0,0)).Ga();u.wv=(new K(1,0,0,0)).Ga();u.Sn=(new K(0,0.5,0,0)).Ga();u.kv=(new K(0.5,0.5,0,0)).Ga();u.Tn=(new K(1,0.5,0,0)).Ga();
u.fv=(new K(0,1,0,0)).Ga();u.Rn=(new K(0.5,1,0,0)).Ga();u.hv=(new K(1,1,0,0)).Ga();u.yv=Fb(new K(0,0,1,u.Mc),1).Ga();u.nv=Fb(new K(0,0,1,u.tc),1).Ga();u.sv=Fb(new K(0,0,1,u.Dc),1).Ga();u.jv=Fb(new K(0,0,1,u.Cc),1).Ga();u.tv=Fb(new K(0,0,1,u.Mc|u.Cc),1).Ga();u.mv=Fb(new K(0,0,1,u.tc|u.Dc),1).Ga();u.vv=Fb(new K(0,0,1,u.Mc|u.tc),1).Ga();u.xv=Fb(new K(0,0,1,u.Mc|u.Dc),1).Ga();u.gv=Fb(new K(0,0,1,u.Cc|u.tc),1).Ga();u.iv=Fb(new K(0,0,1,u.Cc|u.Dc),1).Ga();u.rv=Fb(new K(0,0,1,u.tc|u.Dc|u.Cc),1).Ga();
u.pv=Fb(new K(0,0,1,u.Mc|u.Dc|u.Cc),1).Ga();u.qv=Fb(new K(0,0,1,u.Mc|u.tc|u.Cc),1).Ga();u.ov=Fb(new K(0,0,1,u.Mc|u.tc|u.Dc),1).Ga();u.ev=Fb(new K(0,0,1,u.Mc|u.tc|u.Dc|u.Cc),1).Ga();var Tb;K.None=Tb=u.NONE;var Ub;K.Default=Ub=u.lv;var Vb;K.TopLeft=Vb=u.uv;var Xb;K.TopCenter=Xb=u.Un;var Yb;K.TopRight=Yb=u.wv;K.LeftCenter=u.Sn;var Zb;K.Center=Zb=u.kv;K.RightCenter=u.Tn;var dc;K.BottomLeft=dc=u.fv;var ec;K.BottomCenter=ec=u.Rn;var fc;K.BottomRight=fc=u.hv;var mc;K.MiddleTop=mc=u.Un;var nc;
K.MiddleLeft=nc=u.Sn;var oc;K.MiddleRight=oc=u.Tn;var pc;K.MiddleBottom=pc=u.Rn;K.Top=u.Un;K.Left=u.Sn;K.Right=u.Tn;K.Bottom=u.Rn;var rc;K.TopSide=rc=u.yv;var sc;K.LeftSide=sc=u.nv;var tc;K.RightSide=tc=u.sv;var uc;K.BottomSide=uc=u.jv;K.TopBottomSides=u.tv;K.LeftRightSides=u.mv;K.TopLeftSides=u.vv;K.TopRightSides=u.xv;K.BottomLeftSides=u.gv;K.BottomRightSides=u.iv;K.NotTopSide=u.rv;K.NotLeftSide=u.pv;K.NotRightSide=u.qv;K.NotBottomSide=u.ov;var wc;K.AllSides=wc=u.ev;
var Cc=4*((Math.sqrt(2)-1)/3),Dc=(new E(0,0)).Ga(),Ec=(new eb(Infinity,Infinity)).Ga(),Jc=(new E(-Infinity,-Infinity)).Ga(),Kc=(new E(Infinity,Infinity)).Ga(),Lc=(new eb(0,0)).Ga(),Mc=(new E(NaN,NaN)).Ga();function Ua(a,b){var c=a-b;return c<0.5&&c>-0.5}function Sa(a,b){var c=a-b;return c<5E-8&&c>-5E-8}
function Nc(a,b,c,d,e,g,i){e<=0&&(e=1E-6);var j,k,l,n;if(a<c){k=a;j=c}else{k=c;j=a}if(b<d){n=b;l=d}else{n=d;l=b}if(a===c)return n<=i&&i<=l&&a-e<=g&&g<=a+e;if(b===d)return k<=g&&g<=j&&b-e<=i&&i<=b+e;j=j+e;k=k-e;if(k<=g&&g<=j){l=l+e;n=n-e;if(n<=i&&i<=l)if(j-k>l-n)if(a-c>e||c-a>e){g=(d-b)/(c-a)*(g-a)+b;if(g-e<=i&&i<=g+e)return h}else return h;else if(b-d>e||d-b>e){i=(c-a)/(d-b)*(i-b)+a;if(i-e<=g&&g<=i+e)return h}else return h}return o}
function Tc(a,b,c,d,e,g,i,j,k,l,n){if(!Nc(a,b,i,j,k,c,d)||!Nc(a,b,i,j,k,e,g)){var q=(a+c)/2,p=(b+d)/2,t=(c+e)/2,w=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(q+t)/2,c=(p+w)/2,t=(t+e)/2,w=(w+g)/2,A=(d+t)/2,F=(c+w)/2;return Tc(a,b,q,p,d,c,A,F,k,l,n)||Tc(A,F,t,w,e,g,i,j,k,l,n)}return Nc(a,b,i,j,k,l,n)}
function Uc(a,b,c,d,e,g,i,j,k,l){if(!Nc(a,b,i,j,k,c,d)||!Nc(a,b,i,j,k,e,g)){var n=(a+c)/2,q=(b+d)/2,p=(c+e)/2,t=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(n+p)/2,c=(q+t)/2,p=(p+e)/2,t=(t+g)/2,w=(d+p)/2,A=(c+t)/2;Uc(a,b,n,q,d,c,w,A,k,l);Uc(w,A,p,t,e,g,i,j,k,l)}else{mb(l,a,b,0,0);mb(l,i,j,0,0)}}function Vc(a,b,c,d,e,g,i,j,k){if(Nc(a,b,e,g,i,c,d))return Nc(a,b,e,g,i,j,k);var l=(a+c)/2,n=(b+d)/2,c=(c+e)/2,d=(d+g)/2,q=(l+c)/2,p=(n+d)/2;return Vc(a,b,l,n,q,p,i,j,k)||Vc(q,p,c,d,e,g,i,j,k)}
function Wc(a,b,c,d,e,g,i,j){if(Nc(a,b,e,g,i,c,d)){mb(j,a,b,0,0);mb(j,e,g,0,0)}else{var k=(a+c)/2,l=(b+d)/2,c=(c+e)/2,d=(d+g)/2,n=(k+c)/2,q=(l+d)/2;Wc(a,b,k,l,n,q,i,j);Wc(n,q,c,d,e,g,i,j)}}
function Xc(a,b,c,d,e,g,i,j,k,l,n,q,p,t){p<=0&&(p=1E-6);if(!Nc(a,b,i,j,p,c,d)||!Nc(a,b,i,j,p,e,g)){var w=(a+c)/2,A=(b+d)/2,c=(c+e)/2,d=(d+g)/2,e=(e+i)/2,g=(g+j)/2,F=(w+c)/2,H=(A+d)/2,c=(c+e)/2,d=(d+g)/2,x=(F+c)/2,I=(H+d)/2,y=(n-k)*(n-k)+(q-l)*(q-l),G=o;if(Xc(a,b,w,A,F,H,x,I,k,l,n,q,p,t)){a=(t.x-k)*(t.x-k)+(t.y-l)*(t.y-l);if(a<y){y=a;G=h}}b=t.x;w=t.y;if(Xc(x,I,c,d,e,g,i,j,k,l,n,q,p,t)){a=(t.x-k)*(t.x-k)+(t.y-l)*(t.y-l);if(a<y)G=h;else{t.x=b;t.y=w}}return G}w=(a-i)*(l-q)-(b-j)*(k-n);if(!w)return o;
p=((a*j-b*i)*(k-n)-(a-i)*(k*q-l*n))/w;w=((a*j-b*i)*(l-q)-(b-j)*(k*q-l*n))/w;if((k>n?k-n:n-k)<(l>q?l-q:q-l)){if(b<j){k=b;i=j}else{k=j;i=b}if(w<k||w>i)return o}else{if(a<i)k=a;else{k=i;i=a}if(p<k||p>i)return o}t.x=p;t.y=w;return h}
function Yc(a,b,c,d,e,g,i,j,k,l,n,q,p){var t=0;p<=0&&(p=1E-6);if(!Nc(a,b,i,j,p,c,d)||!Nc(a,b,i,j,p,e,g))var w=(a+c)/2,A=(b+d)/2,F=(c+e)/2,H=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(w+F)/2,c=(A+H)/2,F=(F+e)/2,H=(H+g)/2,x=(d+F)/2,I=(c+H)/2,t=t+Yc(a,b,w,A,d,c,x,I,k,l,n,q,p),t=t+Yc(x,I,F,H,e,g,i,j,k,l,n,q,p);else{p=(a-i)*(l-q)-(b-j)*(k-n);if(!p)return t;w=((a*j-b*i)*(k-n)-(a-i)*(k*q-l*n))/p;A=((a*j-b*i)*(l-q)-(b-j)*(k*q-l*n))/p;if(w>=n)return t;if((k>n?k-n:n-k)<(l>q?l-q:q-l)){if(b<j){k=b;a=j}else{k=j;a=b}if(A<
k||A>a)return t}else{if(a<i){k=a;a=i}else k=i;if(w<k||w>a)return t}p>0?t++:p<0&&t--}return t}
function $c(a,b,c,d,e,g,i){if(Sa(a,c)){var j;if(b<d){j=b;c=d}else{j=d;c=b}d=g;if(d<j){i.x=a;i.y=j;return o}if(d>c){i.x=a;i.y=c;return o}i.x=a;i.y=d;return h}if(Sa(b,d)){if(a<c)j=a;else{j=c;c=a}d=e;if(d<j){i.x=j;i.y=b;return o}if(d>c){i.x=c;i.y=b;return o}i.x=d;i.y=b;return h}j=((a-e)*(a-c)+(b-g)*(b-d))/((c-a)*(c-a)+(d-b)*(d-b));if(j<-5E-6){i.x=a;i.y=b;return o}if(j>1.000005){i.x=c;i.y=d;return o}i.x=a+j*(c-a);i.y=b+j*(d-b);return h}
function ad(a,b,c,d,e,g,i,j,k){if(Ua(a,c)&&Ua(b,d)){k.x=a;k.y=b;return o}if(Sa(e,i)){if(Sa(a,c)){$c(a,b,c,d,e,g,k);return o}return $c(a,b,c,d,e,(d-b)/(c-a)*(e-a)+b,k)}j=(j-g)/(i-e);if(Sa(a,c)){c=j*(a-e)+g;if(b<d)e=b;else{e=d;d=b}if(c<e){k.x=a;k.y=e;return o}if(c>d){k.x=a;k.y=d;return o}k.x=a;k.y=c;return h}i=(d-b)/(c-a);if(Sa(j,i)){$c(a,b,c,d,e,g,k);return o}g=(i*a-j*e+g-b)/(i-j);if(Sa(i,0)){if(a<c){e=a;d=c}else{e=c;d=a}if(g<e){k.x=e;k.y=b;return o}if(g>d){k.x=d;k.y=b;return o}k.x=g;k.y=b;return h}return $c(a,
b,c,d,g,i*(g-a)+b,k)}
function bd(a,b,c,d,e,g,i,j,k){function l(c,d){var e=(c-a)*(c-a)+(d-b)*(d-b);if(e<n){n=e;k.x=c;k.y=d}}var n=Infinity;l(k.x,k.y);var q,p,t,w;if(e<i){q=e;p=i}else{q=i;p=e}if(g<j){t=e;w=i}else{t=i;w=e}q=(p-q)/2+0;t=(w-t)/2+0;e=(e+i)/2;g=(g+j)/2;if(!(q===0||t===0))if((c>a?c-a:a-c)<0.5){q=1-(c-e)*(c-e)/(q*q);if(!(q<0)){q=Math.sqrt(q);d=-t*q+g;l(c,t*q+g);l(c,d)}}else{c=(d-b)/(c-a);d=1/(q*q)+c*c/(t*t);j=2*c*(b-c*a)/(t*t)-2*c*g/(t*t)-2*e/(q*q);t=j*j-4*d*(2*c*a*g/(t*t)-2*b*g/(t*t)+g*g/(t*t)+e*e/(q*q)-1+(b-
c*a)*(b-c*a)/(t*t));if(!(t<0)){q=Math.sqrt(t);t=(-j+q)/(2*d);l(t,c*t-c*a+b);t=(-j-q)/(2*d);l(t,c*t-c*a+b)}}}
function cd(a,b,c,d){var e=a.left,g=a.right,i=a.top,a=a.bottom,j=b.x,b=b.y,k=c.x,c=c.y,l=1E21,n=e,q=i;if(ad(e,i,e,a,j,b,k,c,d)){var p=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b);if(p<l){l=p;n=d.x;q=d.y}}if(ad(g,i,g,a,j,b,k,c,d)){p=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b);if(p<l){l=p;n=d.x;q=d.y}}if(ad(e,i,g,i,j,b,k,c,d)){p=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b);if(p<l){l=p;n=d.x;q=d.y}}if(ad(e,a,g,a,j,b,k,c,d)){p=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b);if(p<l){l=p;n=d.x;q=d.y}}d.x=n;d.y=q;return l<1E21}
function dd(a,b,c){var d=b.x,e=b.y,g=c.x,i=c.y,j=a.left,k=a.right,l=a.top,n=a.bottom;if(d===g){if(e<i){a=e;g=i}else{a=i;g=e}return j<=d&&d<=k&&a<=n&&g>=l}if(e===i){if(d<g)a=d;else{a=g;g=d}return l<=e&&e<=n&&a<=k&&g>=j}return a.da(b)||a.da(c)||hd(j,l,k,l,d,e,g,i)||hd(k,l,k,n,d,e,g,i)||hd(k,n,j,n,d,e,g,i)||hd(j,n,j,l,d,e,g,i)?h:o}function hd(a,b,c,d,e,g,i,j){return id(a,b,c,d,e,g)*id(a,b,c,d,i,j)<=0&&id(e,g,i,j,a,b)*id(e,g,i,j,c,d)<=0}
function id(a,b,c,d,e,g){c=c-a;d=d-b;a=e-a;b=g-b;g=a*d-b*c;if(g===0){g=a*c+b*d;if(g>0){g=(a-c)*c+(b-d)*d;g<0&&(g=0)}}return g<0?-1:g>0?1:0}function jd(a){a<0&&(a=a+360);a>=360&&(a=a-360);return a}function kd(a,b,c,d,e,g){var c=Math.floor((a-c)/e)*e+c,d=Math.floor((b-d)/g)*g+d,i=c;c+e-a<e/2&&(i=c+e);a=d;d+g-b<g/2&&(a=d+g);return new E(i,a)}function ld(a,b){var c=Math.max(a,b),d=Math.min(a,b),e=1,g=1;do{e=c%d;c=g=d;d=e}while(e>0);return g}
function md(a){u.Fb(this);a===f?a=yd:s&&u.Sa(a,md,md,"constructor:type");this.I=a;this.Ec=this.vc=this.Tb=this.Ib=0;this.Ak=new z(zd);this.zs=this.Ak.Ob;this.ns=(new J).freeze();this.Ea=h;this.QG=new E;this.Bh=Vb;this.Ch=fc;this.Gs=this.Hs=NaN;this.Gc=Lc;this.Gb=Ad}u.H("Geometry",md);
md.prototype.copy=md.prototype.copy=function(){var a=new md;a.I=this.I;a.Ib=this.Ib;a.Tb=this.Tb;a.vc=this.vc;a.Ec=this.Ec;for(var b=this.Ak,c=b.length,d=a.Ak,e=0;e<c;e++){var g=b.j[e].copy();d.add(g)}a.zs=this.zs;a.ns.Oa(this.ns);a.Ea=this.Ea;a.Bh=this.Bh.B();a.Ch=this.Ch.B();a.Hs=this.Hs;a.Gs=this.Gs;a.Gc=this.Gc.B();a.Gb=this.Gb;return a};var Bd;md.Line=Bd=u.l(md,"Line",0);var Kd;md.Rectangle=Kd=u.l(md,"Rectangle",1);var Nd;md.Ellipse=Nd=u.l(md,"Ellipse",2);var yd;md.Path=yd=u.l(md,"Path",3);
md.prototype.Ga=function(){this.freeze();Object.freeze(this);return this};md.prototype.freeze=function(){this.Ha=h;var a=this.qc;a.freeze();for(var b=a.length,c=0;c<b;c++)a.j[c].freeze();return this};md.prototype.xa=function(){Object.isFrozen(this)&&u.g("cannot thaw constant: "+this);this.Ha=o;var a=this.qc;a.xa();for(var b=a.length,c=0;c<b;c++)a.j[c].xa();return this};
md.prototype.toString=function(a){switch(this.type){case Bd:return"M"+this.La.toFixed(a)+" "+this.Ma.toFixed(a)+"L"+this.aa.toFixed(a)+" "+this.ba.toFixed(a);case Kd:var b=new J(this.La,this.Ma,0,0);mb(b,this.aa,this.ba,0,0);return"M"+b.x.toFixed(a)+" "+b.y.toFixed(a)+"H"+b.right.toFixed(a)+"V"+b.bottom.toFixed(a)+"H"+b.left.toFixed(a)+"z";case Nd:b=new J(this.La,this.Ma,0,0);mb(b,this.aa,this.ba,0,0);var c=b.left.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);return"M"+c+"A"+(b.width/2).toFixed(a)+" "+
(b.height/2).toFixed(a)+" 0 0 1 "+(b.right.toFixed(a)+" "+(b.y+b.height/2).toFixed(a))+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+c;case yd:for(var b="",c=this.qc,d=c.length,e=0;e<d;e++){var g=c.j[e];e>0&&(b=b+" ");b=b+g.toString(a)}return b;default:return this.type.toString()}};var Od;
md.parse=Od=function(a,b){function c(){return l>=w-1?h:k[l+1].match(/[A-Za-z]/)!==m}function d(){l++;return k[l]}function e(){var a=new E(parseFloat(d()),parseFloat(d()));if(n===n.toLowerCase()){a.x=t.x+a.x;a.y=t.y+a.y}return a}function g(){return t=e()}function i(){return p=e()}function j(){return q.toLowerCase()!=="c"&&q.toLowerCase()!=="s"?t:new E(2*t.x-p.x,2*t.y-p.y)}b===f&&(b=h);var a=a.replace(/,/gm," "),a=a.replace(/([MmZzLlHhVvCcSsQqTtAaFf])([MmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([MmZzLlHhVvCcSsQqTtAaFf])([MmZzLlHhVvCcSsQqTtAaFf])/gm,
"$1 $2"),a=a.replace(/([MmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2"),a=a.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([0-9])([+\-])/gm,"$1 $2"),a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),a=a.replace(/[\s\r\t\n]+/gm," "),a=a.replace(/^\s+|\s+$/g,""),k=a.split(" "),l=-1,n="",q="";new E(0,0);for(var p=new E(0,0),t=new E(0,0),w=k.length,A=new L,F;!(l>=w-1);){q=n;n=d();if(n!=="")switch(n.toUpperCase()){case "M":F=g();
for(A.Xb===m?M(A,F.x,F.y,o,o):A.moveTo(F.x,F.y);!c();){F=g();A.lineTo(F.x,F.y)}break;case "L":for(;!c();){F=g();A.lineTo(F.x,F.y)}break;case "H":for(;!c();){t=F=new E((n===n.toLowerCase()?t.x:0)+parseFloat(d()),t.y);A.lineTo(t.x,t.y)}break;case "V":for(;!c();){t=F=new E(t.x,(n===n.toLowerCase()?t.y:0)+parseFloat(d()));A.lineTo(t.x,t.y)}break;case "C":for(;!c();){F=e();var H=i(),x=g();N(A,F.x,F.y,H.x,H.y,x.x,x.y)}break;case "S":for(;!c();){F=j();H=i();x=g();N(A,F.x,F.y,H.x,H.y,x.x,x.y)}break;case "Q":for(;!c();){H=
i();x=g();Pd(A,H.x,H.y,x.x,x.y)}break;case "T":for(;!c();){p=H=j();x=g();Pd(A,H.x,H.y,x.x,x.y)}break;case "B":for(;!c();){F=[parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d())];if(!c()){F.push(parseFloat(d()));c()||F.push(parseFloat(d()))}if(n===n.toLowerCase()){F[2]=F[2]+t.x;F[3]=F[3]+t.y}A.arcTo(F[0],F[1],F[2],F[3],F[4],F[5],F[6])}break;case "Z":O(A);break;case "F":b=h}}A=A.k;if(b)for(F=A.qc.f;F.next();)F.value.pr=h;return A};
md.prototype.ay=function(){if(this.Ea)return h;var a=this.qc;if(this.zs!==a.Ob)return h;for(var b=a.length,c=0;c<b;c++)if(a.j[c].ay())return h;return o};md.prototype.Ry=function(){this.Ea=o;var a=this.qc;this.zs=a.Ob;for(var b=a.length,c=0;c<b;c++)a.j[c].Ry()};
md.prototype.Yd=function(){var a=this.ns;a.xa();a.reset();a.uG(this.Gc);switch(this.type){case Bd:case Kd:case Nd:mb(a,this.Ib,this.Tb,0,0);mb(a,this.vc,this.Ec,0,0);break;case yd:for(var b=this.qc,c=b.length,d=0;d<c;d++){var e=b.j[d];mb(a,e.La,e.Ma,0,0);for(var g=e.rb,i=g.length,j=e.La,e=e.Ma,k=0;k<i;k++){var l=g.j[k];switch(l.type){case Qd:case Rd:j=l.aa;e=l.ba;mb(a,j,e,0,0);break;case Sd:Uc(j,e,l.zd,l.rf,l.Hn,l.In,l.aa,l.ba,0.5,a);j=l.aa;e=l.ba;break;case Td:Wc(j,e,l.zd,l.rf,l.aa,l.ba,0.5,a);j=
l.aa;e=l.ba;break;case de:for(var l=ee(l),n=l.length,q=m,d=0;d<n;d++){q=l[d];Uc(q.Gl,q.Hl,q.av,q.cv,q.bv,q.dv,q.nk,q.ok,0.5,a)}if(q!==m){j=q.nk;e=q.ok}break;default:u.g("Unknown Segment type: "+l.type)}}}break;default:u.g("Unknown Geometry type: "+this.type)}mb(a,0,0,0,0);a.freeze()};
md.prototype.da=function(a,b,c,d){for(var e=a.x,g=a.y,i=this.fb.x-20,a=a.y,j=0,k,l,n,q,p,t,w,A=this.qc.j,F=A.length,H=0;H<F;H++){var x=A[H];if(x.pr){if(c&&x.da(e,g,b))return h;var I=x.rb;k=x.La;l=x.Ma;for(var y=k,G=l,fa=0;fa<=I.length;fa++){if(fa!==I.length){n=I.j[fa];q=n.type;t=n.aa;w=n.ba}else{q=Qd;t=x.La;w=x.Ma}switch(q){case Rd:p=fe(e,g,i,a,k,l,y,G);if(p===h)return h;j=j+p;y=t;G=w;break;case Qd:p=fe(e,g,i,a,k,l,t,w);if(p===h)return h;j=j+p;break;case Sd:p=Yc(k,l,n.zd,n.rf,n.Hn,n.In,t,w,i,a,e,
g,0.5);j=j+p;break;case Td:p=Yc(k,l,(k+2*n.zd)/3,(l+2*n.rf)/3,(n.zd+2*t)/3,(n.zd+2*t)/3,t,w,i,a,e,g,0.5);j=j+p;break;case de:q=ee(n);for(var R=q.length,S=m,da=0;da<R;da++){S=q[da];if(da===0){p=fe(e,g,i,a,k,l,S.Gl,S.Hl);if(p===h)return h;j=j+p}p=Yc(S.Gl,S.Hl,S.av,S.cv,S.bv,S.dv,S.nk,S.ok,i,a,e,g,0.5);j=j+p}if(S!==m){t=S.nk;w=S.ok}break;default:u.g("Unknown Segment type: "+n.type)}k=t;l=w}if(j!==0)return h;j=0}else if(x.da(e,g,d?b:b+2))return h}return j!==0};
function fe(a,b,c,d,e,g,i,j){if(Nc(e,g,i,j,0.05,a,b))return h;var k=(a-c)*(g-j);if(k===0)return 0;var l=((a*d-b*c)*(e-i)-(a-c)*(e*j-g*i))/k,b=(a*d-b*c)*(g-j)/k;if(l>=a)return 0;if((e>i?e-i:i-e)<(g>j?g-j:j-g)){if(g<j){a=g;e=j}else{a=j;e=g}if(b<a||b>e)return 0}else{if(e<i){a=e;e=i}else a=i;if(l<a||l>e)return 0}return k>0?1:-1}function ge(a,b,c,d){for(var e=a.qc.length,g=0;g<e;g++)if(a.qc.j[g].da(b,c,d))return h;return o}u.a(md,"type",md.prototype.type);
u.defineProperty(md,{type:"type"},r("I"),function(a){if(this.I!==a){s&&u.Sa(a,md,md,"type");u.v(this,a);this.I=a;this.Ea=h}});u.a(md,"startX",md.prototype.La);u.defineProperty(md,{La:"startX"},r("Ib"),function(a){if(this.Ib!==a){s&&u.i(a,md,"startX");u.v(this,a);this.Ib=a;this.Ea=h}});u.a(md,"startY",md.prototype.Ma);u.defineProperty(md,{Ma:"startY"},r("Tb"),function(a){if(this.Tb!==a){s&&u.i(a,md,"startY");u.v(this,a);this.Tb=a;this.Ea=h}});u.a(md,"endX",md.prototype.aa);
u.defineProperty(md,{aa:"endX"},r("vc"),function(a){if(this.vc!==a){s&&u.i(a,md,"endX");u.v(this,a);this.vc=a;this.Ea=h}});u.a(md,"endY",md.prototype.ba);u.defineProperty(md,{ba:"endY"},r("Ec"),function(a){if(this.Ec!==a){s&&u.i(a,md,"endY");u.v(this,a);this.Ec=a;this.Ea=h}});u.a(md,"figures",md.prototype.qc);u.defineProperty(md,{qc:"figures"},r("Ak"),function(a){if(this.Ak!==a){s&&u.c(a,z,md,"figures");u.v(this,a);this.Ak=a;this.Ea=h}});
u.defineProperty(md,{n:"spot1"},r("Bh"),function(a){s&&u.c(a,K,md,"spot1");u.v(this,a);this.Bh=a.B()});u.defineProperty(md,{o:"spot2"},r("Ch"),function(a){s&&u.c(a,K,md,"spot2");u.v(this,a);this.Ch=a.B()});u.m(md,{fb:"bounds"},function(){if(this.ay()){this.Ry();this.Yd()}return this.ns});u.a(md,"minSize",md.prototype.Od);
u.defineProperty(md,{Od:"minSize"},r("Gc"),function(a){if(!this.Gc.u(a)){s&&u.c(a,eb,md,"minSize");a=a.B();if(isNaN(a.width))a.width=0;if(isNaN(a.height))a.height=0;a.freeze();this.Gc=a}});function zd(a,b,c,d){u.Fb(this);d===f&&(d=h);this.$o=d;this.Ze=h;if(a!==f){s&&u.i(a,zd,"sx");this.Ib=a}else this.Ib=0;if(b!==f){s&&u.i(b,zd,"sy");this.Tb=b}else this.Tb=0;this.lq=new z(pe);this.zt=this.lq.Ob;this.Ea=h}u.H("PathFigure",zd);
zd.prototype.copy=zd.prototype.copy=function(){var a=new zd;a.$o=this.$o;a.Ze=this.Ze;a.Ib=this.Ib;a.Tb=this.Tb;for(var b=this.lq,c=b.length,d=a.lq,e=0;e<c;e++){var g=b.j[e].copy();d.add(g)}a.zt=this.zt;a.Ea=this.Ea;return a};ea=zd.prototype;ea.toString=function(a){for(var b="M"+this.La.toFixed(a)+" "+this.Ma.toFixed(a),c=this.rb,d=c.length,e=0;e<d;e++)b=b+(" "+c.j[e].toString(a));this.pr&&(b=b+"\t");return b};
ea.freeze=function(){this.Ha=h;var a=this.rb;a.freeze();for(var b=a.length,c=0;c<b;c++)a.j[c].freeze();return this};ea.xa=function(){this.Ha=o;var a=this.rb;a.xa();for(var b=a.length,c=0;c<b;c++)a.j[c].xa();return this};ea.ay=function(){if(this.Ea)return h;var a=this.rb;if(this.zt!==a.Ob)return h;for(var b=a.length,c=0;c<b;c++)if(a.j[c].Ea)return h;return o};ea.Ry=function(){this.Ea=o;var a=this.rb;this.zt=a.Ob;for(var b=a.length,c=0;c<b;c++)a.j[c].Ea=o};u.a(zd,"isFilled",zd.prototype.pr);
u.defineProperty(zd,{pr:"isFilled"},r("$o"),function(a){s&&u.e(a,"boolean",zd,"isFilled");u.v(this,a);this.$o=a});u.a(zd,"isShadowed",zd.prototype.qr);u.defineProperty(zd,{qr:"isShadowed"},r("Ze"),function(a){s&&u.e(a,"boolean",zd,"isShadowed");u.v(this,a);this.Ze=a});u.a(zd,"subPath",zd.prototype.zG);u.defineProperty(zd,{zG:"subPath"},r("ZD"),function(a){s&&u.e(a,"boolean",zd,"subPath");u.v(this,a);this.ZD=a});u.a(zd,"startX",zd.prototype.La);
u.defineProperty(zd,{La:"startX"},r("Ib"),function(a){s&&u.i(a,zd,"startX");u.v(this,a);this.Ib=a;this.Ea=h});u.a(zd,"startY",zd.prototype.Ma);u.defineProperty(zd,{Ma:"startY"},r("Tb"),function(a){s&&u.i(a,zd,"startY");u.v(this,a);this.Tb=a;this.Ea=h});u.a(zd,"segments",zd.prototype.rb);u.defineProperty(zd,{rb:"segments"},r("lq"),function(a){s&&u.c(a,z,zd,"segments");u.v(this,a);this.lq=a;this.Ea=h});
zd.prototype.da=function(a,b,c){for(var d=this.La,e=this.Ma,g=d,i=e,j=this.rb.j,k=j.length,l=0;l<k;l++){var n=j[l];switch(n.type){case Rd:g=n.aa;i=n.ba;break;case Qd:if(Nc(d,e,n.aa,n.ba,c,a,b))return h;break;case Sd:if(Tc(d,e,n.zd,n.rf,n.Hn,n.In,n.aa,n.ba,c,a,b))return h;break;case Td:if(Vc(d,e,n.zd,n.rf,n.aa,n.ba,c,a,b))return h;break;case de:for(var q=ee(n),p=q.length,t=m,w=0;w<p;w++){t=q[w];if(w===0&&Nc(d,e,t.Gl,t.Hl,c,a,b)||Tc(t.Gl,t.Hl,t.av,t.cv,t.bv,t.dv,t.nk,t.ok,c,a,b))return h}if(t!==m){n.aa=
t.nk;n.ba=t.ok}break;default:u.g("Unknown Segment type: "+n.type)}d=n.aa;e=n.ba;if(n.ii&&(d!==g||e!==i)&&Nc(d,e,g,i,c,a,b))return h}return o};
function pe(a,b,c,d,e,g,i){u.Fb(this);a===f?a=Qd:s&&u.Sa(a,pe,pe,"constructor:type");this.I=a;if(a===de){if(b!==f){s&&u.i(b,pe,"ex");this.Bg=b}else this.Bg=0;if(c!==f){s&&u.i(c,pe,"ey");this.Dg=c}else this.Dg=0;if(d!==f){s&&u.i(d,pe,"x1");this.Ql=d}if(e!==f){s&&u.i(e,pe,"y1");this.Rl=e}if(g!==f){s&&u.i(g,pe,"x2");this.tt=g}if(i!==f){s&&u.i(i,pe,"y2");this.ut=i}}else{if(b!==f){s&&u.i(b,pe,"ex");this.Sk=b}else this.Sk=0;if(c!==f){s&&u.i(c,pe,"ey");this.Tk=c}else this.Tk=0;if(d!==f){s&&u.i(d,pe,"x1");
this.Hj=d}if(e!==f){s&&u.i(e,pe,"y1");this.Ij=e}if(g!==f){s&&u.i(g,pe,"x2");this.Qk=g}if(i!==f){s&&u.i(i,pe,"y2");this.Rk=i}}this.Ea=h;this.ii=o}u.H("PathSegment",pe);pe.prototype.copy=pe.prototype.copy=function(){var a=new pe;a.I=this.I;if(this.I===de){a.Bg=this.Bg;a.Dg=this.Dg;a.Ql=this.Ql;a.Rl=this.Rl;a.tt=this.tt;a.ut=this.ut}else{a.Sk=this.Sk;a.Tk=this.Tk;a.Hj=this.Hj;a.Ij=this.Ij;a.Qk=this.Qk;a.Rk=this.Rk}a.Ea=this.Ea;a.ii=this.ii;return a};
pe.prototype.toString=function(a){switch(this.type){case Rd:a="M"+this.aa.toFixed(a)+" "+this.ba.toFixed(a);break;case Qd:a="L"+this.aa.toFixed(a)+" "+this.ba.toFixed(a);break;case Sd:a="C"+this.zd.toFixed(a)+" "+this.rf.toFixed(a)+" "+this.Hn.toFixed(a)+" "+this.In.toFixed(a)+" "+this.aa.toFixed(a)+" "+this.ba.toFixed(a);break;case Td:case de:a="A";break;default:a=this.type.toString()}return a+(this.ii?"z":"")};var Rd;pe.Move=Rd=u.l(pe,"Move",0);var Qd;pe.Line=Qd=u.l(pe,"Line",1);var Sd;
pe.Bezier=Sd=u.l(pe,"Bezier",2);var Td;pe.QuadraticBezier=Td=u.l(pe,"QuadraticBezier",3);var de;pe.Arc=de=u.l(pe,"Arc",4);pe.prototype.freeze=function(){this.Ha=h;return this};pe.prototype.xa=function(){this.Ha=o;return this};pe.prototype.close=pe.prototype.close=function(){this.ii=h;return this};
function ee(a){if(a.Gv&&a.Ea===o)return a.Gv;for(var b=a.Ql,c=a.Rl,d=a.vy,e=a.hk,g=a.hk+a.Bl,i=Math.PI,e=e*(i/180),g=g*(i/180),j=e<g?1:-1,k=[],l=i/2,n=e,e=Math.min(i*2+1E-5,Math.abs(g-e));e>1E-5;){var g=n+j*Math.min(e,l),q=(g-n)/2,p=d*Math.cos(q),t=d*Math.sin(q),w=0.5522847498*Math.tan(q),i=p+w*t,p=-t+w*p,t=-p,w=q+n,q=Math.cos(w),w=Math.sin(w);k.push({Gl:b+d*Math.cos(n),Hl:c+d*Math.sin(n),av:b+i*q-p*w,cv:c+i*w+p*q,bv:b+i*q-t*w,dv:c+i*w+t*q,nk:b+d*Math.cos(g),ok:c+d*Math.sin(g)});e=e-Math.abs(g-n);
n=g}a.Gv=k;return a.Gv}u.a(pe,"isClosed",pe.prototype.SB);u.defineProperty(pe,{SB:"isClosed"},r("ii"),function(a){if(this.ii!==a){this.ii=a;this.Ea=h}});u.a(pe,"type",pe.prototype.type);u.defineProperty(pe,{type:"type"},r("I"),function(a){s&&u.Sa(a,pe,pe,"type");u.v(this,a);this.I=a;this.Ea=h});u.a(pe,"endX",pe.prototype.aa);u.defineProperty(pe,{aa:"endX"},r("Sk"),function(a){s&&u.i(a,pe,"endX");u.v(this,a);this.Sk=a;this.Ea=h});u.a(pe,"endY",pe.prototype.ba);
u.defineProperty(pe,{ba:"endY"},r("Tk"),function(a){s&&u.i(a,pe,"endY");u.v(this,a);this.Tk=a;this.Ea=h});u.defineProperty(pe,{zd:"point1X"},r("Hj"),function(a){s&&u.i(a,pe,"point1X");u.v(this,a);this.Hj=a;this.Ea=h});u.defineProperty(pe,{rf:"point1Y"},r("Ij"),function(a){s&&u.i(a,pe,"point1Y");u.v(this,a);this.Ij=a;this.Ea=h});u.defineProperty(pe,{Hn:"point2X"},r("Qk"),function(a){s&&u.i(a,pe,"point2X");u.v(this,a);this.Qk=a;this.Ea=h});
u.defineProperty(pe,{In:"point2Y"},r("Rk"),function(a){s&&u.i(a,pe,"point2Y");u.v(this,a);this.Rk=a;this.Ea=h});u.defineProperty(pe,{za:"centerX"},r("Ql"),function(a){s&&u.i(a,pe,"centerX");u.v(this,a);this.Ql=a;this.Ea=h});u.defineProperty(pe,{Aa:"centerY"},r("Rl"),function(a){s&&u.i(a,pe,"centerY");u.v(this,a);this.Rl=a;this.Ea=h});u.defineProperty(pe,{vy:"radiusX"},r("tt"),function(a){s&&u.i(a,pe,"radiusX");u.v(this,a);this.tt=a;this.Ea=h});
u.defineProperty(pe,{cG:"radiusY"},r("ut"),function(a){s&&u.i(a,pe,"radiusY");u.v(this,a);this.ut=a;this.Ea=h});u.defineProperty(pe,{hk:"startAngle"},r("Bg"),function(a){s&&u.i(a,pe,"startAngle");u.v(this,a);this.Bg=a;this.Ea=h});u.defineProperty(pe,{Bl:"sweepAngle"},r("Dg"),function(a){s&&u.i(a,pe,"sweepAngle");u.v(this,a);this.Dg=a;this.Ea=h});
function qe(){this.L=m;this.bx=(new E(0,0)).freeze();this.Uv=(new E(0,0)).freeze();this.gs=this.at=0;this.Ns="";this.vs=this.ks=0;this.ai=this.Bs=o;this.ei=m;this.Mt=0;this.cf=this.Jt=m}u.H("InputEvent",qe);qe.prototype.copy=qe.prototype.copy=function(){var a=new qe;a.L=this.L;a.bx=this.ad.copy().freeze();a.Uv=this.C.copy().freeze();a.at=this.at;a.gs=this.gs;a.Ns=this.Ns;a.ks=this.ks;a.vs=this.vs;a.Bs=this.Bs;a.ai=this.ai;a.ei=this.ei;a.Mt=this.Mt;a.Jt=this.Jt;a.cf=this.cf;return a};
qe.prototype.toString=function(){var a="^";this.Vg&&(a=a+("M:"+this.Vg));this.button&&(a=a+("B:"+this.button));this.key&&(a=a+("K:"+this.key));this.He&&(a=a+("C:"+this.He));this.Ei&&(a=a+("D:"+this.Ei));this.td&&(a=a+"h");this.bubbles&&(a=a+"b");this.C!==m&&(a=a+("@"+this.C.toString()));return a};u.a(qe,"diagram",qe.prototype.b);u.defineProperty(qe,{b:"diagram"},r("L"),ba("L"));u.a(qe,"viewPoint",qe.prototype.ad);u.defineProperty(qe,{ad:"viewPoint"},r("bx"),function(a){u.c(a,E,qe,"viewPoint");this.bx.Oa(a)});
u.a(qe,"documentPoint",qe.prototype.C);u.defineProperty(qe,{C:"documentPoint"},r("Uv"),function(a){u.c(a,E,qe,"documentPoint");this.Uv.Oa(a)});u.a(qe,"modifiers",qe.prototype.Vg);u.defineProperty(qe,{Vg:"modifiers"},r("at"),ba("at"));u.a(qe,"button",qe.prototype.button);u.defineProperty(qe,{button:"button"},r("gs"),ba("gs"));u.a(qe,"key",qe.prototype.key);u.defineProperty(qe,{key:"key"},r("Ns"),ba("Ns"));u.a(qe,"clickCount",qe.prototype.He);u.defineProperty(qe,{He:"clickCount"},r("ks"),ba("ks"));
u.a(qe,"delta",qe.prototype.Ei);u.defineProperty(qe,{Ei:"delta"},r("vs"),ba("vs"));u.a(qe,"handled",qe.prototype.td);u.defineProperty(qe,{td:"handled"},r("Bs"),ba("Bs"));u.a(qe,"bubbles",qe.prototype.bubbles);u.defineProperty(qe,{bubbles:"bubbles"},r("ai"),ba("ai"));u.a(qe,"event",qe.prototype.event);u.defineProperty(qe,{event:"event"},r("ei"),ba("ei"));u.a(qe,"timestamp",qe.prototype.timestamp);u.defineProperty(qe,{timestamp:"timestamp"},r("Mt"),ba("Mt"));u.a(qe,"targetDiagram",qe.prototype.vf);
u.defineProperty(qe,{vf:"targetDiagram"},r("Jt"),ba("Jt"));u.a(qe,"targetObject",qe.prototype.$c);u.defineProperty(qe,{$c:"targetObject"},r("cf"),ba("cf"));u.m(qe,{Wj:"control"},function(){return(this.Vg&1)!==0});u.m(qe,{shift:"shift"},function(){return(this.Vg&4)!==0});u.m(qe,{alt:"alt"},function(){return(this.Vg&2)!==0});u.m(qe,{tJ:"meta"},function(){return(this.Vg&8)!==0});u.m(qe,{left:"left"},function(){return this.button===0});u.m(qe,{uJ:"middle"},function(){return this.button===1});
u.m(qe,{right:"right"},function(){return this.button===2});function re(){this.L=m;this.pb="";this.nt=this.Ft=m;this.hs=o}u.H("DiagramEvent",re);re.prototype.copy=re.prototype.copy=function(){var a=new re;a.L=this.L;a.pb=this.pb;a.Ft=this.Ft;a.nt=this.nt;a.hs=this.hs;return a};re.prototype.toString=function(){var a="*"+this.name;this.cancel&&(a=a+"x");this.Uu!==m&&(a=a+(":"+this.Uu.toString()));this.Hu!==m&&(a=a+("("+this.Hu.toString()+")"));return a};u.a(re,"diagram",re.prototype.b);
u.defineProperty(re,{b:"diagram"},r("L"),ba("L"));u.a(re,"name",re.prototype.name);u.defineProperty(re,{name:"name"},r("pb"),ba("pb"));u.a(re,"subject",re.prototype.Uu);u.defineProperty(re,{Uu:"subject"},r("Ft"),ba("Ft"));u.a(re,"parameter",re.prototype.Hu);u.defineProperty(re,{Hu:"parameter"},r("nt"),ba("nt"));u.a(re,"cancel",re.prototype.cancel);u.defineProperty(re,{cancel:"cancel"},r("hs"),ba("hs"));function se(){this.clear()}u.H("ChangedEvent",se);var te;
se.Transaction=te=u.l(se,"Transaction",-1);var ue;se.Property=ue=u.l(se,"Property",0);var ve;se.Insert=ve=u.l(se,"Insert",1);var we;se.Remove=we=u.l(se,"Remove",2);se.prototype.clear=se.prototype.clear=function(){this.is=ue;this.st=this.$s="";this.dt=this.et=this.kt=this.lt=this.jt=this.L=this.Of=m};
se.prototype.copy=se.prototype.copy=function(){var a=new se;a.Of=this.Of;a.L=this.L;a.is=this.is;a.$s=this.$s;a.st=this.st;a.jt=this.jt;var b=this.lt;a.lt=b instanceof Object&&b.B!==f?b.B():b;b=this.kt;a.kt=b instanceof Object&&b.B!==f?b.B():b;b=this.et;a.et=b instanceof Object&&b.B!==f?b.B():b;b=this.dt;a.dt=b instanceof Object&&b.B!==f?b.B():b;return a};
se.prototype.toString=function(){var a="",a=this.Lc===te?a+"* ":this.Lc===ue?a+(this.J!==m?"!m":"!d"):a+((this.J!==m?"!m":"!d")+this.Lc);this.propertyName&&typeof this.propertyName==="string"&&(a=a+(" "+this.propertyName));this.he&&this.he!==this.propertyName&&(a=a+(" "+this.he));a=a+": ";if(this.Lc===te)this.oldValue!==m&&(a=a+(" "+this.oldValue));else{this.object!==m&&(a=a+xe(this.object));this.oldValue!==m&&(a=a+("  old: "+xe(this.oldValue)));this.Pe!==m&&(a=a+(" "+this.Pe));this.newValue!==m&&
(a=a+("  new: "+xe(this.newValue)));this.Oe!==m&&(a=a+(" "+this.Oe))}return a};se.prototype.getValue=se.prototype.$=function(a){return a?this.oldValue:this.newValue};se.prototype.getParam=se.prototype.GI=function(a){return a?this.Pe:this.Oe};se.prototype.canUndo=se.prototype.Uj=function(){return this.J!==m||this.b!==m?h:o};se.prototype.undo=se.prototype.lk=function(){this.Uj()&&(this.J!==m?this.J.Vq(this,h):this.b!==m&&this.b.Vq(this,h))};
se.prototype.canRedo=se.prototype.Tj=function(){return this.J!==m||this.b!==m?h:o};se.prototype.redo=se.prototype.Jn=function(){this.Tj()&&(this.J!==m?this.J.Vq(this,o):this.b!==m&&this.b.Vq(this,o))};u.a(se,"model",se.prototype.J);u.defineProperty(se,{J:"model"},r("Of"),ba("Of"));u.a(se,"diagram",se.prototype.b);u.defineProperty(se,{b:"diagram"},r("L"),ba("L"));u.a(se,"change",se.prototype.Lc);u.defineProperty(se,{Lc:"change"},r("is"),function(a){s&&u.Sa(a,se,se,"change");this.is=a});
u.a(se,"modelChange",se.prototype.he);u.defineProperty(se,{he:"modelChange"},r("$s"),function(a){s&&u.e(a,"string",se,"modelChange");this.$s=a});u.a(se,"propertyName",se.prototype.propertyName);u.defineProperty(se,{propertyName:"propertyName"},r("st"),function(a){s&&typeof a!=="string"&&u.c(a,Function,se,"propertyName");this.st=a});u.a(se,"object",se.prototype.object);u.defineProperty(se,{object:"object"},r("jt"),ba("jt"));u.a(se,"oldValue",se.prototype.oldValue);
u.defineProperty(se,{oldValue:"oldValue"},r("lt"),ba("lt"));u.a(se,"oldParam",se.prototype.Pe);u.defineProperty(se,{Pe:"oldParam"},r("kt"),ba("kt"));u.a(se,"newValue",se.prototype.newValue);u.defineProperty(se,{newValue:"newValue"},r("et"),ba("et"));u.a(se,"newParam",se.prototype.Oe);u.defineProperty(se,{Oe:"newParam"},r("dt"),ba("dt"));
function D(a){u.Fb(this);this.Ov=this.pb="";this.wj=o;this.Rf=[];this.wc=new ka(m,Object);this.Np="key";this.qs=this.Qs=m;this.Lp="category";this.kg=new ka(m,la);this.ji=m;this.Fk=this.ti=o;this.Yw=m;this.va=new ye;if(a!==f)this.Xg=a}u.H("Model",D);D.prototype.clear=D.prototype.clear=function(){this.Rf=[];this.wc.clear();this.kg.clear();this.va.clear()};
D.prototype.writeJsonProtected=D.prototype.AD=function(){var a="";this.name!==""&&(a=a+(',\n  "name": '+this.quote(this.name)));this.hl!==""&&(a=a+(',\n  "dataFormat": '+this.quote(this.hl)));this.Ja&&(a=a+(',\n  "isReadOnly": '+this.Ja));this.ul!=="key"&&typeof this.ul==="string"&&(a=a+(',\n  "nodeKeyProperty": '+this.quote(this.ul)));this.tl!=="category"&&typeof this.tl==="string"&&(a=a+(',\n  "nodeCategoryProperty": '+this.quote(this.tl)));return a};
D.prototype.Vy=function(){return',\n  "nodeDataArray": '+ze(this,this.Xg,h)};D.prototype.readJsonProtected=D.prototype.BC=function(a){if(a.name)this.name=a.name;if(a.dataFormat)this.hl=a.dataFormat;if(a.isReadOnly)this.Ja=a.isReadOnly;if(a.nodeKeyProperty)this.ul=a.nodeKeyProperty;if(a.nodeCategoryProperty)this.tl=a.nodeCategoryProperty};D.prototype.wy=function(a){if(a.nodeDataArray){a=a.nodeDataArray;Ae(this,a);this.Xg=a}};
D.prototype.toString=function(a){a===f&&(a=0);if(a>=2)return this.hD();var b=(this.name!==""?this.name:"")+" Model";if(a>0){var b=b+"\n node data:",a=this.Xg,c=u.vb(a),d;for(d=0;d<c;d++)var e=u.lb(a,d),b=b+(" "+this.Ub(e)+":"+xe(e))}return b};D.prototype.toJson=D.prototype.hD=function(a){a===f&&(a=this.constructor===D?"go.Model":this.constructor===P?"go.GraphLinksModel":u.Ii(this));return'{ "class": '+this.quote(a)+this.writeJsonProtected()+this.Vy()+"}"};
D.fromJson=function(a,b){b===f&&(b=m);u.e(a,"string",D,"fromJson:s");b&&u.c(b,D,D,"fromJson:model");var c=m;if(window&&window.JSON&&window.JSON.parse)try{c=window.JSON.parse(a)}catch(d){s&&u.trace("JSON.parse error: "+d.toString())}else u.trace("WARNING: no JSON.parse available");if(c===m)return m;if(b===m){var e;e=m;var g=c["class"];if(typeof g==="string")try{var i=m;if(g.indexOf("go.")===0){g=g.substr(3);i=ga[g]}else(i=ga[g])||(i=window[g]);typeof i==="function"&&(e=new i)}catch(j){}e===m||e instanceof
D?b=e:u.g("Unable to construct a Model of declared class: "+c["class"])}b===m&&(b=new P);b.readJsonProtected(c);b.wy(c);return b};
function Ae(a,b){if(u.isArray(b))for(var c=u.vb(b),d=0;d<c;d++){var e=u.lb(b,d);e instanceof Object&&u.IE(b,d,Ae(a,e))}else if(b instanceof Object){for(d in b){e=b[d];e instanceof Object&&(b[d]=Ae(a,e))}if(typeof b!=="object")c=b;else{e=b;d=b["class"];if(d==="NaN")e=NaN;else if(d==="go.Point")e=new E(b.x,b.y);else if(d==="go.Size")e=new eb(b.width,b.height);else if(d==="go.Rect")e=new J(b.x,b.y,b.width,b.height);else if(d==="go.Margin")e=new qb(b.top,b.right,b.bottom,b.left);else if(d==="go.Spot")e=
typeof b["enum"]==="string"?Lb(b["enum"]):new K(b.x,b.y,b.offsetX,b.offsetY);else if(d==="go.Brush"){e=new Be;e.type=u.Lx(Be,b.type);if(b.start instanceof K)e.start=b.start;if(b.end instanceof K)e.end=b.end;if(typeof b.startRadius==="number")e.Pn=b.startRadius;if(typeof b.endRadius==="number")e.bn=b.endRadius;if(d=b.colorStops)for(c in d)e.addColorStop(parseFloat(c),d[c])}else if(d==="go.Geometry"){e=typeof b.path==="string"?Od(b.path):new md;e.type=u.Lx(md,b.type);if(typeof b.startX==="number")e.La=
b.startX;if(typeof b.startY==="number")e.Ma=b.startY;if(typeof b.endX==="number")e.aa=b.endX;if(typeof b.endY==="number")e.ba=b.endY;if(b.spot1 instanceof K)e.n=b.spot1;if(b.spot2 instanceof K)e.o=b.spot2}c=e}return c}return b}D.prototype.quote=function(a){for(var b="",c=a.length,d=0;d<c;d++)var e=a[d],b=e==='"'||e==="\\"?b+("\\"+e):e==="\b"?b+"\\b":e==="\f"?b+"\\f":e==="\n"?b+"\\n":e==="\r"?b+"\\r":e==="\t"?b+"\\t":b+e;return'"'+b+'"'};
D.prototype.writeJsonValue=D.prototype.BD=function(a){var b;if(a===f)b="undefined";else if(a===m)b="null";else if(a===h)b="true";else if(a===o)b="false";else if(typeof a==="string")b=this.quote(a);else if(typeof a==="number")b=a===Infinity?"9e9999":a===-Infinity?"-9e9999":isNaN(a)?'{"class":"NaN"}':a.toString();else if(u.isArray(a))b=ze(this,a);else if(a instanceof Object){var c=a;if(c instanceof E)a={"class":"go.Point",x:c.x,y:c.y};else if(c instanceof eb)a={"class":"go.Size",width:c.width,height:c.height};
else if(c instanceof J)a={"class":"go.Rect",x:c.x,y:c.y,width:c.width,height:c.height};else if(c instanceof qb)a={"class":"go.Margin",top:c.top,right:c.right,bottom:c.bottom,left:c.left};else if(c instanceof K)a=Nb(c)?{"class":"go.Spot",x:c.x,y:c.y,offsetX:c.offsetX,offsetY:c.offsetY}:{"class":"go.Spot","enum":c.toString()};else if(c instanceof Be){a={"class":"go.Brush",type:c.type.name};if(c.type===Le)a.color=c.color;else if(c.type===Me||c.type===Ne){a.start=c.start;a.end=c.end;if(c.type===Ne){if(c.Pn!==
0)a.startRadius=c.Pn;if(!isNaN(c.bn))a.endRadius=c.bn}}if(c.Ym!==m){for(var d={},c=c.Ym.f;c.next();)d[c.key.toString()]=c.value;a.colorStops=d}}else if(c instanceof md){a={"class":"go.Geometry",type:c.type.name};if(c.La!==0)a.startX=c.La;if(c.Ma!==0)a.startY=c.Ma;if(c.aa!==0)a.endX=c.aa;if(c.ba!==0)a.endY=c.ba;if(!c.n.u(Vb))a.spot1=c.n;if(!c.o.u(fc))a.spot2=c.o;c.qc.count>0&&(a.path=a.toString())}d="{";c=h;for(b in a){var e=u.Wa(a,b);if(!(e===f||b==="__gohashid"||b[0]==="_"||typeof e==="function")){c?
c=o:d=d+", ";d=d+('"'+b+'":'+this.BD(e))}}b=d+"}"}else b=typeof a==="function"?"null":a.toString();return b};function ze(a,b,c){var d=u.vb(b),e="[ ";c&&d>1&&(e=e+"\n");for(var g=0;g<d;g++){var i=u.lb(b,g);if(i!==f){if(g>0){e=e+",";c&&(e=e+"\n")}e=e+a.BD(i)}}c&&d>1&&(e=e+"\n");return e+" ]"}u.a(D,"name",D.prototype.name);u.defineProperty(D,{name:"name"},r("pb"),function(a){var b=this.pb;if(b!==a){u.e(a,"string",D,"name");this.pb=a;this.d("name",b,a)}});u.a(D,"dataFormat",D.prototype.hl);
u.defineProperty(D,{hl:"dataFormat"},r("Ov"),function(a){var b=this.Ov;if(b!==a){u.e(a,"string",D,"dataFormat");this.Ov=a;this.d("dataFormat",b,a)}});u.a(D,"isReadOnly",D.prototype.Ja);u.defineProperty(D,{Ja:"isReadOnly"},r("wj"),function(a){var b=this.wj;if(b!==a){u.e(a,"boolean",D,"isReadOnly");this.wj=a;this.d("isReadOnly",b,a)}});D.prototype.addChangedListener=D.prototype.hx=function(a){u.e(a,"function",D,"addChangedListener:listener");if(this.ji===m)this.ji=new z("function");this.ji.add(a)};
D.prototype.removeChangedListener=D.prototype.yy=function(a){u.e(a,"function",D,"removeChangedListener:listener");if(this.ji!==m){this.ji.remove(a);if(this.ji.count===0)this.ji=m}};D.prototype.Yt=function(a){this.ab||this.va.JB(a);if(this.ji!==m)for(var b=this.ji.f;b.next();){var c=b.value;c(a)}};D.prototype.raiseChangedEvent=D.prototype.ke=function(a,b,c,d,e,g,i){Oe(this,"",a,b,c,d,e,g,i)};D.prototype.raiseChanged=D.prototype.d=function(a,b,c,d,e){Oe(this,"",ue,a,this,b,c,d,e)};
D.prototype.raiseDataChanged=D.prototype.IJ=function(a,b,c,d,e,g){Oe(this,"",ue,b,a,c,d,e,g)};function Oe(a,b,c,d,e,g,i,j,k){j===f&&(j=m);k===f&&(k=m);var l=new se;l.J=a;l.Lc=c;l.he=b;l.propertyName=d;l.object=e;l.oldValue=g;l.Pe=j;l.newValue=i;l.Oe=k;a.Yt(l)}u.a(D,"undoManager",D.prototype.va);u.defineProperty(D,{va:"undoManager"},r("Yw"),function(a){var b=this.Yw;if(b!==a){u.c(a,ye,D,"undoManager");b!==m&&b.iG(this);this.Yw=a;a!==m&&a.lE(this)}});u.a(D,"skipsUndoManager",D.prototype.ab);
u.defineProperty(D,{ab:"skipsUndoManager"},r("ti"),function(a){u.e(a,"boolean",D,"skipsUndoManager");this.ti=a});D.prototype.Vq=function(a,b){if(a!==m&&a.J===this){var c=this.Fk;try{this.Fk=h;this.rx(a,b)}finally{this.Fk=c}}};
D.prototype.rx=function(a,b){if(a.Lc===ue){var c=a.object,d=a.propertyName,e=a.$(b);u.Ra(c,d,e)}else if(a.Lc===ve)if(a.he==="nodeDataArray"){c=a.newValue;if(c instanceof Object){d=this.Ub(c);if(b){u.Kh(this.Rf,a.Oe);this.wc.remove(d)}else{u.Jh(this.Rf,a.Oe,c);this.wc.add(d,c)}}}else if(a.he===""){c=u.Wa(a.object,a.propertyName);if(u.isArray(c)){d=a.newValue;e=a.Oe;b?u.Kh(c,e):u.Jh(c,e,d)}}else u.g("unknown ChangedEvent.Insert object: "+a.toString());else if(a.Lc===we)if(a.he==="nodeDataArray"){c=
a.oldValue;if(c instanceof Object){d=this.Ub(c);if(b){u.Jh(this.Rf,a.Pe,c);this.wc.add(d,c)}else{u.Kh(this.Rf,a.Pe);this.wc.remove(d)}}}else if(a.he===""){c=u.Wa(a.object,a.propertyName);if(u.isArray(c)){d=a.oldValue;e=a.Pe;b?u.Jh(c,e,d):u.Kh(c,e)}}else u.g("unknown ChangedEvent.Remove object: "+a.toString());else a.Lc!==te&&u.g("unknown ChangedEvent: "+a.toString())};D.prototype.startTransaction=D.prototype.Eb=function(a){return this.va.Eb(a)};D.prototype.commitTransaction=D.prototype.Kd=function(a){return this.va.Kd(a)};
D.prototype.rollbackTransaction=D.prototype.Hr=function(){return this.va.Hr()};D.prototype.updateTargetBindings=D.prototype.fc=function(a,b){b===f&&(b="");Oe(this,"SourceChanged",te,b,a,m,m)};u.a(D,"nodeKeyProperty",D.prototype.ul);u.defineProperty(D,{ul:"nodeKeyProperty"},r("Np"),function(a){var b=this.Np;if(b!==a){Pe(a,D,"nodeKeyProperty");this.wc.count>0&&u.g("Cannot set Model.nodeKeyProperty when there is existing node data");this.Np=a;this.d("nodeKeyProperty",b,a)}});
function Pe(a,b,c){typeof a!=="string"&&typeof a!=="function"&&u.sc(a,"string or function",b,c)}D.prototype.getKeyForNodeData=D.prototype.Ub=function(a){if(a!==m){var b=this.Np;if(b!==""){b=u.Wa(a,b);if(b!==f){if(Qe(b))return b;s&&u.trace("Key value for node data "+a+" is not a number or a string: "+b)}}}};u.a(D,"makeUniqueKeyFunction",D.prototype.PF);
u.defineProperty(D,{PF:"makeUniqueKeyFunction"},r("Qs"),function(a){var b=this.Qs;if(b!==a){a!==m&&u.e(a,"function",D,"makeUniqueKeyFunction");this.Qs=a;this.d("makeUniqueKeyFunction",b,a)}});function Qe(a){return typeof a==="number"||typeof a==="string"}D.prototype.containsNodeData=D.prototype.Ai=function(a){a=this.Ub(a);return a===f?o:this.wc.contains(a)};
D.prototype.findNodeDataForKey=D.prototype.Rg=function(a){a===m&&u.g("Model.findNodeDataForKey:key must not be null");return a===f||!Qe(a)?m:this.wc.$(a)};u.a(D,"nodeDataArray",D.prototype.Xg);
u.defineProperty(D,{Xg:"nodeDataArray"},r("Rf"),function(a){var b=this.Rf;if(b!==a){u.PA(a,D,"nodeDataArray");this.wc.clear();this.Py();for(var c=u.vb(a),d=0;d<c;d++){var e=u.lb(a,d);if(!(e instanceof Object)){u.g("Model.nodeDataArray must only contain Objects, not: "+e);return}u.nn(e)}this.Rf=a;for(var g=new z(Object),d=0;d<c;d++){var e=u.lb(a,d),i=this.Ub(e);i===f?g.add(e):this.wc.$(i)!==m?g.add(e):this.wc.add(i,e)}for(d=g.f;d.next();){e=d.value;this.hC(e);g=this.Ub(e);this.wc.add(g,e)}Oe(this,
"nodeDataArray",ue,"nodeDataArray",this,b,a);for(d=0;d<c;d++){e=u.lb(a,d);this.Ku(e);this.Ju(e)}this.RA();if(!(a instanceof Array))this.Ja=h}});
D.prototype.makeNodeDataKeyUnique=D.prototype.hC=function(a){if(a!==m){var b=this.Np;if(b!==""){var c=this.Ub(a);if(c===f||this.wc.contains(c)){var d=this.Qs;if(d!==m){c=d(this,a);if(c!==f&&c!==m&&!this.wc.contains(c)){u.Ra(a,b,c);return}}if(typeof c==="string"){for(d=2;this.wc.contains(c+d);)d++;u.Ra(a,b,c+d)}else if(c===f||typeof c==="number"){for(d=-this.wc.count-1;this.wc.contains(d);)d--;u.Ra(a,b,d)}else u.g("Model.getKeyForNodeData returned something other than a string or a number: "+c)}}}};
D.prototype.addNodeData=D.prototype.Tt=function(a){if(a!==m){u.nn(a);var b=this.Ub(a);if(!(b!==f&&this.wc.$(b)===a)){this.hC(a);b=this.Ub(a);this.wc.add(b,a);b=u.vb(this.Rf);u.Jh(this.Rf,b,a);Oe(this,"nodeDataArray",ve,"nodeDataArray",this,m,a,m,b);this.Ku(a);this.Ju(a)}}};
D.prototype.removeNodeData=D.prototype.GC=function(a){if(a!==m){var b=this.Ub(a);if(b!==f&&this.wc.contains(b)){this.wc.remove(b);b=u.mx(this.Rf,a);if(!(b<0)){u.Kh(this.Rf,b);Oe(this,"nodeDataArray",we,"nodeDataArray",this,a,m,b,m);this.Qy(a)}}}};D.prototype.Py=aa();D.prototype.Ku=aa();D.prototype.Ju=aa();D.prototype.Qy=aa();D.prototype.delayReference=D.prototype.$f=function(a,b){if(a!==f){var c=this.kg.$(a);if(c===m){c=new la;this.kg.add(a,c)}c.add(b)}};
D.prototype.forgetDelayedReference=D.prototype.Sg=function(a,b){if(a!==f){var c=this.kg.$(a);if(c instanceof la)if(b===f||b===m)this.kg.remove(a);else{c.remove(b);c.count===0&&this.kg.remove(a)}}};D.prototype.dumpDelayedReferences=D.prototype.nI=function(){u.trace("DelayedReferences ("+this.kg.count+")");for(var a=this.kg.f;a.next();){for(var b="",c=a.value.f;c.next();)b=b+(xe(c.value)+", ");u.trace("  "+a.key+": "+b)}};
D.prototype.findDelayedReferences=D.prototype.uB=function(a){if(a===f)return m;a=this.kg.$(a);return a instanceof la?a:m};D.prototype.clearUnresolvedReferences=D.prototype.RA=function(a){a===f?this.kg.clear():this.kg.remove(a)};u.a(D,"copyNodeDataFunction",D.prototype.SE);u.defineProperty(D,{SE:"copyNodeDataFunction"},r("qs"),function(a){var b=this.qs;if(b!==a){a!==m&&u.e(a,"function",D,"copyNodeDataFunction");this.qs=a;this.d("copyNodeDataFunction",b,a)}});
D.prototype.copyNodeData=D.prototype.Zm=function(a){if(a===m)return m;var b=m,b=this.qs;if(b!==m)b=b(a);else{var b=new a.constructor,c;for(c in a)u.Ra(b,c,u.Wa(a,c))}b&&u.Fb(b);return b};
D.prototype.setDataProperty=D.prototype.tG=function(a,b,c){if(s){u.e(a,"object",D,"setDataProperty:data");u.e(b,"string",D,"setDataProperty:propname");b===""&&u.g("Model.setDataProperty: property name must not be an empty string when setting "+a+" to "+c)}if(this.Ai(a)){if(b===this.ul)u.g("Model.setDataProperty: property name must not be the key for the node data: "+b);else if(b===this.tl&&typeof c==="string"){this.YC(a,c);return}var d=u.Wa(a,b);if(d!==c){u.Ra(a,b,c);Oe(this,"",ue,b,a,d,c)}}else u.Ra(a,
b,c)};D.prototype.insertArrayItem=D.prototype.TI=function(a,b,c){if(s){u.isArray(a)||u.g("Model.insertArrayItem:arr must be an Array-like object, not: "+a);u.i(b,D,"insertArrayItem:idx")}b<0&&(b=u.vb(a));u.Jh(a,b,c);Oe(this,"",ve,"",a,m,c,m,b)};
D.prototype.removeArrayItem=D.prototype.MJ=function(a,b){b===f&&(b=-1);if(s){u.isArray(a)||u.g("Model.removeArrayItem:arr must be an Array-like object, not: "+a);u.i(b,D,"removeArrayItem:idx")}b===-1&&(b=u.vb(a)-1);var c=u.lb(a,b);u.Kh(a,b);Oe(this,"",we,"",a,c,m,b,m)};u.a(D,"nodeCategoryProperty",D.prototype.tl);u.defineProperty(D,{tl:"nodeCategoryProperty"},r("Lp"),function(a){var b=this.Lp;if(b!==a){Pe(a,D,"nodeCategoryProperty");this.Lp=a;this.d("nodeCategoryProperty",b,a)}});
D.prototype.getCategoryForNodeData=D.prototype.CB=function(a){if(a===m)return"";var b=this.Lp;if(b==="")return"";b=u.Wa(a,b);if(b===f)return"";if(typeof b==="string")return b;s&&u.trace("getCategoryForNodeData found a non-string category for "+a+": "+b);return""};
D.prototype.setCategoryForNodeData=D.prototype.YC=function(a,b){u.e(b,"string",D,"setCategoryForNodeData:val");if(a!==m){var c=this.Lp;if(c!=="")if(this.Ai(a)){var d=u.Wa(a,c);if(d!==b){u.Ra(a,c,b);Oe(this,"nodeCategory",ue,c,a,d,b)}}else u.Ra(a,c,b)}};function P(a,b){D.call(this);this.yj=[];this.rp=new la(Object);this.ps=m;this.zj="from";this.Bj="to";this.up=this.tp="";this.pp="category";this.th=this.gt="";this.ft="isGroup";this.Ej="group";if(a!==f)this.Xg=a;if(b!==f)this.cg=b}
u.H("GraphLinksModel",P);u.ma(P,D);P.prototype.clear=P.prototype.clear=function(){D.prototype.clear.call(this);this.yj=[];this.rp.clear()};P.prototype.toString=function(a){a===f&&(a=0);if(a>=2)return this.hD();var b=(this.name!==""?this.name:"")+" GraphLinksModel";if(a>0){var b=b+"\n node data:",a=this.Xg,c=u.vb(a),d;for(d=0;d<c;d++)var e=u.lb(a,d),b=b+(" "+this.Ub(e)+":"+xe(e));b=b+"\n link data:";a=this.cg;c=u.vb(a);for(d=0;d<c;d++){e=u.lb(a,d);b=b+(" "+this.ln(e)+"--\>"+this.mn(e))}}return b};
P.prototype.writeJsonProtected=P.prototype.AD=function(){var a=D.prototype.AD.call(this),b="";this.sn!=="category"&&typeof this.sn==="string"&&(b=b+(',\n  "linkCategoryProperty": '+this.quote(this.sn)));this.tn!=="from"&&typeof this.tn==="string"&&(b=b+(',\n "linkFromKeyProperty": '+this.quote(this.tn)));this.xn!=="to"&&typeof this.xn==="string"&&(b=b+(',\n  "linkToKeyProperty": '+this.quote(this.xn)));this.un!==""&&typeof this.un==="string"&&(b=b+(',\n  "linkFromPortIdProperty": '+this.quote(this.un)));
this.yn!==""&&typeof this.yn==="string"&&(b=b+(',\n  "linkToPortIdProperty": '+this.quote(this.yn)));this.Gn!==""&&typeof this.Gn==="string"&&(b=b+(',\n "nodeIsLinkLabelProperty": '+this.quote(this.Gn)));this.vn!==""&&typeof this.vn==="string"&&(b=b+(',\n  "linkLabelKeysProperty": '+this.quote(this.vn)));this.Fn!=="isGroup"&&typeof this.Fn==="string"&&(b=b+(',\n "nodeIsGroupProperty": '+this.quote(this.Fn)));this.En!=="group"&&typeof this.En==="string"&&(b=b+(',\n  "nodeGroupKeyProperty": '+this.quote(this.En)));
return a+b};P.prototype.Vy=function(){var a=D.prototype.Vy.call(this),b=',\n  "linkDataArray": '+ze(this,this.cg,h);return a+b};
P.prototype.readJsonProtected=P.prototype.BC=function(a){D.prototype.BC.call(this,a);if(a.linkFromKeyProperty)this.tn=a.linkFromKeyProperty;if(a.linkToKeyProperty)this.xn=a.linkToKeyProperty;if(a.linkFromPortIdProperty)this.un=a.linkFromPortIdProperty;if(a.linkToPortIdProperty)this.yn=a.linkToPortIdProperty;if(a.linkCategoryProperty)this.sn=a.linkCategoryProperty;if(a.nodeIsLinkLabelProperty)this.Gn=a.nodeIsLinkLabelProperty;if(a.linkLabelKeysProperty)this.vn=a.linkLabelKeysProperty;if(a.nodeIsGroupProperty)this.Fn=
a.nodeIsGroupProperty;if(a.nodeGroupKeyProperty)this.En=a.nodeGroupKeyProperty};P.prototype.wy=function(a){D.prototype.wy.call(this,a);if(a.linkDataArray){a=a.linkDataArray;Ae(this,a);this.cg=a}};
P.prototype.rx=function(a,b){if(a.Lc===ve){var c=m;a.he==="linkDataArray"?c=this.cg:a.he==="linkLabelKeys"&&(c=this.nl(a.object));if(u.isArray(c)){b?u.Kh(c,a.Oe):u.Jh(c,a.Oe,a.newValue);return}}else if(a.Lc===we){c=m;a.he==="linkDataArray"?c=this.cg:a.he==="linkLabelKeys"&&(c=this.nl(a.object));if(u.isArray(c)){b?u.Jh(c,a.Pe,a.oldValue):u.Kh(c,a.Pe);return}}D.prototype.rx.call(this,a,b)};u.a(P,"linkFromKeyProperty",P.prototype.tn);
u.defineProperty(P,{tn:"linkFromKeyProperty"},r("zj"),function(a){var b=this.zj;if(b!==a){Pe(a,P,"linkFromKeyProperty");this.zj=a;this.d("linkFromKeyProperty",b,a)}});P.prototype.getFromKeyForLinkData=P.prototype.ln=function(a){if(a!==m){var b=this.zj;if(b!==""){b=u.Wa(a,b);if(b!==f){if(Qe(b))return b;s&&u.trace("FromKey value for link data "+a+" is not a number or a string: "+b)}}}};
P.prototype.setFromKeyForLinkData=P.prototype.Qu=function(a,b){s&&b!==f&&!Qe(b)&&u.sc(b,"number or string",P,"setFromKeyForLinkData:key");if(a!==m){var c=this.zj;if(c!=="")if(this.Nh(a)){var d=u.Wa(a,c);if(d!==b){this.Sg(d,a);u.Ra(a,c,b);this.Rg(b)===m&&this.$f(b,a);Oe(this,"linkFromKey",ue,c,a,d,b);typeof c==="string"&&this.fc(a,c)}}else u.Ra(a,c,b)}};u.a(P,"linkToKeyProperty",P.prototype.xn);
u.defineProperty(P,{xn:"linkToKeyProperty"},r("Bj"),function(a){var b=this.Bj;if(b!==a){Pe(a,P,"linkToKeyProperty");this.Bj=a;this.d("linkToKeyProperty",b,a)}});P.prototype.getToKeyForLinkData=P.prototype.mn=function(a){if(a!==m){var b=this.Bj;if(b!==""){b=u.Wa(a,b);if(b!==f){if(Qe(b))return b;s&&u.trace("ToKey value for link data "+a+" is not a number or a string: "+b)}}}};
P.prototype.setToKeyForLinkData=P.prototype.Ru=function(a,b){s&&b!==f&&!Qe(b)&&u.sc(b,"number or string",P,"setToKeyForLinkData:key");if(a!==m){var c=this.Bj;if(c!=="")if(this.Nh(a)){var d=u.Wa(a,c);if(d!==b){this.Sg(d,a);u.Ra(a,c,b);this.Rg(b)===m&&this.$f(b,a);Oe(this,"linkToKey",ue,c,a,d,b);typeof c==="string"&&this.fc(a,c)}}else u.Ra(a,c,b)}};u.a(P,"linkFromPortIdProperty",P.prototype.un);
u.defineProperty(P,{un:"linkFromPortIdProperty"},r("tp"),function(a){var b=this.tp;if(b!==a){Pe(a,P,"linkFromPortIdProperty");this.tp=a;this.d("linkFromPortIdProperty",b,a)}});P.prototype.getFromPortIdForLinkData=P.prototype.nF=function(a){if(a===m)return"";var b=this.tp;if(b==="")return"";a=u.Wa(a,b);return a===f?"":a};
P.prototype.setFromPortIdForLinkData=P.prototype.Lr=function(a,b){u.e(b,"string",P,"setFromPortIdForLinkData:portname");if(a!==m){var c=this.tp;if(c!=="")if(this.Nh(a)){var d=u.Wa(a,c);if(d!==b){u.Ra(a,c,b);Oe(this,"linkFromPortId",ue,c,a,d,b);typeof c==="string"&&this.fc(a,c)}}else u.Ra(a,c,b)}};u.a(P,"linkToPortIdProperty",P.prototype.yn);
u.defineProperty(P,{yn:"linkToPortIdProperty"},r("up"),function(a){var b=this.up;if(b!==a){Pe(a,P,"linkToPortIdProperty");this.up=a;this.d("linkToPortIdProperty",b,a)}});P.prototype.getToPortIdForLinkData=P.prototype.pF=function(a){if(a===m)return"";var b=this.up;if(b==="")return"";a=u.Wa(a,b);return a===f?"":a};
P.prototype.setToPortIdForLinkData=P.prototype.Nr=function(a,b){u.e(b,"string",P,"setToPortIdForLinkData:portname");if(a!==m){var c=this.up;if(c!=="")if(this.Nh(a)){var d=u.Wa(a,c);if(d!==b){u.Ra(a,c,b);Oe(this,"linkToPortId",ue,c,a,d,b);typeof c==="string"&&this.fc(a,c)}}else u.Ra(a,c,b)}};u.a(P,"nodeIsLinkLabelProperty",P.prototype.Gn);
u.defineProperty(P,{Gn:"nodeIsLinkLabelProperty"},r("gt"),function(a){var b=this.gt;if(b!==a){Pe(a,P,"nodeIsLinkLabelProperty");this.gt=a;this.d("nodeIsLinkLabelProperty",b,a)}});P.prototype.isLinkLabelForNodeData=P.prototype.cy=function(a){if(a===m)return o;var b=this.gt;return b===""?o:u.Wa(a,b)?h:o};u.a(P,"linkLabelKeysProperty",P.prototype.vn);
u.defineProperty(P,{vn:"linkLabelKeysProperty"},r("th"),function(a){var b=this.th;if(b!==a){Pe(a,P,"linkLabelKeysProperty");this.th=a;this.d("linkLabelKeysProperty",b,a)}});P.prototype.getLabelKeysForLinkData=P.prototype.nl=function(a){if(a===m)return[];var b=this.th;if(b==="")return[];a=u.Wa(a,b);return a===f?[]:a};
P.prototype.setLabelKeysForLinkData=P.prototype.ZC=function(a,b){u.c(b,Array,P,"setLabelKeysForLinkData:arr");if(a!==m){var c=this.th;if(c!=="")if(this.Nh(a)){var d=u.Wa(a,c);if(d!==b){for(var e=u.vb(d),g=0;g<e;g++){var i=u.lb(d,g);this.Sg(i,a)}u.Ra(a,c,b);e=u.vb(b);for(g=0;g<e;g++){i=u.lb(b,g);this.Rg(i)===m&&this.$f(i,a)}Oe(this,"linkLabelKeys",ue,c,a,d,b);typeof c==="string"&&this.fc(a,c)}}else u.Ra(a,c,b)}};
P.prototype.addLabelKeyForLinkData=P.prototype.DA=function(a,b){s&&(Qe(b)||u.sc(b,"number or string",P,"addLabelKeyForLinkData:key"));if(a!==m){var c=this.th;if(c!==""){var d=u.Wa(a,c);if(d===f)this.ZC(a,[b]);else if(u.isArray(d)){if(!(u.mx(d,b)>=0)){u.Jh(d,Infinity,b);if(this.Nh(a)){this.Rg(b)===m&&this.$f(b,a);Oe(this,"linkLabelKeys",ve,c,a,m,b)}}}else u.g(c+" property is not an Array; cannot addLabelKeyForLinkData: "+a)}}};
P.prototype.removeLabelKeyForLinkData=P.prototype.gG=function(a,b){s&&(Qe(b)||u.sc(b,"number or string",P,"removeLabelKeyForLinkData:key"));if(a!==m){var c=this.th;if(c!==""){var d=u.Wa(a,c);if(u.isArray(d)){var e=u.mx(d,b);if(!(e<0)){u.Kh(d,e);if(this.Nh(a)){this.Sg(b,a);Oe(this,"linkLabelKeys",we,c,a,b,m)}}}else d!==f&&u.g(c+" property is not an Array; cannot removeLabelKeyforLinkData: "+a)}}};u.a(P,"linkDataArray",P.prototype.cg);
u.defineProperty(P,{cg:"linkDataArray"},r("yj"),function(a){var b=this.yj;if(b!==a){u.PA(a,P,"linkDataArray");for(var c=u.vb(a),d=0;d<c;d++){var e=u.lb(a,d);if(!(e instanceof Object)){u.g("GraphLinksModel.linkDataArray must only contain Objects, not: "+e);return}u.nn(e)}this.yj=a;for(var g=new la(Object),d=0;d<c;d++){e=u.lb(a,d);g.add(e)}this.rp=g;Oe(this,"linkDataArray",ue,"linkDataArray",this,b,a);for(d=0;d<c;d++){e=u.lb(a,d);Re(this,e)}}});
P.prototype.containsLinkData=P.prototype.Nh=function(a){return a===m?o:this.rp.contains(a)};P.prototype.addLinkData=P.prototype.EA=function(a){if(a!==m){if(u.cc(a)===f)u.Fb(a);else if(this.Nh(a))return;this.rp.add(a);var b=u.vb(this.yj);u.Jh(this.yj,b,a);Oe(this,"linkDataArray",ve,"linkDataArray",this,m,a,m,b);Re(this,a)}};
P.prototype.removeLinkData=P.prototype.hG=function(a){if(a!==m){this.rp.remove(a);var b=this.yj.indexOf(a);if(!(b<0)){u.Kh(this.yj,b);Oe(this,"linkDataArray",we,"linkDataArray",this,a,m,b,m);b=this.ln(a);this.Sg(b,a);b=this.mn(a);this.Sg(b,a);for(var c=this.nl(a),d=u.vb(c),e=0;e<d;e++){b=u.lb(c,e);this.Sg(b,a)}}}};function Re(a,b){var c=a.ln(b);a.Rg(c)===m&&a.$f(c,b);c=a.mn(b);a.Rg(c)===m&&a.$f(c,b);for(var d=a.nl(b),e=u.vb(d),g=0;g<e;g++){c=u.lb(d,g);a.Rg(c)===m&&a.$f(c,b)}}
u.a(P,"copyLinkDataFunction",P.prototype.RE);u.defineProperty(P,{RE:"copyLinkDataFunction"},r("ps"),function(a){var b=this.ps;if(b!==a){a!==m&&u.e(a,"function",P,"copyLinkDataFunction");this.ps=a;this.d("copyLinkDataFunction",b,a)}});
P.prototype.copyLinkData=P.prototype.$A=function(a){if(a===m)return m;var b=m,b=this.ps;if(b!==m)b=b(a);else{var b=new a.constructor,c;for(c in a)u.Ra(b,c,u.Wa(a,c))}if(b){u.Fb(b);this.zj!==""&&u.Ra(b,this.zj,f);this.Bj!==""&&u.Ra(b,this.Bj,f);this.th!==""&&u.Ra(b,this.th,[])}return b};u.a(P,"nodeIsGroupProperty",P.prototype.Fn);u.defineProperty(P,{Fn:"nodeIsGroupProperty"},r("ft"),function(a){var b=this.ft;if(b!==a){Pe(a,P,"nodeIsGroupProperty");this.ft=a;this.d("nodeIsGroupProperty",b,a)}});
P.prototype.isGroupForNodeData=P.prototype.Yx=function(a){if(a===m)return o;var b=this.ft;return b===""?o:u.Wa(a,b)?h:o};u.a(P,"nodeGroupKeyProperty",P.prototype.En);u.defineProperty(P,{En:"nodeGroupKeyProperty"},r("Ej"),function(a){var b=this.Ej;if(b!==a){Pe(a,P,"nodeGroupKeyProperty");this.Ej=a;this.d("nodeGroupKeyProperty",b,a)}});
P.prototype.getGroupKeyForNodeData=P.prototype.kr=function(a){if(a!==m){var b=this.Ej;if(b!==""){b=u.Wa(a,b);if(b!==f){if(Qe(b))return b;s&&u.trace("GroupKey value for node data "+a+" is not a number or a string: "+b)}}}};
P.prototype.setGroupKeyForNodeData=P.prototype.Ey=function(a,b){s&&b!==f&&!Qe(b)&&u.sc(b,"number or string",P,"setGroupKeyForNodeData:key");if(a!==m){var c=this.Ej;if(c!=="")if(this.Ai(a)){var d=u.Wa(a,c);if(d!==b){this.Sg(d,a);u.Ra(a,c,b);this.Rg(b)===m&&this.$f(b,a);Oe(this,"nodeGroupKey",ue,c,a,d,b);typeof c==="string"&&this.fc(a,c)}}else u.Ra(a,c,b)}};P.prototype.copyNodeData=P.prototype.Zm=function(a){if(a===m)return m;a=D.prototype.Zm.call(this,a);this.Ej!==""&&u.Ra(a,this.Ej,f);return a};
P.prototype.setDataProperty=P.prototype.tG=function(a,b,c){if(s){u.e(a,"object",P,"setDataProperty:data");u.e(b,"string",P,"setDataProperty:propname");b===""&&u.g("GraphLinksModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c)}if(this.Ai(a))if(b===this.ul)u.g("GraphLinksModel.setDataProperty: property name must not be the key for the node data: "+b);else{if(b===this.tl&&typeof c==="string"){this.YC(a,c);return}if(b===this.En&&(typeof c==="string"||typeof c===
"number")){this.Ey(a,c);return}b===this.Fn?u.g("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+b):b===this.Gn&&u.g("GraphLinksModel.setDataProperty: property name must not be the nodeIsLinkLabelProperty: "+b)}else if(this.Nh(a)){if(b===this.tn&&(typeof c==="string"||typeof c==="number")){this.Qu(a,c);return}if(b===this.xn&&(typeof c==="string"||typeof c==="number")){this.Ru(a,c);return}if(b===this.un&&typeof c==="string"){this.Lr(a,c);return}if(b===this.yn&&
typeof c==="string"){this.Nr(a,c);return}if(b===this.sn&&typeof c==="string"){this.sG(a,c);return}if(b===this.vn&&c instanceof Array){this.ZC(a,c);return}}else{u.Ra(a,b,c);return}var d=u.Wa(a,b);if(d!==c){u.Ra(a,b,c);Oe(this,"",ue,b,a,d,c)}};P.prototype.Py=function(){D.prototype.Py.call(this);for(var a=this.cg,b=u.vb(a),c=0;c<b;c++)Re(this,u.lb(a,c))};
P.prototype.Ku=function(a){D.prototype.Ku.call(this,a);var a=this.Ub(a),b=this.uB(a);if(b!==m){for(var c=new z(Object),b=b.f;b.next();){var d=b.value;if(this.Ai(d)){if(this.kr(d)===a){var e=this.Ej;Oe(this,"nodeGroupKey",ue,e,d,a,a);typeof e==="string"&&this.fc(d,e);c.add(d)}}else{if(this.ln(d)===a){e=this.zj;Oe(this,"linkFromKey",ue,e,d,a,a);typeof e==="string"&&this.fc(d,e);c.add(d)}if(this.mn(d)===a){e=this.Bj;Oe(this,"linkToKey",ue,e,d,a,a);typeof e==="string"&&this.fc(d,e);c.add(d)}for(var g=
this.nl(d),i=u.vb(g),e=this.th,j=0;j<i;j++)if(u.lb(g,j)===a){Oe(this,"linkLabelKeys",ve,e,d,a,a);c.add(d)}}}for(c=c.f;c.next();)this.Sg(a,c.value)}};P.prototype.Ju=function(a){D.prototype.Ju.call(this,a);var b=this.kr(a);this.Rg(b)===m&&this.$f(b,a)};P.prototype.Qy=function(a){D.prototype.Qy.call(this,a);var b=this.kr(a);this.Sg(b,a)};u.a(P,"linkCategoryProperty",P.prototype.sn);
u.defineProperty(P,{sn:"linkCategoryProperty"},r("pp"),function(a){var b=this.pp;if(b!==a){Pe(a,P,"linkCategoryProperty");this.pp=a;this.d("linkCategoryProperty",b,a)}});P.prototype.getCategoryForLinkData=P.prototype.BB=function(a){if(a===m)return"";var b=this.pp;if(b==="")return"";b=u.Wa(a,b);if(b===f)return"";if(typeof b==="string")return b;s&&u.trace("getCategoryForLinkData found a non-string category for "+a+": "+b);return b};
P.prototype.setCategoryForLinkData=P.prototype.sG=function(a,b){u.e(b,"string",P,"setCategoryForLinkData:val");if(a!==m){var c=this.pp;if(c==="")return"";if(this.Nh(a)){var d=u.Wa(a,c);if(d!==b){u.Ra(a,c,b);Oe(this,"linkCategory",ue,c,a,d,b);typeof c==="string"&&this.fc(a,c)}}else u.Ra(a,c,b)}};
function Se(a,b,c){u.Fb(this);a===f?a="":u.e(a,"string",Se,"constructor:targetprop");b===f?b=a:u.e(b,"string",Se,"constructor:sourceprop");c===f?c=m:c!==m&&u.e(c,"function",Se,"constructor:conv");this.sA="";this.cf=m;this.Kt=a;this.It=this.Qw=0;this.kA=m;this.Dt=b;this.Lv=c;this.qw=Te;this.Fv=m}u.H("Binding",Se);var Te;Se.OneWay=Te=u.l(Se,"OneWay",1);var Ue;Se.TwoWay=Ue=u.l(Se,"TwoWay",2);
Se.parseEnum=function(a,b){u.e(a,"function",Se,"parseEnum:ctor");u.Sa(b,a,Se,"parseEnum:defval");return function(c){return u.Lx(a,c)||b}};var xe;Se.toString=xe=function(a){var b=a;a instanceof Object&&(a.text?b=a.text:a.name?b=a.name:a.key!==f?b=a.key:a.id!==f&&(b=a.id));return b===f?"undefined":b===m?"null":b.toString()};Se.prototype.toString=function(){return"Binding("+this.Cl+" "+this.Ly+":"+this.Gy+")"};Se.prototype.freeze=function(){this.Ha=h;return this};
Se.prototype.xa=function(){this.Ha=o;return this};u.a(Se,"targetId",Se.prototype.Cl);u.defineProperty(Se,{Cl:"targetId"},r("sA"),function(a){u.v(this);u.e(a,"string",Se,"targetId");this.sA=a});u.a(Se,"targetProperty",Se.prototype.Ly);u.defineProperty(Se,{Ly:"targetProperty"},r("Kt"),function(a){u.v(this);u.e(a,"string",Se,"targetProperty");this.Kt=a});u.a(Se,"sourceName",Se.prototype.On);u.defineProperty(Se,{On:"sourceName"},r("kA"),function(a){u.v(this);u.e(a,"string",Se,"sourceName");this.kA=a});
u.a(Se,"sourceProperty",Se.prototype.Gy);u.defineProperty(Se,{Gy:"sourceProperty"},r("Dt"),function(a){u.v(this);u.e(a,"string",Se,"sourceProperty");this.Dt=a});u.a(Se,"converter",Se.prototype.XA);u.defineProperty(Se,{XA:"converter"},r("Lv"),function(a){u.v(this);a!==m&&u.e(a,"function",Se,"converter");this.Lv=a});u.a(Se,"backConverter",Se.prototype.OA);u.defineProperty(Se,{OA:"backConverter"},r("Fv"),function(a){u.v(this);a!==m&&u.e(a,"function",Se,"backConverter");this.Fv=a});u.a(Se,"mode",Se.prototype.mode);
u.defineProperty(Se,{mode:"mode"},r("qw"),function(a){u.v(this);u.Sa(a,Se,Se,"mode");this.qw=a});Se.prototype.makeTwoWay=Se.prototype.lJ=function(a){a===f&&(a=m);this.mode=Ue;this.OA=a;return this};Se.prototype.ofObject=Se.prototype.ty=function(a){a===f&&(a="");s&&u.e(a,"string",Se,"ofObject:srcname");this.On=a;return this};
Se.prototype.updateTarget=Se.prototype.wD=function(a,b,c){var d=this.Dt;if(!(c&&d!==c)){var c=this.Kt,e=this.Lv;if(!(e===m&&c==="")){s&&(typeof c==="string"&&typeof a.setAttribute!=="function"&&!u.Vx(a,c))&&u.trace("Binding error: undefined target property: "+c+" on "+a.toString());var g=b;d!==""&&(g=u.Wa(b,d));if(g!==f)if(e===m)c!==""&&u.Ra(a,c,g);else try{if(c!==""){var i=e(g,a);u.Ra(a,c,i)}else e(g,a)}catch(j){s&&u.trace("Binding error: "+j.toString())}}}};
Se.prototype.updateSource=Se.prototype.vD=function(a,b,c){if(this.qw===Ue){var d=this.Kt;if(!(c&&d!==c)){var c=this.Dt,e=this.Fv;if(!(e===m&&c==="")){var g=a;d!==""&&(g=u.Wa(a,d));if(g!==f)if(e===m)u.Ra(b,c,g);else try{if(c!==""){var i=e(g,b);u.Ra(b,c,i)}else e(g,b)}catch(j){s&&u.trace("Binding error: "+j.toString())}}}}};function Ve(){this.ID=(new z(se)).freeze();this.pb="";this.Fz=o}u.H("Transaction",Ve);
Ve.prototype.toString=function(a){var b="Transaction: "+this.name+" "+this.Mg.count.toString()+(this.pn?"":", incomplete");if(a!==f&&a>0)for(var c=this.Mg.count,d=0;d<c;d++){var e=this.Mg.Z(d);e!==m&&(b=b+("\n  "+e.toString(a-1)))}return b};Ve.prototype.clear=Ve.prototype.clear=function(){var a=this.Mg;a.xa();for(var b=a.count-1;b>=0;b--){var c=a.Z(b);c!==m&&c.clear()}a.clear();a.freeze()};Ve.prototype.canUndo=Ve.prototype.Uj=r("pn");
Ve.prototype.undo=Ve.prototype.lk=function(){if(this.Uj())for(var a=this.Mg.count-1;a>=0;a--){var b=this.Mg.Z(a);b!==m&&b.lk()}};Ve.prototype.canRedo=Ve.prototype.Tj=r("pn");Ve.prototype.redo=Ve.prototype.Jn=function(){if(this.Tj())for(var a=this.Mg.count,b=0;b<a;b++){var c=this.Mg.Z(b);c!==m&&c.Jn()}};u.m(Ve,{Mg:"changes"},r("ID"));u.a(Ve,"name",Ve.prototype.name);u.defineProperty(Ve,{name:"name"},r("pb"),ba("pb"));u.a(Ve,"isComplete",Ve.prototype.pn);
u.defineProperty(Ve,{pn:"isComplete"},r("Fz"),ba("Fz"));function ye(){this.rw=new la(D);this.oh=o;this.QD=(new z(Ve)).freeze();this.qj=-1;this.Lz=999;this.ph=o;this.us=m;this.Pj=0;this.Iv=o;if(s)this.Iv=h;this.Qf=(new z("string")).freeze();this.rm=new z("number");this.Yv=h}u.H("UndoManager",ye);
ye.prototype.toString=function(a){for(var b="UndoManager "+this.Ji+"<"+this.history.count+"<="+this.jy,b=b+"[",c=this.sC.count,d=0;d<c;d++){d>0&&(b=b+" ");b=b+this.sC.Z(d)}b=b+"]";if(a!==f&&a>0){c=this.history.count;for(d=0;d<c;d++)b=b+("\n "+this.history.Z(d).toString(a-1))}return b};
ye.prototype.clear=ye.prototype.clear=function(){var a=this.history;a.xa();for(var b=a.count-1;b>=0;b--){var c=a.Z(b);c!==m&&c.clear()}a.clear();this.qj=-1;a.freeze();this.ph=o;this.us=m;this.Pj=0;this.Qf.xa();this.Qf.clear();this.Qf.freeze();this.rm.clear()};ye.prototype.addModel=ye.prototype.lE=function(a){this.rw.add(a)};ye.prototype.removeModel=ye.prototype.iG=function(a){this.rw.remove(a)};
ye.prototype.startTransaction=ye.prototype.Eb=function(a){a===m&&(a="");if(this.rc)return o;if(this.Yv===h){this.Yv=o;this.Pj++;this.qd("StartingFirstTransaction",a,this.gl);this.Pj>0&&this.Pj--}if(this.isEnabled){this.Qf.xa();this.Qf.add(a);this.Qf.freeze();this.gl===m?this.rm.add(0):this.rm.add(this.gl.Mg.count)}this.Pj++;var b=this.kk===1;b&&this.qd("StartedTransaction",a);return b};ye.prototype.commitTransaction=ye.prototype.Kd=function(a){return We(this,h,a)};
ye.prototype.rollbackTransaction=ye.prototype.Hr=function(){return We(this,o,"")};
function We(a,b,c){if(a.rc)return o;a.sx&&a.kk<1&&u.trace("Ending transaction without having started a transaction: "+c);var d=a.kk===1;d&&(b&&a.isEnabled)&&a.qd("CommittingTransaction",c,a.gl);var e=0;if(a.kk>0){a.Pj--;if(a.isEnabled){var g=a.Qf.count;if(g>0){c===""&&(c=a.Qf.Z(0));a.Qf.xa();a.Qf.Se(g-1);a.Qf.freeze()}g=a.rm.count;if(g>0){e=a.rm.Z(g-1);a.rm.Se(g-1)}}}g=a.gl;if(d){if(b){if(a.isEnabled&&g!==m){b=g;b.pn=h;b.name=c;d=a.history;d.xa();for(e=d.count-1;e>a.Ji;e--){g=d.Z(e);g!==m&&g.clear();
d.Se(e)}e=a.jy;e===0&&(e=1);if(e>0&&d.count>=e){g=d.Z(0);g!==m&&g.clear();d.Se(0);a.qj--}d.add(b);a.qj++;d.freeze();g=b}a.qd("CommittedTransaction",c,g)}else{a.ph=h;try{if(a.isEnabled&&g!==m){g.pn=h;g.lk()}}finally{a.qd("RolledBackTransaction",c,g);a.ph=o}g!==m&&g.clear()}a.us=m;return h}if(a.isEnabled&&!b&&g!==m){a=e;c=g.Mg;c.xa();for(b=c.count-1;b>=a;b--){d=c.Z(b);d!==m&&d.lk();c.Se(b)}c.freeze()}return o}
ye.prototype.canUndo=ye.prototype.Uj=function(){if(!this.isEnabled||this.kk>0||this.rc)return o;var a=this.pD;return a!==m&&a.Uj()?h:o};ye.prototype.undo=ye.prototype.lk=function(){if(this.Uj()){var a=this.pD;try{this.qd("StartingUndo","Undo",a);this.ph=h;this.qj--;a.lk()}catch(b){u.trace("undo error: "+b.toString())}finally{this.ph=o;this.qd("FinishedUndo","Undo",a)}}};
ye.prototype.canRedo=ye.prototype.Tj=function(){if(!this.isEnabled||this.kk>0||this.rc)return o;var a=this.oD;return a!==m&&a.Tj()?h:o};ye.prototype.redo=ye.prototype.Jn=function(){if(this.Tj()){var a=this.oD;try{this.qd("StartingRedo","Redo",a);this.ph=h;this.qj++;a.Jn()}catch(b){u.trace("redo error: "+b.toString())}finally{this.ph=o;this.qd("FinishedRedo","Redo",a)}}};
ye.prototype.qd=function(a,b,c){c===f&&(c=m);var d=new se;d.Lc=te;d.propertyName=a;d.object=c;d.oldValue=b;for(a=this.TF;a.next();){b=a.value;d.J=b;b.Yt(d)}};ye.prototype.handleChanged=ye.prototype.JB=function(a){if(this.isEnabled&&!this.rc&&!this.skipsEvent(a)){var b=this.gl;if(b===m)this.us=b=new Ve;var c=a.copy(),b=b.Mg;b.xa();b.add(c);b.freeze();if(this.sx&&this.kk<=0&&!this.Yv){a=a.b;a!==m&&a.rg===o||u.trace("Change not within a transaction: "+c.toString())}}};
ye.prototype.skipsEvent=ye.prototype.aK=function(a){if(a===m||a.Lc.value<0)return h;a=a.object;if(a instanceof Q){a=a.ra;if(a!==m&&a.Yc)return h}else if(a instanceof Xe&&a.Yc)return h;return o};u.m(ye,{TF:"models"},function(){return this.rw.f});u.a(ye,"isEnabled",ye.prototype.isEnabled);u.defineProperty(ye,{isEnabled:"isEnabled"},r("oh"),ba("oh"));u.m(ye,{pD:"transactionToUndo"},function(){return this.Ji>=0&&this.Ji<=this.history.count-1?this.history.Z(this.Ji):m});
u.m(ye,{oD:"transactionToRedo"},function(){return this.Ji<this.history.count-1?this.history.Z(this.Ji+1):m});u.m(ye,{rc:"isUndoingRedoing"},r("ph"));u.m(ye,{history:"history"},r("QD"));u.a(ye,"maxHistoryLength",ye.prototype.jy);u.defineProperty(ye,{jy:"maxHistoryLength"},r("Lz"),ba("Lz"));u.m(ye,{Ji:"historyIndex"},r("qj"));u.m(ye,{gl:"currentTransaction"},r("us"));u.m(ye,{kk:"transactionLevel"},r("Pj"));u.m(ye,{BF:"isInTransaction"},function(){return this.Pj>0});
u.defineProperty(ye,{sx:"checksTransactionLevel"},r("Iv"),ba("Iv"));u.m(ye,{sC:"nestedTransactionNames"},r("Qf"));function C(){this.L=m;this.pz=this.kz=o;this.Dj=this.dz=m}u.H("CommandHandler",C);var Ye=m,Ze="";C.prototype.toString=ca("CommandHandler");u.m(C,{b:"diagram"},r("L"));C.prototype.sf=function(a){s&&a!==m&&u.c(a,B,C,"setDiagram");this.L=a};
C.prototype.doKeyDown=C.prototype.Ex=function(){var a=this.b;if(a!==m){var b=a.F,c=b.Wj,d=b.shift,e=b.alt,g=b.key;if(c&&(g==="C"||g==="Insert"))this.canCopySelection()&&this.copySelection();else if(c&&g==="X"||d&&g==="Del")this.canCutSelection()&&this.cutSelection();else if(g==="Del")this.canDeleteSelection()&&this.deleteSelection();else if(c&&g==="V"||d&&g==="Insert")this.canPasteSelection()&&this.pasteSelection();else if(c&&g==="Y"||e&&d&&g==="Backspace")this.canRedo()&&this.redo();else if(c&&g===
"Z"||e&&g==="Backspace")this.canUndo()&&this.undo();else if(c&&g==="A")this.canSelectAll()&&this.selectAll();else if(c&&g==="P")this.canPrint()&&this.print();else if(g==="Esc")this.canStopCommand()&&this.stopCommand();else if(g==="Up")a.Ge&&(c?a.scroll("pixel","up"):a.scroll("line","up"));else if(g==="Down")a.Ge&&(c?a.scroll("pixel","down"):a.scroll("line","down"));else if(g==="Left")a.Fe&&(c?a.scroll("pixel","left"):a.scroll("line","left"));else if(g==="Right")a.Fe&&(c?a.scroll("pixel","right"):
a.scroll("line","right"));else if(g==="PageUp")a.Fe?a.scroll("page","left"):!c&&a.Ge&&a.scroll("page","up");else if(g==="PageDown")a.Fe?a.scroll("page","right"):!c&&a.Ge&&a.scroll("page","down");else if(g==="Home"){b=a.pc;if(c&&a.Ge)a.position=new E(a.position.x,b.y);else if(!c&&a.Fe)a.position=new E(b.x,a.position.y)}else if(g==="End"){b=a.pc;d=a.ib;if(c&&a.Ge)a.position=new E(d.x,b.bottom-d.height);else if(!c&&a.Fe)a.position=new E(b.right-d.width,d.y)}else g==="Subtract"?this.canDecreaseZoom()&&
this.decreaseZoom():g==="Add"?this.canIncreaseZoom()&&this.increaseZoom():c&&g==="0"?this.canResetZoom()&&this.resetZoom():c&&!d&&g==="G"?this.canGroupSelection()&&this.groupSelection():c&&d&&g==="G"?this.canUngroupSelection()&&this.ungroupSelection():b.event&&b.event.which===113?this.canEditTextBlock()&&this.editTextBlock():b.bubbles=h}};C.prototype.doKeyUp=C.prototype.Fx=function(){var a=this.b;if(a!==m)a.F.bubbles=h};
C.prototype.stopCommand=C.prototype.hK=function(){var a=this.b;if(a!==m){var b=a.pa;b instanceof $e&&a.Gd&&a.ux();b!==m&&b.doCancel()}};C.prototype.canStopCommand=C.prototype.wH=ca(h);C.prototype.selectAll=C.prototype.VJ=function(){var a=this.b;if(a!==m)try{a.oc="wait";a.ga("ChangingSelection");for(var b=a.Qi;b.next();)b.value.Da=h;for(b=a.ek;b.next();)b.value.Da=h;for(b=a.links;b.next();)b.value.Da=h}finally{a.ga("ChangedSelection");a.oc=""}};
C.prototype.canSelectAll=C.prototype.vH=function(){var a=this.b;return a!==m&&a.Gd};C.prototype.deleteSelection=C.prototype.XH=function(){var a=this.b;if(a!==m&&!a.ga("SelectionDeleting",a.selection))try{a.oc="wait";a.Eb("Delete");a.ga("ChangingSelection");for(var b=new la(T),c=a.selection.f;c.next();)af(b,c.value,h,this.oB,function(a){return a.canDelete()});this.deleteParts(b,h);a.ga("SelectionDeleted",b)}finally{a.ga("ChangedSelection");a.Kd("Delete");a.oc=""}};
C.prototype.canDeleteSelection=C.prototype.fH=function(){var a=this.b;return a===m||(a.Ja||a.Md)||!a.Rj||a.selection.count===0?o:h};C.prototype.deleteParts=C.prototype.WH=function(a,b){for(var c=a.f;c.next();){var d=c.value;if(!b||d.canDelete()){var e=d.b;e!==m&&e.remove(d)}}};
function af(a,b,c,d,e){if(!a.contains(b)){e===f&&(e=m);if((e===m||e(b))&&!(b instanceof bf)){a.add(b);if(b instanceof U){if(c&&b instanceof V)for(var g=b.ec;g.next();){var i=g.value;af(a,i,c,d,e)}for(i=b.ge;i.next();){g=i.value;if(!a.contains(g)){var j=g.ca,k=g.ea;j!==m&&a.contains(j)&&k!==m&&a.contains(k)?af(a,g,c,d,e):(j===m||k===m)&&af(a,g,c,d,e)}}if(d){i=h;g=b.b;if(g!==m)i=g.lf;for(b=i?b.fn():b.en();b.next();){i=b.value;af(a,i,c,d,e)}}}else if(b instanceof W)for(i=b.Xh;i.next();)af(a,i.value,
c,d,e)}}}C.prototype.copyParts=C.prototype.NH=function(a,b,c){for(var d=new ka(T,T),a=a.f;a.next();)mf(this,a.value,b,d,c);for(b=d.f;b.next();)b.value.fc();return d};
function mf(a,b,c,d,e){if(b===m||e&&!b.canCopy())return m;if(d.contains(b)){a=d.$(b);return a instanceof T?a:m}var g=m,i=b.data;if(i!==m&&c!==m){var j=c.J;if(b instanceof W){if(j instanceof P){i=j.$A(i);if(i instanceof Object){j.EA(i);g=c.bg(i)}}}else{i=j.Zm(i);if(i instanceof Object){j.Tt(i);g=c.bg(i)}}}else{nf(b);g=b.copy();c!==m&&g instanceof T&&c.add(g)}if(!(g instanceof T))return m;g.Da=o;d.add(b,g);if(b instanceof U){for(j=b.ge;j.next();){i=j.value;if(i.ca===b){var k=d.$(i);if(k!==m)k.ca=g}if(i.ea===
b){k=d.$(i);if(k!==m)k.ea=g}}if(b instanceof V&&g instanceof V)for(b=b.ec;b.next();){j=mf(a,b.value,c,d,e);if(!(j instanceof W)&&j!==m)j.Ta=g}}else if(b instanceof W){j=b.ca;if(j!==m){j=d.$(j);if(j!==m)g.ca=j}j=b.ea;if(j!==m){j=d.$(j);if(j!==m)g.ea=j}for(b=b.Xh;b.next();){j=mf(a,b.value,c,d,e);if(j!==m)j.fe=g}}return g}C.prototype.copySelection=C.prototype.PH=function(){var a=this.b;if(a!==m){for(var b=new la(T),a=a.selection.f;a.next();)af(b,a.value,h,this.ZA,function(a){return a.canCopy()});this.copyToClipboard(b)}};
C.prototype.canCopySelection=C.prototype.bH=function(){var a=this.b;return a===m||(!a.Hh||!a.Vt)||a.selection.count===0?o:h};C.prototype.cutSelection=C.prototype.SH=function(){this.copySelection();this.deleteSelection()};C.prototype.canCutSelection=C.prototype.cH=function(){var a=this.b;return a===m||(a.Ja||a.Md)||(!a.Hh||!a.Rj||!a.Vt)||a.selection.count===0?o:h};
C.prototype.copyToClipboard=C.prototype.QH=function(a){var b=this.b;if(b!==m){var c=m;if(a===m){Ye=m;Ze=""}else{a=this.copyParts(a,m,h);c=new z(T);c.Xf(a);Ye=c;Ze=b.J.hl}b.ga("ClipboardChanged",c)}};
C.prototype.pasteFromClipboard=C.prototype.DJ=function(){var a=Ye;if(a===m)return u.yf;var b=this.b;if(b===m||Ze!==b.J.hl)return u.yf;b=this.copyParts(a,b,o);a=new la(T);for(b=b.f;b.next();){var c=b.value;if(!c.location.V())c.location=b.key.location.copy();if(!c.position.V())c.position=b.key.position.copy();a.add(c)}return a};
C.prototype.pasteSelection=C.prototype.EJ=function(a){var b=this.b;if(b!==m)try{b.oc="wait";b.Eb("Paste");b.ga("ChangingSelection");var c=this.pasteFromClipboard();c.count>0&&of(b);for(var d=c.f;d.next();)d.value.Da=h;b.ga("ChangedSelection");if(a instanceof E){var e=this.computeBounds(b.selection);if(e){var g=b.Lb.ae,i=g.computeEffectiveCollection(b.selection);g.moveParts(i,new E(a.x-e.za,a.y-e.Aa),o)}}b.ga("ClipboardPasted",c)}finally{b.Kd("Paste");b.oc=""}};
C.prototype.canPasteSelection=C.prototype.oH=function(){var a=this.b;return a===m||(a.Ja||a.Md)||(!a.Qm||!a.Vt)||Ye===m||Ze!==a.J.hl?o:h};C.prototype.computeBounds=C.prototype.Yd=function(a){for(var b=m,a=a.f;a.next();){var c=a.value;if(!(c instanceof W)){c.Sh();b===m?b=c.oa:b.mk(c.oa)}}return b};C.prototype.undo=C.prototype.lk=function(){var a=this.b;a!==m&&a.va.lk()};C.prototype.canUndo=C.prototype.Uj=function(){var a=this.b;return a===m||a.Ja||a.Md?o:a.jx&&a.va.Uj()};
C.prototype.redo=C.prototype.Jn=function(){var a=this.b;a!==m&&a.va.Jn()};C.prototype.canRedo=C.prototype.Tj=function(){var a=this.b;return a===m||a.Ja||a.Md?o:a.jx&&a.va.Tj()};C.prototype.decreaseZoom=C.prototype.TE=function(a){a===f&&(a=1/1.05);var b=this.b;if(b!==m){a=b.scale*a;if(!(a<b.Pi||a>b.Oi)){b.scale=a;pf(b)}}};C.prototype.canDecreaseZoom=C.prototype.dH=function(a){a===f&&(a=1/1.05);var b=this.b;if(b===m)return o;a=b.scale*a;return a<b.Pi||a>b.Oi?o:b.Tq};
C.prototype.increaseZoom=C.prototype.vF=function(a){a===f&&(a=1.05);var b=this.b;if(b!==m){a=b.scale*a;if(!(a<b.Pi||a>b.Oi)){b.scale=a;pf(b)}}};C.prototype.canIncreaseZoom=C.prototype.mH=function(a){a===f&&(a=1.05);var b=this.b;if(b===m)return o;a=b.scale*a;return a<b.Pi||a>b.Oi?o:b.Tq};C.prototype.resetZoom=C.prototype.QJ=function(a){a===f&&(a=1);var b=this.b;if(b!==m&&!(a<b.Pi||a>b.Oi)){b.scale=a;pf(b)}};
C.prototype.canResetZoom=C.prototype.rH=function(a){a===f&&(a=1);var b=this.b;return b===m||a<b.Pi||a>b.Oi?o:b.Tq};C.prototype.collapseTree=C.prototype.Xq=function(a){a===f&&(a=m);var b=this.b;if(b===m)return o;b.Eb("Collapse Tree");var c=new z(U);if(a instanceof U&&a.Nd){a.Xq();c.add(a)}else for(a=b.selection.f;a.next();){var d=a.value;if(d instanceof U&&d.Nd){d.Xq();c.add(d)}}b.ga("TreeCollapsed",c);b.Kd("Collapse Tree")};
C.prototype.canCollapseTree=C.prototype.$G=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Ja)return o;if(a instanceof U){if(!a.Nd)return o;if(b.lf){if(a.fn().count>0)return h}else if(a.en().count>0)return h}else for(a=b.selection.f;a.next();){var c=a.value;if(c instanceof U&&c.Nd)if(b.lf){if(c.fn().count>0)return h}else if(c.en().count>0)return h}return o};
C.prototype.expandTree=C.prototype.dr=function(a){a===f&&(a=m);var b=this.b;if(b===m)return o;b.Eb("Expand Tree");var c=new z(U);if(a instanceof U&&!a.Nd){a.dr();c.add(a)}else for(a=b.selection.f;a.next();){var d=a.value;if(d instanceof U&&!d.Nd){d.dr();c.add(d)}}b.ga("TreeExpanded",c);b.Kd("Expand Tree")};
C.prototype.canExpandTree=C.prototype.jH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Ja)return o;if(a instanceof U){if(a.Nd)return o;if(b.lf){if(a.fn().count>0)return h}else if(a.en().count>0)return h}else for(a=b.selection.f;a.next();){var c=a.value;if(c instanceof U&&!c.Nd)if(b.lf){if(c.fn().count>0)return h}else if(c.en().count>0)return h}return o};
C.prototype.groupSelection=C.prototype.LI=function(){var a=this.b;if(a!==m){var b=a.J;if(b!==m&&b instanceof P){var c=this.kx;if(c!==m)try{a.oc="wait";a.Eb("Group");a.ga("ChangingSelection");for(var d=new z(T),e=a.selection.f;e.next();){var g=e.value;(g instanceof U||g.constructor===T)&&g.canGroup()&&d.add(g)}for(var i=new z(T),j=d.f;j.next();){for(var k=j.value,g=o,e=d.f;e.next();)if(k.ql(e.value)){g=h;break}g||i.add(k)}if(i.count>0){e=i.f;e.next();var l=e.value.Ta;if(l!==m)for(;l!==m;){e=i.f;e.next();
for(d=o;e.next();){k=e.value;if(!k.ql(l)){d=h;break}}if(d)l=l.Ta;else break}var n=m;if(c instanceof V){nf(c);n=c.copy();n instanceof V&&a.add(n)}else if(b.Yx(c)){var q=b.Zm(c);if(q instanceof Object){b.Tt(q);n=a.bg(q)}}if(n instanceof V){if(l!==m&&this.isValidMember(l,n))n.Ta=l;for(e=i.f;e.next();){k=e.value;if(this.isValidMember(n,k))k.Ta=n}a.select(n)}}a.ga("ChangedSelection");a.ga("SelectionGrouped",n)}finally{a.Kd("Group");a.oc=""}}}};
C.prototype.canGroupSelection=C.prototype.lH=function(){var a=this.b;if(a===m||a.Ja||a.Md||!a.Qm||!a.Pm)return o;var b=a.J;if(b===m||!(b instanceof P)||this.kx===m)return o;for(a=a.selection.f;a.next();){b=a.value;if((b instanceof U||b.constructor===T)&&b.canGroup())return h}return o};
C.prototype.findUnnestedNodes=C.prototype.Nx=function(a){for(var b=[],a=a.f;a.next();){var c=a.value;c instanceof W||b.push(c)}for(var a=new la(T),c=b.length,d=0;d<c;d++){for(var e=b[d],g=h,i=0;i<c;i++)if(e.ql(b[i])){g=o;break}g&&a.add(e)}return a};C.prototype.isValidMember=C.prototype.dy=function(a,b){if(b===m||a===b||b instanceof W)return o;if(a!==m){if(a===b||a.ql(b))return o;var c=a.xr;if(c!==m&&!c(a,b)||a.data===m&&b.data!==m||a.data!==m&&b.data===m)return o}c=this.xr;return c!==m?c(a,b):h};
C.prototype.ungroupSelection=C.prototype.mK=function(a){a===f&&(a=m);var b=this.b;if(b!==m){var c=b.J;if(c!==m&&c instanceof P)try{b.oc="wait";b.Eb("Ungroup");b.ga("ChangingSelection");var d=new z(V);if(a instanceof V)d.add(a);else for(var e=b.selection.f;e.next();){var g=e.value;g instanceof V&&g.canUngroup()&&d.add(g)}if(d.count>0){b.ux();for(e=d.f;e.next();){var i=e.value,j=i.data,k=i.Ta,l=k!==m&&k.data!==m?c.Ub(k.data):f,n=new z(T);n.Xf(i.ec);for(var q=n.f;q.next();){var p=q.value;if(!(p instanceof
W)){var t=p.data;t!==m?c.Ey(t,l):p.Ta=k;p.Da=h}}j!==m?c.GC(j):b.remove(i)}}b.ga("ChangedSelection");b.ga("SelectionUngrouped",d)}finally{b.Kd("Ungroup");b.oc=""}}};C.prototype.canUngroupSelection=C.prototype.yH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Ja||b.Md||!b.Rj||!b.Wm)return o;var c=b.J;if(c===m||!(c instanceof P))return o;if(a instanceof V){if(a.canUngroup())return h}else for(a=b.selection.f;a.next();){b=a.value;if(b instanceof V&&b.canUngroup())return h}return o};
C.prototype.addTopLevelParts=C.prototype.VG=function(a,b){for(var c=h,d=this.Nx(a).f;d.next();){var e=d.value;if(e.Ta!==m)!b||this.dy(m,e)?e.Ta=m:c=o}return c};C.prototype.collapseSubGraph=C.prototype.Wq=function(a){a===f&&(a=m);var b=this.b;if(b===m)return o;b.Eb("Collapse SubGraph");var c=new z(V);if(a instanceof V&&a.ee){a.Wq();c.add(a)}else for(a=b.selection.f;a.next();){var d=a.value;if(d instanceof V&&d.ee){d.Wq();c.add(d)}}b.ga("SubGraphCollapsed",c);b.Kd("Collapse SubGraph")};
C.prototype.canCollapseSubGraph=C.prototype.ZG=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Ja)return o;if(a instanceof V)return!a.ee?o:h;for(a=b.selection.f;a.next();){b=a.value;if(b instanceof V&&b.ee)return h}return o};
C.prototype.expandSubGraph=C.prototype.cr=function(a){a===f&&(a=m);var b=this.b;if(b===m)return o;b.Eb("Expand SubGraph");var c=new z(V);if(a instanceof V&&!a.ee){a.cr();c.add(a)}else for(a=b.selection.f;a.next();){var d=a.value;if(d instanceof V&&!d.ee){d.cr();c.add(d)}}b.ga("SubGraphExpanded",c);b.Kd("Expand SubGraph")};
C.prototype.canExpandSubGraph=C.prototype.iH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Ja)return o;if(a instanceof V)return a.ee?o:h;for(a=b.selection.f;a.next();){b=a.value;if(b instanceof V&&!b.ee)return h}return o};
C.prototype.editTextBlock=C.prototype.oI=function(a){a===f&&(a=m);var b=this.b;if(b!==m&&b.Lb!==m){var c=b.Lb.Vu;if(c!==m){if(a===m){for(var a=b.selection.f,d=m;a.next();){var e=a.value;if(e.canEdit()){d=e;break}}if(d===m)return;a=d.wB(function(a){return a instanceof na&&a.ku})}if(a!==m&&a instanceof na){c.wf=a;b.pa=c}}}};
C.prototype.canEditTextBlock=C.prototype.hH=function(a){a===f&&(a=m);var b=this.b;if(b===m||(b.Ja||b.Md)||!b.Vm||b.Lb===m||b.Lb.Vu===m)return o;if(a instanceof na){a=a.W;if(a!==m&&a.canEdit())return h}else for(b=b.selection.f;b.next();){a=b.value;if(a.canEdit()){a=a.wB(function(a){return a instanceof na&&a.ku});if(a!==m)return h}}return o};C.prototype.print=C.prototype.print=aa();C.prototype.canPrint=C.prototype.LE=function(){var a=this.b;return a!==m&&a.Rm};u.a(C,"copiesTree",C.prototype.ZA);
u.defineProperty(C,{ZA:"copiesTree"},r("kz"),ba("kz"));u.a(C,"deletesTree",C.prototype.oB);u.defineProperty(C,{oB:"deletesTree"},r("pz"),ba("pz"));u.a(C,"archetypeGroupData",C.prototype.kx);
u.defineProperty(C,{kx:"archetypeGroupData"},r("dz"),function(a){a!==m&&u.c(a,Object,C,"archetypeGroupData");var b=this.b;if(b!==m){b=b.J;b!==m&&!(a instanceof V)&&!b.Yx(a)&&u.g("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+a)}this.dz=a});u.a(C,"memberValidation",C.prototype.xr);u.defineProperty(C,{xr:"memberValidation"},r("Dj"),function(a){a!==m&&u.e(a,"function",C,"memberValidation");this.Dj=a});
function qf(){u.Fb(this);this.L=m;this.pb="";this.oh=h;this.Dz=o;this.xA=m;this.Qt=-1}u.H("Tool",qf);qf.prototype.sf=function(a){s&&a!==m&&u.c(a,B,qf,"setDiagram");this.L=a};qf.prototype.toString=function(){return this.name!==""?this.name+" Tool":u.Ii(Object.getPrototypeOf(this))};qf.prototype.updateAdornments=qf.prototype.$h=aa();qf.prototype.canStart=qf.prototype.ef=r("isEnabled");qf.prototype.doStart=qf.prototype.Gx=aa();qf.prototype.doActivate=qf.prototype.Rh=function(){this.Q=h};
qf.prototype.doDeactivate=qf.prototype.Yj=function(){this.Q=o};qf.prototype.doStop=qf.prototype.Gi=aa();qf.prototype.doCancel=qf.prototype.Fi=function(){this.stopTool()};qf.prototype.stopTool=qf.prototype.iK=function(){var a=this.b;if(a!==m&&a.pa===this){a.pa=m;a.oc=""}};qf.prototype.doMouseDown=qf.prototype.ju=function(){!this.Q&&this.canStart()&&this.doActivate()};qf.prototype.doMouseMove=qf.prototype.Qg=aa();qf.prototype.doMouseUp=qf.prototype.Ke=function(){this.stopTool()};
qf.prototype.doMouseWheel=qf.prototype.aF=aa();qf.prototype.doKeyDown=qf.prototype.Ex=function(){var a=this.b;a!==m&&a.F.key==="Esc"&&this.doCancel()};qf.prototype.doKeyUp=qf.prototype.Fx=aa();qf.prototype.startTransaction=qf.prototype.Eb=function(a){this.oe=m;var b=this.b;return b===m?o:b.Eb(a)};qf.prototype.stopTransaction=qf.prototype.Ui=function(){var a=this.b;return a===m?o:this.oe===m?a.Hr():a.Kd(this.oe)};
qf.prototype.standardMouseSelect=qf.prototype.xG=function(){var a=this.b;if(a!==m&&a.Gd){var b=a.F,c=a.er(b.C,h);if(c!==m)if(b.Wj){a.ga("ChangingSelection");c.Da=!c.Da;a.ga("ChangedSelection")}else if(b.shift){if(!c.Da){a.ga("ChangingSelection");c.Da=h;a.ga("ChangedSelection")}}else c.Da||a.select(c);else b.left&&(!b.Wj&&!b.shift)&&a.ux()}};
qf.prototype.standardMouseClick=qf.prototype.dK=function(a,b){a===f&&(a=m);b===f&&(b=function(a){return!a.ra.Yc});var c=this.b;if(c!==m){var d=c.F,e=c.Xc(d.C,a,b);d.$c=e;rf(e,d,c)}};
function rf(a,b,c){var d=0;b.left?d=b.He===1?1:b.He===2?2:1:b.right&&b.He===1&&(d=3);var e="";if(a!==m){switch(d){case 1:e="ObjectSingleClicked";break;case 2:e="ObjectDoubleClicked";break;case 3:e="ObjectContextClicked"}d!==0&&c.ga(e,a)}else{switch(d){case 1:e="BackgroundSingleClicked";break;case 2:e="BackgroundDoubleClicked";break;case 3:e="BackgroundContextClicked"}d!==0&&c.ga(e)}if(a!==m)for(;a!==m;){e=m;switch(d){case 1:e=a.click;break;case 2:e=a.jl?a.jl:a.click;break;case 3:e=a.Yq}if(e!==m){e(b,
a);if(b.td)break}a=a.U}else{e=m;switch(d){case 1:e=c.click;break;case 2:e=c.jl?c.jl:c.click;break;case 3:e=c.Yq}e!==m&&e(b)}}
qf.prototype.standardMouseOver=qf.prototype.eK=function(){var a=this.b;if(a!==m){var b=a.F,c=a.Xc(b.C,m,m);b.$c=c;var d=a.ab;a.ab=h;var e=o;if(c!==a.Tl){var g=a.Tl;a.Gw=g;a.Tl=c;for(this.doCurrentObjectChanged(g,c);g!==m;){var i=g.ny;if(i!==m){if(c===g)break;if(c!==m&&c.Wh(g))break;i(b,g,c);e=h;if(b.td)break}g=g.U}for(g=a.Gw;c!==m;){i=c.my;if(i!==m){if(g===c)break;if(g!==m&&g.Wh(c))break;i(b,c,g);e=h;if(b.td)break}c=c.U}c=a.Tl}if(c!==m){g=c;for(i="";g!==m;){i=g.cursor;if(i!=="")break;g=g.U}a.oc=i;
for(g=c;g!==m;){i=g.Br;if(i!==m){i(b,g);e=h;if(b.td)break}g=g.U}}else{a.oc="";i=a.Br;if(i!==m){i(b);e=h}}e&&a.update();a.ab=d}};qf.prototype.doCurrentObjectChanged=qf.prototype.$E=aa();
qf.prototype.standardMouseWheel=qf.prototype.fK=function(){var a=this.b;if(a!==m){var b=a.F,c=b.Ei;if(c!==0){var d=a.Lb.sl;if(a.Tq&&(d===sf&&!b.shift||d===tf&&b.Wj)){d=a.pk;a.pk=b.ad;var e=a.Jd;e!==m?c>0?e.vF():e.TE():a.scale=c>0?a.scale*1.05:a.scale/1.05;a.pk=d;b.bubbles=o}else if(d===sf&&b.shift||d===tf&&!b.Wj){d=a.position.copy();!b.shift&&a.Ge?c>0?a.scroll("line","up",3):a.scroll("line","down",3):b.shift&&a.Fe&&(c>0?a.scroll("line","left",3):a.scroll("line","right",3));if(!a.position.u(d))b.bubbles=
o}}}};qf.prototype.standardWaitAfter=qf.prototype.gK=function(a){u.e(a,"number",qf,"standardWaitAfter:delay");this.cancelWaitAfter();var b=this;this.Qt=window.setTimeout(function(){b.doWaitAfter()},a)};qf.prototype.cancelWaitAfter=qf.prototype.zH=function(){this.Qt!==-1&&window.clearTimeout(this.Qt);this.Qt=-1};qf.prototype.doWaitAfter=qf.prototype.dF=aa();
qf.prototype.findToolHandleAt=qf.prototype.AI=function(a,b){var c=this.b;if(c===m)return m;c=c.Xc(a,m,function(a){a=a.W;return a===m?o:a.Fd!==m});if(c===m)return m;var d=c.W;return d===m||d.gd!==b?m:c};qf.prototype.isBeyondDragSize=qf.prototype.YI=function(){var a=this.b;if(a===m)return o;var b=a.bc.ad,a=a.F.ad,c=2;u.Ow&&(c=c+4);return Math.abs(a.x-b.x)>c||Math.abs(a.y-b.y)>c};u.m(qf,{b:"diagram"},r("L"));u.a(qf,"name",qf.prototype.name);u.defineProperty(qf,{name:"name"},r("pb"),ba("pb"));
u.a(qf,"isEnabled",qf.prototype.isEnabled);u.defineProperty(qf,{isEnabled:"isEnabled"},r("oh"),ba("oh"));u.a(qf,"isActive",qf.prototype.Q);u.defineProperty(qf,{Q:"isActive"},r("Dz"),ba("Dz"));u.a(qf,"transactionResult",qf.prototype.oe);u.defineProperty(qf,{oe:"transactionResult"},r("xA"),ba("xA"));function uf(a){this.Dw=a!==f?a.copy():new E;this.jA=m}uf.prototype.toString=function(){return this.Dw.toString()};u.a(uf,"point",uf.prototype.Yg);u.defineProperty(uf,{Yg:"point"},r("Dw"),ba("Dw"));
function vf(){qf.call(this);this.name="Dragging";this.jz=h;this.Gk=this.wz=o;this.aw=(new eb(NaN,NaN)).freeze();this.bw=Vb;this.cw=(new E(NaN,NaN)).freeze();this.tz=this.Gz=o;this.uz=this.iz=this.vz=this.mz=m;this.Co=this.sz=o;this.Am=new E(NaN,NaN);this.Dh=new E;this.Gt=o;this.Ct=h;this.Xl=100;this.zk=this.rt=m}u.H("DraggingTool",vf);u.ma(vf,qf);u.a(vf,"copiesEffectiveCollection",vf.prototype.YA);u.defineProperty(vf,{YA:"copiesEffectiveCollection"},r("jz"),ba("jz"));u.a(vf,"dragsTree",vf.prototype.sB);
u.defineProperty(vf,{sB:"dragsTree"},r("wz"),ba("wz"));u.a(vf,"isGridSnapEnabled",vf.prototype.qn);u.defineProperty(vf,{qn:"isGridSnapEnabled"},r("Gk"),function(a){if(this.Gk!==a){u.e(a,"boolean",vf,"isGridSnapEnabled");this.Gk=a}});u.a(vf,"gridSnapCellSize",vf.prototype.Tx);u.defineProperty(vf,{Tx:"gridSnapCellSize"},r("aw"),function(a){if(!this.aw.u(a)){u.c(a,eb,vf,"gridSnapCellSize");this.aw=a=a.B()}});u.a(vf,"gridSnapCellSpot",vf.prototype.FB);
u.defineProperty(vf,{FB:"gridSnapCellSpot"},r("bw"),function(a){if(!this.bw.u(a)){u.c(a,K,vf,"gridSnapCellSpot");this.bw=a=a.B()}});u.a(vf,"gridSnapOrigin",vf.prototype.GB);u.defineProperty(vf,{GB:"gridSnapOrigin"},r("cw"),function(a){if(!this.cw.u(a)){u.c(a,E,vf,"gridSnapOrigin");this.cw=a=a.B()}});u.a(vf,"isDragSnapEnabled",vf.prototype.AF);u.defineProperty(vf,{AF:"isDragSnapEnabled"},r("Gz"),ba("Gz"));u.a(vf,"draggableLinks",vf.prototype.kl);u.defineProperty(vf,{kl:"draggableLinks"},r("tz"),ba("tz"));
u.a(vf,"currentPart",vf.prototype.fl);u.defineProperty(vf,{fl:"currentPart"},r("mz"),ba("mz"));u.a(vf,"copiedParts",vf.prototype.nc);u.defineProperty(vf,{nc:"copiedParts"},r("iz"),ba("iz"));u.a(vf,"draggedParts",vf.prototype.Jb);u.defineProperty(vf,{Jb:"draggedParts"},r("vz"),ba("vz"));u.a(vf,"draggedLink",vf.prototype.Bb);u.defineProperty(vf,{Bb:"draggedLink"},r("uz"),ba("uz"));u.a(vf,"dragOutStarted",vf.prototype.Ix);u.defineProperty(vf,{Ix:"dragOutStarted"},r("sz"),ba("sz"));u.a(vf,"delay",vf.prototype.hu);
u.defineProperty(vf,{hu:"delay"},r("Xl"),ba("Xl"));vf.prototype.canStart=vf.prototype.ef=function(){if(!this.isEnabled)return o;var a=this.b;if(a===m||!a.Sj&&!a.Hh&&!a.Wt||!a.Gd)return o;var b=a.F;return!b.left||a.pa!==this&&(!this.isBeyondDragSize()||window.TouchEvent&&(b.ei!==m&&b.ei instanceof window.TouchEvent)&&b.timestamp-a.bc.timestamp<this.Xl)?o:this.findDraggablePart()!==m};
vf.prototype.findDraggablePart=vf.prototype.tI=function(){var a=this.b;if(a===m)return m;a=a.er(a.bc.C,h);return a!==m&&(a.canMove()||a.canCopy())?a:m};vf.prototype.standardMouseSelect=vf.prototype.xG=function(){var a=this.b;if(a!==m&&a.Gd){this.fl=a.er(a.bc.C,h);if(this.fl!==m&&!this.fl.Da){a.ga("ChangingSelection");var b=a.F;!b.Wj&&!b.shift&&of(a);this.fl.Da=h;a.ga("ChangedSelection")}}};
vf.prototype.doActivate=vf.prototype.Rh=function(){var a=this.b;if(a!==m){this.standardMouseSelect();var b=this.fl;if(!(b===m||!b.canMove()&&!b.canCopy())){this.Q=h;this.Am.set(a.position);wf(this,a.selection);this.zk=this.rt=m;this.Jb=this.computeEffectiveCollection(a.selection);xf(this,this.Jb);this.Eb("Drag");this.Dh.set(a.bc.C);if(a.Wt){this.Ix=h;this.Co=o;yf=this;this.b.Ac=h}else a.Ac=h}}};
function wf(a,b){if(a.kl){var c=a.b;if(c!==m&&c.yi)if(b.count===1){c=b.f;c.next();a.Bb=c.value;a.Bb!==m&&(a.Bb.canRelinkFrom()&&a.Bb.canRelinkTo())&&a.Bb.Ng()}else a.Bb=m}}
vf.prototype.computeEffectiveCollection=vf.prototype.EH=function(a){var b=this.b!==m&&this.b.pa===this,c=new ka(T,uf);if(a===m)return c;for(var d=a.f;d.next();){var e=d.value;zf(this,c,e,b)}if(this.Bb!==m&&this.kl)return c;for(d=a.f;d.next();){e=d.value;if(e instanceof W){a=e;b=a.ca;if(b!==m&&!c.contains(b))c.remove(a);else{b=a.ea;b!==m&&!c.contains(b)&&c.remove(a)}}}return c};
function zf(a,b,c,d){if(!b.contains(c)&&(!d||c.canMove()||c.canCopy()))if(c instanceof U){b.add(c,new uf(c.location));if(c instanceof V)for(var e=c.ec;e.next();){var g=e.value;zf(a,b,g,d)}for(g=c.ge;g.next();){e=g.value;if(!b.contains(e)){var i=e.ca,j=e.ea;i!==m&&(b.contains(i)&&j!==m&&b.contains(j))&&zf(a,b,e,d)}}if(a.sB){g=h;e=c.b;if(e!==m)g=e.lf;for(c=g?c.fn():c.en();c.next();){g=c.value;zf(a,b,g,d)}}}else if(c instanceof W){e=c;b.add(e,new uf);for(g=e.Xh;g.next();)zf(a,b,g.value,d)}else c.constructor===
T&&b.add(c,new uf(c.location))}vf.prototype.doStop=vf.prototype.Gi=function(){var a=this.b;a!==m&&Af(a);Bf(this);Cf(this,this.Jb);this.Jb=m;this.Co=this.Ix=o;if(Df.count>0){for(var b=Df.length,c=0;c<b;c++){var d=Df.j[c];if(d.Bb!==m)d.Bb=m;Ef(d);Bf(d);d.b!==m&&Af(d.b)}Df.clear()}if(this.Bb!==m)this.Bb=m;this.Am.Mr(NaN,NaN);yf=Ff=m;Ef(this);a.Ac=o;this.Ui()};
function Bf(a){var b=a.b;if(b!==m){var c=b.ab;b.ab=h;for(var d=b.F,e=a.zk;e!==m;){var g=e.ly;if(g!==m){g(d,e,m);if(d.td)break}e=e.U}b.ab=c}a.rt=m;a.zk=m}vf.prototype.doCancel=vf.prototype.Fi=function(){Ef(this);Gf(this);var a=this.b;if(a!==m&&this.Am.V())a.position=this.Am;this.stopTool()};function xf(a,b){if(b!==m){a.Gt=h;for(var c=b.f;c.next();){var d=c.key;if(d instanceof W)d.Em=h}}}
function Cf(a,b){if(b!==m&&a.Gt){for(var c=b.f;c.next();){var d=c.key;if(d instanceof W){d.Em=o;d.Te===Hf?If(d):d.M()}}a.Gt=o}}vf.prototype.doKeyDown=vf.prototype.Ex=function(){var a=this.b;if(a!==m){a=a.F;a!==m&&this.Q&&(a.key==="Esc"?this.doCancel():this.doMouseMove())}};vf.prototype.doKeyUp=vf.prototype.Fx=function(){var a=this.b;a!==m&&a.F!==m&&this.Q&&this.doMouseMove()};
function Jf(a){for(var b=Infinity,c=Infinity,d=-Infinity,e=-Infinity,a=a.f;a.next();){var g=a.value;if(g instanceof U||g.constructor===T){var i=g.location,g=i.x,i=i.y;if(!isNaN(g)&&!isNaN(i)){g<b&&(b=g);i<c&&(c=i);g>d&&(d=g);i>e&&(e=i)}}}return b===Infinity?new J(0,0,0,0):new J(b,c,d-b,e-c)}
function Pf(a,b){if(a.nc===m){var c=a.b;if(!(c===m||c.Ja||c.Md)&&a.Jb!==m){c.ab=!b;c.J.ab=!b;c.Sq=!b;Gf(a);a.Dh.set(c.bc.C);for(var c=a.YA?c.Jd.copyParts(a.Jb.Vi(),c,h):c.Jd.copyParts(c.selection,c,h),d=c.f;d.next();)d.value.location=d.key.location.copy();d=Jf(c);new E(d.x+d.width/2,d.y+d.height/2);for(var d=new ka(T,uf),e=a.Jb.f;e.next();){var g=e.key;if((g instanceof U||g.constructor===T)&&g.canCopy()){g=c.$(g);if(g!==m){g.Sh();d.add(g,new uf(g.location))}}}for(c=c.f;c.next();){e=c.value;e instanceof
W&&e.canCopy()&&d.add(e,new uf)}a.nc=d;wf(a,d.Vi());if(a.Bb!==m){c=a.Bb;d=kb(c.hb);c.dk(a.Dh.x-(d.x+d.width/2),a.Dh.y-(d.y+d.height/2))}}}}function Ef(a){var b=a.b;if(b!==m){if(a.nc!==m){b.Jd.deleteParts(a.nc.Vi(),o);a.nc=m}b.ab=o;b.J.ab=o;b.Sq=o;a.Dh.set(b.bc.C)}}function Qf(a,b){var c=a.b;if(c!==m){var d=a.Dh;a.moveParts(b,c.F.C.copy().Rr(d),h)}}
vf.prototype.moveParts=vf.prototype.xJ=function(a,b,c){if(!(a===m||a.count===0)){var d=b.copy();if(isNaN(d.x))d.x=0;if(isNaN(d.y))d.y=0;var e=this.Gt;e||xf(this,a);for(var g=new z,i=new z(Ka),j=a.f;j.next();){var k=j.key;if(k instanceof U||k.constructor===T){var l=Rf(this,k,a);if(l!==m)g.add({Wg:k,info:j.value,qF:l});else if(!c||k.canMove()){var l=j.value.Yg,n=this.computeMove(k,l.copy().add(d),a);k.location=n;j.value.jA=n.copy().Rr(l)}}else j.key instanceof W&&i.add(j.Sd)}for(c=g.f;c.next();){g=
c.value;l=g.info.Yg;n=l.copy().add(g.qF.jA);g.Wg.location=n}for(i=i.f;i.next();){j=i.value;l=j.key;if(l instanceof W)if(l.Em){c=l.ca;g=l.ea;if(this.Bb!==m&&this.kl){j=j.value.Yg;a.add(l,new uf(d));n=b.x-j.x;c=b.y-j.y;l.dk(n,c)}else{n=new E(0,0);if(c!==m){n.set(c.location);var q=a.$(c);q!==m&&n.Rr(q.Yg)}k=new E(0,0);if(g!==m){k.set(g.location);q=a.$(g);q!==m&&k.Rr(q.Yg)}if(c!==m&&g!==m)if(n.Zj(k)){j=j.value.Yg;c=n.copy();c.Rr(j);a.add(l,new uf(n));l.dk(c.x,c.y)}else{l.Em=o;If(l)}else{j=j.value.Yg;
a.add(l,new uf(c!==m?n:g!==m?k:b));n=d.x-j.x;c=d.y-j.y;l.dk(n,c)}}}else if(l.ca===m||l.ea===m){j=j.value.Yg;a.add(l,new uf(b));n=d.x-j.x;c=d.y-j.y;l.dk(n,c)}}e||Cf(this,a)}};function Rf(a,b,c){b=b.Ta;if(b!==m){a=Rf(a,b,c);if(a!==m)return a;a=c.$(b);if(a!==m&&a instanceof uf)return a}return m}
function Gf(a){if(a.Jb!==m){var b=a.b,c=o,d=o;if(b!==m){c=b.ab;d=b.J.ab;b.ab=h;b.J.ab=h}for(var e=a.Jb.f;e.next();){var g=e.key;if(g instanceof U||g.constructor===T)g.location=e.value.Yg}for(e=a.Jb.f;e.next();){g=e.key;if(g instanceof W&&g.Em){var i=e.value.Yg;a.Jb.add(g,new uf);g.dk(-i.x,-i.y)}}if(b!==m){b.ab=c;b.J.ab=d;b.Ki()}}}
vf.prototype.computeMove=vf.prototype.HH=function(a,b){if(a===m)return b;var c=b,c=b;if(this.qn){c=b.copy();if(a!==m){var d=this.b;if(d!==m){var e=d.wu,g=this.Tx,d=g.width,g=g.height,i=this.GB,j=i.x,i=i.y,k=this.FB;if(e!==m){var l=e.lr;if(isNaN(d))d=l.width;if(isNaN(g))g=l.height;e=e.Sx;if(isNaN(j))j=e.x;if(isNaN(i))i=e.y}e=(new E).zl(0,0,d,g,k);c=kd(c.x,c.y,j+e.x,i+e.y,d,g)}}}c=a.Hx!==m?a.Hx(a,b,c):c;g=a.oC;d=g.x;if(isNaN(d))d=a.location.x;g=g.y;if(isNaN(g))g=a.location.y;e=a.iC;j=e.x;if(isNaN(j))j=
a.location.x;e=e.y;if(isNaN(e))e=a.location.y;return new E(Math.max(d,Math.min(c.x,j)),Math.max(g,Math.min(c.y,e)))};function Sf(a,b){if(b===m)return h;var c=b.W;return c===m||c.Da||c instanceof bf||c.ra.Yc||a.Jb&&a.Jb.contains(c)||a.nc&&a.nc.contains(c)?h:o}
vf.prototype.dragOver=vf.prototype.bI=function(a,b,c){var d=this.b;if(d!==m){if(this.kl&&this.Bb!==m){var e=this.b.J;if(e instanceof P){this.Bb.ca!==m&&e.Lr(this.Bb.data,"");this.Bb.ea!==m&&e.Nr(this.Bb.data,"")}}e=o;if(this.Ct===o){e=d.ab;d.ab=h}var g=o,i=this,j=Tf(d,a,m,function(a){return!Sf(i,a)}),k=d.F;k.$c=j;var l=d.ab;d.ab=h;if(j!==this.zk){var n=this.zk;this.rt=n;for(this.zk=j;n!==m;){var q=n.ly;if(q!==m){if(j===n)break;if(j!==m&&j.Wh(n))break;q(k,n,j);g=h;if(k.td)break}n=n.U}for(n=this.rt;j!==
m;){q=j.pC;if(q!==m){if(n===j)break;if(n!==m&&n.Wh(j))break;q(k,j,n);g=h;if(k.td)break}j=j.U}j=this.zk}if(j===m){q=d.qC;if(q!==m){q(k);g=h}}d.ab=l;g&&d.update();if(this.Ct===o)d.ab=e;if((d.Fe||d.Ge)&&(b||c)){d.Ev=d.Wr(a);Uf(d,d.Ev).Zj(d.position)?Af(d):Vf(d)}}};
vf.prototype.dropOnto=vf.prototype.mI=function(a){var b=this.b;if(b!==m&&b.J!==m){var c=this;Bf(this);var d=Tf(b,a,m,function(a){return!Sf(c,a)}),a=b.F;a.$c=d;if(d!==m)for(;d!==m;){var e=d.yr;if(e!==m){e(a,d);if(a.td)break}d=d.U}else{e=b.yr;e!==m&&e(a)}for(a=b.selection.f;a.next();){d=a.value;d instanceof U&&Wf(b,d.oa)}}};
vf.prototype.doMouseMove=vf.prototype.Qg=function(){if(this.Q){var a=this.b;if(a!==m&&this.fl!==m&&this.Jb!==m){var b=o,c=o;if(this.mayCopy()){b=h;Pf(this,o);Qf(this,this.nc)}else if(this.mayMove()){c=h;Ef(this);Qf(this,this.Jb)}else Ef(this);this.dragOver(a.F.C,c,b);pf(a)}}};
vf.prototype.doMouseUp=vf.prototype.Ke=function(){if(this.Q){this.Co=h;var a=this.b;if(a!==m){var b=o,c=this.mayCopy();if(c&&this.nc!==m){Gf(this);Ef(this);Pf(this,h);Qf(this,this.nc);this.nc!==m&&a.Cy(this.nc.Vi())}else{b=h;if(this.mayMove()){this.Ct=o;this.dragOver(a.F.C,h,o);this.Ct=h}}this.dropOnto(a.F.C);if(this.Q){this.nc=m;if(b&&this.Jb!==m)for(b=this.Jb.f;b.next();){var d=b.key;if(d instanceof U){d=d.Ta;d!==m&&d.placeholder!==m&&!this.Jb.contains(d)&&d.placeholder.Ax&&d.M()}}a.Ki();Cf(this,
this.Jb);this.oe=c?"Copy":"Move";a.ga(c?"SelectionCopied":"SelectionMoved",a.selection)}this.stopTool()}}};vf.prototype.mayCopy=vf.prototype.qJ=function(){var a=this.b;if(a===m||(a.Ja||a.Md||!a.Qm||!a.Hh)||!a.F.Wj)return o;for(a=a.selection.f;a.next();){var b=a.value;if((b instanceof U||b.constructor===T)&&b.canCopy())return h}return this.Bb!==m&&this.kl&&this.Bb.canCopy()?h:o};
vf.prototype.mayMove=vf.prototype.sJ=function(){var a=this.b;if(a===m||a.Ja||!a.Sj)return o;for(a=a.selection.f;a.next();){var b=a.value;if((b instanceof U||b.constructor===T)&&b.canMove())return h}return this.Bb!==m&&this.kl&&this.Bb.canMove()?h:o};var Df=new z(vf),yf=m,Ff=m;vf.prototype.mayCopyExternal=vf.prototype.rJ=function(){var a=this.b;return a===m||(!a.HA||a.Ja||a.Md||!a.Qm)||a.J===m?o:h};
vf.prototype.doSimulatedDragEnter=vf.prototype.pB=function(){this.mayCopyExternal()&&(Df.contains(this)||Df.add(this))};vf.prototype.doSimulatedDragLeave=vf.prototype.qB=function(){Ef(this);var a=this.b;if(a!==m&&a.pa!==this&&this.Am.V())a.position=this.Am};vf.prototype.doSimulatedDragOver=vf.prototype.bF=function(){if(this.mayCopyExternal()){var a=this.b;if(a!==m){var b=yf;if(b!==m&&b.Jb!==m){Xf(this,b.Jb.Vi(),o);Qf(this,this.nc);a.Cy(this.nc.Vi());this.dragOver(a.F.C,o,h);pf(a)}}}};
vf.prototype.doSimulatedDrop=vf.prototype.cF=function(){var a=yf;if(a!==m){a.Co=h;Ef(this);if(this.mayCopyExternal()){var b=this.b;if(b!==m){this.Eb("Drop");Xf(this,a.Jb.Vi(),h);Qf(this,this.nc);this.nc!==m&&b.Cy(this.nc.Vi());this.oe="ExternalCopy";this.dropOnto(b.F.C);this.nc=m;b.ga("ExternalObjectsDropped",b.selection);this.Ui();b.Ki()}}}};
function Xf(a,b,c){if(a.nc===m){var d=a.b;if(!(d===m||d.Ja||d.Md)){var e=d.J;if(e!==m){e.ab=!c;d.Sq=!c;a.Dh.set(d.F.C);for(var d=d.Jd.copyParts(b,d,h),c=Jf(b),e=new E(c.x+c.width/2,c.y+c.height/2),g=a.Dh,c=new ka(T,uf),b=b.f;b.next();){var i=b.value;if((i instanceof U||i.constructor===T)&&i.canCopy()){var j=i.location,i=d.$(i);i.location=new E(g.x-(e.x-j.x),g.y-(e.y-j.y));i.Sh();c.add(i,new uf(i.location))}}for(d=d.f;d.next();){b=d.value;b instanceof W&&b.canCopy()&&c.add(b,new uf)}a.nc=c;wf(a,c.Vi());
if(a.Bb!==m){c=a.Bb;d=kb(c.hb);c.dk(a.Dh.x-(d.x+d.width/2),a.Dh.y-(d.y+d.height/2))}}}}}
function Yf(){qf.call(this);this.Ew=100;this.ax=o;var a=new W;a.gk="PATH";var b=new X;b.Mi=h;b.name="PATH";b.stroke="blue";a.add(b);b=new X;b.Fl="Standard";b.fill="blue";a.add(b);a.wd="Tool";this.Uw=a;a=new U;b=new X;b.je="";b.Ua="Rectangle";b.fill=m;b.stroke="magenta";b.Na=2;b.ia=new eb(1,1);a.add(b);a.fk=o;a.wd="Tool";this.Sw=a;this.Tw=b;a=new U;b=new X;b.je="";b.Ua="Rectangle";b.fill=m;b.stroke="magenta";b.Na=2;b.ia=new eb(1,1);a.add(b);a.fk=o;a.wd="Tool";this.Vw=a;this.Ww=b;this.Cw=this.Bw=this.yw=
this.xw=this.zw=m;this.Is=h;this.bE=new ka(Q,"boolean");this.Kz=this.Rw=m}u.H("LinkingBaseTool",Yf);u.ma(Yf,qf);Yf.prototype.doStop=Yf.prototype.Gi=function(){this.qf=this.Re=this.pf=this.Qe=this.Cb=m;this.Xu.clear();this.le=m};u.a(Yf,"portGravity",Yf.prototype.yC);u.defineProperty(Yf,{yC:"portGravity"},r("Ew"),function(a){if(this.Ew!==a){s&&u.e(a,"number",Yf,"portGravity");this.Ew=a}});u.a(Yf,"validUnconnectedLinks",Yf.prototype.Qn);
u.defineProperty(Yf,{Qn:"validUnconnectedLinks"},r("ax"),function(a){if(this.ax!==a){s&&u.e(a,"boolean",Yf,"validUnconnectedLinks");this.ax=a}});u.a(Yf,"temporaryLink",Yf.prototype.ah);u.defineProperty(Yf,{ah:"temporaryLink"},r("Uw"),function(a){if(this.Uw!==a){s&&u.c(a,W,Yf,"temporaryLink");this.Uw=a}});u.a(Yf,"temporaryFromNode",Yf.prototype.me);u.defineProperty(Yf,{me:"temporaryFromNode"},r("Sw"),function(a){if(this.Sw!==a){s&&u.c(a,U,Yf,"temporaryFromNode");this.Sw=a}});
u.a(Yf,"temporaryFromPort",Yf.prototype.Dl);u.defineProperty(Yf,{Dl:"temporaryFromPort"},r("Tw"),function(a){if(this.Tw!==a){s&&u.c(a,Q,Yf,"temporaryFromPort");this.Tw=a}});u.a(Yf,"temporaryToNode",Yf.prototype.ne);u.defineProperty(Yf,{ne:"temporaryToNode"},r("Vw"),function(a){if(this.Vw!==a){s&&u.c(a,U,Yf,"temporaryToNode");this.Vw=a}});u.a(Yf,"temporaryToPort",Yf.prototype.El);
u.defineProperty(Yf,{El:"temporaryToPort"},r("Ww"),function(a){if(this.Ww!==a){s&&u.c(a,Q,Yf,"temporaryToPort");this.Ww=a}});u.a(Yf,"originalLink",Yf.prototype.Cb);u.defineProperty(Yf,{Cb:"originalLink"},r("zw"),function(a){if(this.zw!==a){s&&a!==m&&u.c(a,W,Yf,"originalLink");this.zw=a}});u.a(Yf,"originalFromNode",Yf.prototype.Qe);u.defineProperty(Yf,{Qe:"originalFromNode"},r("xw"),function(a){if(this.xw!==a){s&&a!==m&&u.c(a,U,Yf,"originalFromNode");this.xw=a}});u.a(Yf,"originalFromPort",Yf.prototype.pf);
u.defineProperty(Yf,{pf:"originalFromPort"},r("yw"),function(a){if(this.yw!==a){s&&a!==m&&u.c(a,Q,Yf,"originalFromPort");this.yw=a}});u.a(Yf,"originalToNode",Yf.prototype.Re);u.defineProperty(Yf,{Re:"originalToNode"},r("Bw"),function(a){if(this.Bw!==a){s&&a!==m&&u.c(a,U,Yf,"originalToNode");this.Bw=a}});u.a(Yf,"originalToPort",Yf.prototype.qf);u.defineProperty(Yf,{qf:"originalToPort"},r("Cw"),function(a){if(this.Cw!==a){s&&a!==m&&u.c(a,Q,Yf,"originalToPort");this.Cw=a}});
u.m(Yf,{vd:"isForwards"},r("Is"));u.m(Yf,{Xu:"validPortsCache"},r("bE"));u.a(Yf,"targetPort",Yf.prototype.le);u.defineProperty(Yf,{le:"targetPort"},r("Rw"),function(a){if(this.Rw!==a){s&&a!==m&&u.c(a,Q,Yf,"targetPort");this.Rw=a}});Yf.prototype.copyPortProperties=Yf.prototype.OH=function(a,b,c,d,e){if(!(a===m||b===m||c===m||d===m)){d.ia=b.oa.size;if(e){d.Xa=b.Xa;d.jk=b.jk}else{d.Va=b.Va;d.$j=b.$j}c.mf=Zb;c.location=b.sb(Zb);d.Ka=b.kn();c.jf()}};
Yf.prototype.setNoTargetPortProperties=Yf.prototype.XJ=function(a,b){if(b!==m){b.ia=new eb(1,1);b.Va=Tb;b.Xa=Tb}if(a!==m)a.location=this.b.F.C};
Yf.prototype.doMouseMove=Yf.prototype.Qg=function(){if(this.Q){var a=this.b;if(a!==m){this.le=this.findTargetPort(this.vd);if(this.le!==m){var b=this.le.W;if(b instanceof U){this.vd?this.copyPortProperties(b,this.le,this.ne,this.El,h):this.copyPortProperties(b,this.le,this.me,this.Dl,o);pf(a);return}}this.vd?this.setNoTargetPortProperties(this.ne,this.El):this.setNoTargetPortProperties(this.me,this.Dl);pf(a)}}};
Yf.prototype.findValidLinkablePort=Yf.prototype.CI=function(a,b){if(a===m)return m;var c=a.W;if(!(c instanceof U))return m;for(;a!==m;){var d=b?a.Ny:a.Px;if(d===h&&(a.je!==m||a instanceof U)&&(b?this.isValidTo(c,a):this.isValidFrom(c,a)))return a;if(d===o)break;a=a.U}return m};
Yf.prototype.findTargetPort=Yf.prototype.xI=function(a){for(var b=this.b,c=b.F.C,d=this.yC,e=this,g=b.hn(c,d,function(b){return e.findValidLinkablePort(b,a)},m),b=d*d,d=m,g=g.f;g.next();){var i=g.value,j=i.W;if(j instanceof U){var k=i.sb(Zb),l=c.x-k.x,k=c.y-k.y,l=l*l+k*k;if(l<b){k=this.Xu.$(i);if(k!==m){if(k){d=i;b=l}}else if(a&&this.isValidLink(this.Qe,this.pf,j,i)||!a&&this.isValidLink(j,i,this.Re,this.qf)){this.Xu.add(i,h);d=i;b=l}else this.Xu.add(i,o)}}}if(d!==m){c=d.W;if(c instanceof U&&(c.ra===
m||c.ra.$k))return d}return m};Yf.prototype.isValidFrom=Yf.prototype.dJ=function(a,b){if(a===m||b===m)return this.Qn;if(this.b.pa===this&&(a.ra!==m&&!a.ra.$k||b.Px!==h))return o;var c=b.AB;if(c<Infinity){if(this.Cb!==m&&a===this.Qe&&b===this.pf)return h;var d=b.je;d===m&&(d="");if(a.Mx(d).count>=c)return o}return h};
Yf.prototype.isValidTo=Yf.prototype.gJ=function(a,b){if(a===m||b===m)return this.Qn;if(this.b.pa===this&&(a.ra!==m&&!a.ra.$k||b.Ny!==h))return o;var c=b.kD;if(c<Infinity){if(this.Cb!==m&&a===this.Re&&b===this.qf)return h;var d=b.je;d===m&&(d="");if(a.Mx(d).count>=c)return o}return h};Yf.prototype.isInSameNode=Yf.prototype.$I=function(a,b){if(a===m||b===m)return o;if(a===b)return h;var c=a.W,d=b.W;return c!==m&&c===d};
Yf.prototype.isLinked=Yf.prototype.bJ=function(a,b){if(a===m||b===m)return o;var c=a.W;if(!(c instanceof U))return o;var d=a.je;d===m&&(d="");var e=b.W;if(!(e instanceof U))return o;var g=b.je;g===m&&(g="");for(e=e.gf(g);e.next();){g=e.value;if(g.ca===c&&g.Tg===d)return h}return o};
Yf.prototype.isValidLink=Yf.prototype.eJ=function(a,b,c,d){return!this.isValidFrom(a,b)||!this.isValidTo(c,d)||b!==m&&d!==m&&((!b.zB||!d.jD)&&this.isInSameNode(b,d)||(!b.yB||!d.iD)&&this.isLinked(b,d))||this.Cb!==m&&(a!==m&&a.ql(this.Cb)||c!==m&&c.ql(this.Cb))||a!==m&&c!==m&&(a.data===m&&c.data!==m||a.data!==m&&c.data===m)||!Zf(this,a,c,this.Cb)?o:this.hy!==m?this.hy(a,b,c,d,this.Cb):h};
function Zf(a,b,c,d){if(b===m||c===m)return o;var e=a.b.xD;if(e!==$f){if(e===ag){for(e=c.ge;e.next();){var g=e.value;if(g!==d&&g.ea===c)return o}return!bg(a,b,c,d)}if(e===cg){for(e=b.ge;e.next();){g=e.value;if(g!==d&&g.ca===b)return o}return!bg(a,b,c,d)}if(e===dg){if(b===c)a=h;else{e=new la(U);e.add(c);a=eg(a,e,b,c,d)}return!a}if(e===fg)return!bg(a,b,c,d);if(e===gg){if(b===c)a=h;else{e=new la(U);e.add(c);a=ig(a,e,b,c,d)}return!a}}return h}
function bg(a,b,c,d){if(b===c)return h;if(b===m||c===m)return o;for(var e=b.ge;e.next();){var g=e.value;if(g!==d&&g.ea===b){g=g.ca;if(g!==b&&bg(a,g,c,d))return h}}return o}function eg(a,b,c,d,e){if(c===d)return h;if(c===m||d===m||b.contains(c))return o;b.add(c);for(var g=c.ge;g.next();){var i=g.value;if(i!==e&&i.ea===c){i=i.ca;if(i!==c&&eg(a,b,i,d,e))return h}}return o}
function ig(a,b,c,d,e){if(c===d)return h;if(c===m||d===m||b.contains(c))return o;b.add(c);for(var g=c.ge;g.next();){var i=g.value;if(i!==e){var j=i.ca,i=i.ea,j=j===c?i:j;if(j!==c&&ig(a,b,j,d,e))return h}}return o}u.a(Yf,"linkValidation",Yf.prototype.hy);u.defineProperty(Yf,{hy:"linkValidation"},r("Kz"),function(a){a!==m&&u.e(a,"function",Yf,"linkValidation");this.Kz=a});function oa(){Yf.call(this);this.name="Linking";this.Cv={};this.Bv=m;this.O=jg;this.Mw=this.Lw=m}u.H("LinkingTool",oa);u.ma(oa,Yf);
var jg;oa.Either=jg=u.l(oa,"Either",0);var kg;oa.ForwardsOnly=kg=u.l(oa,"ForwardsOnly",0);var lg;oa.BackwardsOnly=lg=u.l(oa,"BackwardsOnly",0);u.a(oa,"archetypeLinkData",oa.prototype.JA);u.defineProperty(oa,{JA:"archetypeLinkData"},r("Cv"),function(a){if(this.Cv!==a){a!==m&&u.c(a,Object,oa,"archetypeLinkData");this.Cv=a}});u.a(oa,"archetypeLabelNodeData",oa.prototype.IA);
u.defineProperty(oa,{IA:"archetypeLabelNodeData"},r("Bv"),function(a){if(this.Bv!==a){a!==m&&u.c(a,Object,oa,"archetypeLabelNodeData");var b=this.b;if(b!==m){b=b.J;b!==m&&!(a instanceof U)&&!b.cy(a)&&u.g("CommandHandler.archetypeLabelNodeData must be either a Node or a data object for which GraphLinksModel.isLinkLabelForNodeData is true: "+a)}this.Bv=a}});u.a(oa,"direction",oa.prototype.direction);
u.defineProperty(oa,{direction:"direction"},r("O"),function(a){if(this.O!==a){s&&u.Sa(a,oa,oa,"direction");this.O=a}});u.a(oa,"startObject",oa.prototype.Hy);u.defineProperty(oa,{Hy:"startObject"},r("Lw"),function(a){if(this.Lw!==a){s&&a!==m&&u.c(a,Q,oa,"startObject");this.Lw=a}});u.m(oa,{Tu:"startPort"},r("Mw"));
oa.prototype.canStart=oa.prototype.ef=function(){if(!this.isEnabled)return o;var a=this.b;if(a===m||(a.Ja||a.Md)||!a.$k)return o;var b=a.J;return b===m||!(b instanceof P)||!a.F.left||a.pa!==this&&!this.isBeyondDragSize()?o:this.findLinkablePort()!==m};
oa.prototype.findLinkablePort=oa.prototype.uI=function(){var a=this.b;if(a===m)return m;var b=this.Hy;b===m&&(b=a.Xc(a.bc.C,m,m));if(b===m||!(b.W instanceof U))return m;var c=this.direction;if(c===jg||c===kg){a=this.findValidLinkablePort(b,o);if(a!==m){this.Is=h;return a}}if(c===jg||c===lg){a=this.findValidLinkablePort(b,h);if(a!==m){this.Is=o;return a}}return m};
oa.prototype.doActivate=oa.prototype.Rh=function(){var a=this.b;if(a!==m){if(this.Tu===m)this.Mw=this.findLinkablePort();if(this.Tu!==m){this.Eb(this.name);a.Ac=h;a.oc="hand";a.add(this.me);a.add(this.ne);if(this.vd){this.pf=this.Tu;var b=this.pf.W;if(b instanceof U)this.Qe=b;this.copyPortProperties(this.Qe,this.pf,this.me,this.Dl,o)}else{this.qf=this.Tu;b=this.qf.W;if(b instanceof U)this.Re=b;this.copyPortProperties(this.Re,this.qf,this.ne,this.El,h)}if(this.ah){if(this.me!==m)this.ah.ca=this.me;
if(this.ne!==m)this.ah.ea=this.ne;a.add(this.ah)}this.Q=h}}};oa.prototype.doDeactivate=oa.prototype.Yj=function(){this.Q=o;var a=this.b;if(a!==m){a.remove(this.ah);a.remove(this.me);a.remove(this.ne);a.Ac=o;a.oc="";this.Ui()}};oa.prototype.doStop=oa.prototype.Gi=function(){Yf.prototype.Gi.call(this);this.Hy=this.Mw=m};
oa.prototype.doMouseUp=oa.prototype.Ke=function(){if(this.Q){var a=this.b;if(a===m)return;var b=this.oe=m,c=m,d=m,e=m,g=this.le=this.findTargetPort(this.vd),i=m;if(g!==m){i=g.W;if(i instanceof U)if(this.vd){if(this.Qe!==m){b=this.Qe;c=this.pf}d=i;e=g}else{b=i;c=g;if(this.Re!==m){d=this.Re;e=this.qf}}}else if(this.vd){if(this.Qe!==m&&this.Qn){b=this.Qe;c=this.pf}}else if(this.Re!==m&&this.Qn){d=this.Re;e=this.qf}if(b!==m||d!==m){b=this.insertLink(b,c,d,e);if(b!==m){if(g===m)this.vd?b.VE=a.F.C:b.UE=
a.F.C;a.Gd&&a.select(b);this.oe=this.name;a.ga("LinkDrawn",b)}else a.J.RA()}}this.stopTool()};
oa.prototype.insertLink=oa.prototype.UI=function(a,b,c,d){var e=this.b;if(e===m)return m;var g=e.J;if(g===m||!(g instanceof P))return m;b===m&&(b=a);b=b.je;b===m&&(b="");d===m&&(d=c);var i=d.je;i===m&&(i="");d=this.JA;if(d instanceof W){nf(d);g=d.copy();if(g instanceof W){g.ca=a;g.Tg=b;g.ea=c;g.Zh=i;e.add(g);return g}}else if(d!==m){d=g.$A(d);if(d instanceof Object){g.Qu(d,g.Ub(a.data));g.Lr(d,b);g.Ru(d,g.Ub(c.data));g.Nr(d,i);g.EA(d);a=this.IA;if(a!==m&&g.cy(a)){a=g.Zm(a);if(a instanceof Object){g.Tt(a);
a=g.Ub(a);a!==f&&g.DA(d,a)}}return g=e.Hi(d)}}return m};function mg(){Yf.call(this);this.name="Relinking";var a=new X;a.Ua="Diamond";a.ia=new eb(8,8);a.fill="cyan";a.cursor="pointer";a.Zg=0;this.zz=a;a=new X;a.Ua="Diamond";a.ia=new eb(8,8);a.fill="cyan";a.cursor="pointer";a.Zg=-1;this.uA=a;this.Rb=m;this.Xz=new J}u.H("RelinkingTool",mg);u.ma(mg,Yf);
mg.prototype.updateAdornments=mg.prototype.$h=function(a){if(a instanceof W){var b=m,c="RelinkFrom";if(a.Da){var d=a.Ln;if(d!==m&&a.gb()&&a.canRelinkFrom()&&d.ck()&&d.oa.V()){b=a.cn(c);if(b===m){b=this.makeAdornment(d,o);b.gd=c}b!==m&&b.M()}a.Km(c,b)}else a.xl(c);b=m;c="RelinkTo";if(a.Da){d=a.Ln;if(d!==m&&a.gb()&&a.canRelinkTo()&&d.ck()&&d.oa.V()){b=a.cn(c);if(b===m){b=this.makeAdornment(d,h);b.gd=c}b!==m&&b.M()}a.Km(c,b)}else a.xl(c)}};
mg.prototype.makeAdornment=mg.prototype.iy=function(a,b){var c=new bf;c.type=ng;var d=b?this.DG:this.lF;d!==m&&c.add(d.copy());c.Fd=a;return c};u.defineProperty(mg,{lF:"fromHandleArchetype"},r("zz"),function(a){a&&u.c(a,Q,mg,"fromHandleArchetype");this.zz=a});u.defineProperty(mg,{DG:"toHandleArchetype"},r("uA"),function(a){a&&u.c(a,Q,mg,"toHandleArchetype");this.uA=a});u.m(mg,{handle:"handle"},r("Rb"));
mg.prototype.canStart=mg.prototype.ef=function(){if(!this.isEnabled)return o;var a=this.b;if(a===m||(a.Ja||a.Md)||!a.yi)return o;var b=a.J;if(b===m||!(b instanceof P)||!a.F.left)return o;b=this.findToolHandleAt(a.bc.C,"RelinkFrom");b===m&&(b=this.findToolHandleAt(a.bc.C,"RelinkTo"));return b!==m};
mg.prototype.doActivate=mg.prototype.Rh=function(){var a=this.b;if(a!==m){var b=this.findToolHandleAt(a.bc.C,"RelinkFrom");b===m&&(b=this.findToolHandleAt(a.bc.C,"RelinkTo"));if(b!==m){var c=b.W;if(c instanceof bf&&c.Om instanceof W){this.Rb=b;this.Eb(this.name);a.Ac=h;a.oc="hand";this.Is=c===m||c.gd==="RelinkTo";this.Cb=c.Om;this.pf=this.Cb.zc;this.Qe=this.Cb.ca;this.qf=this.Cb.ld;this.Re=this.Cb.ea;this.Xz=this.Cb.oa;a.add(this.me);a.add(this.ne);this.vd?this.copyPortProperties(this.Qe,this.pf,
this.me,this.Dl,h):this.copyPortProperties(this.Re,this.qf,this.ne,this.El,o);if(this.Cb!==m&&this.Cb.Y>0){if(this.Qe===m){if(this.Dl!==m)this.Dl.ia=new eb(0,0);if(this.me!==m)this.me.location=this.Cb.h(0)}if(this.Re===m){if(this.El!==m)this.El.ia=new eb(0,0);if(this.ne!==m)this.ne.location=this.Cb.h(this.Cb.Y-1)}}if(this.ah!==m){if(this.me!==m)this.ah.ca=this.me;if(this.ne!==m)this.ah.ea=this.ne;a.add(this.ah)}this.Q=h}}}};
mg.prototype.doDeactivate=mg.prototype.Yj=function(){this.Q=o;var a=this.b;if(a!==m){a.remove(this.ah);a.remove(this.me);a.remove(this.ne);a.Ac=o;a.oc="";this.Ui()}};mg.prototype.doStop=mg.prototype.Gi=function(){Yf.prototype.Gi.call(this);this.Rb=m};
mg.prototype.doMouseUp=mg.prototype.Ke=function(){if(this.Q){var a=this.b;if(a===m)return;this.oe=m;var b=this.Qe,c=this.pf,d=this.Re,e=this.qf,g=this.Cb;this.le=this.findTargetPort(this.vd);if(this.le!==m){var i=this.le.W;if(i instanceof U)if(this.vd){d=i;e=this.le}else{b=i;c=this.le}}else if(this.Qn)if(this.vd)e=d=m;else c=b=m;else g=m;if(g!==m){this.reconnectLink(g,this.vd?d:b,this.vd?e:c,this.vd);if(this.le===m){this.vd?g.VE=a.F.C:g.UE=a.F.C;If(g)}if(a.Gd)g.Da=h;this.oe=this.name;a.ga("LinkRelinked",
g,this.vd?this.qf:this.pf)}og(this.Cb,this.Xz)}this.stopTool()};mg.prototype.reconnectLink=mg.prototype.JJ=function(a,b,c,d){var e=this.b;if(e===m)return o;var g=b!==m?b.data:m,g=g!==m?e.J.Ub(g):f,c=c.je!==m?c.je:"",a=a.data;if(a!==m&&g!==f){b=e.J;if(b===m||!(b instanceof P))return o;if(d){b.Ru(a,g);b.Nr(a,c)}else{b.Qu(a,g);b.Lr(a,c)}}else if(d){this.Cb.ea=b;this.Cb.Zh=c}else{this.Cb.ca=b;this.Cb.Tg=c}return h};
function pg(){qf.call(this);this.name="LinkReshaping";var a=new X;a.Ua="Rectangle";a.ia=new eb(6,6);a.fill="cyan";this.pj=a;this.Aw=this.Zz=this.Av=this.Rb=m}u.H("LinkReshapingTool",pg);u.ma(pg,qf);var qg;pg.None=qg=u.l(pg,"None",0);var rg;pg.Horizontal=rg=u.l(pg,"Horizontal",1);var sg;pg.Vertical=sg=u.l(pg,"Vertical",2);var tg;pg.All=tg=u.l(pg,"All",3);
pg.prototype.updateAdornments=pg.prototype.$h=function(a){if(a instanceof W){var b=m;if(a.Da){var c=a.path;if(c!==m&&a.gb()&&a.canReshape()&&c.ck()&&c.oa.V()){b=a.cn(this.name);if(b===m){b=this.makeAdornment(c);b.gd=this.name}if(b!==m){b.location=a.position;b.M()}}a.Km(this.name,b)}else a.xl(this.name)}};
pg.prototype.makeAdornment=pg.prototype.iy=function(a){var b=new bf;b.type=ng;var c=a.W,d=c.Y,e=ug(c);if(c.hb!==m&&d>2){for(var d=c.ru,g=c.ey,i=d+1;i<=g-1;i++){var j=this.makeHandle(a,i);if(j!==m){j.Zg=i;if(i!==d)if(i===d+1&&e){var k=c.h(d),l=c.h(d+1);Ua(k.x,l.x)&&Ua(k.y,l.y)&&(l=c.h(d-1));if(Ua(k.x,l.x)){j.Kn=sg;j.cursor="n-resize"}else if(Ua(k.y,l.y)){j.Kn=rg;j.cursor="w-resize"}}else if(i===g-1&&e){k=c.h(g-1);l=c.h(g);Ua(k.x,l.x)&&Ua(k.y,l.y)&&(k=c.h(g+1));if(Ua(k.x,l.x)){j.Kn=sg;j.cursor="n-resize"}else if(Ua(k.y,
l.y)){j.Kn=rg;j.cursor="w-resize"}}else if(i!==g){j.Kn=tg;j.cursor="move"}b.add(j)}}b.Fd=a}return b};pg.prototype.makeHandle=pg.prototype.NF=function(){var a=this.mr;return a===m?m:a.copy()};u.defineProperty(pg,{mr:"handleArchetype"},r("pj"),function(a){a&&u.c(a,Q,pg,"handleArchetype");this.pj=a});u.m(pg,{handle:"handle"},r("Rb"));u.m(pg,{Nm:"adornedLink"},r("Av"));
pg.prototype.canStart=pg.prototype.ef=function(){if(!this.isEnabled)return o;var a=this.b;return a===m||a.Ja||!a.Sm?o:this.findToolHandleAt(a.bc.C,this.name)!==m};pg.prototype.doActivate=pg.prototype.Rh=function(){var a=this.b;if(a!==m){this.Rb=this.findToolHandleAt(a.bc.C,this.name);if(this.Rb!==m){var b=this.Rb.W.Om;if(b instanceof W){this.Av=b;a.Ac=h;this.Zz=b.h(this.Rb.Zg);this.Aw=b.hb.copy();this.Eb(this.name);this.Q=h}}}};
pg.prototype.doDeactivate=pg.prototype.Yj=function(){this.Ui();this.Aw=this.Zz=this.Av=this.Rb=m;var a=this.b;if(a!==m)a.Ac=o;this.Q=o};pg.prototype.doCancel=pg.prototype.Fi=function(){var a=this.Nm;if(a!==m)a.hb=this.Aw;this.stopTool()};pg.prototype.doMouseMove=pg.prototype.Qg=function(){var a=this.b;if(this.Q&&a!==m){a=this.computeReshape(a.F.C);this.reshape(a)}};
pg.prototype.doMouseUp=pg.prototype.Ke=function(){var a=this.b;if(this.Q&&a!==m){var b=this.computeReshape(a.F.C);this.reshape(b);b=this.Nm;if(b!==m)b.hb=this.Nm.hb;a.Ki();this.oe=this.name;a.ga("LinkReshaped",this.Nm)}this.stopTool()};
pg.prototype.reshape=pg.prototype.RJ=function(a){var b=this.Nm;b.ik();var c=this.handle.Zg,d=this.handle.Kn;if(ug(b))if(c===b.ru+1){c=b.ru+1;if(d==sg){b.w(c,new E(b.h(c-1).x,a.y));b.w(c+1,new E(b.h(c+2).x,a.y))}else if(d==rg){b.w(c,new E(a.x,b.h(c-1).y));b.w(c+1,new E(a.x,b.h(c+2).y))}}else if(c===b.ey-1){c=b.ey-1;if(d===sg){b.w(c-1,new E(b.h(c-2).x,a.y));b.w(c,new E(b.h(c+1).x,a.y))}else if(d===rg){b.w(c-1,new E(a.x,b.h(c-2).y));b.w(c,new E(a.x,b.h(c+1).y))}}else{var d=c,e=b.h(d),g=b.h(d-1),i=b.h(d+
1);if(Ua(g.x,e.x)&&Ua(e.y,i.y)){if(Ua(g.x,b.h(d-2).x)&&!Ua(g.y,b.h(d-2).y)){e=b.hb;e.dc(d,new E(a.x,g.y));b.hb=e;c++;d++}else b.w(d-1,new E(a.x,g.y));if(Ua(i.y,b.h(d+2).y)&&!Ua(i.x,b.h(d+2).x)){e=b.hb;e.dc(d+1,new E(i.x,a.y));b.hb=e}else b.w(d+1,new E(i.x,a.y))}else if(Ua(g.y,e.y)&&Ua(e.x,i.x)){if(Ua(g.y,b.h(d-2).y)&&!Ua(g.x,b.h(d-2).x)){e=b.hb;e.dc(d,new E(g.x,a.y));b.hb=e;c++;d++}else b.w(d-1,new E(g.x,a.y));if(Ua(i.x,b.h(d+2).x)&&!Ua(i.y,b.h(d+2).y)){e=b.hb;e.dc(d+1,new E(a.x,i.y));b.hb=e}else b.w(d+
1,new E(a.x,i.y))}else if(Ua(g.x,e.x)&&Ua(e.x,i.x)){if(Ua(g.x,b.h(d-2).x)&&!Ua(g.y,b.h(d-2).y)){e=b.hb;e.dc(d,new E(a.x,g.y));b.hb=e;c++;d++}else b.w(d-1,new E(a.x,g.y));if(Ua(i.x,b.h(d+2).x)&&!Ua(i.y,b.h(d+2).y)){e=b.hb;e.dc(d+1,new E(a.x,i.y));b.hb=e}else b.w(d+1,new E(a.x,i.y))}else if(Ua(g.y,e.y)&&Ua(e.y,i.y)){if(Ua(g.y,b.h(d-2).y)&&!Ua(g.x,b.h(d-2).x)){e=b.hb;e.dc(d,new E(g.x,a.y));b.hb=e;c++;d++}else b.w(d-1,new E(g.x,a.y));if(Ua(i.y,b.h(d+2).y)&&!Ua(i.x,b.h(d+2).x)){e=b.hb;e.dc(d+1,new E(i.x,
a.y));b.hb=e}else b.w(d+1,new E(i.x,a.y))}b.w(c,a.copy())}else b.w(c,a.copy());b.Mh()};pg.prototype.computeReshape=pg.prototype.IH=function(a){var b=this.Nm,c=this.handle.Zg;switch(this.handle.Kn){case tg:return a;case sg:b=b.h(c);return new E(b.x,a.y);case rg:b=b.h(c);return new E(a.x,b.y);default:case qg:return b.h(c)}};
function Bg(){qf.call(this);this.name="Resizing";this.Gc=(new eb(1,1)).freeze();this.Nf=(new eb(9999,9999)).freeze();this.bi=(new eb(NaN,NaN)).freeze();this.Gk=o;this.sa=m;var a=new X;a.xi=Zb;a.Ua="Rectangle";a.ia=new eb(6,6);a.fill="cyan";a.stroke="black";a.Na=1;a.cursor="pointer";this.pj=a;this.Rb=m;this.Op=0;this.UD=new J;this.ww=new eb;this.Yz=new E;this.Xv=new eb(1,1)}u.H("ResizingTool",Bg);u.ma(Bg,qf);
Bg.prototype.updateAdornments=Bg.prototype.$h=function(a){if(!(a===m||a instanceof W)){var b=m;if(a.Da){var c=a.kG;if(c!==m&&a.gb()&&a.canResize()&&c.ck()&&c.oa.V()){b=a.cn(this.name);if(b===m){b=this.makeAdornment(c);b.gd=this.name}if(b!==m){var d=c.kn();b.Ka=d;b.location=c.sb(Vb);var e=b.placeholder;if(e!==m){var g=c.ml(),c=c.la;e.ia=new eb(c.width*g,c.height*g)}Gg(this,b,d)}}a.Km(this.name,b)}else a.xl(this.name)}};
Bg.prototype.makeAdornment=Bg.prototype.iy=function(a){var b=m,b=a.W.KC;if(b===m){b=new bf;b.type=Hg;var c=new Ig;c.Mi=h;b.add(c);b.add(this.makeHandle(a,Vb));b.add(this.makeHandle(a,Yb));b.add(this.makeHandle(a,fc));b.add(this.makeHandle(a,dc));b.add(this.makeHandle(a,mc));b.add(this.makeHandle(a,oc));b.add(this.makeHandle(a,pc));b.add(this.makeHandle(a,nc))}else{nf(b);b=b.copy();if(!(b instanceof bf))return m}b.Fd=a;return b};
Bg.prototype.makeHandle=Bg.prototype.NF=function(a,b){var c=this.mr;if(c===m)return m;c=c.copy();c.kb=b;return c};
function Gg(a,b,c){if(b!==m)if(!Qb(b.kb)&&b.cursor!=="")a:{a=b.kb;Pb(a)&&(a=Zb);if(a.x<=0)c=a.y<=0?c+225:a.y>=1?c+135:c+180;else if(a.x>=1)a.y<=0?c=c+315:a.y>=1&&(c=c+45);else if(a.y<=0)c=c+270;else if(a.y>=1)c=c+90;else break a;c<0?c=c+360:c>=360&&(c=c-360);b.cursor=c<22.5?"e-resize":c<67.5?"se-resize":c<112.5?"s-resize":c<157.5?"sw-resize":c<202.5?"w-resize":c<247.5?"nw-resize":c<292.5?"n-resize":c<337.5?"ne-resize":"e-resize"}else if(b instanceof v)for(b=b.elements;b.next();)Gg(a,b.value,c)}
u.defineProperty(Bg,{mr:"handleArchetype"},r("pj"),function(a){a&&u.c(a,Q,Bg,"handleArchetype");this.pj=a});u.m(Bg,{handle:"handle"},r("Rb"));u.m(Bg,{Fd:"adornedObject"},r("sa"));Bg.prototype.canStart=Bg.prototype.ef=function(){if(!this.isEnabled)return o;var a=this.b;return a===m||a.Ja||!a.Tm||!a.F.left?o:this.findToolHandleAt(a.bc.C,this.name)!==m?h:o};
Bg.prototype.doActivate=Bg.prototype.Rh=function(){var a=this.b;if(a!==m){this.Rb=this.findToolHandleAt(a.bc.C,this.name);if(this.Rb!==m){this.sa=this.Rb.W.Fd;this.Op=this.sa.Ka;this.UD.set(this.sa.la);this.Yz.set(this.sa.W.location);this.ww.set(this.sa.ia);this.Xv=this.computeCellSize();this.Gc=this.computeMinSize();this.Nf=this.computeMaxSize();a.Ac=h;this.Eb(this.name);this.Q=h}}};
Bg.prototype.doDeactivate=Bg.prototype.Yj=function(){var a=this.b;if(a!==m){this.Ui();this.sa=this.Rb=m;this.Q=a.Ac=o}};Bg.prototype.doCancel=Bg.prototype.Fi=function(){this.sa.ia=this.ww;this.sa.W.location=this.Yz;this.stopTool()};Bg.prototype.doMouseMove=Bg.prototype.Qg=function(){var a=this.b;if(this.Q&&a!==m){var b=this.Gc,c=this.Nf,d=this.Xv,e=this.sa.DB(a.F.C),g=this.sa.jn;if(g===Jg)g=this.sa.ta.Gb;b=this.computeResize(e,this.Rb.kb,b,c,d,!(g===Kg||g===Lg||a.F.shift));this.resize(b);Mg(a)}};
Bg.prototype.doMouseUp=Bg.prototype.Ke=function(){var a=this.b;if(this.Q&&a!==m){var b=this.Gc,c=this.Nf,d=this.Xv,e=this.sa.DB(a.F.C),g=this.sa.jn;if(g===Jg)g=this.sa.ta.Gb;b=this.computeResize(e,this.Rb.kb,b,c,d,!(g===Kg||g===Lg||a.F.shift));this.resize(b);a.Ki();this.oe=this.name;a.ga("PartResized",this.sa,this.ww)}this.stopTool()};
Bg.prototype.resize=Bg.prototype.SJ=function(a){var b=this.b;if(b!==m){var c=this.sa.W,d=c.position.copy(),e=this.sa.la.copy(),g=this.sa.kn();g>=360?g=g-360:g<0&&(g=g+360);var i=Math.PI*g/180,j=Math.cos(i),i=Math.sin(i),k=a.width-e.width,e=a.height-e.height,l=g>90&&g<270?1:0;d.x=d.x+((a.x+k*l)*j-(a.y+e*(g>0&&g<180?1:0))*i);d.y=d.y+((a.x+k*(g>180&&g<360?1:0))*i+(a.y+e*l)*j);this.sa.ia=a.size;c.Sh();c.position=d;pf(b)}};
Bg.prototype.computeResize=Bg.prototype.JH=function(a,b,c,d,e,g){Pb(b)&&(b=Zb);var i=this.sa.la,j=i.x,k=i.y,l=i.x+i.width,n=i.y+i.height,q=1;if(!g){var q=i.width,p=i.height;q<=0&&(q=1);p<=0&&(p=1);q=p/q}a=kd(a.x,a.y,j,k,e.width,e.height);e=i.copy();if(b.x<=0)if(b.y<=0){e.x=Math.max(a.x,l-d.width);e.x=Math.min(e.x,l-c.width);e.width=Math.max(l-e.x,c.width);e.y=Math.max(a.y,n-d.height);e.y=Math.min(e.y,n-c.height);e.height=Math.max(n-e.y,c.height);if(!g){a=e.height/e.width;if(q<a){e.height=q*e.width;
e.y=n-e.height}else{e.width=e.height/q;e.x=l-e.width}}}else if(b.y>=1){e.x=Math.max(a.x,l-d.width);e.x=Math.min(e.x,l-c.width);e.width=Math.max(l-e.x,c.width);e.height=Math.max(Math.min(a.y-k,d.height),c.height);if(!g){a=e.height/e.width;if(q<a)e.height=q*e.width;else{e.width=e.height/q;e.x=l-e.width}}}else{e.x=Math.max(a.x,l-d.width);e.x=Math.min(e.x,l-c.width);e.width=l-e.x;if(!g){e.height=q*e.width;e.y=k+0.5*(n-k-e.height)}}else if(b.x>=1)if(b.y<=0){e.width=Math.max(Math.min(a.x-j,d.width),c.width);
e.y=Math.max(a.y,n-d.height);e.y=Math.min(e.y,n-c.height);e.height=Math.max(n-e.y,c.height);if(!g){a=e.height/e.width;if(q<a){e.height=q*e.width;e.y=n-e.height}else e.width=e.height/q}}else if(b.y>=1){e.width=Math.max(Math.min(a.x-j,d.width),c.width);e.height=Math.max(Math.min(a.y-k,d.height),c.height);if(!g){a=e.height/e.width;q<a?e.height=q*e.width:e.width=e.height/q}}else{e.width=Math.max(Math.min(a.x-j,d.width),c.width);if(!g){e.height=q*e.width;e.y=k+0.5*(n-k-e.height)}}else if(b.y<=0){e.y=Math.max(a.y,
n-d.height);e.y=Math.min(e.y,n-c.height);e.height=n-e.y;if(!g){e.width=e.height/q;e.x=j+0.5*(l-j-e.width)}}else if(b.y>=1){e.height=Math.max(Math.min(a.y-k,d.height),c.height);if(!g){e.width=e.height/q;e.x=j+0.5*(l-j-e.width)}}return e};Bg.prototype.computeMinSize=Bg.prototype.GH=function(){var a=this.sa.Od.copy(),b=this.Od;if(!isNaN(b.width)&&b.width>a.width)a.width=b.width;if(!isNaN(b.height)&&b.height>a.height)a.height=b.height;return a};
Bg.prototype.computeMaxSize=Bg.prototype.FH=function(){var a=this.sa.xd.copy(),b=this.xd;if(!isNaN(b.width)&&b.width<a.width)a.width=b.width;if(!isNaN(b.height)&&b.height<a.height)a.height=b.height;return a};
Bg.prototype.computeCellSize=Bg.prototype.DH=function(){var a=new eb(NaN,NaN),b=this.sa.W;if(b){var c=b.LC;if(!isNaN(c.width)&&c.width>0)a.width=c.width;if(!isNaN(c.height)&&c.height>0)a.height=c.height}c=this.Vj;if(isNaN(a.width)&&!isNaN(c.width)&&c.width>0)a.width=c.width;if(isNaN(a.height)&&!isNaN(c.height)&&c.height>0)a.height=c.height;b=this.b;if((isNaN(a.width)||isNaN(a.height))&&b){c=b.Lb.ae;if(c!==m&&c.qn){c=c.Tx;if(isNaN(a.width)&&!isNaN(c.width)&&c.width>0)a.width=c.width;if(isNaN(a.height)&&
!isNaN(c.height)&&c.height>0)a.height=c.height}b=b.wu;if(b!==m&&b.visible&&this.qn){c=b.lr;if(isNaN(a.width)&&!isNaN(c.width)&&c.width>0)a.width=c.width;if(isNaN(a.height)&&!isNaN(c.height)&&c.height>0)a.height=c.height}}if(isNaN(a.width)||a.width===0||a.width===Infinity)a.width=1;if(isNaN(a.height)||a.height===0||a.height===Infinity)a.height=1;return a};u.a(Bg,"minSize",Bg.prototype.Od);
u.defineProperty(Bg,{Od:"minSize"},r("Gc"),function(a){if(!this.Gc.u(a)){s&&u.c(a,eb,Bg,"minSize");if(isNaN(a.width))a.width=0;if(isNaN(a.height))a.height=0;this.Gc.Oa(a)}});u.a(Bg,"maxSize",Bg.prototype.xd);u.defineProperty(Bg,{xd:"maxSize"},r("Nf"),function(a){if(!this.Nf.u(a)){s&&u.c(a,eb,Bg,"maxSize");if(isNaN(a.width))a.width=Infinity;if(isNaN(a.height))a.height=Infinity;this.Nf.Oa(a)}});u.a(Bg,"cellSize",Bg.prototype.Vj);
u.defineProperty(Bg,{Vj:"cellSize"},r("bi"),function(a){if(!this.bi.u(a)){s&&u.c(a,eb,Bg,"cellSize");this.bi.Oa(a)}});u.a(Bg,"isGridSnapEnabled",Bg.prototype.qn);u.defineProperty(Bg,{qn:"isGridSnapEnabled"},r("Gk"),function(a){if(this.Gk!==a){u.e(a,"boolean",Bg,"isGridSnapEnabled");this.Gk=a}});
function Ng(){qf.call(this);this.name="Rotating";this.Kw=45;this.Jw=2;this.sa=m;var a=new X;a.Ua="Ellipse";a.ia=new eb(6,6);a.fill="yellow";a.stroke="black";a.Na=1;a.cursor="pointer";this.pj=a;this.Rb=m;this.Op=0;this.cA=new E}u.H("RotatingTool",Ng);u.ma(Ng,qf);
Ng.prototype.updateAdornments=Ng.prototype.$h=function(a){if(!(a===m||a instanceof W)){var b=m;if(a.Da){var c=a.oG;if(c!==m&&a.gb()&&a.canRotate()&&c.ck()&&c.oa.V()){b=a.cn(this.name);if(b===m){b=this.makeAdornment(c);b.gd=this.name}if(b!==m){b.Ka=c.kn();var d=m,e=m;if(c===a||c===a.tb){d=a.tb;e=a.mf}else{d=c;e=Zb}for(var g=d.la,e=new E(g.width*e.x+e.offsetX,g.height*e.y+e.offsetY);d!==m&&d!==c;){d.transform.ub(e);d=d.U}d=e.y;e=Math.max(e.x-c.la.width,0);b.mf=Zb;b.location=c.sb(new K(1,0,50+e,d))}}a.Km(this.name,
b)}else a.xl(this.name)}};Ng.prototype.makeAdornment=Ng.prototype.iy=function(a){var b=m,b=a.W.PC;if(b===m){b=new bf;b.type=Og;var c=this.mr;c!==m&&b.add(c.copy())}else{nf(b);b=b.copy();if(!(b instanceof bf))return m}b.Fd=a;return b};u.defineProperty(Ng,{mr:"handleArchetype"},r("pj"),function(a){a&&u.c(a,Q,Ng,"handleArchetype");this.pj=a});u.m(Ng,{handle:"handle"},r("Rb"));u.m(Ng,{Fd:"adornedObject"},r("sa"));
Ng.prototype.canStart=Ng.prototype.ef=function(){if(!this.isEnabled)return o;var a=this.b;return a===m||a.Ja||!a.Um||!a.F.left?o:this.findToolHandleAt(a.bc.C,this.name)!==m?h:o};Ng.prototype.doActivate=Ng.prototype.Rh=function(){var a=this.b;if(a!==m){this.Rb=this.findToolHandleAt(a.bc.C,this.name);if(this.Rb!==m){this.sa=this.Rb.W.Fd;var b=this.sa.W,c=b.tb;this.cA=this.sa===b||this.sa===c?c.sb(b.mf):this.sa.sb(Zb);this.Op=this.sa.Ka;a.Ac=h;this.Eb(this.name);this.Q=h}}};
Ng.prototype.doDeactivate=Ng.prototype.Yj=function(){var a=this.b;if(a!==m){this.Ui();this.sa=this.Rb=m;this.Q=a.Ac=o}};Ng.prototype.doCancel=Ng.prototype.Fi=function(){this.rotate(this.Op);this.stopTool()};Ng.prototype.doMouseMove=Ng.prototype.Qg=function(){var a=this.b;if(this.Q&&a!==m){a=this.computeRotate(a.F.C);this.rotate(a)}};
Ng.prototype.doMouseUp=Ng.prototype.Ke=function(){var a=this.b;if(this.Q&&a!==m){var b=this.computeRotate(a.F.C);this.rotate(b);a.Ki();this.oe=this.name;a.ga("PartRotated",this.sa,this.Op)}this.stopTool()};Ng.prototype.rotate=Ng.prototype.rotate=function(a){if(this.sa!==m){this.sa.Ka=a;pf(this.b)}};
Ng.prototype.computeRotate=Ng.prototype.KH=function(a){var a=this.cA.Oh(a),b=this.sa.U;if(b){a=a-b.kn();a>=360?a=a-360:a<0&&(a=a+360)}var b=Math.min(Math.abs(this.cD),180),c=Math.min(Math.abs(this.bD),b/2);!this.b.F.shift&&(b>0&&c>0)&&(a%b<c?a=Math.floor(a/b)*b:a%b>b-c&&(a=(Math.floor(a/b)+1)*b));a>=360?a=a-360:a<0&&(a=a+360);return a};u.a(Ng,"snapAngleMultiple",Ng.prototype.cD);
u.defineProperty(Ng,{cD:"snapAngleMultiple"},r("Kw"),function(a){if(this.Kw!==a){s&&u.e(a,"number",Ng,"snapAngleMultiple");this.Kw=a}});u.a(Ng,"snapAngleEpsilon",Ng.prototype.bD);u.defineProperty(Ng,{bD:"snapAngleEpsilon"},r("Jw"),function(a){if(this.Jw!==a){s&&u.e(a,"number",Ng,"snapAngleEpsilon");this.Jw=a}});function Pg(){qf.call(this);this.name="ClickSelecting"}u.H("ClickSelectingTool",Pg);u.ma(Pg,qf);
Pg.prototype.canStart=Pg.prototype.ef=function(){return!this.isEnabled||this.b===m||this.isBeyondDragSize()?o:h};Pg.prototype.doMouseUp=Pg.prototype.Ke=function(){if(this.Q){this.standardMouseSelect();this.standardMouseClick()}this.stopTool()};function Qg(){qf.call(this);this.name="Action";this.Kl=m}u.H("ActionTool",Qg);u.ma(Qg,qf);
Qg.prototype.canStart=Qg.prototype.ef=function(){if(!this.isEnabled)return o;var a=this.b;if(a===m)return o;var b=a.F,c=a.Xc(b.C,function(a){for(;a.U!==m;){if(a.yu)return a;a=a.U}return m},function(a){return a.yu});if(c!==m){this.Kl=c;a.Tl=a.Xc(b.C,m,m);return h}return o};Qg.prototype.doMouseDown=Qg.prototype.ju=function(){if(this.Q){var a=this.b.F,b=this.Kl;if(b!==m){a.$c=b;b.ex!==m&&b.ex(a,b)}}else this.canStart()&&this.doActivate()};
Qg.prototype.doMouseMove=Qg.prototype.Qg=function(){if(this.Q){var a=this.b.F,b=this.Kl;if(b!==m){a.$c=b;b.fx!==m&&b.fx(a,b)}}};Qg.prototype.doMouseUp=Qg.prototype.Ke=function(){if(this.Q){var a=this.b,b=a.F,c=this.Kl;if(c===m)return;b.$c=c;c.gx!==m&&c.gx(b,c);this.isBeyondDragSize()||rf(c,b,a)}this.stopTool()};Qg.prototype.doCancel=Qg.prototype.Fi=function(){var a=this.b;if(a!==m){var a=a.F,b=this.Kl;if(b===m)return;a.$c=b;b.dx!==m&&b.dx(a,b)}this.stopTool()};
Qg.prototype.doStop=Qg.prototype.Gi=function(){this.Kl=m};function pa(){qf.call(this);this.name="ClickCreating";this.Dv=m;this.hw=h}u.H("ClickCreatingTool",pa);u.ma(pa,qf);pa.prototype.canStart=pa.prototype.ef=function(){if(!this.isEnabled||this.lx===m)return o;var a=this.b;if(a===m||(a.Ja||a.Md)||!a.Qm||!a.F.left||this.isBeyondDragSize())return o;if(this.TB){if(a.F.He!==2)return o}else if(a.F.He!==1)return o;return a.pa!==this&&a.er(a.F.C,h)!==m?o:h};
pa.prototype.doMouseUp=pa.prototype.Ke=function(){var a=this.b;this.Q&&a!==m&&this.insertPart(a.F.C);this.stopTool()};pa.prototype.insertPart=pa.prototype.VI=function(a){var b=this.b;if(b!==m){var c=this.lx;if(c!==m){this.Eb(this.name);var d=m;if(c instanceof U||c.constructor===T){nf(c);d=c.copy();d instanceof T&&b.add(d)}else if(c!==m){c=b.J.Zm(c);if(c instanceof Object){b.J.Tt(c);d=b.bg(c)}}if(d instanceof T){d.location=a;b.Gd&&b.select(d)}b.Ki();this.oe=this.name;b.ga("PartCreated",d);this.Ui()}}};
u.a(pa,"archetypeNodeData",pa.prototype.lx);u.defineProperty(pa,{lx:"archetypeNodeData"},r("Dv"),function(a){if(this.Dv!==a){a!==m&&u.c(a,Object,pa,"archetypeNodeData");this.Dv=a}});u.a(pa,"isDoubleClick",pa.prototype.TB);u.defineProperty(pa,{TB:"isDoubleClick"},r("hw"),function(a){if(this.hw!==a){u.e(a,"boolean",pa,"isDoubleClick");this.hw=a}});
function Rg(){qf.call(this);this.name="ContextMenu";this.lz=m;this.Oz=new E;this.Wl=m;if(u.Ow===h){this.Wl=new bf;this.Pv=m;var a=this;this.vA=function(){a.stopTool()};if(u.oz===o){var b=document.createElement("div"),c=document.createElement("div");b.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";c.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);";
var d=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(d);d.sheet.insertRule(".defaultCXul { list-style: none; }",0);d.sheet.insertRule(".defaultCXli {font:700 2em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0);d.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 6px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0);b.addEventListener("contextmenu",function(a){a.preventDefault();return o},
o);b.addEventListener("selectstart",function(a){a.preventDefault();return o},o);c.addEventListener("contextmenu",function(a){a.preventDefault();return o},o);if(document.body){document.body.appendChild(b);document.body.appendChild(c)}u.ms=b;u.ls=c;u.oz=h}}}u.H("ContextMenuTool",Rg);u.ma(Rg,qf);Rg.prototype.canStart=Rg.prototype.ef=function(){if(!this.isEnabled)return o;var a=this.b;return a===m||this.isBeyondDragSize()||!a.F.right?o:this.Wl!==m||this.findObjectWithContextMenu()!==m?h:o};
Rg.prototype.doStart=Rg.prototype.Gx=function(){var a=this.b;a!==m&&this.Oz.set(a.bc.C)};Rg.prototype.doStop=Rg.prototype.Gi=function(){this.hideDefaultContextMenu();this.hideContextMenu()};Rg.prototype.findObjectWithContextMenu=Rg.prototype.vI=function(){var a=this.b;if(a===m)return m;var b=a.Xc(a.F.C,m,function(a){return!a.ra.Yc});if(b!==m){for(a=b;a!==m;){var c=a.contextMenu;if(c!==m)return a;a=a.U}if(this.Wl!==m)return b.W}else{c=a.contextMenu;if(c!==m)return a}return m};
Rg.prototype.doActivate=Rg.prototype.Rh=aa();Rg.prototype.doMouseDown=Rg.prototype.ju=function(){this.Q&&Sg(this,o)};Rg.prototype.doMouseUp=Rg.prototype.Ke=function(){if(!this.Q&&this.canStart())this.Q=h;Sg(this,h)};
function Sg(a,b){if(a.Zd===m){a.standardMouseSelect();var c=a.findObjectWithContextMenu();if(c!==m){var d=c.contextMenu;d!==m?a.showContextMenu(d,c instanceof Q?c:m):a.showDefaultContextMenu()}else a.showDefaultContextMenu()}else{c=a.b;d=c.Xc(c.F.C,m,m);if(d!==m&&d.Wh(a.Zd)){a.standardMouseClick(m,m);a.stopTool()}else{a.stopTool();b?c.pa.doMouseUp():c.pa.doMouseDown()}}}Rg.prototype.doMouseMove=Rg.prototype.Qg=function(){this.Q&&this.standardMouseOver()};
Rg.prototype.showContextMenu=Rg.prototype.YJ=function(a,b){u.c(a,bf,Rg,"showContextMenu:contextmenu");b!==m&&u.c(b,Q,Rg,"showContextMenu:obj");var c=this.b;if(c!==m){a!==this.Zd&&this.hideContextMenu();a.wd="Tool";a.fk=o;c.add(a);if(b!==m){var d=m,e=b.gr();if(e!==m)d=e.data;a.Fd=b;a.data=d}else a.data=c.J;a.Sh();this.positionContextMenu(a,b);this.Zd=a;pf(c)}};
Rg.prototype.positionContextMenu=Rg.prototype.GJ=function(a){var b=this.b;if(b!==m){var c=b.F.C.copy(),d=a.fa,b=b.ib;if(c.x+d.width>b.right)c.x=c.x-(d.width+5);if(c.y+d.height>b.bottom)c.y=c.y-(d.height+5);a.position=c}};Rg.prototype.hideContextMenu=Rg.prototype.NI=function(){var a=this.b;if(a!==m&&this.Zd!==m){this.Zd.data=m;this.Zd.Fd=m;a.remove(this.Zd);this.Zd=m;this.standardMouseOver();pf(a)}};
Rg.prototype.initializeDefaultButtons=Rg.prototype.RI=function(){if(this.b===m)return m;var a=new z,b=this.b.Jd;a.add({text:"Copy",ff:function(){b.copySelection()},visible:function(){return b.canCopySelection()}});a.add({text:"Cut",ff:function(){b.cutSelection()},visible:function(){return b.canCutSelection()}});a.add({text:"Delete",ff:function(){b.deleteSelection()},visible:function(){return b.canDeleteSelection()}});a.add({text:"Paste",ff:function(a){b.pasteSelection(a.F.C)},visible:function(){return b.canPasteSelection()}});
a.add({text:"Select All",ff:function(){b.selectAll()},visible:function(){return b.canSelectAll()}});a.add({text:"Undo",ff:function(){b.undo()},visible:function(){return b.canUndo()}});a.add({text:"Redo",ff:function(){b.redo()},visible:function(){return b.canRedo()}});a.add({text:"Zoom Out",ff:function(){b.decreaseZoom()},visible:function(){return b.canDecreaseZoom()}});a.add({text:"Zoom In",ff:function(){b.increaseZoom()},visible:function(){return b.canIncreaseZoom()}});a.add({text:"Reset Zoom",ff:function(){b.resetZoom()},
visible:function(){return b.canResetZoom()}});a.add({text:"Group Selection",ff:function(){b.groupSelection()},visible:function(){return b.canGroupSelection()}});a.add({text:"Ungroup Selection",ff:function(){b.ungroupSelection()},visible:function(){return b.canUngroupSelection()}});a.add({text:"Edit Text",ff:function(){b.editTextBlock()},visible:function(){return b.canEditTextBlock()}});return a};
Rg.prototype.showDefaultContextMenu=Rg.prototype.ZJ=function(){var a=this.b;if(a!==m){if(this.Pv===m)this.Pv=this.initializeDefaultButtons();this.Wl!==this.Zd&&this.hideContextMenu();u.ms.innerHTML="";u.ls.addEventListener("click",this.vA,o);var b=this,c=document.createElement("ul");c.className="defaultCXul";u.ms.appendChild(c);c.innerHTML="";for(var d=this.Pv.f;d.next();){var e=d.value,g=e.text,i=e.visible;if(typeof i!=="function"||i()){i=document.createElement("li");i.className="defaultCXli";var j=
document.createElement("a");j.className="defaultCXa";j.href="#";j.JD=e.ff;j.addEventListener("click",function(){this.JD(a);b.stopTool()},o);j.textContent=g;i.appendChild(j);c.appendChild(i)}}u.ms.style.display="block";u.ls.style.display="block";this.Zd=this.Wl}};Rg.prototype.hideDefaultContextMenu=Rg.prototype.OI=function(){if(this.Zd!==m&&this.Zd===this.Wl){u.ms.style.display="none";u.ls.style.display="none";u.ls.removeEventListener("click",this.vA,o);this.Zd=m}};u.a(Rg,"currentContextMenu",Rg.prototype.Zd);
u.defineProperty(Rg,{Zd:"currentContextMenu"},r("lz"),ba("lz"));u.m(Rg,{wJ:"mouseDownPoint"},r("Oz"));function Tg(){qf.call(this);this.name="DragSelecting";this.Xl=175;this.Jz=o;var a=new T;a.wd="Tool";a.fk=o;var b=new X;b.name="Shape";b.Ua="Rectangle";b.fill=m;b.stroke="magenta";b.position=new E(0,0);a.add(b);this.Pl=a}u.H("DragSelectingTool",Tg);u.ma(Tg,qf);
Tg.prototype.canStart=Tg.prototype.ef=function(){if(!this.isEnabled)return o;var a=this.b;if(a===m||!a.Gd)return o;var b=a.F;return!b.left||a.pa!==this&&(!this.isBeyondDragSize()||b.timestamp-a.bc.timestamp<this.hu||a.er(b.C,h)!==m)?o:h};Tg.prototype.doActivate=Tg.prototype.Rh=function(){var a=this.b;if(a!==m){this.Q=h;a.Ac=h;a.ab=h;a.add(this.Yf)}};Tg.prototype.doDeactivate=Tg.prototype.Yj=function(){var a=this.b;if(a!==m){a.remove(this.Yf);a.ab=o;this.Q=a.Ac=o;pf(a)}};
Tg.prototype.doMouseMove=Tg.prototype.Qg=function(){var a=this.b;if(a!==m&&this.Q&&this.Yf!==m){var b=this.computeBoxBounds();this.Yf.Le("Shape").ia=b.size;this.Yf.position=b.position;pf(a)}};Tg.prototype.doMouseUp=Tg.prototype.Ke=function(){if(this.Q){var a=this.b;a.remove(this.Yf);try{a.oc="wait";this.selectInRect(this.computeBoxBounds())}finally{a.oc=""}}this.stopTool()};Tg.prototype.computeBoxBounds=Tg.prototype.CH=function(){var a=this.b;return a===m?new J(0,0,0,0):new J(a.bc.C,a.F.C)};
Tg.prototype.selectInRect=Tg.prototype.WJ=function(a){var b=this.b;if(b!==m){var c=b.F;b.ga("ChangingSelection");a=b.ll(a,m,function(a){return a instanceof T&&a.qx()},this.XB);if(c.Wj)if(c.shift)for(a=a.f;a.next();){c=a.value;if(c.Da)c.Da=o}else for(a=a.f;a.next();){c=a.value;c.Da=!c.Da}else{if(!c.shift){for(var d=new z(T),e=b.selection.f;e.next();){c=e.value;a.contains(c)||d.add(c)}for(d=d.f;d.next();){c=d.value;c.Da=o}}for(a=a.f;a.next();){c=a.value;if(!c.Da)c.Da=h}}b.ga("ChangedSelection")}};
u.a(Tg,"delay",Tg.prototype.hu);u.defineProperty(Tg,{hu:"delay"},r("Xl"),ba("Xl"));u.a(Tg,"isPartialInclusion",Tg.prototype.XB);u.defineProperty(Tg,{XB:"isPartialInclusion"},r("Jz"),ba("Jz"));u.a(Tg,"box",Tg.prototype.Yf);u.defineProperty(Tg,{Yf:"box"},r("Pl"),ba("Pl"));function Ug(){qf.call(this);this.name="Panning";this.$z=new E;this.ai=o;var a=this;this.eD=function(){document.removeEventListener("scroll",a.eD,o);a.stopTool()}}u.H("PanningTool",Ug);u.ma(Ug,qf);
Ug.prototype.canStart=Ug.prototype.ef=function(){if(!this.isEnabled)return o;var a=this.b;return a===m||!a.Fe&&!a.Ge||!a.F.left||a.pa!==this&&!this.isBeyondDragSize()?o:h};Ug.prototype.doActivate=Ug.prototype.Rh=function(){var a=this.b;if(a!==m){if(this.ai){a.F.bubbles=h;document.addEventListener("scroll",this.eD,o)}else{a.oc="move";a.Ac=h;this.$z=a.position}this.Q=h}};Ug.prototype.doDeactivate=Ug.prototype.Yj=function(){var a=this.b;if(a!==m){a.oc="";this.Q=a.Ac=o}};
Ug.prototype.doCancel=Ug.prototype.Fi=function(){var a=this.b;if(a!==m){a.position=this.$z;a.Ac=o}this.stopTool()};Ug.prototype.doMouseMove=Ug.prototype.Qg=function(){var a=this.b;if(this.Q&&a)if(this.ai)a.F.bubbles=h;else{var b=a.position,c=a.bc.C,d=a.F.C,e=b.x+c.x-d.x,c=b.y+c.y-d.y;if(!a.Fe)e=b.x;if(!a.Ge)c=b.y;a.position=new E(e,c);a.update()}};u.a(Ug,"bubbles",Ug.prototype.bubbles);u.defineProperty(Ug,{bubbles:"bubbles"},r("ai"),ba("ai"));
function Vg(){qf.call(this);this.name="TextEditing";this.Qv=this.nz=this.Xw=m;this.Nw=Wg;this.vi=m;this.$a=Xg;this.Fj=m}u.H("TextEditingTool",Vg);u.ma(Vg,qf);var Yg;Vg.LostFocus=Yg=u.l(Vg,"LostFocus",0);var Zg;Vg.MouseDown=Zg=u.l(Vg,"MouseDown",1);var $g;Vg.Tab=$g=u.l(Vg,"Tab",2);var ah;Vg.Enter=ah=u.l(Vg,"Enter",3);Vg.SingleClick=u.l(Vg,"SingleClick",0);var Wg;Vg.SingleClickSelected=Wg=u.l(Vg,"SingleClickSelected",1);
var Xg=u.l(Vg,"StateNone",0),bh=u.l(Vg,"StateActive",1),ch=u.l(Vg,"StateEditing",2),dh=u.l(Vg,"StateEditing2",3),eh=u.l(Vg,"StateValidating",4),fh=u.l(Vg,"StateValidated",5);u.a(Vg,"textBlock",Vg.prototype.wf);u.defineProperty(Vg,{wf:"textBlock"},r("Xw"),ba("Xw"));u.a(Vg,"currentTextEditor",Vg.prototype.Zf);u.defineProperty(Vg,{Zf:"currentTextEditor"},r("nz"),ba("nz"));u.a(Vg,"defaultTextEditor",Vg.prototype.jB);u.defineProperty(Vg,{jB:"defaultTextEditor"},r("Qv"),ba("Qv"));u.a(Vg,"starting",Vg.prototype.dD);
u.defineProperty(Vg,{dD:"starting"},r("Nw"),function(a){if(this.Nw!==a){s&&u.Sa(a,Vg,Vg,"starting");this.Nw=a}});Vg.prototype.canStart=Vg.prototype.ef=function(){if(!this.isEnabled)return o;var a=this.b;if(a===m||a.Ja||!a.F.left||this.isBeyondDragSize())return o;a=a.Xc(a.F.C,m,function(a){return a instanceof na});if(!(a instanceof na)||!a.ku)return o;a=a.W;return a===m||this.dD===Wg&&!a.Da?o:h};Vg.prototype.doStart=Vg.prototype.Gx=function(){!this.Q&&this.wf!==m&&this.doActivate()};
Vg.prototype.doActivate=Vg.prototype.Rh=function(){if(!this.Q){var a=this.b;if(a!==m){var b=this.wf;if(b===m){b=a.Xc(a.F.C,function(a){return a instanceof na?a:m});b=b instanceof na?b:m}if(b!==m){this.wf=b;if(b.W!==m){this.Q=h;this.$a=bh;this.Eb(this.name);var c=this.jB,d=o;if(b.My!==m)c=b.My;c!==m&&!c.az&&(d=h);if(c===m){c=document.createElement("textarea");c.az=h;this.Qv=c;var e=this.wf.copy();c.addEventListener("input",function(){e.text=this.value;gh(e,Infinity,Infinity);this.style.width=20+e.fa.width*
this.CG+"px";this.rows=e.Lk},o);c.addEventListener("keydown",function(a){var b=a.which,c=this.textEditingTool;if(c!==m)if(b==13)c.cx(ah);else{if(b==9){c.cx($g);a.preventDefault();return o}if(b==27){c.doCancel();c.b&&c.b.focus()}}},o);c.addEventListener("focus",function(){var a=this.textEditingTool;if(a.$a===bh)a.$a=ch;else if(a.$a===fh)a.$a=dh;else if(a.$a===dh)a.$a=ch},o)}if(c.az){var g=b.sb(Zb),i=a.position,j=a.scale,k=b.ml()*j,l=b.la.width*k;hh(b,b.font);g=new E((g.x-i.x)*j,(g.y-i.y)*j);c.value=
b.text;a.Qh.style.font=b.font;c.style.font="inherit";c.style.fontSize=k*100+"%";c.style.lineHeight="normal";l=20+l;c.style.width=l+"px";c.style.height="";c.rows=b.Lk;a.Qh.appendChild(c);c.style.left=(g.x-l/2|0)+"px";c.style.top=(g.y-c.clientHeight/2|0)+"px";c.style.textAlign=b.textAlign}else a.Qh.appendChild(c);c.style.position="absolute";c.style.zIndex=100;c.className="start";c.textEditingTool=this;c.CG=k;if(d&&c.onActivate!==f)c.onActivate();this.Zf=c;c.focus()}}}}};
Vg.prototype.doCancel=Vg.prototype.Fi=function(){if(this.Fj!==m){this.Zf.style.border=this.Fj;this.Fj=m}this.stopTool()};Vg.prototype.doMouseUp=Vg.prototype.Ke=function(){!this.Q&&this.canStart()&&this.doActivate()};Vg.prototype.doMouseDown=Vg.prototype.ju=function(){this.Q&&this.cx(Zg)};
Vg.prototype.acceptText=Vg.prototype.cx=function(a){switch(a){case Zg:if(this.$a===fh||this.$a===dh)this.Zf.focus();else if(this.$a===bh||this.$a===ch){this.$a=eh;mh(this)}break;case Yg:case ah:case $g:if(ah===a&&this.Xw.zu===h)break;if(this.$a===bh||this.$a===ch){this.$a=eh;mh(this)}}};
function mh(a){if(a.wf!==m&&a.Zf!==m){var b=a.wf,c=a.wf.text,d=a.Zf.value,e="",e=typeof d==="function"?d():d;if(!a.isValidText(a.wf,c,e)){a.$a=ch;b.br!==m&&b.br(a,c,e);if(a.Fj===m){a.Fj=a.Zf.style.border;a.Zf.style.border="3px solid red"}a.Zf.focus();return}a.$a=fh;if(c!==e)a.wf.text=e;a.oe=a.name;b=a.b;b!==m&&b.ga("TextEdited",a.wf,c);a.stopTool();b!==m&&b.focus()}if(a.Fj!==m){a.Zf.style.border=a.Fj;a.Fj=m}}
Vg.prototype.doDeactivate=Vg.prototype.Yj=function(){var a=this.b;if(a!==m){this.Q&&this.Ui();this.$a=Xg;this.wf=m;if(this.Zf!==m){var b=this.Zf;if(b.onDeactivate!==f)b.onDeactivate();b!==m&&a.Qh.removeChild(b)}this.Q=o}};Vg.prototype.isValidText=Vg.prototype.fJ=function(a,b,c){u.c(a,na,Vg,"isValidText:textblock");var d=this.Sr;if(d!==m&&!d(a,b,c))return o;d=a.Sr;return d!==m&&!d(a,b,c)?o:h};u.a(Vg,"textValidation",Vg.prototype.Sr);
u.defineProperty(Vg,{Sr:"textValidation"},r("vi"),function(a){if(this.vi!==a)this.vi=a});function $e(){qf.call(this);this.name="ToolManager";this.Pz=new z(qf);this.Qz=new z(qf);this.Rz=new z(qf);this.Bz=this.Cz=1E3;this.ts=this.Nv=m;this.Sz=tf}u.H("ToolManager",$e);u.ma($e,qf);var tf;$e.WheelScroll=tf=u.l($e,"WheelScroll",0);var sf;$e.WheelZoom=sf=u.l($e,"WheelZoom",1);u.a($e,"mouseWheelBehavior",$e.prototype.sl);u.defineProperty($e,{sl:"mouseWheelBehavior"},r("Sz"),ba("Sz"));
$e.prototype.initializeStandardTools=$e.prototype.SI=function(){this.zA=new Qg;this.EC=new mg;this.eC=new pg;this.NC=new Bg;this.RC=new Ng;this.gC=new oa;this.ae=new vf;this.rB=new Tg;this.wC=new Ug;this.WA=new Rg;this.Vu=new Vg;this.SA=new pa;this.TA=new Pg};
$e.prototype.doMouseDown=$e.prototype.ju=function(){var a=this.b;if(a!==m){var b=a.va;b.sx&&b.kk!==0&&u.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var b=this.ie.length,c=0;c<b;c++){var d=this.ie.Z(c);if(d.canStart()){a.pa=d;if(a.pa===d){d.Q||d.doActivate();d.doMouseDown()}return}}if(a.F.button===1)if(this.sl===tf)this.sl=sf;else if(this.sl===sf)this.sl=tf;this.doActivate();this.standardWaitAfter(this.Wx)}};
$e.prototype.doMouseMove=$e.prototype.Qg=function(){var a=this.b;if(a!==m){if(this.Q)for(var b=this.dg.length,c=0;c<b;c++){var d=this.dg.Z(c);if(d.canStart()){a.pa=d;if(a.pa===d){d.Q||d.doActivate();d.doMouseMove()}return}}this.standardMouseOver();this.isBeyondDragSize()&&this.standardWaitAfter(this.Q?this.Wx:this.NB)}};$e.prototype.doCurrentObjectChanged=$e.prototype.$E=function(a,b){var c=this.Xj;c!==m&&!(b!==m&&(b===c||b.Wh(c)))&&this.hideToolTip()};
$e.prototype.doWaitAfter=$e.prototype.dF=function(){if(this.b&&this.b.na){this.doMouseHover();this.Q||this.doToolTip()}};$e.prototype.doMouseHover=$e.prototype.$H=function(){var a=this.b;if(a!==m){var b=a.F;if(b.$c===m)b.$c=a.Xc(b.C,m,m);var c=b.$c;if(c!==m)for(;c!==m;){a=this.Q?c.zr:c.Ar;if(a!==m){a(b,c);if(b.td)break}c=c.U}else{a=this.Q?a.zr:a.Ar;a!==m&&a(b)}}};
$e.prototype.doToolTip=$e.prototype.aI=function(){var a=this.b;if(a!==m){var b=a.F;if(b.$c===m)b.$c=a.Xc(b.C,m,m);b=b.$c;if(b!==m){if(!(b===this.Xj||b.Wh(this.Xj))){for(;b!==m;){a=b.Vr;if(a!==m){this.showToolTip(a,b);return}b=b.U}this.hideToolTip()}}else{a=a.Vr;a!==m?this.showToolTip(a,m):this.hideToolTip()}}};
$e.prototype.showToolTip=$e.prototype.$J=function(a,b){u.c(a,bf,$e,"showToolTip:tooltip");b!==m&&u.c(b,Q,$e,"showToolTip:obj");var c=this.b;if(c!==m){a!==this.Xj&&this.hideToolTip();a.wd="Tool";a.fk=o;c.add(a);if(b!==m&&b!==this.ts){var d=m,e=b.W;if(e!==m)d=e.data;a.Fd=b;a.data=d}else if(b===m)a.data=c.J;if(b===m||b!==this.ts){a.Sh();this.positionToolTip(a,b)}this.Nv=a;this.ts=b;pf(c)}};
$e.prototype.positionToolTip=$e.prototype.HJ=function(a){var b=this.b;if(b!==m){var c=b.F.C.copy(),d=a.fa,b=b.ib;if(c.x+d.width>b.right)c.x=c.x-(d.width+5);c.y=c.y+20+d.height>b.bottom?c.y-(d.height+5):c.y+20;a.position=c}};$e.prototype.hideToolTip=$e.prototype.uF=function(){if(this.Xj!==m){var a=this.b;if(a!==m){this.Xj.data=m;this.Xj.Fd=m;a.remove(this.Xj);this.ts=this.Nv=m;pf(a)}}};u.m($e,{Xj:"currentToolTip"},r("Nv"));
$e.prototype.doMouseUp=$e.prototype.Ke=function(){this.cancelWaitAfter();if(this.Q){var a=this.b;if(a===m)return;for(var b=this.eg.length,c=0;c<b;c++){var d=this.eg.Z(c);if(d.canStart()){a.pa=d;if(a.pa===d){d.Q||d.doActivate();d.doMouseUp()}return}}}this.doDeactivate()};$e.prototype.doMouseWheel=$e.prototype.aF=function(){this.standardMouseWheel()};$e.prototype.doKeyDown=$e.prototype.Ex=function(){var a=this.b;a!==m&&a.Jd.doKeyDown()};
$e.prototype.doKeyUp=$e.prototype.Fx=function(){var a=this.b;a!==m&&a.Jd.doKeyUp()};$e.prototype.doCancel=$e.prototype.Fi=function(){yf!==m&&yf.doCancel();qf.prototype.Fi.call(this)};$e.prototype.findTool=$e.prototype.Me=function(a){u.e(a,"string",$e,"findTool:name");for(var b=this.ie.length,c=0;c<b;c++){var d=this.ie.Z(c);if(d.name===a)return d}b=this.dg.length;for(c=0;c<b;c++){d=this.dg.Z(c);if(d.name===a)return d}b=this.eg.length;for(c=0;c<b;c++){d=this.eg.Z(c);if(d.name===a)return d}return m};
$e.prototype.replaceTool=$e.prototype.jG=function(a,b){u.e(a,"string",$e,"replaceTool:name");if(b!==m){u.c(b,qf,$e,"replaceTool:newtool");b.b&&b.b!==this.b&&u.g("Cannot share tools between Diagrams: "+b.toString());b.sf(this.b)}for(var c=this.ie.length,d=0;d<c;d++){var e=this.ie.Z(d);if(e.name===a){b!==m?this.ie.Pu(d,b):this.ie.Se(d);return e}}c=this.dg.length;for(d=0;d<c;d++){e=this.dg.Z(d);if(e.name===a){b!==m?this.dg.Pu(d,b):this.dg.Se(d);return e}}c=this.eg.length;for(d=0;d<c;d++){e=this.eg.Z(d);
if(e.name===a){b!==m?this.eg.Pu(d,b):this.eg.Se(d);return e}}return m};function nh(a,b,c,d){u.e(b,"string",$e,"replaceStandardTool:name");u.c(d,z,$e,"replaceStandardTool:list");if(c!==m){u.c(c,qf,$e,"replaceStandardTool:newtool");c.b&&c.b!==a.b&&u.g("Cannot share tools between Diagrams: "+c.toString());c.name=b;c.sf(a.b)}a.Me(b)?a.jG(b,c):c!==m&&d.add(c)}u.m($e,{ie:"mouseDownTools"},r("Pz"));u.m($e,{dg:"mouseMoveTools"},r("Qz"));u.m($e,{eg:"mouseUpTools"},r("Rz"));u.a($e,"hoverDelay",$e.prototype.NB);
u.defineProperty($e,{NB:"hoverDelay"},r("Cz"),ba("Cz"));u.a($e,"holdDelay",$e.prototype.Wx);u.defineProperty($e,{Wx:"holdDelay"},r("Bz"),ba("Bz"));u.a($e,"actionTool",$e.prototype.zA);u.defineProperty($e,{zA:"actionTool"},function(){return this.Me("Action")},function(a){nh(this,"Action",a,this.ie)});u.a($e,"relinkingTool",$e.prototype.EC);u.defineProperty($e,{EC:"relinkingTool"},function(){return this.Me("Relinking")},function(a){nh(this,"Relinking",a,this.ie)});u.a($e,"linkReshapingTool",$e.prototype.eC);
u.defineProperty($e,{eC:"linkReshapingTool"},function(){return this.Me("LinkReshaping")},function(a){nh(this,"LinkReshaping",a,this.ie)});u.a($e,"resizingTool",$e.prototype.NC);u.defineProperty($e,{NC:"resizingTool"},function(){return this.Me("Resizing")},function(a){nh(this,"Resizing",a,this.ie)});u.a($e,"rotatingTool",$e.prototype.RC);u.defineProperty($e,{RC:"rotatingTool"},function(){return this.Me("Rotating")},function(a){nh(this,"Rotating",a,this.ie)});u.a($e,"linkingTool",$e.prototype.gC);
u.defineProperty($e,{gC:"linkingTool"},function(){return this.Me("Linking")},function(a){nh(this,"Linking",a,this.dg)});u.a($e,"draggingTool",$e.prototype.ae);u.defineProperty($e,{ae:"draggingTool"},function(){return this.Me("Dragging")},function(a){nh(this,"Dragging",a,this.dg)});u.a($e,"dragSelectingTool",$e.prototype.rB);u.defineProperty($e,{rB:"dragSelectingTool"},function(){return this.Me("DragSelecting")},function(a){nh(this,"DragSelecting",a,this.dg)});u.a($e,"panningTool",$e.prototype.wC);
u.defineProperty($e,{wC:"panningTool"},function(){return this.Me("Panning")},function(a){nh(this,"Panning",a,this.dg)});u.a($e,"contextMenuTool",$e.prototype.WA);u.defineProperty($e,{WA:"contextMenuTool"},function(){return this.Me("ContextMenu")},function(a){nh(this,"ContextMenu",a,this.eg)});u.a($e,"textEditingTool",$e.prototype.Vu);u.defineProperty($e,{Vu:"textEditingTool"},function(){return this.Me("TextEditing")},function(a){nh(this,"TextEditing",a,this.eg)});u.a($e,"clickCreatingTool",$e.prototype.SA);
u.defineProperty($e,{SA:"clickCreatingTool"},function(){return this.Me("ClickCreating")},function(a){nh(this,"ClickCreating",a,this.eg)});u.a($e,"clickSelectingTool",$e.prototype.TA);u.defineProperty($e,{TA:"clickSelectingTool"},function(){return this.Me("ClickSelecting")},function(a){nh(this,"ClickSelecting",a,this.eg)});
function Xe(){u.Fb(this);this.L=m;this.Ab=new z(T);this.pb="";this.jw=o;this.Kg=this.fj=this.ej=this.dj=this.cj=this.aj=this.$i=this.bj=this.Zi=this.hj=this.Yi=this.gj=this.Xi=this.Wi=h;this.VD=[]}u.H("Layer",Xe);Xe.prototype.sf=ba("L");
Xe.prototype.toString=function(a){a===f&&(a=0);var b='Layer "'+this.name+'"';if(a<=0)return b;for(var c=0,d=0,e=0,g=0,i=0,j=this.Ab.f;j.next();){var k=j.value.constructor;k===T?c++:k===U?d++:k===V?e++:k===W?g++:k===bf&&i++}j="";c>0&&(j=j+(c+" Parts "));d>0&&(j=j+(d+" Nodes "));e>0&&(j=j+(e+" Groups "));g>0&&(j=j+(g+" Links "));i>0&&(j=j+(i+" Adornments "));if(a>1)for(c=this.Ab.f;c.next();){d=c.value;j=j+("\n    "+d.toString(a-1));(e=d.data)&&u.cc(e)&&(j=j+(" #"+u.cc(e)));d instanceof U?j=j+(" "+xe(e)):
d instanceof W&&(j=j+(" "+xe(d.ca)+" "+xe(d.ea)))}return b+" "+this.Ab.count+": "+j};Xe.prototype.findObjectAt=Xe.prototype.Xc=function(a,b,c){b===f&&(b=m);c===f&&(c=m);var d=this.Ab,e=o;this.b.ib.da(a)&&(e=h);for(var g=new E,i=d.length;i--;){var j=d.Z(i);if(!(e===h&&j.Xe===o)&&j.gb()){ab(g.set(a),j.Xd);j=j.Xc(g,b,c);if(j!==m){b!==m&&(j=b(j));if(j&&(c===m||c(j)))return j}}}return m};
Xe.prototype.findObjectsAt=Xe.prototype.gn=function(a,b,c,d){b===f&&(b=m);c===f&&(c=m);!(d instanceof z)&&!(d instanceof la)&&(d=new z(Q));var e=this.Ab,g=o;this.b.ib.da(a)&&(g=h);for(var i=new E,j=e.length;j--;){var k=e.Z(j);if(!(g===h&&k.Xe===o)&&k.gb()){ab(i.set(a),k.Xd);if(k.gn(i,b,c,d)){b!==m&&(k=b(k));k&&(c===m||c(k))&&d.add(k)}}}return d};
Xe.prototype.findObjectsIn=Xe.prototype.ll=function(a,b,c,d,e){b===f&&(b=m);c===f&&(c=m);d===f&&(d=o);!(e instanceof z)&&!(e instanceof la)&&(e=new z(Q));var g=this.Ab,i=o;this.b.ib.el(a)&&(i=h);for(var j=g.length;j--;){var k=g.Z(j);if(!(i===h&&k.Xe===o)&&k.gb()&&k.ll(a,b,c,d,e)){b!==m&&(k=b(k));k&&(c===m||c(k))&&e.add(k)}}return e};
Xe.prototype.findObjectsNear=Xe.prototype.hn=function(a,b,c,d,e){c===f&&(c=m);d===f&&(d=m);!(e instanceof z)&&!(e instanceof la)&&(e=new z(Q));var g=this.Ab,i=o;this.b.ib.da(a)&&(i=h);for(var j=new E,k=g.length;k--;){var l=g.j[k];if(!(i===h&&l.Xe===o)&&l.gb()){ab(j.set(a),l.Xd);var n=new E(a.x+b,a.y);ab(n,l.Xd);if(l.hn(j,n,c,d,e)){c!==m&&(l=c(l));l&&(d===m||d(l))&&e.add(l)}}}return e};ea=Xe.prototype;
ea.ag=function(a,b){if(this.visible){var c=this.Ab,d=b.ib,e=[];if(b.hm)for(var g=c.length,i=0;i<g;i++){var j=c.j[i];j.TD=i;if(j instanceof W){(j.si===Hf||j.si===oh)&&e.push(j);if(j.Xk===o)continue}if(j.oa.de(d)){j.ag(a,b);j.Xe=h}else j.Xe=o}else{g=c.length;for(i=0;i<g;i++){j=c.j[i];if(j.Xe){if(j instanceof W){(j.si===Hf||j.si===oh)&&e.push(j);if(j.Xk===o)continue}j.ag(a,b)}}}this.VD=e}};ea.d=function(a,b,c,d,e){var g=this.b;g!==m&&g.ke(ue,a,this,b,c,d,e)};
ea.ak=function(a,b,c){var d=this.Ab;b.s=this;if(a>=d.count)a=d.count;else if(d.Z(a)===b)return-1;d.dc(a,b);b.nr();d=this.b;d!==m&&(c?ph(d):d.ak(b));b instanceof V&&this.Su(b);return a};ea.ud=function(a,b,c){var d=this.Ab;if(a<0||a>=d.length){a=d.indexOf(b);if(a<0)return-1}else if(d.Z(a)!==b){a=d.indexOf(b);if(a<0)return-1}b.or();d.Se(a);d=this.b;d!==m&&(c?ph(d):d.ud(b));b.s=m;return a};
ea.Su=function(a){for(;a!==m;){if(a.ra===this){var b=a;if(b.ec.next()){for(var c=-1,d=-1,e=this.Ab.j,g=e.length,i=0;i<g;i++){var j=e[i];if(j===b){c=i;if(d>=0)break}if(d<0&&j.Ta===b){d=i;if(c>=0)break}}d<0&&(d=0);if(d<c){e=this.Ab;e.Se(c);e.dc(d,b)}}}a=a.Ta}};ea.clear=function(){for(var a=this.Ab.xf(),b=a.length,c=0;c<b;c++){a[c].Xe=o;this.ud(-1,a[c])}};u.m(Xe,{Qi:"parts"},function(){return this.Ab.f});u.m(Xe,{CJ:"partsBackwards"},function(){return this.Ab.rn});u.m(Xe,{b:"diagram"},r("L"));
u.a(Xe,"name",Xe.prototype.name);u.defineProperty(Xe,{name:"name"},r("pb"),function(a){u.e(a,"string",Xe,"name");var b=this.pb;if(b!==a){var c=this.b;if(c!==m){b===""&&u.g("Cannot rename default Layer to: "+a);for(c=c.ur;c.next();)c.value.name===a&&u.g("Layer.name is already present in this diagram: "+a)}this.pb=a;this.d("name",b,a)}});u.a(Xe,"isTemporary",Xe.prototype.Yc);
u.defineProperty(Xe,{Yc:"isTemporary"},r("jw"),function(a){var b=this.jw;if(b!==a){u.e(a,"boolean",Xe,"isTemporary");this.jw=a;this.d("isTemporary",b,a)}});u.a(Xe,"visible",Xe.prototype.visible);u.defineProperty(Xe,{visible:"visible"},r("Kg"),function(a){var b=this.Kg;if(b!==a){u.e(a,"boolean",Xe,"visible");this.Kg=a;this.d("visible",b,a);for(a=this.Ab.f;a.next();)a.value.updateAdornments();a=this.b;a!==m&&ph(a)}});u.a(Xe,"allowCopy",Xe.prototype.Hh);
u.defineProperty(Xe,{Hh:"allowCopy"},r("Wi"),function(a){var b=this.Wi;if(b!==a){u.e(a,"boolean",Xe,"allowCopy");this.Wi=a;this.d("allowCopy",b,a)}});u.a(Xe,"allowDelete",Xe.prototype.Rj);u.defineProperty(Xe,{Rj:"allowDelete"},r("Xi"),function(a){var b=this.Xi;if(b!==a){u.e(a,"boolean",Xe,"allowDelete");this.Xi=a;this.d("allowDelete",b,a)}});u.a(Xe,"allowTextEdit",Xe.prototype.Vm);
u.defineProperty(Xe,{Vm:"allowTextEdit"},r("gj"),function(a){var b=this.gj;if(b!==a){u.e(a,"boolean",Xe,"allowTextEdit");this.gj=a;this.d("allowTextEdit",b,a)}});u.a(Xe,"allowGroup",Xe.prototype.Pm);u.defineProperty(Xe,{Pm:"allowGroup"},r("Yi"),function(a){var b=this.Yi;if(b!==a){u.e(a,"boolean",Xe,"allowGroup");this.Yi=a;this.d("allowGroup",b,a)}});u.a(Xe,"allowUngroup",Xe.prototype.Wm);
u.defineProperty(Xe,{Wm:"allowUngroup"},r("hj"),function(a){var b=this.hj;if(b!==a){u.e(a,"boolean",Xe,"allowUngroup");this.hj=a;this.d("allowUngroup",b,a)}});u.a(Xe,"allowLink",Xe.prototype.$k);u.defineProperty(Xe,{$k:"allowLink"},r("Zi"),function(a){var b=this.Zi;if(b!==a){u.e(a,"boolean",Xe,"allowLink");this.Zi=a;this.d("allowLink",b,a)}});u.a(Xe,"allowRelink",Xe.prototype.yi);
u.defineProperty(Xe,{yi:"allowRelink"},r("bj"),function(a){var b=this.bj;if(b!==a){u.e(a,"boolean",Xe,"allowRelink");this.bj=a;this.d("allowRelink",b,a)}});u.a(Xe,"allowMove",Xe.prototype.Sj);u.defineProperty(Xe,{Sj:"allowMove"},r("$i"),function(a){var b=this.$i;if(b!==a){u.e(a,"boolean",Xe,"allowMove");this.$i=a;this.d("allowMove",b,a)}});u.a(Xe,"allowPrint",Xe.prototype.Rm);
u.defineProperty(Xe,{Rm:"allowPrint"},r("aj"),function(a){var b=this.aj;if(b!==a){u.e(a,"boolean",Xe,"allowPrint");this.aj=a;this.d("allowPrint",b,a)}});u.a(Xe,"allowReshape",Xe.prototype.Sm);u.defineProperty(Xe,{Sm:"allowReshape"},r("cj"),function(a){var b=this.cj;if(b!==a){u.e(a,"boolean",Xe,"allowReshape");this.cj=a;this.d("allowReshape",b,a)}});u.a(Xe,"allowResize",Xe.prototype.Tm);
u.defineProperty(Xe,{Tm:"allowResize"},r("dj"),function(a){var b=this.dj;if(b!==a){u.e(a,"boolean",Xe,"allowResize");this.dj=a;this.d("allowResize",b,a)}});u.a(Xe,"allowRotate",Xe.prototype.Um);u.defineProperty(Xe,{Um:"allowRotate"},r("ej"),function(a){var b=this.ej;if(b!==a){u.e(a,"boolean",Xe,"allowRotate");this.ej=a;this.d("allowRotate",b,a)}});u.a(Xe,"allowSelect",Xe.prototype.Gd);
u.defineProperty(Xe,{Gd:"allowSelect"},r("fj"),function(a){var b=this.fj;if(b!==a){u.e(a,"boolean",Xe,"allowSelect");this.fj=a;this.d("allowSelect",b,a)}});
function B(a){function b(a){var b=a.toLowerCase(),c=new z("function");d.add(a,c);d.add(b,c);e.add(a,a);e.add(b,a)}u.Fb(this);u.qz=[];this.Zb=h;this.Ae=17;var c=this;document.body!==m?qh(this):document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,o);qh(c)},o);this.zb=new z(Xe);this.mA=this.lA=this.oA=this.nA=this.yb=this.yk=this.na=m;this.jb=(new E(NaN,NaN)).freeze();this.Hb=1;this.Zs=1E-4;this.Us=100;this.De=new Ya;this.Rt=(new E(NaN,
NaN)).freeze();this.As=(new J(NaN,NaN,NaN,NaN)).freeze();this.sk=rh;this.xk=Ub;this.Dk=rh;this.Xo=Ub;this.Fs=this.Es=Vb;this.sg=new la(Q);this.hi=h;this.Yl=new ka(W,J);this.Bo=h;this.HD=250;this.GD=1E3;this.ig=m;this.fs=(new qb(16,16,16,16)).freeze();this.rz=h;this.Iq=this.Jg=o;this.Io=h;this.$w=o;this.yz=16;this.Hf=new qe;this.jc=new qe;this.hc=new qe;this.ci=m;this.Ht=-1;this.Pw=o;this.Tv=new ka("string",z);this.Sv=new ka("string","string");var d=new ka("string",z),e=new ka("string","string");b("BackgroundSingleClicked");
b("BackgroundDoubleClicked");b("BackgroundContextClicked");b("ClipboardChanged");b("ClipboardPasted");b("DocumentBoundsChanged");b("ExternalObjectsDropped");b("InitialLayoutCompleted");b("LayoutCompleted");b("LinkDrawn");b("LinkRelinked");b("LinkReshaped");b("ObjectSingleClicked");b("ObjectDoubleClicked");b("ObjectContextClicked");b("PartCreated");b("PartResized");b("PartRotated");b("SelectionMoved");b("SelectionCopied");b("SelectionDeleting");b("SelectionDeleted");b("SelectionGrouped");b("SelectionUngrouped");
b("ChangingSelection");b("ChangedSelection");b("SubGraphCollapsed");b("SubGraphExpanded");b("TextEdited");b("TreeCollapsed");b("TreeExpanded");b("ViewportBoundsChanged");this.Tv=d;this.Sv=e;this.ht=new la(U);this.Wk=new la(V);this.Os=new la(W);this.Ab=new la(T);this.Ls=h;this.Ez=o;this.Ot=$f;this.Mv=this.Rv=this.Nt=m;this.ss="";this.uo="auto";this.jh=this.Fh=this.vh=this.bt=this.wh=this.xh=this.yh=this.ih=this.kh=this.hh=m;this.Ck=h;this.Jv=m;this.Fk=this.ti=this.cz=o;this.ua=h;this.Of=m;var g=this;
this.Mz=function(a){if(a.J===g.J&&g.ua){g.ua=o;try{var b=a.Lc;a.he===""&&b===ue&&sh(g,a.object,a.propertyName)}finally{g.ua=h}}};this.Nz=function(a){if(a.J===g.J&&g.ua){g.ua=o;try{var b=a.Lc,c=a.he;if(c!=="")if(b===ue)if(c==="linkFromKey"){var d=a.object,e=g.Hi(d);if(e!==m){var q=a.newValue,p=g.Th(q);e.ca=p}}else if(c==="linkToKey"){d=a.object;e=g.Hi(d);if(e!==m){q=a.newValue;p=g.Th(q);e.ea=p}}else if(c==="linkFromPortId"){d=a.object;e=g.Hi(d);if(e!==m){var t=a.newValue;if(typeof t==="string")e.Tg=
t}}else if(c==="linkToPortId"){d=a.object;e=g.Hi(d);if(e!==m){t=a.newValue;if(typeof t==="string")e.Zh=t}}else if(c==="nodeGroupKey"){var d=a.object,w=g.bg(d);if(w!==m){var A=a.newValue;if(A!==f){var F=g.Th(A);w.Ta=F instanceof V?F:m}else w.Ta=m}}else if(c==="linkLabelKeys"){d=a.object;e=g.Hi(d);if(e!==m){var H=a.oldValue,x=a.newValue;if(u.isArray(H))for(var I=u.vb(H),y=0;y<I;y++){var G=u.lb(H,y),p=g.Th(G);if(p!==m)p.fe=m}if(u.isArray(x)){I=u.vb(x);for(y=0;y<I;y++){G=u.lb(x,y);p=g.Th(G);if(p!==m)p.fe=
e}}}}else if(c==="nodeCategory"){var d=a.object,fa=g.bg(d),R=a.newValue;if(fa!==m&&typeof R==="string")fa.gd=R}else if(c==="linkCategory"){var d=a.object,S=g.Hi(d),R=a.newValue;if(S!==m&&typeof R==="string")S.gd=R}else if(c==="nodeDataArray"){var da=a.oldValue;th(g,da);var ma=a.newValue;uh(g,ma)}else{if(c==="linkDataArray"){da=a.oldValue;th(g,da);ma=a.newValue;vh(g,ma)}}else if(b===ve){ma=a.newValue;if(ma instanceof Object)if(c==="nodeDataArray")wh(g,ma);else if(c==="linkDataArray")xh(g,ma);else if(c===
"linkLabelKeys"){e=g.Hi(a.object);p=g.Th(ma);if(e!==m&&p!==m)p.fe=e}}else if(b===we){da=a.oldValue;if(da instanceof Object)if(c==="nodeDataArray")yh(g,da);else if(c==="linkDataArray")yh(g,da);else if(c==="linkLabelKeys"){p=g.hF(da);if(p!==m)p.fe=m}}else{if(b===te&&c==="SourceChanged"){var w=g.bg(a.object),ua=a.propertyName;w!==m&&typeof ua==="string"&&w.fc(ua)}}else if(b===ue){var sa=a.propertyName,d=a.object;d===g.J?(sa==="nodeKeyProperty"||sa==="nodeCategoryProperty"||sa==="linkFromKeyProperty"||
sa==="linkToKeyProperty"||sa==="linkFromPortIdProperty"||sa==="linkToPortIdProperty"||sa==="nodeIsLinkLabelProperty"||sa==="linkLabelKeysProperty"||sa==="nodeIsGroupProperty"||sa==="nodeGroupKeyProperty"||sa==="linkCategoryProperty")&&g.wl():sh(g,d,sa)}else if(b===ve||b===we){var ib=a.Lc===ve,db=ib?a.Oe:a.Pe,$a=ib?a.newValue:a.oldValue,Oa=g.Ik.$(a.object);if(Oa instanceof Array)for(a=0;a<Oa.length;a++){var fb=Oa[a];typeof db==="number"&&(ib?$a instanceof Object&&zh(fb,$a,db):fb.ud(db))}}else if(b===
te){var Va=a.propertyName;if(Va[0]!=="S"){if(Va!=="CommittingTransaction"){if(Va==="FinishedUndo"||Va==="FinishedRedo"){g.va.ph=h;Ah(g);g.va.ph=o}g.rg&&g.pa.standardMouseOver();for(var vc=g.selection.f;vc.next();)vc.value.updateAdornments()}g.Iq=h;g.update();Mg(g)}else if(Va==="StartingFirstTransaction"&&!g.If&&!g.rg){g.Iq=h;if(g.Io)g.Jg=h;g.update()}}}finally{g.ua=h}}};this.Ef=new ka(Object,T);this.Ik=new ka(Object,Array);this.wj=o;this.Xi=this.Wi=this.Xr=this.oh=h;this.Zr=this.Yr=o;this.ds=this.bs=
this.fj=this.ej=this.dj=this.cj=this.aj=this.$i=this.bj=this.Zi=this.as=this.hj=this.Yi=this.gj=h;this.Iz=o;this.cs=this.$r=this.Ds=this.Cs=h;this.xt=this.wt=16;this.vt=o;this.Ed=(new qb(5)).freeze();this.iA=new la(T);this.Vs=999999999;this.hm=this.vj=this.tj=h;this.Vo=this.Uo=o;this.Rc=m;this.es=h;this.rg=o;this.Ic=m;this.Wz=1;this.yA=(new J(NaN,NaN,NaN,NaN)).freeze();this.xs=(new J(NaN,NaN,NaN,NaN)).freeze();this.If=o;this.mt=new la;Bh(this);Ch(this);this.Tl=this.Gw=this.Oc=m;this.Lb=new $e;this.Lb.initializeStandardTools();
this.pa=this.gu=this.Lb;this.Jd=new C;this.J=new P;this.ti=h;this.qb=new Dh;this.ti=o;a===f&&(a=document.createElement("div"));this.Az=new Eh;Fh(this,a);this.qq=this.JG=m;this.Zb=o}u.H("Diagram",B);
function Ch(a){a.oi=new ka("string",T);var b=new U,c=new na;c.bind(new Se("text","",xe));b.add(c);a.ND=b;a.oi.add("",b);b=new U;c=new na;c.stroke="brown";c.bind(new Se("text","",xe));b.add(c);a.oi.add("Comment",b);b=new U;b.fk=o;b.ox=o;c=new X;c.Ua="Ellipse";c.fill="black";c.stroke=m;c.ia=new eb(3,3);b.add(c);a.oi.add("LinkLabel",b);a.Bk=new ka("string",V);b=new V;b.gk="PANEL";b.type=Gh;c=new na;c.font="bold 12pt sans-serif";c.bind(new Se("text","",xe));b.add(c);c=new v(Hh);c.name="PANEL";var d=new X;
d.Ua="Rectangle";d.fill="rgba(128,128,128,0.2)";c.add(d);d=new Ig;d.padding=new qb(5,5,5,5);c.add(d);b.add(c);a.KD=b;a.Bk.add("",b);a.Aj=new ka("string",W);b=new W;b.gk="PATH";c=new X;c.Mi=h;c.name="PATH";b.add(c);c=new X;c.Fl="Standard";c.fill="black";b.add(c);a.MD=b;a.Aj.add("",b);b=new W;b.gk="PATH";c=new X;c.Mi=h;c.name="PATH";c.stroke="brown";b.add(c);a.Aj.add("Comment",b);b=new v;c=new na;c.bind(new Se("text","",xe));b.add(c);a.LD=b;b=new bf;b.type=Hh;c=new X;c.fill=m;c.stroke="magenta";c.Na=
2;b.add(c);c=new Ig;c.margin=new qb(1,1,1,1);b.add(c);a.uw=b;a.ew=b;b=new bf;b.type=ng;c=new X;c.Mi=h;c.fill=m;c.stroke="magenta";c.Na=0;b.add(c);a.mw=b}
function qh(a){var b=document.createElement("p");b.style.width="100%";b.style.height="200px";var c=document.createElement("div");c.style.position="absolute";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.appendChild(b);document.body.appendChild(c);var d=b.offsetWidth;c.style.overflow="scroll";b=b.offsetWidth;if(d===b)b=c.clientWidth;document.body.removeChild(c);a.Ae=d-b}
B.prototype.toString=function(a){a===f&&(a=0);var b="";if(this.id)b=this.id;if(this.Qh&&this.Qh.id)b=this.Qh.id;b='Diagram "'+b+'"';if(a<=0)return b;for(var c=this.zb.f;c.next();)b=b+("\n  "+c.value.toString(a-1));return b};B.prototype.dumpReferences=B.prototype.tB=function(){for(var a=this.ur;a.next();){var b=a.value;u.trace(b.toString());for(b=b.Qi;b.next();)b.value.tB()}};B.prototype.checkProperties=B.prototype.BH=function(){return u.NE(this)};
B.fromDiv=function(a){var b=a;typeof a==="string"&&(b=document.getElementById(a));return b instanceof HTMLDivElement&&b.L instanceof B?b.L:m};u.a(B,"div",B.prototype.Qh);
u.defineProperty(B,{Qh:"div"},r("yb"),function(a){a!==m&&u.c(a,HTMLDivElement,B,"div");if(this.yb!==a){var b=this.yb;if(b!==m){delete b.L;b.innerHTML="";if(this.na!==m){this.na.L=m;this.na.removeEventListener("touchstart",this.nD,o);this.na.removeEventListener("touchmove",this.mD,o);this.na.removeEventListener("touchend",this.lD,o)}b=this.Nt;if(b!==m){for(var c=b.Pz,d=c.length,e=0;e<d;e++)c.j[e].cancelWaitAfter();c=b.Qz;d=c.length;for(e=0;e<d;e++)c.j[e].cancelWaitAfter();c=b.Rz;d=c.length;for(e=0;e<
d;e++)c.j[e].cancelWaitAfter()}b.cancelWaitAfter();this.yk=this.na=m;window.removeEventListener("resize",this.ky,o);window.removeEventListener("mousemove",this.An,h);window.removeEventListener("mousedown",this.zn,h);window.removeEventListener("mouseup",this.Cn,h);window.removeEventListener("mousewheel",this.fg,h);window.removeEventListener("DOMMouseScroll",this.fg,h);window.removeEventListener("mouseout",this.Bn,h)}this.yb=m;if(a!==m){if(b=a.L)b.Qh=m;Fh(this,a)}}});
function Eh(){this.qA=h;this.KG=o;this.LG=212;this.OD=0>window[u.$d("76a715b2f73f148a")][u.$d("72ba13b5")].indexOf(u.$d(u.nE));this.MG=new E(NaN,NaN)}Eh.prototype.$u=function(a){a.FD();return 0<this.OD&&this!==this.qA?h:o};Eh.prototype.t=Eh.prototype.kK=function(){this.qA=m};
function Fh(a,b){(b===f||b===m)&&u.g("Diagram setup requires an argument DIV.");a.yb!==m&&u.g("Diagram has already completed setup.");typeof b==="string"?a.yb=document.getElementById(b):b instanceof HTMLDivElement?a.yb=b:u.g("No DIV or DIV id supplied: "+b);a.yb===m&&u.g("Invalid DIV id; could not get element with id: "+b);a.yb.L!==f&&u.g("Invalid div id; div already has a Diagram associated with it.");if(window.getComputedStyle(a.yb,m).position==="static")a.yb.style.position="relative";a.yb.style["-webkit-tap-highlight-color"]=
"rgba(255, 255, 255, 0)";a.yb.innerHTML="";a.yb.L=a;var c=document.createElement("canvas");if(!c.getContext||!c.getContext("2d"))a.yb.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";else{c.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";c.style.position="absolute";c.style.top="0px";c.style.left="0px";c.style.zIndex="2";c.width=a.yb.clientWidth||1;c.height=a.yb.clientHeight||1;if(document.defaultView&&document.defaultView.getComputedStyle){a.nA=
parseInt(document.defaultView.getComputedStyle(c,m).paddingLeft,10)||0;a.oA=parseInt(document.defaultView.getComputedStyle(c,m).paddingTop,10)||0;a.lA=parseInt(document.defaultView.getComputedStyle(c,m).borderLeftWidth,10)||0;a.mA=parseInt(document.defaultView.getComputedStyle(c,m).borderTopWidth,10)||0}a.gw=0;a.fw=0;if(document.body){var d=document.body.parentNode;a.gw=d.offsetTop||0;a.fw=d.offsetLeft||0}else document.addEventListener("load",function(){if(document.body){var b=document.body.parentNode;
a.gw=b.offsetTop||0;a.fw=b.offsetLeft||0}},o);c.L=a;a.na=c;a.yk=c.getContext("2d");d=a.yk;a.FD=d[u.$d("69ad0287f137159745844d7e")][u.$d("78a118b7")](d,1,0,0,1,0,0);a.ED=d[u.$d("7eba17a4ca3b1a8346")][u.$d("78a118b7")](d,u.$u,4,4);a.yb.insertBefore(c,a.yb.firstChild);if(a.rz!==m){var d=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),i=document.createElement("div");d.style.position="absolute";d.style.overflow="auto";d.style.width=a.na.width+"px";d.style.height=
a.na.height+"px";d.style.zIndex="1";e.style.position="absolute";e.style.overflow="auto";e.style.width=a.na.width+"px";e.style.height=a.na.height+"px";e.style.zIndex="1";g.style.position="absolute";g.style.width="1px";g.style.height="1px";i.style.position="absolute";i.style.width="1px";i.style.height="1px";a.yb.appendChild(d);a.yb.appendChild(e);d.appendChild(g);e.appendChild(i);d.onscroll=a.Uz;d.onmousedown=a.Vz;d.L=a;d.gA=h;e.onscroll=a.Uz;e.onmousedown=a.Vz;e.L=a;e.hA=h;a.Mj=d;a.Nj=e;a.eA=g;a.fA=
i}a.preventDefault=function(a){a.preventDefault();return o};a.An=function(b){if(a.isEnabled){var c=a.jc;if(window.TouchEvent&&c.ei!==m&&c.ei instanceof window.TouchEvent){b.preventDefault();b.simulated=h;a.qq=b}else{a.jc=a.hc;a.hc=c;Ih(a,b,c,h);if(!Jh(b,new E,b.target.L)){a.pa.doMouseMove();a.pa.isBeyondDragSize()&&Kh(a)}}}};a.zn=function(b){if(a.isEnabled){var c=a.jc;if(a.qq!==m){a.qq=b;b.preventDefault()}else{a.jc=a.hc;a.hc=c;Ih(a,b,c,h);c.He=b.detail;a.Hf=c.copy();if(c.ei.simulated===h){b.preventDefault();
b.simulated=h}else{if(s&&s.ry){window.ry=a.gn(c.C).j;s.trace(window.ry)}yf=m;a.pa.doMouseDown();if(b.button===1){b.preventDefault();return o}}}}};a.Cn=function(b){if(a.isEnabled){var c=a.jc;if(a.qq!==m){a.qq=m;b.preventDefault()}else{a.jc=a.hc;a.hc=c;Ih(a,b,c,h);c.He=b.detail;if(b.target.L)c.vf=b.target.L;if(!Lh(a,b,new E,c.vf)){a.pa.doMouseUp();Af(a);Mh(a,c,b)}}}};a.fg=function(b){if(a.isEnabled){var c=a.jc;a.jc=a.hc;a.hc=c;Ih(a,b,c,h);c.bubbles=h;c.Ei=b.wheelDelta!==f?b.wheelDelta:-40*b.detail;
a.pa.doMouseWheel();Mh(a,c,b)}};a.Bn=function(){if(a.isEnabled){var b=a.pa;b.cancelWaitAfter();b instanceof $e&&b.uF()}};a.ky=function(){var b=a.na,c=a.yb,d=0;if(a.Vo)d=a.Ae;var e=0;if(a.Uo)e=a.Ae;if(c.clientWidth!==b.width+d||c.clientHeight!==b.height+e){a.vj=h;a.hi=h}pf(a)};a.nD=function(b){if(a.isEnabled){a.Pw=o;if(b.touches.length>1){a.pa.doCancel();if(a.Ck&&u.pA){b.preventDefault();b.cancelBubble=h;return o}Kh(a);b.cancelBubble=o;return h}var c=a.jc;a.jc=a.hc;a.hc=c;c.b=a;var d=a.nh(b.targetTouches[0]);
c.ad=a.Wr(d);c.C=d;c.Vg=0;c.button=0;c.He=1;c.Ei=0;c.td=o;c.bubbles=o;c.event=b;c.timestamp=Date.now();c.vf=b.target.L?b.target.L:m;c.$c=m;a.Hf=c.copy();yf=m;a.pa.doMouseDown();var e=c.copy();a.Ht=setTimeout(function(){e.button=2;a.F=e;a.Pw=h;a.pa.doMouseUp()},850);Mh(a,c,b)}};a.mD=function(b){if(a.isEnabled){if(b.touches.length>1){a.pa.doCancel();Kh(a);if(a.Ck&&u.pA){b.preventDefault();b.cancelBubble=h;return o}b.cancelBubble=o;return h}var c=a.jc;a.jc=a.hc;a.hc=c;var d=m,e,g=m;b.changedTouches.length>
0?g=b.changedTouches[0]:b.targetTouches.length>0&&(g=b.targetTouches[0]);c.b=a;if(g){var d=document.elementFromPoint(g.clientX,g.clientY),i;if(d&&d.L){e=d.L.nh(g);i=d.L}else{e=a.nh(b.changedTouches[0]);i=a}c.C=e;c.ad=i.Wr(e)}else if(a.jc!==m){c.C=a.jc.C;c.ad=a.jc.ad;d=a.jc.vf}else if(a.Hf!==m){c.C=a.Hf.C;c.ad=a.Hf.ad;d=a.Hf.vf}c.Vg=0;c.button=0;c.He=1;c.Ei=0;c.td=o;c.bubbles=o;c.event=b;c.timestamp=Date.now();c.vf=d===m?b.target.L:d.L?d.L:m;c.$c=m;a.pa.isBeyondDragSize()&&Kh(a);if(!Jh(g?g:b,new E,
c.vf)){a.pa.doMouseMove();Mh(a,c,b)}}};a.lD=function(b){if(a.isEnabled){Kh(a);if(a.Pw){b.preventDefault();return o}var c=a.jc;a.jc=a.hc;a.hc=c;if(!(b.touches.length>1)){var d=m,e,g=m;b.changedTouches.length>0?g=b.changedTouches[0]:b.targetTouches.length>0&&(g=b.targetTouches[0]);c.b=a;if(g){var d=document.elementFromPoint(g.clientX,g.clientY),i;if(d&&d.L){e=d.L.nh(g);i=d.L}else{e=a.nh(b.changedTouches[0]);i=a}c.C=e;c.ad=i.Wr(e)}else if(a.jc!==m){c.C=a.jc.C;c.ad=a.jc.ad;d=a.jc.vf}else if(a.Hf!==m){c.C=
a.Hf.C;c.ad=a.Hf.ad;d=a.Hf.vf}c.Vg=0;c.button=0;c.He=1;c.Ei=0;c.td=o;c.bubbles=o;c.event=b;c.timestamp=Date.now();c.vf=d===m?b.target.L:d.L?d.L:m;c.$c=m;if(!Lh(a,g?g:b,new E,c.vf)){a.pa.doMouseUp();Mh(a,c,b)}}}};c.addEventListener("touchstart",a.nD,o);c.addEventListener("touchmove",a.mD,o);c.addEventListener("touchend",a.lD,o);c.addEventListener("gesturestart",function(){if(a.Ck!==o){a.Wz=a.scale;a.pa.doCancel()}},o);c.addEventListener("gesturechange",function(b){if(a.Ck!==o){var c=a.nh(b),d=a.pk;
a.pk=c;a.scale=a.Wz*b.scale;a.pk=d}},o);c.addEventListener("mousemove",a.An,o);c.addEventListener("mousedown",a.zn,o);c.addEventListener("mouseup",a.Cn,o);c.addEventListener("mousewheel",a.fg,o);c.addEventListener("DOMMouseScroll",a.fg,o);c.addEventListener("mouseout",a.Bn,o);c.addEventListener("keydown",a.IF,o);c.addEventListener("keyup",a.JF,o);c.addEventListener("selectstart",function(a){a.preventDefault();return o},o);c.addEventListener("contextmenu",function(a){a.preventDefault();return o},o);
window.addEventListener("resize",a.ky,o);c.tabIndex=0;Nh(a)}}B.prototype.focus=function(){this.na.focus()};function Nh(a,b){if(b===f)b=a.yk;b.zv="";b.Jl="";b.Il=""}function Bh(a){var b=new Xe;b.name="Background";a.Qq(b);b=new Xe;b.name="";a.Qq(b);b=new Xe;b.name="Foreground";a.Qq(b);b=new Xe;b.name="Adornment";b.Yc=h;a.Qq(b);b=new Xe;b.name="Tool";b.Yc=h;a.Qq(b);b=new Xe;b.name="Grid";b.Gd=o;b.Yc=h;a.kE(b,a.dn("Background"))}
function Oh(a){a.Oc=new v(Ph);a.Oc.name="GRID";var b=new X;b.Ua="LineH";b.stroke="lightgray";b.Na=0.5;b.Uh=1;a.Oc.add(b);b=new X;b.Ua="LineH";b.stroke="gray";b.Na=0.5;b.Uh=5;a.Oc.add(b);b=new X;b.Ua="LineH";b.stroke="gray";b.Na=1;b.Uh=10;a.Oc.add(b);b=new X;b.Ua="LineV";b.stroke="lightgray";b.Na=0.5;b.Uh=1;a.Oc.add(b);b=new X;b.Ua="LineV";b.stroke="gray";b.Na=0.5;b.Uh=5;a.Oc.add(b);b=new X;b.Ua="LineV";b.stroke="gray";b.Na=1;b.Uh=10;a.Oc.add(b);b=new T;b.add(a.Oc);b.wd="Grid";b.$x=o;b.xC=o;b.vr="GRID";
a.add(b);a.Ab.remove(b);a.Oc.visible=o}
B.prototype.Uz=function(){var a=this.L;if(a.dA){a.vt=h;var b=a.pc,c=a.ib,d=b.width,e=c.width,g=b.height,i=c.height,j=b.right,k=c.right,l=b.bottom,n=c.bottom,q=b.x,p=c.x,b=b.y,c=c.y;if(e<d||i<g){if(this.gA&&a.Fe)a.position=new E(this.scrollLeft+q,a.position.y);else if(this.hA&&a.Ge)a.position=new E(a.position.x,this.scrollTop+b);Qh(a);ph(a);a.vt=o;a.vj=o}else{var t=a.scale;if(this.gA&&a.Fe){if(q<p)a.position=new E(this.scrollLeft+q,a.position.y);if(j>k)a.position=new E(-(a.Mj.Ae-a.na.width)+this.scrollLeft-
a.na.width/t+a.pc.right,a.position.y)}if(this.hA&&a.Ge){if(b<c)a.position=new E(a.position.x,this.scrollTop+b);if(l>n)a.position=new E(a.position.x,-(a.Nj.scrollHeight-a.na.height)+this.scrollTop-a.na.height/t+a.pc.bottom)}Qh(a);a.vt=o;a.vj=o;ph(a);b=a.pc;c=a.ib;j=b.right;k=c.right;l=b.bottom;n=c.bottom;q=b.x;p=c.x;b=b.y;c=c.y;if(e>=d&&q>=p&&j<=k)a.eA.style.width="1px";if(i>=g&&b>=c&&l<=n)a.fA.style.height="1px";Rh(a)}}};B.prototype.Vz=function(){this.L.dA=h};
B.prototype.computeBounds=B.prototype.Yd=function(){this.sg.count>0&&Ah(this);if(this.Ox.V()){var a=this.Ox.copy();a.ix(this.padding);return a}for(var b=h,c=this.zb,d=c.length,e=0;e<d;e++){var g=c.j[e];if(g.visible&&!g.Yc)for(var g=g.Ab,i=g.length,j=0;j<i;j++){var k=g.j[j];if(k.$x&&k.gb()){k=k.oa;if(k.V())if(b){b=o;a=k.copy()}else a.mk(k)}}}b&&(a=new J(0,0,0,0));a.ix(this.padding);return a};
function Sh(a,b){if((b||a.rg)&&!a.Zb&&a.pc.V()){a.Zb=h;var c=b?a.Dk:a.sk,d=c!==rh?ai(a,c):a.scale,c=a.ib.copy(),e=a.na.width/d,g=a.na.height/d;a.position.xa();bi(a,a.jb,a.pc,e,g,b?a.Xo:a.xk);a.position.freeze();a.scale=d;a.Zb=o;d=a.ib;d.Zj(c)||a.Fr(c,d)}}function ai(a,b){var c=a.pc;if(!c.V())return 1;var d=c.width,c=c.height,e=a.na.width,g=a.na.height,i=e/d,j=g/c,k=1;if(b===ci){k=Math.min(j,i);k>1&&(k=1);return k}if(b===di){k=j>i?(g-a.Ae)/c:(e-a.Ae)/d;k>1&&(k=1);return k}return a.scale}
B.prototype.zoomToFit=B.prototype.qK=function(){this.scale=ai(this,ci);pf(this)};B.prototype.alignDocument=B.prototype.WG=function(a,b){this.tj&&ei(this,this.Yd());var c=this.pc,d=this.ib,e=this.Zb;this.Zb=h;this.position=new E(c.x+(a.x*c.width+a.offsetX)-(b.x*d.width-b.offsetX),c.y+(a.y*c.height+a.offsetY)-(b.y*d.height-b.offsetY));this.Zb=e;this.If||pf(this)};
function bi(a,b,c,d,e,g){if(Nb(g)){if(d>c.width)b.x=c.x+(g.x*c.width+g.offsetX)-(g.x*d-g.offsetX);if(e>c.height)b.y=c.y+(g.y*c.height+g.offsetY)-(g.y*e-g.offsetY)}if(d<c.width){g=b.x+d/2;g=Math.min(g,c.right-d/2);g=Math.max(g,c.left+d/2);b.x=g-d/2}else if(b.x>c.left)b.x=c.left;else if(b.x<c.right-d)b.x=c.right-d;if(e<c.height){d=b.y+e/2;d=Math.min(d,c.bottom-e/2);d=Math.max(d,c.top+e/2);b.y=d-e/2}else if(b.y>c.top)b.y=c.top;else if(b.y<c.bottom-e)b.y=c.bottom-e;if(!isFinite(b.x))b.x=-a.padding.left;
if(!isFinite(b.y))b.y=-a.padding.top}B.prototype.findPartAt=B.prototype.er=function(a,b){var c=b?Tf(this,a,function(a){return a.W},function(a){return a.qx()}):this.Xc(a,function(a){return a.W});return c instanceof T?c:m};B.prototype.findObjectAt=B.prototype.Xc=function(a,b,c){b===f&&(b=m);c===f&&(c=m);var d=this.zb.rn;for(Ah(this);d.next();){var e=d.value;if(e.visible){e=e.Xc(a,b,c);if(e!==m)return e}}return m};
function Tf(a,b,c,d){c===f&&(c=m);d===f&&(d=m);var e=a.zb.rn;for(Ah(a);e.next();){a=e.value;if(a.visible&&!a.Yc){a=a.Xc(b,c,d);if(a!==m)return a}}return m}B.prototype.findObjectsAt=B.prototype.gn=function(a,b,c,d){b===f&&(b=m);c===f&&(c=m);if(!(d instanceof z)||!(d instanceof la))d=new z(Q);Ah(this);for(var e=this.zb.rn;e.next();){var g=e.value;g.visible&&g.gn(a,b,c,d)}return d};
B.prototype.findObjectsIn=B.prototype.ll=function(a,b,c,d,e){b===f&&(b=m);c===f&&(c=m);d===f&&(d=o);if(!(e instanceof z)||!(e instanceof la))e=new z(Q);Ah(this);for(var g=this.zb.rn;g.next();){var i=g.value;i.visible&&i.ll(a,b,c,d,e)}return e};B.prototype.findObjectsNear=B.prototype.hn=function(a,b,c,d,e){c===f&&(c=m);d===f&&(d=m);!(e instanceof z)&&!(e instanceof la)&&(e=new z(Q));Ah(this);for(var g=this.zb.rn;g.next();){var i=g.value;i.visible&&i.hn(a,b,c,d,e)}return e};
function Kh(a){if(a.Ht!==-1){clearTimeout(a.Ht);a.Ht=-1}}function Ih(a,b,c,d){c.b=a;if(d){d=a.nh(b);c.ad=a.Wr(d);c.C=d}else{c.ad=a.hc.ad;c.C=a.hc.C}a=0;b.ctrlKey&&(a=a+1);b.altKey&&(a=a+2);b.shiftKey&&(a=a+4);c.Vg=a;c.button=b.button;c.He=1;c.Ei=0;c.td=o;c.bubbles=o;c.event=b;c.timestamp=Date.now();c.vf=b.target.L?b.target.L:m;c.$c=m}
function Mh(a,b,c){if(b.bubbles){s&&(s.trace&&s.KB)&&s.trace("NOT handled "+c.type+" "+b.toString());return h}s&&(s.trace&&s.KB)&&s.trace("handled "+c.type+" "+a.pa.name+" "+b.toString());c.stopPropagation!==f&&c.stopPropagation();c.preventDefault!==f&&c.type!=="touchstart"&&c.preventDefault();c.cancelBubble=h;return o}
B.prototype.IF=function(a){if(this.L.isEnabled){var b=this.L.hc;Ih(this.L,a,b,o);b.key=String.fromCharCode(a.which);switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 48:b.key="0";break;case 187:b.key="Add";break;case 189:b.key="Subtract";break;case 107:b.key=
"Add";break;case 109:b.key="Subtract";break;case 27:b.key="Esc"}this.L.pa.doKeyDown();if((a.which===187||a.which===189||a.which===48||a.which===107||a.which===109)&&a.ctrlKey===h){a.cancelBubble=h;a.preventDefault!==f?a.preventDefault():a.returnValue=o;if(Event.stop){u.g("Event.stop can fire for this browser");Event.stop(a)}a.stopPropagation!==f&&a.stopPropagation();return o}return Mh(this.L,b,a)}};
B.prototype.JF=function(a){if(this.L.isEnabled){var b=this.L.hc;Ih(this.L,a,b,o);b.key=String.fromCharCode(a.which);switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del"}this.L.pa.doKeyUp();return Mh(this.L,b,a)}};
B.prototype.nh=function(a){var b=this.na,c=0,d=0;if(b.offsetParent!==f){do{c=c+b.offsetLeft;d=d+b.offsetTop}while(b=b.offsetParent)}c=c+(this.nA+this.lA+this.fw);d=d+(this.oA+this.mA+this.gw);b=a.pageX-c;a=a.pageY-d;if(this.De!==m){a=new E(b,a);ab(a,this.De);b=a.x;a=a.y}return new E(b,a)};B.prototype.invalidateDocumentBounds=B.prototype.Ki=function(){fi(this);if(this.$w===o){this.$w=h;var a=this;setTimeout(function(){if(!(a.na===m||a.Jg===h)){Mg(a);a.$w=o}},a.yz)}};
function Mg(a){a.If||Ah(a);a.tj&&ei(a,a.Yd());Sh(a);!a.Zb&&a.vj&&gi(a);for(a=a.mt.f;a.next();)Mg(a.value)}B.prototype.redraw=B.prototype.KJ=function(){if(!this.Zb&&!this.If){ph(this);Rh(this);Qh(this);fi(this);this.update()}};B.prototype.isUpdateRequested=B.prototype.cJ=r("Jg");function pf(a){if(!a.Zb&&!a.If&&a.Jg===o){a.Jg=h;setTimeout(function(){if(a.Jg){a.update();a.Jg=o}},a.yz)}}
B.prototype.update=B.prototype.update=function(){if(!(this.yb===m||this.If))if(!this.Io||this.Jg){if(this.Io)this.Io=o;this.If=h;this.ky();this.Jg=o;Ah(this);var a=o;if(!this.rg||this.Iq&&this.es){hi(this);this.Iq=o;a=h}Ah(this);this.pc.V()||ei(this,this.Yd());if(a){if(!this.rg){if(this.Dk!==rh)this.scale=ai(this,this.Dk);else if(this.sk!==rh)this.scale=ai(this,this.sk);var b=this.position;if(b.V())this.position=b;else{b=new E;b.Mn(this.pc,this.PB);var c=this.ib,c=new J(0,0,c.width,c.height),d=new E;
d.Mn(c,this.QB);c=this.rD(d);this.Zb=h;this.position=new E(b.x-c.x,b.y-c.y);this.Zb=o;Sh(this,h)}this.ga("InitialLayoutCompleted");b=this.va;b!==m&&b.clear();ii(this)}this.ga("LayoutCompleted")}Ah(this);!this.Zb&&this.vj&&(gi(this)||gi(this));if(a&&!this.rg)this.rg=h;this.ag();this.If=o}};
function Ah(a){for(var b=0;b<23;b++){var c=a.sg.f;if(c===m||a.sg.count===0)break;a.sg=new la(Q);for(var d=a,e=a.sg;c.next();){var g=c.value,i=g.constructor;i===V&&ji(d,g)}for(c.reset();c.next();){d=c.value;i=d.constructor;if(!(i!==U&&i!==T))if(d.bk()){gh(d,Infinity,Infinity);d.mc()}else e.add(d)}for(c.reset();c.next();){d=c.value;i=d.constructor;if(i===W)if(d.bk()){gh(d,Infinity,Infinity);d.mc();ki(d)}else e.add(d)}for(c.reset();c.next();){d=c.value;i=d.constructor;if(i===bf)if(d.bk()){gh(d,Infinity,
Infinity);d.mc()}else e.add(d)}}}function ji(a,b){for(var c=b.ec,d=[];c.next();){var e=c.value,g=e.constructor;if(g===V)ji(a,e);else if(g===W)d.push(e);else{gh(e,Infinity,Infinity);e.mc()}}c=d.length;for(e=0;e<c;e++){g=d[e];gh(g,Infinity,Infinity);g.mc()}gh(b,Infinity,Infinity);b.mc()}
B.prototype.ag=function(a){this.yb===m&&u.g("No div specified");this.na===m&&u.g("No canvas specified");if(!a)a=this.yk;var b=a!==this.yk;if(b)Nh(this);else if(!this.hi)return;if(this.Yl.count>0){for(var c=this.Yl.f;c.next();)og(c.key,c.value);this.Yl.clear()}a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,this.na.width,this.na.height);c=this.De;c.reset();this.Hb!==1&&c.scale(this.Hb);var d=this.jb;(d.x!==0||d.y!==0)&&c.translate(-d.x,-d.y);a.setTransform(c.m11,c.m12,c.m21,c.m22,c.Pa,c.Qa);if(s&&s.KE){a.fillStyle=
"red";a.fillRect(0,0,8,8);a.lineWidth=8;a.strokeStyle="rgba(255,255,0,.6)";c=this.ib;a.strokeRect(c.x,c.y,c.width,c.height);a.fillStyle="rgba(0,255,0,.2)";a.fillRect(this.pc.x,this.pc.y,this.pc.width,this.pc.height)}c=this.zb.length;for(d=0;d<c;d++)this.zb.j[d].ag(a,this);this.Az?this.Az.$u(this)&&this.ED():this.nh=aa();if(b)Nh(this);else this.hi=this.hm=o};function fi(a){if(a.tj===o||a.Jg===o){a.tj=h;pf(a)}}
function ph(a,b){if(a.hi===o&&(b===f||a.ib.de(b))){a.hi=h;pf(a)}for(var c=a.mt.f;c.next();)ph(c.value)}function Rh(a){if(a.vj===o)a.vj=h}function Qh(a){if(a.hm===o)a.hm=h}
function gi(a){var b=a.na;if(b!==m){var c=a.yb,d=b.width,e=b.height,g=a.yA.copy(),i=o,j=0;if(a.Vo)j=a.Ae;var k=0;if(a.Uo)k=a.Ae;if(c.clientWidth!==b.width+j||c.clientHeight!==b.height+k){b.width=c.clientWidth-j;b.height=c.clientHeight-k;Nh(a)}a.vj=o;if(!a.rz||a.vt)(d!==b.width||e!==b.height)&&a.update();else{var l=a.ib,n=a.pc,q=n.width,c=n.height,p=l.width,j=l.height,t=n.x,w=l.x,A=n.right,F=l.right,k=n.y,H=l.y,n=n.bottom,l=l.bottom,x="1px";if(a.LB&&a.Fe)if(p+1<q){x=q-p+b.width+"px";a.Mj.scrollLeft=
a.position.x-t}else if(t+1<w){x=w-t+b.width+"px";a.Mj.scrollLeft=a.Mj.scrollWidth-a.Mj.clientWidth}else if(A>F+1){x=A-F+b.width+"px";a.Mj.scrollLeft=a.position.x}q=x!=="1px";if(q!==a.Uo){b.height=x==="1px"?b.height+a.Ae:b.height-a.Ae;Nh(a);i=h}a.Uo=q;a.eA.style.width=x;q="1px";if(a.MB&&a.Ge)if(j+1<c){q=c-j+b.height+"px";a.Nj.scrollTop=a.position.y-k}else if(k+1<H){q=H-k+b.height+"px";a.Nj.scrollTop=a.Nj.scrollHeight-a.Nj.clientHeight}else if(n>l+1){q=n-l+b.height+"px";a.Nj.scrollTop=a.position.y}c=
q!=="1px";if(c!==a.Vo){b.width=q==="1px"?b.width+a.Ae:b.width-a.Ae;Nh(a);i=h}a.Vo=c;a.fA.style.height=q;c=b.width;j=b.height;a.Nj.style.height=j+"px";a.Nj.style.width=a.Vo?c+a.Ae+"px":c+"px";a.Mj.style.width=c+"px";a.Mj.style.height=a.Uo?j+a.Ae+"px":j+"px";a.dA=o;if(d!==b.width||e!==b.height){l=a.ib;a.Fr(g,l,i?h:f);a.update();return o}return h}}}
function li(a,b){for(var c=a.zb,d=c.count,e=0;e<d;e++)c.Z(e).name===b&&u.g("Cannot add layer with the name '"+b+"', a layer of the same name is already present in this diagram.")}u.a(B,"addsToTemporaryLayer",B.prototype.Sq);u.defineProperty(B,{Sq:m},r("cz"),function(a){u.e(a,"boolean",B,"addsToTemporaryLayer");this.cz=a});
B.prototype.add=B.prototype.add=function(a){u.c(a,T,B,"add:part");var b=this.Sq?"Tool":a.wd,c=this.dn(b);c===m&&(c=this.dn(""));c===m&&u.g('Cannot add a Part when unable find a Layer named "'+b+'" and there is no default Layer');if(a.ra!==c){b=a.b===this?c.ak(99999999,a,h):c.ak(99999999,a);b>=0&&this.ke(ve,"parts",c,m,a,m,b);this.Ki();a.r(mi);b=a.sr;b!==m&&b(a,m,c)}};
B.prototype.ak=function(a){if(a instanceof U){this.ht.add(a);if(a instanceof V){var b=a.Ta;b===m?this.Wk.add(a):b.Pk.add(a);b=a.qb;if(b!==m)b.b=this}}else a instanceof W?this.Os.add(a):a.constructor===T&&this.Ab.add(a);if(b=a.data){a instanceof bf||this.Ef.add(b,a);var c=this;ni(a,a,function(a){oi(c,a)})}(a.Fc===h||a.uj===h)&&this.sg.add(a);pi(a,h);if(a.gb()){ph(this);fi(this)}};
B.prototype.ud=function(a){if(a instanceof U){this.ht.remove(a);if(a instanceof V){var b=a.Ta;b===m?this.Wk.remove(a):b.Pk.remove(a);b=a.qb;if(b!==m)b.b=m}}else a instanceof W?this.Os.remove(a):a.constructor===T&&this.Ab.remove(a);if(b=a.data){a instanceof bf||this.Ef.remove(b);var c=this;ni(a,a,function(a){qi(c,a)})}this.sg.remove(a);if(a.gb()){ph(this);fi(this)}};
B.prototype.remove=B.prototype.remove=function(a){u.c(a,T,B,"remove:part");var b=a.ra;if(b!==m&&b.b===this){a.Da=o;a.r(ri);a.il();var c=b.ud(-1,a);c>=0&&this.ke(we,"parts",b,a,m,c,m);c=a.sr;c!==m&&c(a,b,m);this.Ki();this.pa.standardMouseOver()}};B.prototype.addLayer=B.prototype.Qq=function(a){u.c(a,Xe,B,"addLayer:layer");li(this,a.name);a.sf(this);var b=this.zb,c=b.count-1;if(!a.Yc)for(;c>=0&&b.Z(c).Yc;)c--;b.dc(c+1,a);fi(this)};
B.prototype.addLayerBefore=B.prototype.kE=function(a,b){u.c(a,Xe,B,"addLayer:layer");li(this,a.name);a.sf(this);for(var c=this.zb.count,d=0;d<c;d++)if(this.zb.Z(d)===b){this.zb.dc(d,a);break}fi(this)};B.prototype.addLayerAfter=B.prototype.SG=function(a,b){u.c(a,Xe,B,"addLayer:layer");li(this,a.name);a.sf(this);for(var c=this.zb.count,d=0;d<c;d++)if(this.zb.Z(d)===b){this.zb.dc(d+1,a);break}fi(this)};
B.prototype.removeLayer=B.prototype.OJ=function(a){if(a.name!==""&&this.zb.remove(a)){for(var b=a.Ab.copy().f;b.next();){var c=b.value,d=c.wd;c.wd="";if(d!==a.name)c.wd=d}fi(this)}};B.prototype.findLayer=B.prototype.dn=function(a){for(var b=this.ur;b.next();){var c=b.value;if(c.name===a)return c}return m};B.prototype.addChangedListener=B.prototype.hx=function(a){u.e(a,"function",B,"addChangedListener:listener");if(this.ci===m)this.ci=new z("function");this.ci.add(a)};
B.prototype.removeChangedListener=B.prototype.yy=function(a){u.e(a,"function",B,"removeChangedListener:listener");if(this.ci!==m){this.ci.remove(a);if(this.ci.count===0)this.ci=m}};B.prototype.Yt=function(a){this.ab||this.va.JB(a);if(this.ci!==m)for(var b=this.ci.f;b.next();){var c=b.value;c(a)}};B.prototype.raiseChangedEvent=B.prototype.ke=function(a,b,c,d,e,g,i){g===f&&(g=m);i===f&&(i=m);var j=new se;j.b=this;j.Lc=a;j.propertyName=b;j.object=c;j.oldValue=d;j.Pe=g;j.newValue=e;j.Oe=i;this.Yt(j)};
B.prototype.raiseChanged=B.prototype.d=function(a,b,c,d,e){this.ke(ue,a,this,b,c,d,e)};u.m(B,{va:"undoManager"},function(){return this.Of.va});u.a(B,"skipsUndoManager",B.prototype.ab);u.defineProperty(B,{ab:"skipsUndoManager"},r("ti"),function(a){u.e(a,"boolean",B,"skipsUndoManager");this.ti=a});
B.prototype.changeState=B.prototype.Vq=function(a,b){if(a!==m&&a.b===this){var c=this.Fk;try{this.Fk=h;var d=a.Lc;if(d===ue){var e=a.object,g=a.propertyName,i=a.$(b);u.Ra(e,g,i);if(e instanceof Q){var j=e.W;j!==m&&j.Ng()}}else if(d===ve){var k=a.object,l=a.Oe,e=a.newValue;if(k instanceof v){if(typeof l==="number"&&e instanceof Q){var n=k;b?n.ud(l):n.dc(l,e);j=k.W;j!==m&&j.Ng()}}else if(k instanceof Xe){var q=a.Pe===h;if(typeof l==="number"&&e instanceof T){var p=k;if(b){e.Ng();p.ud(l,e,q)}else p.ak(l,
e,q)}}else u.g("unknown ChangedEvent.Insert object: "+a.toString())}else if(d===we){k=a.object;l=a.Pe;e=a.oldValue;if(k instanceof v){if(typeof l==="number"&&e instanceof Q){n=k;b?n.dc(l,e):n.ud(l)}}else if(k instanceof Xe){q=a.Oe===h;if(typeof l==="number"&&e instanceof T){p=k;if(b)p.ak(l,e,q);else{e.Ng();p.ud(l,e,q)}}}else u.g("unknown ChangedEvent.Remove object: "+a.toString())}else d!==te&&u.g("unknown ChangedEvent: "+a.toString())}finally{this.Fk=c}}};
B.prototype.startTransaction=B.prototype.Eb=function(a){return this.va.Eb(a)};B.prototype.commitTransaction=B.prototype.Kd=function(a){return this.va.Kd(a)};B.prototype.rollbackTransaction=B.prototype.Hr=function(){return this.va.Hr()};B.prototype.updateAllTargetBindings=B.prototype.oK=function(){for(var a=this.Qi;a.next();)a.value.fc();for(a=this.ek;a.next();)a.value.fc();for(a=this.links;a.next();)a.value.fc()};
B.prototype.Fr=function(a,b,c){if(!this.Zb){Qh(this);ph(this);Rh(this);fi(this);var d=this.qb;d!==m&&(d.Bu&&!c&&(a.width!==b.width||a.height!==b.height))&&d.r();Sh(this);this.ga("ViewportBoundsChanged",c?{}:m,a);ii(this)}};
function ii(a){var b=a.Oc;if(b!==m&&b.visible){for(var c,d=c=1,e=b.wa.length,g=0;g<e;g++){var i=b.wa.j[g],j=i.Uh;j<2||(i.Ua==="LineV"?d=d*j/ld(d,j):c=c*j/ld(c,j))}e=b.lr;c=new eb(c*e.width,d*e.height);a=a.ib;if(a.V()){b.width=a.width+c.width*2;b.height=a.height+c.height*2;a=kd(a.x,a.y,0,0,c.width,c.height);b.W.location=new E(a.x-c.width,a.y-c.height)}}}B.prototype.clearSelection=B.prototype.ux=function(){this.ga("ChangingSelection");of(this);this.ga("ChangedSelection")};
function of(a){if(a.selection.count>0){for(var b=a.selection.xf(),c=b.length,d=0;d<c;d++)b[d].Da=o;a.selection.clear()}}B.prototype.select=B.prototype.select=function(a){if(a!==m&&a.ra.b===this&&(!a.Da||this.selection.count>1)){this.ga("ChangingSelection");of(this);a.Da=h;this.ga("ChangedSelection")}};B.prototype.selectCollection=B.prototype.Cy=function(a){this.ga("ChangingSelection");of(this);for(a=a.f;a.next();)a.value.Da=h;this.ga("ChangedSelection")};
B.prototype.scroll=function(a,b,c){c===f&&(c=1);var d=b==="up"||b==="down",e;if(a==="pixel")e=c;else if(a==="line")e=c*(d?this.Jr:this.Ir);else if(a==="page"){if(window.innerHeight!==0){e=Math.max(window.innerHeight-(d?this.Jr:this.Ir),0);e=c*e}}else u.g("scrolling unit must be 'pixel', 'line', or 'page', not: "+a);e=e/this.scale;c=this.position.copy();b==="up"?c.y=this.position.y-e:b==="down"?c.y=this.position.y+e:b==="left"?c.x=this.position.x-e:b==="right"?c.x=this.position.x+e:u.g("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+
b);this.position=c};B.prototype.scrollToRect=B.prototype.UJ=function(a){var b=this.ib;if(!b.el(a)){a=a.Zt;a.x=a.x-b.width/2;a.y=a.y-b.height/2;this.position=a}};B.prototype.centerRect=B.prototype.AH=function(a){var b=this.ib,a=a.Zt;a.x=a.x-b.width/2;a.y=a.y-b.height/2;this.position=a};B.prototype.transformDocToView=B.prototype.Wr=function(a){var b=this.De;b.reset();this.Hb!==1&&b.scale(this.Hb);var c=this.jb;(c.x!==0||c.y!==0)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return a.copy().transform(this.De)};
B.prototype.transformViewToDoc=B.prototype.rD=function(a){var b=this.De;b.reset();this.Hb!==1&&b.scale(this.Hb);var c=this.jb;(c.x!==0||c.y!==0)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return ab(a.copy(),this.De)};var rh;B.None=rh=u.l(B,"None",0);var ci;B.Uniform=ci=u.l(B,"Uniform",1);var di;B.UniformToFill=di=u.l(B,"UniformToFill",2);var $f;B.CycleAll=$f=u.l(B,"CycleAll",10);var dg;B.CycleNotDirected=dg=u.l(B,"CycleNotDirected",11);var fg;
B.CycleNotDirectedFast=fg=u.l(B,"CycleNotDirectedFast",12);var gg;B.CycleNotUndirected=gg=u.l(B,"CycleNotUndirected",13);var ag;B.CycleDestinationTree=ag=u.l(B,"CycleDestinationTree",14);var cg;B.CycleSourceTree=cg=u.l(B,"CycleSourceTree",15);u.a(B,"validCycle",B.prototype.xD);u.defineProperty(B,{xD:"validCycle"},r("Ot"),function(a){var b=this.Ot;if(b!==a){u.Sa(a,B,B,"validCycle");this.Ot=a;this.d("validCycle",b,a)}});u.m(B,{ur:"layers"},function(){return this.zb.f});u.a(B,"isModelReadOnly",B.prototype.Md);
u.defineProperty(B,{Md:"isModelReadOnly"},function(){var a=this.Of;return a===m?o:a.Ja},function(a){var b=this.Of;if(b!==m)b.Ja=a});u.a(B,"isReadOnly",B.prototype.Ja);u.defineProperty(B,{Ja:"isReadOnly"},r("wj"),function(a){var b=this.wj;if(b!==a){u.e(a,"boolean",B,"isReadOnly");this.wj=a;this.d("isReadOnly",b,a)}});u.a(B,"isEnabled",B.prototype.isEnabled);
u.defineProperty(B,{isEnabled:"isEnabled"},r("oh"),function(a){var b=this.oh;if(b!==a){u.e(a,"boolean",B,"isEnabled");this.oh=a;this.d("isEnabled",b,a)}});u.a(B,"allowClipboard",B.prototype.Vt);u.defineProperty(B,{Vt:"allowClipboard"},r("Xr"),function(a){var b=this.Xr;if(b!==a){u.e(a,"boolean",B,"allowClipboard");this.Xr=a;this.d("allowClipboard",b,a)}});u.a(B,"allowCopy",B.prototype.Hh);
u.defineProperty(B,{Hh:"allowCopy"},r("Wi"),function(a){var b=this.Wi;if(b!==a){u.e(a,"boolean",B,"allowCopy");this.Wi=a;this.d("allowCopy",b,a)}});u.a(B,"allowDelete",B.prototype.Rj);u.defineProperty(B,{Rj:"allowDelete"},r("Xi"),function(a){var b=this.Xi;if(b!==a){u.e(a,"boolean",B,"allowDelete");this.Xi=a;this.d("allowDelete",b,a)}});u.a(B,"allowDragOut",B.prototype.Wt);
u.defineProperty(B,{Wt:"allowDragOut"},r("Yr"),function(a){var b=this.Yr;if(b!==a){u.e(a,"boolean",B,"allowDragOut");this.Yr=a;this.d("allowDragOut",b,a)}});u.a(B,"allowDrop",B.prototype.HA);u.defineProperty(B,{HA:"allowDrop"},r("Zr"),function(a){var b=this.Zr;if(b!==a){u.e(a,"boolean",B,"allowDrop");this.Zr=a;this.d("allowDrop",b,a)}});u.a(B,"allowTextEdit",B.prototype.Vm);
u.defineProperty(B,{Vm:"allowTextEdit"},r("gj"),function(a){var b=this.gj;if(b!==a){u.e(a,"boolean",B,"allowTextEdit");this.gj=a;this.d("allowTextEdit",b,a)}});u.a(B,"allowGroup",B.prototype.Pm);u.defineProperty(B,{Pm:"allowGroup"},r("Yi"),function(a){var b=this.Yi;if(b!==a){u.e(a,"boolean",B,"allowGroup");this.Yi=a;this.d("allowGroup",b,a)}});u.a(B,"allowUngroup",B.prototype.Wm);
u.defineProperty(B,{Wm:"allowUngroup"},r("hj"),function(a){var b=this.hj;if(b!==a){u.e(a,"boolean",B,"allowUngroup");this.hj=a;this.d("allowUngroup",b,a)}});u.a(B,"allowInsert",B.prototype.Qm);u.defineProperty(B,{Qm:"allowInsert"},r("as"),function(a){var b=this.as;if(b!==a){u.e(a,"boolean",B,"allowInsert");this.as=a;this.d("allowInsert",b,a)}});u.a(B,"allowLink",B.prototype.$k);
u.defineProperty(B,{$k:"allowLink"},r("Zi"),function(a){var b=this.Zi;if(b!==a){u.e(a,"boolean",B,"allowLink");this.Zi=a;this.d("allowLink",b,a)}});u.a(B,"allowRelink",B.prototype.yi);u.defineProperty(B,{yi:"allowRelink"},r("bj"),function(a){var b=this.bj;if(b!==a){u.e(a,"boolean",B,"allowRelink");this.bj=a;this.d("allowRelink",b,a)}});u.a(B,"allowMove",B.prototype.Sj);
u.defineProperty(B,{Sj:"allowMove"},r("$i"),function(a){var b=this.$i;if(b!==a){u.e(a,"boolean",B,"allowMove");this.$i=a;this.d("allowMove",b,a)}});u.a(B,"allowPrint",B.prototype.Rm);u.defineProperty(B,{Rm:"allowPrint"},r("aj"),function(a){var b=this.aj;if(b!==a){u.e(a,"boolean",B,"allowPrint");this.aj=a;this.d("allowPrint",b,a)}});u.a(B,"allowReshape",B.prototype.Sm);
u.defineProperty(B,{Sm:"allowReshape"},r("cj"),function(a){var b=this.cj;if(b!==a){u.e(a,"boolean",B,"allowReshape");this.cj=a;this.d("allowReshape",b,a)}});u.a(B,"allowResize",B.prototype.Tm);u.defineProperty(B,{Tm:"allowResize"},r("dj"),function(a){var b=this.dj;if(b!==a){u.e(a,"boolean",B,"allowResize");this.dj=a;this.d("allowResize",b,a)}});u.a(B,"allowRotate",B.prototype.Um);
u.defineProperty(B,{Um:"allowRotate"},r("ej"),function(a){var b=this.ej;if(b!==a){u.e(a,"boolean",B,"allowRotate");this.ej=a;this.d("allowRotate",b,a)}});u.a(B,"allowSelect",B.prototype.Gd);u.defineProperty(B,{Gd:"allowSelect"},r("fj"),function(a){var b=this.fj;if(b!==a){u.e(a,"boolean",B,"allowSelect");this.fj=a;this.d("allowSelect",b,a)}});u.a(B,"allowUndo",B.prototype.jx);
u.defineProperty(B,{jx:"allowUndo"},r("bs"),function(a){var b=this.bs;if(b!==a){u.e(a,"boolean",B,"allowUndo");this.bs=a;this.d("allowUndo",b,a)}});u.a(B,"allowZoom",B.prototype.Tq);u.defineProperty(B,{Tq:"allowZoom"},r("ds"),function(a){var b=this.ds;if(b!==a){u.e(a,"boolean",B,"allowZoom");this.ds=a;this.d("allowZoom",b,a)}});u.a(B,"hasVerticalScrollbar",B.prototype.MB);
u.defineProperty(B,{MB:"hasVerticalScrollbar"},r("Ds"),function(a){var b=this.Ds;if(b!==a){u.e(a,"boolean",B,"hasVerticalScrollbar");this.Ds=a;this.d("hasVerticalScrollbar",b,a);Sh(this)}});u.a(B,"hasHorizontalScrollbar",B.prototype.LB);u.defineProperty(B,{LB:"hasHorizontalScrollbar"},r("Cs"),function(a){var b=this.Cs;if(b!==a){u.e(a,"boolean",B,"hasHorizontalScrollbar");this.Cs=a;this.d("hasHorizontalScrollbar",b,a);Sh(this)}});u.a(B,"allowHorizontalScroll",B.prototype.Fe);
u.defineProperty(B,{Fe:"allowHorizontalScroll"},r("$r"),function(a){var b=this.$r;if(b!==a){u.e(a,"boolean",B,"allowHorizontalScroll");this.$r=a;this.d("allowHorizontalScroll",b,a);Sh(this)}});u.a(B,"allowVerticalScroll",B.prototype.Ge);u.defineProperty(B,{Ge:"allowVerticalScroll"},r("cs"),function(a){var b=this.cs;if(b!==a){u.e(a,"boolean",B,"allowVerticalScroll");this.cs=a;this.d("allowVerticalScroll",b,a);Sh(this)}});u.a(B,"scrollHorizontalLineChange",B.prototype.Ir);
u.defineProperty(B,{Ir:"scrollHorizontalLineChange"},r("wt"),function(a){var b=this.wt;if(b!==a){u.e(a,"number",B,"scrollHorizontalLineChange");a<0&&u.ha(a,">= 0",B,"scrollHorizontalLineChange");this.wt=a;this.d("scrollHorizontalLineChange",b,a)}});u.a(B,"scrollVerticalLineChange",B.prototype.Jr);
u.defineProperty(B,{Jr:"scrollVerticalLineChange"},r("xt"),function(a){var b=this.xt;if(b!==a){u.e(a,"number",B,"scrollVerticalLineChange");a<0&&u.ha(a,">= 0",B,"scrollVerticalLineChange");this.xt=a;this.d("scrollVerticalLineChange",b,a)}});u.a(B,"lastInput",B.prototype.F);u.defineProperty(B,{F:"lastInput"},r("hc"),function(a){s&&u.c(a,qe,B,"lastInput");this.hc=a});u.a(B,"firstInput",B.prototype.bc);u.defineProperty(B,{bc:"firstInput"},r("Hf"),function(a){s&&u.c(a,qe,B,"firstInput");this.Hf=a});
u.a(B,"currentCursor",B.prototype.oc);u.defineProperty(B,{oc:"currentCursor"},r("ss"),function(a){u.e(a,"string",B,"currentCursor");if(!(this.ss===a||a===""&&this.ss===this.uo)){this.ss=a;if(a!==""){this.na.style.cursor=a;document.body.style.cursor=a}else{this.na.style.cursor=this.Cx;document.body.style.cursor=this.Cx}}});u.a(B,"defaultCursor",B.prototype.Cx);
u.defineProperty(B,{Cx:"defaultCursor"},r("uo"),function(a){u.e(a,"string",B,"defaultCursor");var b=this.uo;if(b!==a){this.uo=a;this.d("defaultCursor",b,a)}});u.a(B,"hasGestureZoom",B.prototype.sF);u.defineProperty(B,{sF:"hasGestureZoom"},r("Ck"),function(a){if(this.Ck!==a){u.e(a,"boolean",B,"hasGestureZoom");this.Ck=a}});u.a(B,"click",B.prototype.click);u.defineProperty(B,{click:"click"},r("hh"),function(a){u.e(a,"function",B,"click");var b=this.hh;if(b!==a){this.hh=a;this.d("click",b,a)}});
u.a(B,"doubleClick",B.prototype.jl);u.defineProperty(B,{jl:"doubleClick"},r("kh"),function(a){u.e(a,"function",B,"doubleClick");var b=this.kh;if(b!==a){this.kh=a;this.d("doubleClick",b,a)}});u.a(B,"contextClick",B.prototype.Yq);u.defineProperty(B,{Yq:"contextClick"},r("ih"),function(a){u.e(a,"function",B,"contextClick");var b=this.ih;if(b!==a){this.ih=a;this.d("contextClick",b,a)}});u.a(B,"mouseOver",B.prototype.Br);
u.defineProperty(B,{Br:"mouseOver"},r("yh"),function(a){a!==m&&u.e(a,"function",B,"mouseOver");var b=this.yh;if(b!==a){this.yh=a;this.d("mouseOver",b,a)}});u.a(B,"mouseHover",B.prototype.Ar);u.defineProperty(B,{Ar:"mouseHover"},r("xh"),function(a){a!==m&&u.e(a,"function",B,"mouseHover");var b=this.xh;if(b!==a){this.xh=a;this.d("mouseHover",b,a)}});u.a(B,"mouseHold",B.prototype.zr);
u.defineProperty(B,{zr:"mouseHold"},r("wh"),function(a){a!==m&&u.e(a,"function",B,"mouseHold");var b=this.wh;if(b!==a){this.wh=a;this.d("mouseHold",b,a)}});u.a(B,"mouseDragOver",B.prototype.qC);u.defineProperty(B,{qC:"mouseDragOver"},r("bt"),function(a){a!==m&&u.e(a,"function",B,"mouseDragOver");var b=this.bt;if(b!==a){this.bt=a;this.d("mouseDragOver",b,a)}});u.a(B,"mouseDrop",B.prototype.yr);
u.defineProperty(B,{yr:"mouseDrop"},r("vh"),function(a){a!==m&&u.e(a,"function",B,"mouseDrop");var b=this.vh;if(b!==a){this.vh=a;this.d("mouseDrop",b,a)}});u.a(B,"toolTip",B.prototype.Vr);u.defineProperty(B,{Vr:"toolTip"},r("Fh"),function(a){a!==m&&u.c(a,bf,B,"toolTip");var b=this.Fh;if(b!==a){this.Fh=a;this.d("toolTip",b,a)}});u.a(B,"contextMenu",B.prototype.contextMenu);
u.defineProperty(B,{contextMenu:"contextMenu"},r("jh"),function(a){a!==m&&u.c(a,bf,B,"contextMenu");var b=this.jh;if(b!==a){this.jh=a;this.d("contextMenu",b,a)}});u.a(B,"commandHandler",B.prototype.Jd);u.defineProperty(B,{Jd:"commandHandler"},r("Jv"),function(a){var b=this.Jv;if(b!==a){u.c(a,C,B,"commandHandler");a.b!==m&&u.g("Cannot share CommandHandlers between Diagrams: "+a.toString());b!==m&&b.sf(m);this.Jv=a;a.sf(this)}});u.a(B,"toolManager",B.prototype.Lb);
u.defineProperty(B,{Lb:"toolManager"},r("Nt"),function(a){var b=this.Nt;if(b!==a){u.c(a,$e,B,"toolManager");a.L!==m&&u.g("Cannot share ToolManagers between Diagrams: "+a.toString());b!==m&&b.sf(m);this.Nt=a;a.sf(this)}});u.a(B,"defaultTool",B.prototype.gu);u.defineProperty(B,{gu:"defaultTool"},r("Rv"),function(a){var b=this.Rv;if(b!==a){u.c(a,qf,B,"defaultTool");this.Rv=a;if(this.pa===b)this.pa=a}});u.a(B,"currentTool",B.prototype.pa);
u.defineProperty(B,{pa:"currentTool"},r("Mv"),function(a){var b=this.Mv;if(b!==m){b.Q&&b.doDeactivate();b.cancelWaitAfter();b.doStop()}if(a===m)a=this.gu;if(a!==m){u.c(a,qf,B,"currentTool");this.Mv=a;a.sf(this);a.doStart()}});u.m(B,{selection:"selection"},r("iA"));u.a(B,"maxSelectionCount",B.prototype.jC);
u.defineProperty(B,{jC:"maxSelectionCount"},r("Vs"),function(a){var b=this.Vs;if(b!==a){u.e(a,"number",B,"maxSelectionCount");if(a>=0&&!isNaN(a)){this.Vs=a;this.d("maxSelectionCount",b,a);if(!this.va.rc){a=this.selection.count-a;if(a>0){this.ga("ChangingSelection");for(var b=this.selection.xf(),c=0;c<a;c++)b[c].Da=o;this.ga("ChangedSelection")}}}else u.ha(a,">= 0",B,"maxSelectionCount")}});u.a(B,"nodeSelectionAdornmentTemplate",B.prototype.tC);
u.defineProperty(B,{tC:"nodeSelectionAdornmentTemplate"},r("uw"),function(a){var b=this.uw;if(b!==a){u.c(a,bf,B,"nodeSelectionAdornmentTemplate");this.uw=a;this.d("nodeSelectionAdornmentTemplate",b,a)}});u.a(B,"groupSelectionAdornmentTemplate",B.prototype.HB);u.defineProperty(B,{HB:"groupSelectionAdornmentTemplate"},r("ew"),function(a){var b=this.ew;if(b!==a){u.c(a,bf,B,"groupSelectionAdornmentTemplate");this.ew=a;this.d("groupSelectionAdornmentTemplate",b,a)}});
u.a(B,"linkSelectionAdornmentTemplate",B.prototype.fC);u.defineProperty(B,{fC:"linkSelectionAdornmentTemplate"},r("mw"),function(a){var b=this.mw;if(b!==a){u.c(a,bf,B,"linkSelectionAdornmentTemplate");this.mw=a;this.d("linkSelectionAdornmentTemplate",b,a)}});u.a(B,"isModified",B.prototype.DF);u.defineProperty(B,{DF:"isModified"},function(){var a=this.va;return a===m?this.Hz:a.gl!==m?h:this.Hz&&this.qj!==a.Ji},function(a){u.e(a,"boolean",B,"isModified");this.Hz=a;var b=this.va;if(!a&&b)this.qj=b.Ji});
u.a(B,"model",B.prototype.J);u.defineProperty(B,{J:"model"},r("Of"),function(a){var b=this.Of;if(b!==a){u.c(a,D,B,"model");b!==m&&(b.va!==a.va&&b.va.BF)&&u.g("Do not replace a Diagram.model while a transaction is in progress.");this.rg=o;this.Io=h;this.Jg=o;var c=this.If;this.If=h;if(b!==m){b.yy(this.Nz);b instanceof P&&th(this,b.cg);th(this,b.Xg)}this.Of=a;a.hx(this.Mz);uh(this,a.Xg);a instanceof P&&vh(this,a.cg);a.yy(this.Mz);a.hx(this.Nz);this.If=c;pf(this);if(b!==m)a.va.isEnabled=b.va.isEnabled}});
function sh(a,b,c){var d=a.bg(b);if(d!==m&&typeof c==="string")d.fc(c);else{d=m;for(a=a.Ik.f;a.next();){for(var e=a.value,g=0;g<e.length;g++){var i=e[g];if(i.qh!==m){i=i.qh.$(b);if(i!==m){d===m&&(d=[]);d.push(i)}}}if(d!==m)break}b=d;if(b!==m&&typeof c==="string")for(d=0;d<b.length;d++)b[d].fc(c)}}function oi(a,b){var c=b.xj;if(u.isArray(c)){var d=a.Ik.$(c);if(d===m)a.Ik.add(c,[b]);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function qi(a,b){var c=b.xj;if(u.isArray(c)){var d=a.Ik.$(c);if(d!==m)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);d.length===0&&a.Ik.remove(c);break}}}
B.prototype.clear=B.prototype.clear=function(){var a=m;if(this.Oc!==m)a=this.Oc.W;this.J.clear();for(var b=this.zb.length,c=0;c<b;c++)this.zb.j[c].clear();this.sg.clear();this.Yl.clear();this.ht.clear();this.Wk.clear();this.Os.clear();this.Ab.clear();this.Ef.clear();this.Ik.clear();this.iA.clear();this.Tl=this.Gw=m;this.xs=(new J(NaN,NaN,NaN,NaN)).freeze();if(a!==m){this.add(a);this.Ab.remove(a)}};
B.prototype.reset=B.prototype.reset=function(){this.clear();this.zb=new z(Xe);this.jb=(new E(NaN,NaN)).freeze();this.Hb=1;this.Zs=1E-4;this.Us=100;this.Rt=(new E(NaN,NaN)).freeze();this.As=(new J(NaN,NaN,NaN,NaN)).freeze();this.sk=rh;this.xk=Ub;this.Dk=rh;this.Xo=Ub;this.Fs=this.Es=Vb;this.fs=(new qb(16,16,16,16)).freeze();this.Ls=h;this.Ot=$f;this.uo="auto";this.Of=this.jh=this.Fh=this.vh=this.bt=this.wh=this.xh=this.yh=this.ih=this.kh=this.hh=m;this.wj=o;this.Xi=this.Wi=this.Xr=this.oh=h;this.Zr=
this.Yr=o;this.cs=this.$r=this.Ds=this.Cs=this.ds=this.bs=this.fj=this.ej=this.dj=this.cj=this.aj=this.$i=this.bj=this.Zi=this.as=this.hj=this.Yi=this.gj=h;this.xt=this.wt=16;this.Ed=(new qb(5)).freeze();this.Vs=999999999;this.Rc=m;Bh(this);Ch(this);this.Oc=m;this.J=new P;this.ti=h;this.qb=new Dh;this.ti=o};
B.prototype.rebuildParts=B.prototype.wl=function(){for(var a=[],b=this.selection.f;b.next();){var c=b.value.data;c&&a.push(c)}b=this.J;b instanceof P&&th(this,b.cg);th(this,b.Xg);uh(this,b.Xg);b instanceof P&&vh(this,b.cg);for(b=0;b<a.length;b++)if(c=this.bg(a[b]))c.Da=h};function uh(a,b){if(b!==m){for(var c=a.J,d=u.vb(b),e=0;e<d;e++){var g=u.lb(b,e);c.Ai(g)?wh(a,g,o):xh(a,g)}if(c instanceof P){for(e=0;e<d;e++){g=u.lb(b,e);c.Ai(g)&&si(a,g)}for(c=a.links;c.next();)ti(c.value)}a.Xx(o)}}
function wh(a,b,c){if(!(b===f||b===m)&&!a.va.rc&&!a.Ef.contains(b)){c===f&&(c=h);var d=a.getCategoryForNodeData(b),e=a.findTemplateForNodeData(b,d);if(e instanceof T){nf(e);e=e.copy();if(e instanceof T){e.ij=d;a.add(e);e.data=b;c&&si(a,b)}}}}B.prototype.getCategoryForNodeData=B.prototype.CB=function(a){var b=this.J,c=b.CB(a),d=o;b instanceof P&&(d=b.cy(a));d&&c===""&&(c="LinkLabel");return c};
B.prototype.findTemplateForNodeData=B.prototype.zI=function(a,b){var c=o,d=this.J;d instanceof P&&(c=d.Yx(a));if(c){c=this.Ux.$(b);if(c===m){c=this.Ux.$("");if(c===m){if(u.dE===f){u.dE=h;u.trace('No Group template found for category "'+b+'"');u.trace("  Using default group template")}c=this.KD}}}else{c=this.sy.$(b);if(c===m){c=this.sy.$("");if(c===m){if(u.gE===f){u.gE=h;u.trace('No Node template found for category "'+b+'"');u.trace("  Using default node template")}c=this.ND}}}return c instanceof T?
c:m};function si(a,b){var c=a.J;if(c instanceof P){var d=c.Ub(b);if(d!==f){var e=c.uB(d),g=a.bg(b);if(e!==m&&g!==m&&g instanceof U){for(e=e.f;e.next();){var i=e.value;if(c.Ai(i)){if(g instanceof V&&c.kr(i)===d){var j=a.bg(i);if(j!==m)j.Ta=g}}else{j=a.Hi(i);if(j!==m){if(c.ln(i)===d)j.ca=g;if(c.mn(i)===d)j.ea=g;for(var i=c.nl(i),k=0;k<i.length;k++)if(i[k]===d){g.fe=j;break}}}}c.Sg(d)}c=c.kr(b);if(c!==f){c=a.Th(c);if(c instanceof V)g.Ta=c}}}}
function vh(a,b){if(b!==m){for(var c=u.vb(b),d=0;d<c;d++)xh(a,u.lb(b,d));a.Xx(o)}}
function xh(a,b){if(!(b===f||b===m)&&!a.va.rc&&!a.Ef.contains(b)){var c=a.getCategoryForLinkData(b),d=a.findTemplateForLinkData(b,c);if(d instanceof W){nf(d);d=d.copy();if(d instanceof W){d.ij=c;var c=a.J,e=c.ln(b);if(e!==f){e=a.Th(e);if(e instanceof U)d.ca=e}e=c.nF(b);d.Tg=e;e=c.mn(b);if(e!==f){e=a.Th(e);if(e instanceof U)d.ea=e}e=c.pF(b);d.Zh=e;c=c.nl(b);if(u.isArray(c))for(var e=u.vb(c),g=0;g<e;g++){var i=a.Th(u.lb(c,g));if(i!==m)i.fe=d}a.add(d);d.data=b}}}}
B.prototype.getCategoryForLinkData=B.prototype.BB=function(a){return this.J.BB(a)};B.prototype.findTemplateForLinkData=B.prototype.yI=function(a,b){var c=this.gy.$(b);if(c===m){c=this.gy.$("");if(c===m){if(u.fE===f){u.fE=h;u.trace('No Link template found for category "'+b+'"');u.trace("  Using default link template")}c=this.MD}}return c instanceof W?c:m};function th(a,b){for(var c=u.vb(b),d=0;d<c;d++)yh(a,u.lb(b,d))}
function yh(a,b){if(!(b===f||b===m)){var c=a.bg(b);if(c instanceof T){var d=c.ra;if(!(d===m||d.b!==a)){var e=a.J;if(e instanceof P&&c instanceof U){var g=e.Ub(c.data);if(g!==f){for(var i=c.ge;i.next();){var j=i.value.data;e.$f(g,j)}if(c.Li){i=c.fe;if(i!==m){j=i.data;e.$f(g,j)}}if(c instanceof V)for(i=c.ec;i.next();){j=i.value.data;e.Ai(j)&&e.$f(g,j)}}}c.Da=o;e=d.ud(-1,c);e>=0&&a.ke(we,"parts",d,c,m,e,m);e=c.sr;e!==m&&e(c,d,m)}}}}
B.prototype.findPartForKey=B.prototype.wI=function(a){if(a===m||a===f)return m;a=this.J.Rg(a);if(a===m)return m;a=this.Ef.$(a);return a instanceof T?a:m};B.prototype.findNodeForKey=B.prototype.Th=function(a){if(a===m||a===f)return m;a=this.J.Rg(a);if(a===m)return m;a=this.Ef.$(a);return a instanceof U?a:m};B.prototype.findPartForData=B.prototype.bg=function(a){if(a===m)return m;a=this.Ef.$(a);return a instanceof T?a:m};
B.prototype.findNodeForData=B.prototype.hF=function(a){if(a===m)return m;a=this.Ef.$(a);return a instanceof U?a:m};B.prototype.findLinkForData=B.prototype.Hi=function(a){if(a===m)return m;a=this.Ef.$(a);return a instanceof W?a:m};u.a(B,"nodeTemplate",B.prototype.WF);u.defineProperty(B,{WF:"nodeTemplate"},function(){return this.oi.$("")},function(a){var b=this.oi.$("");if(b!==a){u.c(a,T,B,"nodeTemplate");this.oi.add("",a);this.d("nodeTemplate",b,a);this.va.rc||this.wl()}});
u.a(B,"nodeTemplateMap",B.prototype.sy);u.defineProperty(B,{sy:"nodeTemplateMap"},r("oi"),function(a){var b=this.oi;if(b!==a){u.c(a,ka,B,"nodeTemplateMap");this.oi=a;this.d("nodeTemplateMap",b,a);this.va.rc||this.wl()}});u.a(B,"groupTemplate",B.prototype.rF);u.defineProperty(B,{rF:"groupTemplate"},function(){return this.Bk.$("")},function(a){var b=this.Bk.$("");if(b!==a){u.c(a,V,B,"groupTemplate");this.Bk.add("",a);this.d("groupTemplate",b,a);this.va.rc||this.wl()}});u.a(B,"groupTemplateMap",B.prototype.Ux);
u.defineProperty(B,{Ux:"groupTemplateMap"},r("Bk"),function(a){var b=this.Bk;if(b!==a){u.c(a,ka,B,"groupTemplateMap");this.Bk=a;this.d("groupTemplateMap",b,a);this.va.rc||this.wl()}});u.a(B,"linkTemplate",B.prototype.MF);u.defineProperty(B,{MF:"linkTemplate"},function(){return this.Aj.$("")},function(a){var b=this.Aj.$("");if(b!==a){u.c(a,W,B,"linkTemplate");this.Aj.add("",a);this.d("linkTemplate",b,a);this.va.rc||this.wl()}});u.a(B,"linkTemplateMap",B.prototype.gy);
u.defineProperty(B,{gy:"linkTemplateMap"},r("Aj"),function(a){var b=this.Aj;if(b!==a){u.c(a,ka,B,"linkTemplateMap");this.Aj=a;this.d("linkTemplateMap",b,a);this.va.rc||this.wl()}});u.a(B,"isMouseCaptured",B.prototype.Ac);
u.defineProperty(B,{Ac:"isMouseCaptured"},r("Iz"),function(a){var b=this.na;if(a){this.F.bubbles=o;b.removeEventListener("mousemove",this.An,o);b.removeEventListener("mousedown",this.zn,o);b.removeEventListener("mouseup",this.Cn,o);b.removeEventListener("mousewheel",this.fg,o);b.removeEventListener("DOMMouseScroll",this.fg,o);b.removeEventListener("mouseout",this.Bn,o);window.addEventListener("mousemove",this.An,h);window.addEventListener("mousedown",this.zn,h);window.addEventListener("mouseup",this.Cn,
h);window.addEventListener("mousewheel",this.fg,h);window.addEventListener("DOMMouseScroll",this.fg,h);window.addEventListener("mouseout",this.Bn,h);window.addEventListener("selectstart",this.preventDefault,o)}else{window.removeEventListener("mousemove",this.An,h);window.removeEventListener("mousedown",this.zn,h);window.removeEventListener("mouseup",this.Cn,h);window.removeEventListener("mousewheel",this.fg,h);window.removeEventListener("DOMMouseScroll",this.fg,h);window.removeEventListener("mouseout",
this.Bn,h);window.removeEventListener("selectstart",this.preventDefault,o);b.addEventListener("mousemove",this.An,o);b.addEventListener("mousedown",this.zn,o);b.addEventListener("mouseup",this.Cn,o);b.addEventListener("mousewheel",this.fg,o);b.addEventListener("DOMMouseScroll",this.fg,o);b.addEventListener("mouseout",this.Bn,o)}this.Iz=a});u.a(B,"position",B.prototype.position);
u.defineProperty(B,{position:"position"},r("jb"),function(a){var b=this.jb;if(!b.u(a)){u.c(a,E,B,"position");var c=this.ib.copy();c.x=b.x;c.y=b.y;if(b.mu(a))a=b;else if(!this.Zb){this.Zb=h;b=this.scale;bi(this,a,this.pc,this.na.width/b,this.na.height/b,this.xk);this.Zb=o}this.jb=a.B();this.Fr(c,this.ib);pf(this)}});u.a(B,"grid",B.prototype.wu);
u.defineProperty(B,{wu:"grid"},function(){this.Oc===m&&Oh(this);return this.Oc},function(a){var b=this.Oc;if(b!==a){if(b===m){Oh(this);b=this.Oc}u.c(a,v,B,"grid");a.type!==Ph&&u.g("Diagram.grid must be a Panel of type Panel.Grid");b.U.remove(b);this.Oc=a;a.name="GRID";b.U.add(a);ph(this);this.d("grid",b,a)}});u.m(B,{ib:"viewportBounds"},function(){var a=this.jb,b=this.Hb,c=this.na,d=this.yA;d.Vd(a.x,a.y,Math.max(c.width,0)/b,Math.max(c.height,0)/b);return d});u.a(B,"fixedBounds",B.prototype.Ox);
u.defineProperty(B,{Ox:"fixedBounds"},r("As"),function(a){var b=this.As;if(!b.u(a)){u.c(a,J,B,"fixedBounds");this.As=a=a.B();fi(this);this.d("fixedBounds",b,a)}});u.m(B,{pc:"documentBounds"},r("xs"));function ei(a,b){var c=a.xs;if(!c.u(b)){b=b.B();a.xs=b;a.tj=o;Sh(a);a.ga("DocumentBoundsChanged",m,c.copy());Rh(a)}}u.a(B,"scale",B.prototype.scale);
u.defineProperty(B,{scale:"scale"},r("Hb"),function(a){var b=this.Hb;if(b!==a){u.i(a,B,"scale");this.Hb=a;var c=a;if(a<this.Pi)c=this.Pi;if(a>this.Oi)c=this.Oi;if(!isNaN(a)&&!this.Zb&&!this.If){this.Zb=h;var d=this.ib.copy(),e=this.na.width/c,g=this.na.height/c;d.width=this.na.width/b;d.height=this.na.height/b;var i=this.pk.copy();if(isNaN(i.x))switch(this.du){case sc:i.x=0;break;case tc:i.x=e-1;break;case Zb:i.x=e/2;break;case Ub:case wc:i.x=e/2}if(isNaN(i.y))switch(this.du){case rc:i.y=0;break;
case uc:i.y=g-1;break;case Zb:i.y=g/2;break;case Ub:case wc:i.y=g/2}var j=this.position,a=new E(j.x+i.x/b-i.x/a,j.y+i.y/b-i.y/a);bi(this,a,this.pc,e,g,this.xk);this.position=a;this.Zb=o;e=this.ib;this.Hb=c;this.Fr(d,e)}ph(this);Rh(this)}});u.a(B,"autoScale",B.prototype.nx);u.defineProperty(B,{nx:"autoScale"},r("sk"),function(a){var b=this.sk;if(b!==a){u.Sa(a,B,B,"autoScale");this.sk=a;this.d("autoScale",b,a);a!==rh&&Sh(this)}});u.a(B,"initialAutoScale",B.prototype.wF);
u.defineProperty(B,{wF:"initialAutoScale"},r("Dk"),function(a){var b=this.Dk;if(b!==a){u.Sa(a,B,B,"initialAutoScale");this.Dk=a;this.d("initialAutoScale",b,a)}});u.a(B,"initialViewportSpot",B.prototype.QB);u.defineProperty(B,{QB:"initialViewportSpot"},r("Fs"),function(a){var b=this.Fs;if(b!==a){u.c(a,K,B,"initialViewportSpot");Nb(a)||u.g("initialViewportSpot must be a real Spot: "+a);this.Fs=a;this.d("initialViewportSpot",b,a)}});u.a(B,"initialDocumentSpot",B.prototype.PB);
u.defineProperty(B,{PB:"initialDocumentSpot"},r("Es"),function(a){var b=this.Es;if(b!==a){u.c(a,K,B,"initialDocumentSpot");Nb(a)||u.g("initialViewportSpot must be a real Spot: "+a);this.Es=a;this.d("initialDocumentSpot",b,a)}});u.a(B,"minScale",B.prototype.Pi);u.defineProperty(B,{Pi:"minScale"},r("Zs"),function(a){u.i(a,B,"minScale");var b=this.Zs;if(b!==a&&a>0){this.Zs=a;this.d("minScale",b,a);if(a>this.scale)this.scale=a}else u.ha(a,"> 0",B,"minScale")});u.a(B,"maxScale",B.prototype.Oi);
u.defineProperty(B,{Oi:"maxScale"},r("Us"),function(a){u.i(a,B,"maxScale");var b=this.Us;if(b!==a&&a>0){this.Us=a;this.d("maxScale",b,a);if(a<this.scale)this.scale=a}else u.ha(a,"> 0",B,"maxScale")});u.a(B,"zoomPoint",B.prototype.pk);u.defineProperty(B,{pk:"zoomPoint"},r("Rt"),function(a){if(!this.Rt.u(a)){u.c(a,E,B,"zoomPoint");this.Rt=a=a.B();fi(this)}});u.a(B,"contentAlignment",B.prototype.du);
u.defineProperty(B,{du:"contentAlignment"},r("xk"),function(a){var b=this.xk;if(!b.u(a)){u.c(a,K,B,"contentAlignment");this.xk=a=a.B();this.d("contentAlignment",b,a);Sh(this)}});u.a(B,"initialContentAlignment",B.prototype.xF);u.defineProperty(B,{xF:"initialContentAlignment"},r("Xo"),function(a){var b=this.Xo;if(!b.u(a)){u.c(a,K,B,"initialContentAlignment");this.Xo=a=a.B();this.d("initialContentAlignment",b,a)}});u.a(B,"padding",B.prototype.padding);
u.defineProperty(B,{padding:"padding"},r("Ed"),function(a){typeof a==="number"?a=new qb(a):u.c(a,qb,B,"padding");var b=this.Ed;if(!b.u(a)){this.Ed=a=a.B();fi(this);this.d("padding",b,a)}});u.m(B,{ek:"nodes"},function(){return this.ht.f});u.m(B,{links:"links"},function(){return this.Os.f});u.m(B,{Qi:"parts"},function(){return this.Ab.f});u.a(B,"layout",B.prototype.qb);
u.defineProperty(B,{qb:"layout"},r("Rc"),function(a){var b=this.Rc;if(b!==a){u.c(a,Dh,B,"layout");if(b!==m){b.b=m;b.group=m}this.Rc=a;a.b=this;a.group=m;this.es=h;this.d("layout",b,a)}});B.prototype.layoutDiagram=B.prototype.hJ=function(a){Ah(this);a&&this.Xx(h);hi(this)};B.prototype.invalidateAllLayouts=B.prototype.Xx=function(a){for(var b=this.Wk.f;b.next();)ui(this,b.value,a);if(this.qb!==m)a?this.qb.Ne=o:this.qb.r()};
function ui(a,b,c){if(b!==m){for(var d=b.Pk.f;d.next();)ui(a,d.value,c);if(b.qb!==m)c?b.qb.Ne=o:b.qb.r()}}function hi(a){for(var b=a.Wk.f;b.next();)vi(a,b.value);b=a.qb;if(b!==m&&!b.Ne){b.doLayout(a);b.Ne=h}a.es=o}function vi(a,b){if(b!==m){for(var c=b.Pk.f;c.next();)vi(a,c.value);c=b.qb;if(c!==m&&!c.Ne){b.Tz=!b.location.V();c.doLayout(b);b.r(wi);c.Ne=h}}}u.a(B,"isTreePathToChildren",B.prototype.lf);
u.defineProperty(B,{lf:"isTreePathToChildren"},r("Ls"),function(a){var b=this.Ls;if(b!==a){u.e(a,"boolean",B,"isTreePathToChildren");this.Ls=a;this.d("isTreePathToChildren",b,a);if(!this.va.rc)for(a=this.ek;a.next();)xi(a.value)}});u.a(B,"isCollapsingExpanding",B.prototype.kf);u.defineProperty(B,{kf:m},r("Ez"),ba("Ez"));function yi(a,b){var c=a.Tv.$(b);if(c!==m)return c;c=a.Tv.$(b.toLowerCase());if(c!==m)return c;u.g("Unknown DiagramEvent name: "+b);return m}
B.prototype.addDiagramListener=B.prototype.CA=function(a,b){u.e(a,"string",B,"addDiagramListener:name");u.e(b,"function",B,"addDiagramListener:listener");var c=yi(this,a);c!==m&&c.add(b)};B.prototype.removeDiagramListener=B.prototype.FC=function(a,b){u.e(a,"string",B,"removeDiagramListener:name");u.e(b,"function",B,"addDiagramListener:listener");var c=yi(this,a);c!==m&&c.remove(b)};
B.prototype.raiseDiagramEvent=B.prototype.ga=function(a,b,c){s&&u.e(a,"string",B,"raiseDiagramEvent:name");var d=yi(this,a),e=new re;e.b=this;var g=this.Sv.$(a),a=g!==m?g:this.Sv.$(a.toLowerCase());e.name=a;if(b!==f)e.Uu=b;if(c!==f)e.Hu=c;for(b=d.f;b.next();){c=b.value;c(e)}return e.cancel};function Wf(a,b){for(var c=a.ll(b,function(a){return a.W},function(a){return a instanceof W},h).f;c.next();){var d=c.value;d.Te===Hf&&If(d)}}
function zi(a,b){if(b!==m&&b.canAvoid()){for(var c=b.getAvoidableRectangle(),d=a.Ic.cl,e=a.Ic.bl,g=c.x+c.width,i=c.y+c.height,j=c.x;j<g;j=j+d){for(var k=c.y;k<i;k=k+e)Ai(a.Ic,j,k);Ai(a.Ic,j,i)}for(k=c.y;k<i;k=k+e)Ai(a.Ic,g,k);Ai(a.Ic,g,i)}}function Bi(a,b){if(a.Ic!==m&&!a.Ic.on&&(b===m||b.canAvoid()))a.Ic.on=h}
function Jh(a,b,c){if(yf!==m){c instanceof B||(c=m);var d=Ff;if(c!==d){d!==m&&d.Lb.ae!==m&&d.Lb.ae.qB();c!==m&&c.Lb.ae!==m&&c.Lb.ae.pB()}Ff=c;if(c===m)return h;d=c.Lb.ae;if(d!==m){a!==m&&(b=c.nh(a));c.hc.C=b;d.bF()}return h}return o}
function Lh(a,b,c,d){if(yf!==m){d===m&&(d=m);var e=Ff;if(d!==e){e!==m&&e.Lb.ae!==m&&e.Lb.ae.qB();d!==m&&d.Lb.ae!==m&&d.Lb.ae.pB()}Ff=d;if(d===m){yf.doCancel();return h}if(d!==a){a=c;b!==m&&(a=d.nh(b));d.hc.C=a;b=d.Lb.ae;b!==m&&b.cF();yf!==m&&yf.doCancel();return h}}return o}u.a(B,"autoScrollRegion",B.prototype.MA);
u.defineProperty(B,{MA:"autoScrollRegion"},r("fs"),function(a){typeof a==="number"?a=new qb(a):u.c(a,qb,B,"autoScrollRegion");var b=this.fs;if(!b.u(a)){this.fs=a=a.B();fi(this);this.d("autoScrollRegion",b,a)}});
function Vf(a){if(a.ig===m){a.ig={};var b;b=a.pa!==a.Lb.ae?a.GD:a.HD;a.ig.isEnabled=h;var c=setInterval(function(){var b=c;if(a.ig!==m&&a.ig.isEnabled){a.ig=m;clearInterval(b);b=Uf(a,a.Ev);if(!b.Zj(a.position)){a.position=b;a.F.C=a.rD(a.Ev);a.pa.doMouseMove();a.tj=h;ei(a,a.Yd());a.hi=h;a.update();Vf(a)}}},b);a.ig.id=c}}function Af(a){if(a.ig!==m){a.ig.isEnabled&&clearInterval(a.ig.id);a.ig=m}}
function Uf(a,b){var c=a.position,d=a.MA;if(d.top<=0&&d.left<=0&&d.right<=0&&d.bottom<=0)return c;var e=a.ib,g=new J(0,0,e.width,e.height),e=new E(0,0);if(b.x>=g.x&&b.x<g.x+d.left){var i=Math.max(a.Ir,1),i=i|0;e.x=e.x-i;if(b.x<g.x+d.left/2)e.x=e.x-i;if(b.x<g.x+d.left/4)e.x=e.x-4*i}else if(b.x<=g.x+g.width&&b.x>g.x+g.width-d.right){i=Math.max(a.Ir,1);i=i|0;e.x=e.x+i;if(b.x>g.x+g.width-d.right/2)e.x=e.x+i;if(b.x>g.x+g.width-d.right/4)e.x=e.x+4*i}if(b.y>=g.y&&b.y<g.y+d.top){i=Math.max(a.Jr,1);i=i|0;
e.y=e.y-i;if(b.y<g.y+d.top/2)e.y=e.y-i;if(b.y<g.y+d.top/4)e.y=e.y-4*i}else if(b.y<=g.y+g.height&&b.y>g.y+g.height-d.bottom){i=Math.max(a.Jr,1);i=i|0;e.y=e.y+i;if(b.y>g.y+g.height-d.bottom/2)e.y=e.y+i;if(b.y>g.y+g.height-d.bottom/4)e.y=e.y+4*i}if(!e.Zj(new E(0,0))){d=a.scale;c=new E(c.x+e.x/d,c.y+e.y/d)}return c}
B.prototype.makeImage=B.prototype.jJ=function(a){if(this.na===m)return m;typeof a!=="object"&&u.g("properties argument must be an Object.");this.Bo=o;Nh(this);var b=document.createElement("canvas");b.width=this.na.width;b.height=this.na.height;var c=b.getContext("2d");ph(this);this.ag(c);Nh(this);this.Bo=h;c=new Image;c.src=b.toDataURL(a.type,a.details);return c};
B.prototype.makeImageData=B.prototype.kJ=function(a){if(this.na===m)return"";typeof a!=="object"&&u.g("properties argument must be an Object.");this.Bo=o;Nh(this);var b=document.createElement("canvas");b.width=this.na.width;b.height=this.na.height;var c=b.getContext("2d");ph(this);this.ag(c);Nh(this);this.Bo=h;return b.toDataURL(a.type,a.details)};
B.prototype.renderJson=B.prototype.gg=function(a){this.lh=new ka;this.lg=new ra;if(a instanceof Object&&a._tabString!==f)this.lg.rA=a._tabString;Ci(this,this);this.lh.clear();a=this.lg.toString();this.lg=m;return a};
function Ci(a,b){if(b instanceof Object&&(!(b instanceof T)||b.gb()))if(!(b instanceof Q)||b.visible)if(!(b instanceof Xe)||b.visible){var c=a.lg;if(b instanceof E)c.add('"'+Ra(b)+'"');else if(b instanceof eb)c.add('"'+hb(b)+'"');else if(b instanceof J)c.add('"'+nb(b)+'"');else if(b instanceof qb)c.add('"'+ub(b)+'"');else if(b instanceof K)c.add('"'+Mb(b)+'"');else{var d;b instanceof md?d=a.lh.$(b):b instanceof Be&&(d=a.lh.$(b));d=typeof d==="number"?d:-1;if(d>-1)c.add('{ "class":"ref", "id":'+d+
" }");else{c.rj++;c.add('{ "class": "'+u.Ii(b)+'"');d=-1;if(b instanceof md){d=a.lh.count;a.lh.add(b,d)}else if(b instanceof Be){d=a.lh.count;a.lh.add(b,d)}d>-1&&c.add(', "id":'+d);b instanceof Q?b.gg():Di(a,b,Object.getPrototypeOf(b));c.add(" }");Aa(c)}}}}function Di(a,b,c){if(c&&c.constructor!==Object){Di(a,b,Object.getPrototypeOf(c));if(c.constructor){c=c.constructor.OG;if(c instanceof Array)for(var d=0;d<c.length;d++){var e=c[d];if(typeof e==="string"){var g=u.Wa(b,e);Ei(a,e,g)}}}}}
function Ei(a,b,c){if(c!==f){var d=a.lg;d.add(",");Da(d);d.add('"'+b+'": ');Fi(a,c)}}
function Fi(a,b){var c=a.lg;if(b===f)c.add("undefined");else if(b===m)c.add("null");else if(b===h)c.add("true");else if(b===o)c.add("false");else if(typeof b==="string")c.add(a.J.quote(b));else if(typeof b==="number"){b===Infinity&&c.add("9e9999");b===-Infinity&&c.add("-9e9999");isNaN(b)?c.add('{"class":"NaN"}'):c.add(b.toString())}else if(typeof b==="function")c.add("null");else if(u.isArray(b)){c=a.lg;c.rj++;for(var d=u.vb(b),e=o,g=0;g<d;g++){var i=u.lb(b,g);if(typeof i==="object"){e=h;break}}c.add("[");
e&&Da(c);for(g=0;g<d;g++){i=u.lb(b,g);if(i!==f){if(g>0){c.add(",");e&&Da(c)}Fi(a,i)}}e&&c.add(" ");c.add("]");Aa(c)}else if(b instanceof ja)c.add(a.J.quote(b.toString()));else if(b instanceof ka){c=a.lg;c.rj++;c.add("{");Da(c);d=b.f;for(e=h;d.next();){g=d.key;i=d.value;if(e)e=o;else{c.add(",");Da(c)}c.add('"'+g+'": ');Fi(a,i)}c.add(" }");Aa(c)}else if(b instanceof z||b instanceof la||b.f!==f){c=a.lg;c.rj++;c.add("[");Da(c);d=b.f;for(e=0;d.next();){g=d.value;if(g!==f){if(e>0){c.add(",");Da(c)}Fi(a,
g);e++}}c.add(" ]");Aa(c)}else b instanceof Object?Ci(a,b):c.add(b.toString())}B.inherit=function(a,b){u.ma(a,b)};function Gi(a){B.call(this,a);this.Wt=h;this.Sj=o;this.Ja=h;this.du=Xb;this.qb=new Hi}u.H("Palette",Gi);u.ma(Gi,B);
function Ii(a){B.call(this,a);this.Zb=h;this.qi=m;var a=new T,b=new X;b.stroke="magenta";b.Na=2;b.fill=m;b.name="BOXSHAPE";a.gk="BOXSHAPE";a.vr="BOXSHAPE";a.add(b);this.Pl=a;a=new Ji;a.sf(this);this.Lb.ie.dc(0,a);var c=this;this.vC=function(){Ki(c)};this.uC=function(){if(c.qi!==m){fi(c);ph(c)}};this.Ja=h;this.Hh=this.Gd=o;this.nx=ci;this.Lb.sl=sf;this.Zb=o}u.H("Overview",Ii);u.ma(Ii,B);
Ii.prototype.ag=function(){this.yb===m&&u.g("No div specified");this.na===m&&u.g("No canvas specified");if(this.hi){var a=this.qi;if(a!==m){var b=this.yk;b.zv="";b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,this.na.width,this.na.height);var c=this.De;c.reset();this.Hb!==1&&c.scale(this.scale);(this.position.x!==0||this.position.y!==0)&&c.translate(-this.jb.x,-this.jb.y);b.setTransform(c.m11,c.m12,c.m21,c.m22,c.Pa,c.Qa);for(var d=this.ib,e=a.zb.length,c=0;c<e;c++)for(var g=b,i=d,j=a.zb.j[c].Ab,k=j.length,
l=0;l<k;l++){var n=j.j[l];n.oa.de(i)&&n.ag(g,this)}a=this.zb.length;for(c=0;c<a;c++)this.zb.j[c].ag(b,this);this.hi=this.hm=o}}};u.a(Ii,"observed",Ii.prototype.XF);
u.defineProperty(Ii,{XF:"observed"},r("qi"),function(a){var b=this.qi;a!==m&&u.c(a,B,Ii,"observed");if(b!==a&&!(a instanceof Ii)){if(b!==m){this.remove(this.Yf);b.FC("ViewportBoundsChanged",this.vC);b.FC("DocumentBoundsChanged",this.uC);b.mt.remove(this)}this.qi=a;if(a!==m){a.CA("ViewportBoundsChanged",this.vC);a.CA("DocumentBoundsChanged",this.uC);a.mt.add(this);this.add(this.Yf);Ki(this)}fi(this);this.d("observed",b,a)}});u.a(Ii,"box",Ii.prototype.Yf);
u.defineProperty(Ii,{Yf:"box"},r("Pl"),function(a){var b=this.Pl;if(b!==a){this.Pl=a;this.d("box",b,a)}});function Ki(a){var b=a.Yf;if(b!==m){var c=a.qi;if(c!==m){a.hi=h;var c=c.ib,d=b.Ln;d.ia=new eb(c.width,c.height);a=2/a.scale;if(d instanceof X)d.Na=a;b.location=new E(c.x-a/2,c.y-a/2)}}}Ii.prototype.Yd=function(){var a=this.qi;return a===m?new J(0,0,0,0):a.pc};Ii.prototype.Fr=function(a){if(!this.Zb){Qh(this);ph(this);Rh(this);fi(this);Ki(this);this.ga("ViewportBoundsChanged",a)}};
function Ji(){qf.call(this);this.name="MoveBox"}u.ma(Ji,qf);Ji.prototype.doStart=Ji.prototype.Gx=function(){this.Q=this.b.Ac=h};Ji.prototype.doMouseMove=Ji.prototype.Qg=function(){if(this.Q){var a=this.b;if(!(a===m||a.qi===m)){var b=a.qi,c=b.ib,d=a.F.C;b.position=new E(d.x-c.width/2,d.y-c.height/2);pf(a)}}};Ji.prototype.doMouseUp=Ji.prototype.Ke=function(){this.Q&&this.doMouseMove();this.stopTool()};Ji.prototype.doStop=Ji.prototype.Gi=function(){this.Q=o;var a=this.b;a.Ac=o;Ki(a)};
function Be(a){u.Fb(this);this.Ha=o;if(a===f){this.I=Le;this.Sl="black"}else if(typeof a==="string"){this.I=Le;this.Sl=a}else{s&&u.Sa(a,Be,Be,"constructor:type");this.I=a;this.Sl="black"}a=this.I;if(a===Me){this.zm=Xb;this.am=ec}else if(a===Ne)this.am=this.zm=Zb;else this.am=this.zm=Tb;this.Et=0;this.ys=NaN;this.gz=this.hz=this.Df=this.ot=this.Bf=m}u.H("Brush",Be);var Le;Be.Solid=Le=u.l(Be,"Solid",0);var Me;Be.Linear=Me=u.l(Be,"Linear",1);var Ne;Be.Radial=Ne=u.l(Be,"Radial",2);var Li;
Be.Pattern=Li=u.l(Be,"Pattern",2);Be.prototype.copy=Be.prototype.copy=function(){var a=new Be;a.I=this.I;a.Sl=this.Sl;a.zm=this.zm;a.am=this.am;a.Et=this.Et;a.ys=this.ys;if(this.Bf!==m)a.Bf=this.Bf.copy();a.ot=this.ot;return a};Be.prototype.Ga=function(){this.freeze();Object.freeze(this);return this};Be.prototype.freeze=function(){this.Ha=h;this.Bf!==m&&this.Bf.freeze();return this};
Be.prototype.xa=function(){Object.isFrozen(this)&&u.g("cannot thaw constant: "+this);this.Ha=o;this.Bf!==m&&this.Bf.xa();return this};Be.prototype.toString=function(){var a="Brush(";if(this.type===Le)a=a+this.color;else{a=this.type===Me?a+"Linear ":this.type===Ne?a+"Radial ":this.type===Li?a+"Pattern ":a+"(unknown) ";a=a+(this.start+" "+this.end);if(this.Ym!==m)for(var b=this.Ym.f;b.next();)a=a+(" "+b.key+":"+b.value)}return a+")"};
Be.prototype.addColorStop=Be.prototype.addColorStop=function(a,b){u.v(this);(a===m||a>1||a<0)&&u.ha(a,"0 <= loc <= 1",Be,"addColorStop:loc");u.e(b,"string",Be,"addColorStop:color");if(this.Bf===m)this.Bf=new ka("number","string");this.Bf.add(a,b);if(this.I===Le)this.type=Me;this.Df=m};u.a(Be,"type",Be.prototype.type);
u.defineProperty(Be,{type:"type"},r("I"),function(a){u.v(this,a);u.Sa(a,Be,Be,"type");this.I=a;if(Pb(this.start))if(a===Me)this.start=Xb;else if(a===Ne)this.start=Zb;if(Pb(this.end))if(a===Me)this.end=ec;else if(a===Ne)this.end=Zb;this.Df=m});u.a(Be,"color",Be.prototype.color);u.defineProperty(Be,{color:"color"},r("Sl"),function(a){u.v(this,a);u.e(a,"string",Be,"color");this.Sl=a;this.Df=m});u.a(Be,"start",Be.prototype.start);
u.defineProperty(Be,{start:"start"},r("zm"),function(a){u.v(this,a);a instanceof K||u.sc(a,"Spot",Be,"start");this.zm=a.B();this.Df=m});u.a(Be,"end",Be.prototype.end);u.defineProperty(Be,{end:"end"},r("am"),function(a){u.v(this,a);a instanceof K||u.sc(a,"Spot",Be,"end");this.am=a.B();this.Df=m});u.a(Be,"startRadius",Be.prototype.Pn);u.defineProperty(Be,{Pn:"startRadius"},r("Et"),function(a){u.v(this,a);u.i(a,Be,"startRadius");a<0&&u.ha(a,">= zero",Be,"startRadius");this.Et=a;this.Df=m});
u.a(Be,"endRadius",Be.prototype.bn);u.defineProperty(Be,{bn:"endRadius"},r("ys"),function(a){u.v(this,a);u.i(a,Be,"endRadius");a<0&&u.ha(a,">= zero",Be,"endRadius");this.ys=a;this.Df=m});u.a(Be,"colorStops",Be.prototype.Ym);u.defineProperty(Be,{Ym:"colorStops"},r("Bf"),function(a){u.v(this,a);s&&u.c(a,ka,Be,"colorStops");this.Bf=a;this.Df=m});u.a(Be,"pattern",Be.prototype.pattern);u.defineProperty(Be,{pattern:"pattern"},r("ot"),function(a){u.v(this,a);this.ot=a;this.Df=m});
Be.randomColor=function(a,b){a===f&&(a=128);if(s){u.i(a,Be,"randomColor:min");(a<0||a>255)&&u.ha(a,"0 <= min <= 255",Be,"randomColor:min")}b===f&&(b=Math.max(a,255));if(s){u.i(b,Be,"randomColor:max");(b<a||b>255)&&u.ha(b,"min <= max <= 255",Be,"randomColor:max")}var c=Math.abs(b-a);return"#"+Math.floor(a+Math.random()*c).toString(16)+Math.floor(a+Math.random()*c).toString(16)+Math.floor(a+Math.random()*c).toString(16)};
function Q(){u.Fb(this);this.Gj=m;this.pb="";this.pd=this.Kg=h;this.eh=this.fh=m;this.jb=(new E(NaN,NaN)).freeze();this.Qd=(new eb(NaN,NaN)).freeze();this.Gc=Lc;this.Nf=Ec;this.De=new Ya;this.Ml=new Ya;this.om=new Ya;this.Hb=1;this.Mb=0;this.Cg=Jg;this.xp=(new qb(0)).freeze();this.xc=(new J(NaN,NaN,NaN,NaN)).freeze();this.Vb=(new J(NaN,NaN,NaN,NaN)).freeze();this.Hc=(new J(0,0,NaN,NaN)).freeze();this.Fc=this.Yb=this.Ek=this.gm=h;this.Rp=m;this.qg=Tb;this.ng=10;this.mg=Mi;this.pg=0;this.Ko=m;this.Mo=
this.Lo=o;this.No=Infinity;this.Ig=Tb;this.Fg=10;this.Eg=Mi;this.Hg=0;this.Bq=m;this.Dq=this.Cq=o;this.Eq=Infinity;this.ed=m;this.ja=Ub;this.ep=o;this.$n=Ub;this.fq=0;this.Lj=1;this.K=0;this.jj=1;this.iq=-Infinity;this.hq=0;this.jq=Dc;this.kq=Ni;this.oo="";this.jh=this.Fh=this.vh=this.Fp=this.Ep=this.wh=this.xh=this.yh=this.Hp=this.Gp=this.ih=this.kh=this.hh=m;this.Zo=o;this.Nb=this.Vn=this.Yn=this.Xn=this.Wn=m;this.Ol=o;this.tA=new J(NaN,NaN,NaN,NaN);this.ho=o;this.io=m;this.Nl=o;this.ri=m}
u.H("GraphObject",Q);
Q.prototype.eb=function(a){a.pb=this.pb;a.Kg=this.Kg;a.pd=this.pd;a.fh=this.fh;a.eh=this.eh;a.jb.Oa(this.jb);a.Qd.Oa(this.Qd);a.Gc=this.Gc.B();a.Nf=this.Nf.B();a.Hb=this.Hb;a.Mb=this.Mb;a.Cg=this.Cg;a.xp.Oa(this.xp);a.xc.Oa(this.xc);a.Vb.Oa(this.Vb);a.Hc.Oa(this.Hc);a.Rp=this.Rp;a.qg=this.qg.B();a.ng=this.ng;a.mg=this.mg;a.pg=this.pg;a.Ko=this.Ko;a.Lo=this.Lo;a.Mo=this.Mo;a.No=this.No;a.Ig=this.Ig.B();a.Fg=this.Fg;a.Eg=this.Eg;a.Hg=this.Hg;a.Bq=this.Bq;a.Cq=this.Cq;a.Dq=this.Dq;a.Eq=this.Eq;a.ja=
this.ja.B();a.ep=this.ep;a.$n=this.$n.B();a.fq=this.fq;a.Lj=this.Lj;a.K=this.K;a.jj=this.jj;a.iq=this.iq;a.hq=this.hq;a.jq=this.jq.B();a.kq=this.kq;a.oo=this.oo;a.hh=this.hh;a.kh=this.kh;a.ih=this.ih;a.Gp=this.Gp;a.Hp=this.Hp;a.yh=this.yh;a.xh=this.xh;a.wh=this.wh;a.Ep=this.Ep;a.Fp=this.Fp;a.vh=this.vh;a.Fh=this.Fh;a.jh=this.jh;a.Zo=this.Zo;a.Wn=this.Wn;a.Xn=this.Xn;a.Yn=this.Yn;a.Vn=this.Vn;a.Nb=this.Nb;a.Ol=this.Ol;a.Nl=this.Nl};Q.prototype.Pg=function(a){a.ed=m;a.ri=m;a.M()};
Q.prototype.copy=Q.prototype.copy=function(){var a=new this.constructor;this.eb(a);return a};Q.prototype.toString=function(){return u.Ii(Object.getPrototypeOf(this))+"#"+u.cc(this)};var Oi;Q.None=Oi=u.l(Q,"None",0);var Jg;Q.Default=Jg=u.l(Q,"Default",0);var Ad;Q.Fill=Ad=u.l(Q,"Fill",3);var Kg;Q.Uniform=Kg=u.l(Q,"Uniform",1);var Lg;Q.UniformToFill=Lg=u.l(Q,"UniformToFill",2);var Pi;Q.Vertical=Pi=u.l(Q,"Vertical",4);var Qi;Q.Horizontal=Qi=u.l(Q,"Horizontal",5);
Q.prototype.ke=function(a,b,c,d,e,g,i){var j=this.W;if(j!==m){j.vl(a,b,c,d,e,g,i);if(this.Ol&&c===this&&a===ue){a=this.gr();if(a!==m)for(c=this.Nb.f;c.next();){d=c.value;e=a.data;g=d.On;g!==m&&(e=a.Le(g));if(e!==m){d.vD(this,e,b);g=d.On;if(g!==m){e=a;g!==""&&(e=a.Le(g));if(e!==m){g=d.Cl;if(g!==m){i=a;g!==""&&(i=a.Le(g));i!==m&&d.wD(i,e,b)}}}}}}}};Q.prototype.d=function(a,b,c){this.ke(ue,a,this,b,c)};
function Ri(a,b,c,d,e){var g=a.xc,i=a.om;i.reset();Si(a,i,b,c,d,e);a.om=i;g.x=b;g.y=c;g.width=d;g.height=e;i.Zx()||i.qD(g)}Q.prototype.xB=function(a,b){if(this.pd===o)return o;var c=this.la,d=a.Ph(b);return bb(a.x,a.y,0,0,0,c.height)<d||bb(a.x,a.y,0,c.height,c.width,c.height)<d||bb(a.x,a.y,c.width,c.height,c.width,0)<d||bb(a.x,a.y,c.width,0,0,0)<d?h:o};
function Ti(a,b,c,d){if(a instanceof v)for(var e=a.wa.length;e--;){var g=a.wa.j[e];if(g.visible){var i=g.oa,j=a.oa;if(!(i.x>j.width||i.y>j.height||i.x+i.width<0||i.y+i.height<0)){Ti(g,b,c,d);i=g;b!==m&&(i=b(i));i&&(c===m||c(i))&&d.add(g)}}}}
Q.prototype.containsPoint=Q.prototype.da=function(a){s&&u.c(a,E,Q,"containsPoint:p");var b=Ab(this.transform,a),c=this.oa;if(u.Ow){var d=this.la,e=this.ml()*(this.b!==m?this.b.scale:1),g=1/e;if(d.width*e<10&&d.height*e<10)return tb(c.x-5*g,c.y-5*g,c.width+10*g,c.height+10*g,b.x,b.y)}return(this.Fd!==f||this instanceof X?tb(c.x-5,c.y-5,c.width+10,c.height+10,b.x,b.y):c.da(b))?this.io&&!this.io.da(b)?o:this.eh!==m&&c.da(b)||this.fh!==m&&this.Hc.da(a)?h:this.Bi(a):o};
Q.prototype.Bi=function(a){var b=this.la;return tb(0,0,b.width,b.height,a.x,a.y)};Q.prototype.containsRect=Q.prototype.el=function(a){s&&u.c(a,J,Q,"containsRect:r");if(this.Ka===0)return this.oa.el(a);var b=this.la,b=new J(0,0,b.width,b.height),c=this.transform;return b.da(c.Vh(new E(a.x,a.y)))&&b.da(c.Vh(new E(a.x,a.bottom)))&&b.da(c.Vh(new E(a.right,a.bottom)))&&b.da(c.Vh(new E(a.right,a.y)))};
Q.prototype.containedInRect=Q.prototype.cu=function(a,b){s&&u.c(a,J,Q,"containedInRect:r");if(b===f)return a.el(this.oa);var c=this.la;return!a.da(b.ub(new E(0,0)))||!a.da(b.ub(new E(0,c.height)))||!a.da(b.ub(new E(c.width,c.height)))||!a.da(b.ub(new E(c.width,0)))?o:h};
Q.prototype.intersectsRect=Q.prototype.de=function(a,b){s&&u.c(a,J,Q,"intersectsRect:r");if(b===f){b=this.transform;if(this.Ka===0)return a.de(this.oa)}var c=this.la,d=b,e=new E(0,0),g=new E(0,c.height),i=new E(c.width,c.height),j=new E(c.width,0);if(a.da(d.ub(e))||a.da(d.ub(g))||a.da(d.ub(i))||a.da(d.ub(j)))return h;c=new J(0,0,c.width,c.height);return c.da(d.Vh(new E(a.x,a.y)))||c.da(d.Vh(new E(a.x,a.bottom)))||c.da(d.Vh(new E(a.right,a.bottom)))||c.da(d.Vh(new E(a.right,a.y)))||dd(a,e,g)||dd(a,
g,i)||dd(a,i,j)||dd(a,j,e)?h:o};Q.prototype.getDocumentPoint=Q.prototype.sb=function(a){Pb(a)&&u.g("Spot must be real");var b=this.la,a=new E(a.x*b.width+a.offsetX,a.y*b.height+a.offsetY);this.Xd.ub(a);return a};Q.prototype.getDocumentAngle=Q.prototype.kn=function(){var a=this.Xd;return Math.atan2(a.m12,a.m11)*(180/Math.PI)};Q.prototype.getDocumentScale=Q.prototype.ml=function(){var a=this.Hb;return this.U!==m?a*this.U.ml():a};Q.prototype.getLocalPoint=Q.prototype.DB=function(a){return this.Xd.Vh(a.copy())};
Q.prototype.getNearestIntersectionPoint=Q.prototype.vu=function(a,b,c){var d=this.transform.copy();d.xu();if(this.Lg!==m)return cd(this.oa,a,b,c);if(!(this instanceof v)||this instanceof v&&this.background!==m){var e=Ab(d,a),b=Ab(d,b),a=new E,b=cd(new J(0,0,this.la.width,this.la.height),e,b,a),a=Ab(this.transform,a);c.x=a.x;c.y=a.y;return b}if(this instanceof v&&(this.Lg===m||this.Lg===f)){e=this.wa.j;a=Ab(d,a);d=Ab(d,b);c.set(d);for(var g=(d.x-a.x)*(d.x-a.x)+(d.y-a.y)*(d.y-a.y),b=o,i=e.length,j=
new E,k=0;k<i;k++){var l=e[k];if(l.visible&&l.vu(a,d,j)){b=h;l=(a.x-j.x)*(a.x-j.x)+(a.y-j.y)*(a.y-j.y);if(l<g){g=l;c.set(j)}}}c.transform(this.transform);return b}u.g("Unknown GraphObject case");return o};
function gh(a,b,c,d,e){if(a.Yb!==o){var g=a.margin,i=g.top+g.bottom,b=Math.max(b-(g.right+g.left),0),c=Math.max(c-i,0),g=a.ia,i=0;if(a.Na)i=a.Na;var b=isFinite(g.width)?g.width+i:b,c=isFinite(g.height)?g.height+i:c,g=d,i=e,j=a instanceof v;switch(Ui(a)){case Oi:i=g=0;if(j)c=b=Infinity;break;case Ad:isFinite(b)&&b>d&&(g=b);isFinite(c)&&c>e&&(i=c);break;case Qi:isFinite(b)&&b>d&&(g=b);i=0;j&&(c=Infinity);break;case Pi:isFinite(c)&&c>e&&(i=c);g=0;j&&(b=Infinity)}var j=a.xd,k=a.Od;if(g>j.width&&k.width<
j.width)g=j.width;if(i>j.height&&k.height<j.height)i=j.height;d=Math.max(g/a.scale,k.width);e=Math.max(i/a.scale,k.height);j.width<d&&(d=Math.min(k.width,d));j.height<e&&(e=Math.min(k.height,e));b=Math.min(j.width,b);c=Math.min(j.height,c);b=Math.max(d,b);c=Math.max(e,c);g=a.Ka;if(g===90||g===270){g=b;b=c;c=g;g=d;d=e;e=g}a.xc.xa();a.wr(b,c,d,e);a.xc.freeze();a.xc.V()||u.g("Non-real measuredBounds has been set");a.Yb=o}}ea=Q.prototype;
ea.mc=function(a,b,c,d,e){Vi(this);var g=this.tA;g.set(this.Vb);this.Vb.xa();if(this.Fc===o){var i=this.Vb;i.x=a;i.y=b;i.width=c;i.height=d}else this.zi(a,b,c,d);this.Vb.freeze();this.io=e===f?m:e;if(e!==f)this.ho=h;else if(this.U){c=this.U.Hc;d=this.fa;if(this.Lg!==m)d=this.Vb;e=b+d.height;i=a+d.width;this.ho=!(0<=a&&i<=c.width&&0<=b&&e<=c.height);if(this instanceof na){if(this.Ts>d.height)this.ho=h;if(this.nm.Yh>d.width)this.ho=h}}this.Vb.V()||u.g("Non-real actualBounds has been set");Wi(this,g,
this.Vb)};ea.zi=aa();function Xi(a,b,c,d,e){var g=a.oa;g.x=b;g.y=c;g.width=d;g.height=e;if(!a.ia.V()){var g=a.xc,c=a.margin,b=c.right+c.left,i=c.top+c.bottom,c=g.width+b,g=g.height+i,d=d+b,e=e+i,b=Ui(a);c===d&&g===e&&(b=Oi);switch(b){case Oi:if(c>d||g>e){a.Yb=h;gh(a,c>d?d:c,g>e?e:g)}break;case Ad:a.Yb=h;gh(a,d,e,0,0);break;case Qi:a.Yb=h;gh(a,d,g,0,0);break;case Pi:a.Yb=h;gh(a,c,e,0,0)}}}
function Wi(a,b,c){a.Fc=o;var d=a.W;if(d!==m){var e=d.b;if(e!==m){Yi(d);if(a instanceof T){d=o;if(e.tj===o){var g=e.pc,i=e.padding,e=g.x+i.left,j=g.y+i.top,k=g.width-i.right*2,g=g.height-i.bottom*2;b.V()&&(b.x>e&&b.y>j&&b.right<k&&b.bottom<g&&c.x>e&&c.y>j&&c.right<k&&c.bottom<g)&&(d=h)}(a.it===h||!b.u(c))&&pi(a,d)}else{Zi(a,d);$i(a);b=a.W;if(b!==m&&(b.Oj===a||b.Uk===a||b.Vk===a))b.it=h}}}}function Zi(a,b){if(a.je!==m)b.it=h;if(a instanceof v)for(var c=a.wa,d=c.length,e=0;e<d;e++)Zi(c.j[e],b)}
ea.ag=function(a,b){if(this.Kg){var c=o;if(this instanceof T){c=h;if(!this.gb())return;if(this.Ze){var d=this.ym;a.shadowOffsetX=d.x*b.scale;a.shadowOffsetY=d.y*b.scale;a.shadowColor=this.xm;a.shadowBlur=this.wm}}var e=this.Vb;if(!(e.width===0||e.height===0||isNaN(e.x)||isNaN(e.y))){var d=this.transform,g=this.U,i=this.Ml;i.reset();g!==m&&i.multiply(g.Xd);i.multiply(this.De);if(i=this.ho){s&&s.eF&&s.trace("clip"+this.toString());var j=g.la;if(this.io)var k=this.io,l=Math.max(k.x,Math.max(e.x,j.x)),
n=Math.max(k.y,Math.max(e.y,j.y)),q=Math.abs(l-Math.min(k.right,Math.min(e.right,j.right))),k=Math.abs(n-Math.min(k.bottom,Math.min(e.bottom,j.bottom)));else{l=Math.max(e.x,j.x);n=Math.max(e.y,j.y);q=Math.min(e.right,j.right)-l;k=Math.min(e.bottom,j.bottom)-n}if(l>e.width+e.x||e.x>j.width+j.x||n>e.height+e.y||e.y>j.height+j.y)return;a.save();a.beginPath();a.rect(l,n,q,k);a.clip()}if(this.eh!==m){aj(this,a,this.eh,h,h);a.fillRect(e.x,e.y,e.width,e.height)}d.Zx()||a.transform(d.m11,d.m12,d.m21,d.m22,
d.Pa,d.Qa);if(this.fh!==m){n=this.la;j=e=0;l=n.width;n=n.height;q=0;if(this instanceof X){n=this.ta.fb;e=n.x;j=n.y;l=n.width;n=n.height;q=this.Eh}aj(this,a,this.fh,h);a.fillRect(e-q/2,j-q/2,l+q,n+q)}if(this.fh!==m||this.eh!==m||g!==m&&g.Nl||g!==m&&g.type===Hh&&g.yq!==this){this.Nl=h;var p=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}else this.Nl=o;this.ar(a,b);if(this.Nl===h){a.shadowOffsetX=p[0];a.shadowOffsetY=p[1];a.shadowBlur=p[2]}if(c&&this.Ze){a.shadowOffsetX=
0;a.shadowOffsetY=0;a.shadowBlur=0}if(i){a.restore();Nh(b,a)}else if(!d.Zx()){c=1/(d.m11*d.m22-d.m12*d.m21);a.transform(d.m22*c,-d.m12*c,-d.m21*c,d.m11*c,c*(d.m21*d.Qa-d.m22*d.Pa),c*(d.m12*d.Pa-d.m11*d.Qa))}}}};ea.ar=aa();
ea.gg=function(){var a=this.b;if(a!==m){Ei(a,"naturalBounds",this.la);Ei(a,"actualBounds",this.oa);this.Ka!==0&&Ei(a,"angle",this.Ka);this.scale!==1&&Ei(a,"scale",this.scale);var b=this.Xd;Ei(a,"allTransforms",[b.m11,b.m12,b.m21,b.m22,b.Pa,b.Qa]);this.background!==m&&Ei(a,"background",this.background);this.Lg!==m&&Ei(a,"areaBackground",this.Lg)}};
function aj(a,b,c,d,e){if(c!==m)if(typeof c==="string")if(d){if(b.Il!==c){b.fillStyle=c;b.Il=c}}else{if(b.Jl!==c){b.strokeStyle=c;b.Jl=c}}else if(c.type===Le){c=c.color;if(d){if(b.Il!==c){b.fillStyle=c;b.Il=c}}else if(b.Jl!==c){b.strokeStyle=c;b.Jl=c}}else{var g,i=a.la,j=i.width,i=i.height;if(c.Df&&c.type===Li||c.hz==j&&c.gz==i)g=c.Df;else{var k,l,n,q=n=0;if(e){a=a.oa;j=a.width;i=a.height;n=a.x;q=a.y}if(c.start instanceof E){a=c.start.x;e=c.start.y}else if(c.start instanceof K){a=c.start.x*j;e=c.start.y*
i}else{a=Zb.x*j;e=Zb.y*i}if(c.end instanceof E){k=c.end.x;l=c.end.y}else if(c.end instanceof K){k=c.end.x*j;l=c.end.y*i}else if(c.type===Me){k=ec.x*j;l=ec.y*i}else{k=Zb.x*j;l=Zb.y*i}a=a+n;k=k+n;e=e+q;l=l+q;if(c.type===Me)g=b.createLinearGradient(a,e,k,l);else if(c.type===Ne){n=isNaN(c.bn)?Math.max(j,i)/2:c.bn;if(isNaN(c.Pn)){g=0;n=Math.max(j,i)/2}else g=c.Pn;g=b.createRadialGradient(a,e,g,k,l,n)}else c.type===Li?g=b.createPattern(c.pattern,"repeat"):u.sc(c.type,"Brush type");if(c.type!==Li)if(n=c.Ym)for(n=
n.f;n.next();)g.addColorStop(n.key,n.value);c.Df=g;c.hz=j;c.gz=i}if(d){if(b.Il!==g){b.fillStyle=g;b.Il=g}}else if(b.Jl!==g){b.strokeStyle=g;b.Jl=g}}}Q.prototype.isContainedBy=Q.prototype.Wh=function(a){if(a instanceof v)a:{if(!(this===a||a===m))for(var b=this.U;b!==m;){if(b===a){a=h;break a}b=b.U}a=o}else a=o;return a};Q.prototype.isVisibleObject=Q.prototype.ck=function(){if(!this.visible)return o;var a=this.U;return a!==m?a.ck():h};
function bj(a){if(a.gm===h){var b=a.De;b.reset();if(!a.Vb.V()||!a.xc.V()){a.gm=o;return}b.translate(a.Vb.x,a.Vb.y);b.translate(-a.fa.x,-a.fa.y);var c=a.la;Si(a,b,c.x,c.y,c.width,c.height);a.gm=o;a.Ek=h}if(a.Ek===h)if(a.U===m){a.Ml.set(a.De);a.Ek=o}else if(a.U.Xd!==m){b=a.Ml;b.reset();b.multiply(a.U.Ml);b.multiply(a.De);a.Ek=o}}
function Si(a,b,c,d,e,g){a.scale!==1&&b.scale(a.scale);if(a.Ka!==0){var i=Zb;if(a.mf&&Nb(a.mf))i=a.mf;var j=new E;if(a instanceof T&&a.tb!==a){c=a.tb;d=c.la;j.zl(d.x,d.y,d.width,d.height,i);c.om.ub(j);j.offset(-c.fa.x,-c.fa.y);for(i=c.U;i!==m&&i!==a;){i.om.ub(j);j.offset(-i.fa.x,-i.fa.y);i=i.U}}else j.zl(c,d,e,g,i);b.rotate(a.Ka,j.x,j.y)}}
Q.prototype.M=function(){if(this.Yb!==h){this.Fc=this.Yb=h;if(this.U!==m){this.U.Yb=o;this.U.M()}else{var a=this.b;if(a!==m){a.sg.add(this);this instanceof U&&!a.va.rc&&this.jf();pf(a)}}if(this instanceof v)for(var a=this.I===Hh,b=this.wa.j,c=b.length,d=0;d<c;d++){var e=b[d];(a||!e.ia.V()||Ui(e)!==Oi)&&e.M()}$i(this)}};function cj(a){if(a.Yb===o){a.Yb=h;a.Fc=h;if(a instanceof v)for(var a=a.wa.j,b=a.length,c=0;c<b;c++)cj(a[c])}}
function dj(a){if(a.Fc===o){if(a.U!==m)dj(a.U);else{var b=a.b;if(b!==m){b.sg.add(a);a instanceof U&&a.jf();pf(b)}}a.Fc=h}}function Vi(a){if(a.gm===o){a.gm=h;a.Ek=h;if(a instanceof v)for(a=a.elements;a.next();)ej(a.value)}}function ej(a){a.Ek=h;if(a instanceof v)for(a=a.elements;a.next();)ej(a.value)}function $i(a){if(a.U!==m)$i(a.U);else{var b=a.b;b!==m&&a.Vb.V()&&ph(b,a.Vb)}}
function Ui(a){var b=a.$g,c=a.U;if(c&&c.I===fj)return gj(a,c.sd(a.kd),c.sd(a.hd));if(c&&c.I===Hh&&c.yq===a)return Ad;if(b===Jg){if(c){if(c.yq===a)return Ad;a=c.Dx;return a===Jg?Oi:a}return Oi}return b}function gj(a,b,c){var d=a.$g;if(d!==Jg)return d;var e=d=f;switch(b.$g){case Pi:e=h;break;case Ad:e=h}switch(c.$g){case Qi:d=h;break;case Ad:d=h}a=a.U.Dx;d=d===f&&(a===Qi||a===Ad)?h:o;e=e===f&&(a===Pi||a===Ad)?h:o;return d===h&&e===h?Ad:d===h?Qi:e===h?Pi:Oi}u.a(Q,"segmentOrientation",Q.prototype.Kr);
u.defineProperty(Q,{Kr:"segmentOrientation"},r("kq"),function(a){var b=this.kq;if(b!==a){s&&u.Sa(a,W,Q,"segmentOrientation");this.kq=a;this.M();this.d("segmentOrientation",b,a)}});u.a(Q,"segmentIndex",Q.prototype.Zg);u.defineProperty(Q,{Zg:"segmentIndex"},r("iq"),function(a){s&&u.e(a,"number",Q,"segmentIndex");var a=Math.round(a),b=this.iq;if(b!==a){this.iq=a;this.M();this.d("segmentIndex",b,a)}});u.a(Q,"segmentFraction",Q.prototype.Ay);
u.defineProperty(Q,{Ay:"segmentFraction"},r("hq"),function(a){s&&u.e(a,"number",Q,"segmentFraction");isNaN(a)?a=0:a<0?a=0:a>1&&(a=1);var b=this.hq;if(b!==a){this.hq=a;this.M();this.d("segmentFraction",b,a)}});u.a(Q,"segmentOffset",Q.prototype.By);u.defineProperty(Q,{By:"segmentOffset"},r("jq"),function(a){var b=this.jq;if(!b.u(a)){s&&u.c(a,E,Q,"segmentOffset");this.jq=a=a.B();this.M();this.d("segmentOffset",b,a)}});u.a(Q,"stretch",Q.prototype.$g);
u.defineProperty(Q,{$g:"stretch"},r("Cg"),function(a){var b=this.Cg;if(b!==a){s&&u.Sa(a,Q,Q,"stretch");this.Cg=a;this.M();this.d("stretch",b,a)}});u.a(Q,"name",Q.prototype.name);u.defineProperty(Q,{name:"name"},r("pb"),function(a){var b=this.pb;if(b!==a){s&&u.e(a,"string",Q,"name");this.pb=a;this.d("name",b,a)}});u.a(Q,"visible",Q.prototype.visible);
u.defineProperty(Q,{visible:"visible"},r("Kg"),function(a){var b=this.Kg;if(b!==a){s&&u.e(a,"boolean",Q,"visible");this.Kg=a;this.d("visible",b,a);b=this.U;if(b!==m)b.M();else if(this instanceof T){this.M();Yi(this);if(a){this.r(hj);this.$h()}else{this.r(ij);this.Ng()}}$i(this);jj(this)}});u.a(Q,"areaBackground",Q.prototype.Lg);
u.defineProperty(Q,{Lg:"areaBackground"},r("eh"),function(a){var b=this.eh;if(b!==a&&(a===m||typeof a==="string"||a instanceof Be)){a instanceof Be&&a.freeze();this.eh=a;$i(this);this.d("areaBackground",b,a)}});u.a(Q,"background",Q.prototype.background);u.defineProperty(Q,{background:"background"},r("fh"),function(a){var b=this.fh;if(b!==a&&(a===m||typeof a==="string"||a instanceof Be)){a instanceof Be&&a.freeze();this.fh=a;$i(this);this.d("background",b,a)}});
u.m(Q,{W:"part"},function(){if(this instanceof T)return this;if(this.ri)return this.ri;var a;for(a=this.U;a;){if(a instanceof T)return this.ri=a;a=a.U}return m});Q.prototype.yl=ba("Gj");u.m(Q,{U:"panel"},r("Gj"));u.m(Q,{ra:"layer"},function(){var a=this.W;return a!==m?a.ra:m});u.m(Q,{b:"diagram"},function(){var a=this.W;return a!==m?a.b:m},{configurable:h});u.a(Q,"position",Q.prototype.position);
u.defineProperty(Q,{position:"position"},r("jb"),function(a){var b=this.jb;if(!b.u(a)){s&&u.c(a,E,Q,"position");if(this instanceof T){if(!a.V())return;var c=this.ki,d=this.Ps,e=c.copy();c.Vd(a.x+d.x,a.y+d.y);c.u(e)||this.d("location",e,c);if(this.Fc===o){this.jb=a=a.B();kj(this);Vi(this);this.d("position",b,a);return}}this.jb=a=a.B();dj(this);Vi(this);this.d("position",b,a)}});u.m(Q,{oa:"actualBounds"},r("Vb"));u.a(Q,"scale",Q.prototype.scale);
u.defineProperty(Q,{scale:"scale"},r("Hb"),function(a){var b=this.Hb;if(b!==a){s&&u.i(a,Q,"scale");a<=0&&u.g("GraphObject.scale must be greater than zero");this.Hb=a;Vi(this);this.M();this.d("scale",b,a)}});u.a(Q,"angle",Q.prototype.Ka);u.defineProperty(Q,{Ka:"angle"},r("Mb"),function(a){var b=this.Mb;if(b!==a){s&&u.i(a,Q,"angle");this.Mb=a;this.M();Vi(this);this.d("angle",b,a)}});u.a(Q,"desiredSize",Q.prototype.ia);
u.defineProperty(Q,{ia:"desiredSize"},r("Qd"),function(a){var b=this.Qd;if(!b.u(a)){s&&u.c(a,eb,Q,"desiredSize");this.Qd=a=a.B();this.M();this instanceof X&&this.Ye();this.d("desiredSize",b,a)}});u.a(Q,"width",Q.prototype.width);u.defineProperty(Q,{width:"width"},function(){return this.Qd.width},function(a){if(this.Qd.width!==a){s&&u.e(a,"number",Q,"width");var b=this.Qd;this.Qd=a=(new eb(a,this.Qd.height)).freeze();this.M();this instanceof X&&this.Ye();this.d("desiredSize",b,a)}});
u.a(Q,"height",Q.prototype.height);u.defineProperty(Q,{height:"height"},function(){return this.Qd.height},function(a){if(this.Qd.height!==a){s&&u.e(a,"number",Q,"height");var b=this.Qd;this.Qd=a=(new eb(this.Qd.width,a)).freeze();this.M();this instanceof X&&this.Ye();this.d("desiredSize",b,a)}});u.a(Q,"minSize",Q.prototype.Od);
u.defineProperty(Q,{Od:"minSize"},r("Gc"),function(a){var b=this.Gc;if(!b.u(a)){s&&u.c(a,eb,Q,"minSize");a=a.copy();if(isNaN(a.width))a.width=0;if(isNaN(a.height))a.height=0;a.freeze();this.Gc=a;this.M();this.d("minSize",b,a)}});u.a(Q,"maxSize",Q.prototype.xd);u.defineProperty(Q,{xd:"maxSize"},r("Nf"),function(a){var b=this.Nf;if(!b.u(a)){s&&u.c(a,eb,Q,"maxSize");a=a.copy();if(isNaN(a.width))a.width=Infinity;if(isNaN(a.height))a.height=Infinity;a.freeze();this.Nf=a;this.M();this.d("maxSize",b,a)}});
u.m(Q,{fa:"measuredBounds"},r("xc"));u.m(Q,{la:"naturalBounds"},r("Hc"),{configurable:h});u.a(Q,"margin",Q.prototype.margin);u.defineProperty(Q,{margin:"margin"},r("xp"),function(a){typeof a==="number"?a=new qb(a):s&&u.c(a,qb,Q,"margin");var b=this.xp;if(!b.u(a)){this.xp=a=a.B();this.M();this.d("margin",b,a)}});u.m(Q,{transform:m},function(){this.gm===h&&bj(this);return this.De});u.m(Q,{Xd:m},function(){this.Ek===h&&bj(this);return this.Ml});u.a(Q,"alignment",Q.prototype.kb);
u.defineProperty(Q,{kb:"alignment"},r("ja"),function(a){var b=this.ja;if(!b.u(a)){s?u.c(a,K,Q,"alignment"):Pb(a)&&!Qb(a)&&u.g("alignment must be a real Spot or Spot.Default");this.ja=a=a.B();dj(this);this.d("alignment",b,a)}});u.a(Q,"column",Q.prototype.hd);u.defineProperty(Q,{hd:"column"},r("K"),function(a){s&&u.i(a,Q,"column");var a=Math.round(a),b=this.K;if(b!==a){a<0&&u.ha(a,">= 0",Q,"column");this.K=a;this.M();this.d("column",b,a)}});u.a(Q,"columnSpan",Q.prototype.VA);
u.defineProperty(Q,{VA:"columnSpan"},r("jj"),function(a){s&&u.i(a,Q,"columnSpan");var a=Math.round(a),b=this.jj;if(b!==a){a<1&&u.ha(a,">= 1",Q,"columnSpan");this.jj=a;this.M();this.d("columnSpan",b,a)}});u.a(Q,"row",Q.prototype.kd);u.defineProperty(Q,{kd:"row"},r("fq"),function(a){s&&u.i(a,Q,"row");var a=Math.round(a),b=this.fq;if(b!==a){a<0&&u.ha(a,">= 0",Q,"row");this.fq=a;this.M();this.d("row",b,a)}});u.a(Q,"rowSpan",Q.prototype.rowSpan);
u.defineProperty(Q,{rowSpan:"rowSpan"},r("Lj"),function(a){s&&u.i(a,Q,"rowSpan");var a=Math.round(a),b=this.Lj;if(b!==a){a<1&&u.ha(a,">= 1",Q,"rowSpan");this.Lj=a;this.M();this.d("rowSpan",b,a)}});u.a(Q,"isPanelMain",Q.prototype.Mi);u.defineProperty(Q,{Mi:"isPanelMain"},r("ep"),function(a){var b=this.ep;if(b!==a){s&&u.e(a,"boolean",Q,"isPanelMain");this.ep=a;this.M();this.d("isPanelMain",b,a)}});u.a(Q,"alignmentFocus",Q.prototype.xi);
u.defineProperty(Q,{xi:"alignmentFocus"},r("$n"),function(a){var b=this.$n;if(!b.u(a)){s?u.c(a,K,Q,"alignmentFocus"):Pb(a)&&!Qb(a)&&u.g("alignmentFocus must be a real Spot or Spot.Default");this.$n=a=a.B();this.M();this.d("alignmentFocus",b,a)}});u.a(Q,"portId",Q.prototype.je);
u.defineProperty(Q,{je:"portId"},r("Rp"),function(a){var b=this.Rp;if(b!==a){s&&a!==m&&u.e(a,"string",Q,"portId");var c=this.W;if(c!==m&&!(c instanceof U)){u.g("portID being set on a Link: "+a);c=m}b!==m&&c&&uj(c,this);this.Rp=a;if(a!==m&&c){c.ic===m&&xj(c);yj(c,this)}this.d("portId",b,a)}});function zj(a){var b={value:m};Aj(a,b);return b.value}function Aj(a,b){var c=a.U;if(c===m){b.value=a;return o}if(!Aj(c,b)&&a.visible){b.value=a;return o}return h}
function jj(a){var b=a.W;if(b instanceof U)(a=a.b)&&!a.va.rc&&b.jf()}u.a(Q,"toSpot",Q.prototype.Xa);u.defineProperty(Q,{Xa:"toSpot"},r("Ig"),function(a){var b=this.Ig;if(!b.u(a)){s&&u.c(a,K,Q,"toSpot");this.Ig=a=a.B();this.d("toSpot",b,a);jj(this)}});u.a(Q,"toEndSegmentLength",Q.prototype.jk);
u.defineProperty(Q,{jk:"toEndSegmentLength"},r("Fg"),function(a){var b=this.Fg;if(b!==a){s&&u.e(a,"number",Q,"toEndSegmentLength");a<0&&u.ha(a,">= 0",Q,"toEndSegmentLength");this.Fg=a;this.d("toEndSegmentLength",b,a);jj(this)}});u.a(Q,"toEndSegmentDirection",Q.prototype.Tr);u.defineProperty(Q,{Tr:"toEndSegmentDirection"},r("Eg"),function(a){var b=this.Eg;if(b!==a){s&&u.Sa(a,U,Q,"toEndSegmentDirection");this.Eg=a;this.d("toEndSegmentDirection",b,a);jj(this)}});u.a(Q,"toShortLength",Q.prototype.Ur);
u.defineProperty(Q,{Ur:"toShortLength"},r("Hg"),function(a){var b=this.Hg;if(b!==a){s&&u.e(a,"number",Q,"toShortLength");this.Hg=a;this.d("toShortLength",b,a);jj(this)}});u.a(Q,"toLinkable",Q.prototype.Ny);u.defineProperty(Q,{Ny:"toLinkable"},r("Bq"),function(a){var b=this.Bq;if(b!==a){s&&a!==m&&u.e(a,"boolean",Q,"toLinkable");this.Bq=a;this.d("toLinkable",b,a)}});u.a(Q,"toLinkableDuplicates",Q.prototype.iD);
u.defineProperty(Q,{iD:"toLinkableDuplicates"},r("Cq"),function(a){var b=this.Cq;if(b!==a){s&&u.e(a,"boolean",Q,"toLinkableDuplicates");this.Cq=a;this.d("toLinkableDuplicates",b,a)}});u.a(Q,"toLinkableSelfNode",Q.prototype.jD);u.defineProperty(Q,{jD:"toLinkableSelfNode"},r("Dq"),function(a){var b=this.Dq;if(b!==a){s&&u.e(a,"boolean",Q,"toLinkableSelfNode");this.Dq=a;this.d("toLinkableSelfNode",b,a)}});u.a(Q,"toMaxLinks",Q.prototype.kD);
u.defineProperty(Q,{kD:"toMaxLinks"},r("Eq"),function(a){var b=this.Eq;if(b!==a){s&&u.i(a,Q,"toMaxLinks");a<0&&u.ha(a,">= 0",Q,"toMaxLinks");this.Eq=a;this.d("toMaxLinks",b,a)}});u.a(Q,"fromSpot",Q.prototype.Va);u.defineProperty(Q,{Va:"fromSpot"},r("qg"),function(a){var b=this.qg;if(!b.u(a)){s&&u.c(a,K,Q,"fromSpot");this.qg=a=a.B();this.d("fromSpot",b,a);jj(this)}});u.a(Q,"fromEndSegmentLength",Q.prototype.$j);
u.defineProperty(Q,{$j:"fromEndSegmentLength"},r("ng"),function(a){var b=this.ng;if(b!==a){s&&u.e(a,"number",Q,"fromEndSegmentLength");a<0&&u.ha(a,">= 0",Q,"fromEndSegmentLength");this.ng=a;this.d("fromEndSegmentLength",b,a);jj(this)}});u.a(Q,"fromEndSegmentDirection",Q.prototype.hr);u.defineProperty(Q,{hr:"fromEndSegmentDirection"},r("mg"),function(a){var b=this.mg;if(b!==a){s&&u.Sa(a,U,Q,"fromEndSegmentDirection");this.mg=a;this.d("fromEndSegmentDirection",b,a);jj(this)}});
u.a(Q,"fromShortLength",Q.prototype.ir);u.defineProperty(Q,{ir:"fromShortLength"},r("pg"),function(a){var b=this.pg;if(b!==a){s&&u.e(a,"number",Q,"fromShortLength");this.pg=a;this.d("fromShortLength",b,a);jj(this)}});u.a(Q,"fromLinkable",Q.prototype.Px);u.defineProperty(Q,{Px:"fromLinkable"},r("Ko"),function(a){var b=this.Ko;if(b!==a){s&&a!==m&&u.e(a,"boolean",Q,"fromLinkable");this.Ko=a;this.d("fromLinkable",b,a)}});u.a(Q,"fromLinkableDuplicates",Q.prototype.yB);
u.defineProperty(Q,{yB:"fromLinkableDuplicates"},r("Lo"),function(a){var b=this.Lo;if(b!==a){s&&u.e(a,"boolean",Q,"fromLinkableDuplicates");this.Lo=a;this.d("fromLinkableDuplicates",b,a)}});u.a(Q,"fromLinkableSelfNode",Q.prototype.zB);u.defineProperty(Q,{zB:"fromLinkableSelfNode"},r("Mo"),function(a){var b=this.Mo;if(b!==a){s&&u.e(a,"boolean",Q,"fromLinkableSelfNode");this.Mo=a;this.d("fromLinkableSelfNode",b,a)}});u.a(Q,"fromMaxLinks",Q.prototype.AB);
u.defineProperty(Q,{AB:"fromMaxLinks"},r("No"),function(a){var b=this.No;if(b!==a){s&&u.i(a,Q,"fromMaxLinks");a<0&&u.ha(a,">= 0",Q,"fromMaxLinks");this.No=a;this.d("fromMaxLinks",b,a)}});u.a(Q,"cursor",Q.prototype.cursor);u.defineProperty(Q,{cursor:"cursor"},r("oo"),function(a){var b=this.oo;if(b!==a){u.e(a,"string",Q,"cursor");this.oo=a;this.d("cursor",b,a)}});u.a(Q,"click",Q.prototype.click);
u.defineProperty(Q,{click:"click"},r("hh"),function(a){var b=this.hh;if(b!==a){a!==m&&u.e(a,"function",Q,"click");this.hh=a;this.d("click",b,a)}});u.a(Q,"doubleClick",Q.prototype.jl);u.defineProperty(Q,{jl:"doubleClick"},r("kh"),function(a){var b=this.kh;if(b!==a){a!==m&&u.e(a,"function",Q,"doubleClick");this.kh=a;this.d("doubleClick",b,a)}});u.a(Q,"contextClick",Q.prototype.Yq);
u.defineProperty(Q,{Yq:"contextClick"},r("ih"),function(a){var b=this.ih;if(b!==a){a!==m&&u.e(a,"function",Q,"contextClick");this.ih=a;this.d("contextClick",b,a)}});u.a(Q,"mouseEnter",Q.prototype.my);u.defineProperty(Q,{my:"mouseEnter"},r("Gp"),function(a){var b=this.Gp;if(b!==a){a!==m&&u.e(a,"function",Q,"mouseEnter");this.Gp=a;this.d("mouseEnter",b,a)}});u.a(Q,"mouseLeave",Q.prototype.ny);
u.defineProperty(Q,{ny:"mouseLeave"},r("Hp"),function(a){var b=this.Hp;if(b!==a){a!==m&&u.e(a,"function",Q,"mouseLeave");this.Hp=a;this.d("mouseLeave",b,a)}});u.a(Q,"mouseOver",Q.prototype.Br);u.defineProperty(Q,{Br:"mouseOver"},r("yh"),function(a){var b=this.yh;if(b!==a){a!==m&&u.e(a,"function",Q,"mouseOver");this.yh=a;this.d("mouseOver",b,a)}});u.a(Q,"mouseHover",Q.prototype.Ar);
u.defineProperty(Q,{Ar:"mouseHover"},r("xh"),function(a){var b=this.xh;if(b!==a){a!==m&&u.e(a,"function",Q,"mouseHover");this.xh=a;this.d("mouseHover",b,a)}});u.a(Q,"mouseHold",Q.prototype.zr);u.defineProperty(Q,{zr:"mouseHold"},r("wh"),function(a){var b=this.wh;if(b!==a){a!==m&&u.e(a,"function",Q,"mouseHold");this.wh=a;this.d("mouseHold",b,a)}});u.a(Q,"mouseDragEnter",Q.prototype.pC);
u.defineProperty(Q,{pC:"mouseDragEnter"},r("Ep"),function(a){var b=this.Ep;if(b!==a){a!==m&&u.e(a,"function",Q,"mouseDragEnter");this.Ep=a;this.d("mouseDragEnter",b,a)}});u.a(Q,"mouseDragLeave",Q.prototype.ly);u.defineProperty(Q,{ly:"mouseDragLeave"},r("Fp"),function(a){var b=this.Fp;if(b!==a){a!==m&&u.e(a,"function",Q,"mouseDragLeave");this.Fp=a;this.d("mouseDragLeave",b,a)}});u.a(Q,"mouseDrop",Q.prototype.yr);
u.defineProperty(Q,{yr:"mouseDrop"},r("vh"),function(a){var b=this.vh;if(b!==a){a!==m&&u.e(a,"function",Q,"mouseDrop");this.vh=a;this.d("mouseDrop",b,a)}});u.a(Q,"actionDown",Q.prototype.ex);u.defineProperty(Q,{ex:"actionDown"},r("Wn"),function(a){var b=this.Wn;if(b!==a){a!==m&&u.e(a,"function",Q,"actionDown");this.Wn=a;this.d("actionDown",b,a)}});u.a(Q,"actionUp",Q.prototype.gx);
u.defineProperty(Q,{gx:"actionUp"},r("Yn"),function(a){var b=this.Yn;if(b!==a){a!==m&&u.e(a,"function",Q,"actionUp");this.Yn=a;this.d("actionUp",b,a)}});u.a(Q,"actionMove",Q.prototype.fx);u.defineProperty(Q,{fx:"actionMove"},r("Xn"),function(a){var b=this.Xn;if(b!==a){a!==m&&u.e(a,"function",Q,"actionMove");this.Xn=a;this.d("actionMove",b,a)}});u.a(Q,"actionCancel",Q.prototype.dx);
u.defineProperty(Q,{dx:"actionCancel"},r("Vn"),function(a){var b=this.Vn;if(b!==a){a!==m&&u.e(a,"function",Q,"actionCancel");this.Vn=a;this.d("actionCancel",b,a)}});u.a(Q,"toolTip",Q.prototype.Vr);u.defineProperty(Q,{Vr:"toolTip"},r("Fh"),function(a){var b=this.Fh;if(b!==a){a!==m&&u.c(a,bf,Q,"toolTip");this.Fh=a;this.d("toolTip",b,a)}});u.a(Q,"contextMenu",Q.prototype.contextMenu);
u.defineProperty(Q,{contextMenu:"contextMenu"},r("jh"),function(a){var b=this.jh;if(b!==a){a!==m&&u.c(a,bf,Q,"contextMenu");this.jh=a;this.d("contextMenu",b,a)}});u.a(Q,"isActionable",Q.prototype.yu);u.defineProperty(Q,{yu:"isActionable"},r("Zo"),function(a){var b=this.Zo;if(b!==a){u.e(a,"boolean",Q,"isActionable");this.Zo=a;this.d("isActionable",b,a)}});u.a(Q,"pickable",Q.prototype.xC);
u.defineProperty(Q,{xC:"pickable"},r("pd"),function(a){var b=this.pd;if(b!==a){u.e(a,"boolean",Q,"pickable");this.pd=a;this.d("pickable",b,a)}});Q.prototype.bind=Q.prototype.bind=function(a){a.cf=this;var b=this.gr();b!==m&&Bj(b)&&u.g("Cannot add a Binding to a template that has already been copied: "+a);if(this.Nb===m)this.Nb=new z(Se);this.Nb.add(a)};Q.prototype.findTemplateBinder=Q.prototype.gr=function(){for(var a=this instanceof v?this:this.U;a!==m;){if(a.tk!==m&&a instanceof v)return a;a=a.U}return m};
var Cj;
Q.make=Cj=function(a,b){var c=m,d=m;if(typeof a==="function")d=a;else if(typeof a==="string"){var e=Dj.$(a);typeof e==="function"?c=e():d=ga[a]}if(c===m){(d===m||!d.constructor)&&u.g("GraphObject.make requires a class function or class name, not: "+a);c=new d}e=1;if(c instanceof B&&arguments.length>1){d=arguments[1];if(typeof d==="string"||d instanceof HTMLDivElement){c.Qh=m;Fh(c,d);e++}else u.g("Unknown argument to Diagram constructor: "+d)}for(;e<arguments.length;e++){d=arguments[e];if(typeof d==="string")c instanceof
na?c.text=d:c instanceof X?c.Ua=d:c instanceof Ej?c.source=d:u.g("Unable to use a string as an argument to GraphObject.make: "+d);else if(d instanceof Q){c instanceof v||u.g("A GraphObject can only be added to a Panel, not to: "+c);c.add(d)}else if(d instanceof Fj){c instanceof v||u.g("A RowColumnDefinition can only be added to a Panel, not to: "+c);var g=d.Au?c.ce(d.index):c.sd(d.index);u.c(d,Fj,Fj,"copyFrom:pd");d.Au?g.height=d.height:g.width=d.width;g.nf=d.nf;g.yd=d.yd;g.kb=d.kb;g.Pr=d.Pr;g.Nb=
d.Nb}else if(d instanceof ja)c instanceof W&&d.Id===W?d===Hf||d===oh?c.Te=d:d===Gj||d===Hj||d===Ij?c.Ie=d:d===Jj||d===Kj||d===Lj?c.Ut=d:d===Mj||d===Ni||u.g("Unknown Link enum value for a Link property: "+d):c instanceof v&&d.Id===v?c.type=d:c instanceof na&&d.Id===na?c.Ty=d:c instanceof Q&&d.Id===W?d.name.indexOf("Orient")===0?c.Kr=d:u.g("Unknown Link enum value for GraphObject.segmentOrientation property: "+d):c instanceof Q&&d.Id===Q?c.$g=d:c instanceof B&&d.Id===B?c.nx=d:c instanceof Be&&d.Id===
Be?c.type=d:c instanceof md&&d.Id===md?c.type=d:c instanceof pe&&d.Id===pe?c.type=d:c instanceof Se&&d.Id===Se?c.mode=d:c instanceof se&&d.Id===se?c.Lc=d:c instanceof Y&&d.Id===Y?d.name.indexOf("Alignment")===0?c.kb=d:d.name.indexOf("Arrangement")===0?c.Hd=d:d.name.indexOf("Compaction")===0?c.bu=d:d.name.indexOf("Path")===0?c.path=d:d.name.indexOf("Sorting")===0?c.tf=d:d.name.indexOf("Style")===0?c.tD=d:u.g("Unknown enum value: "+d):c instanceof Z&&d.Id===Z?d.name.indexOf("Aggressive")===0?c.GA=d:
d.name.indexOf("Cycle")===0?c.cB=d:d.name.indexOf("Init")===0?c.RB=d:d.name.indexOf("Layer")===0?c.aC=d:u.g("Unknown enum value: "+d):c instanceof Hi&&d.Id===Hi?d===Nj||d===Oj||d===Pj||d===Qj?c.tf=d:d===Rj||d===Sj?c.Hd=d:d===Tj||d===Uj?c.kb=d:u.g("Unknown enum value: "+d):c instanceof Vj&&d.Id===Vj?d===Wj||d===Xj||d===Yj||d===Zj||d===$j?c.tf=d:d===ak||d===bk||d===ck||d===dk?c.direction=d:d===ek||d===fk||d===gk||d===hk?c.Hd=d:d===ik||d===jk?c.Er=d:u.g("Unknown enum value: "+d):u.g("No property to set for this enum value: "+
d);else if(d instanceof Se)c instanceof Q||c instanceof Fj?c.bind(d):u.g("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+c);else if(d instanceof zd)c instanceof md?c.qc.add(d):u.g("A PathFigure can only be added to a Geometry, not to: "+c);else if(d instanceof pe)c instanceof zd?c.rb.add(d):u.g("A PathSegment can only be added to a PathFigure, not to: "+c);else if(d instanceof Object){d.constructor!==Object&&u.g("Can only get property values from a plain Object, not a: "+
d);if(c instanceof Be){var g={},i;for(i in d){var j=parseFloat(i);isNaN(j)?g[i]=d[i]:c.addColorStop(j,d[i])}u.Dy(c,g)}else if(c instanceof Fj){if(d.row!==f){g=d.row;(g===f||g===m||g===Infinity||isNaN(g)||g<0)&&u.g("Must specify non-negative integer row for RowColumnDefinition "+d);c.Hk=h;c.T=g}else if(d.column!==f){g=d.column;(g===f||g===m||g===Infinity||isNaN(g)||g<0)&&u.g("Must specify non-negative integer column for RowColumnDefinition "+d);c.Hk=o;c.T=g}else u.g("Must specify row or column value in a RowColumnDefinition "+
d);g=u.QE(d,"row","column");u.Dy(c,g)}else u.Dy(c,d)}else u.g("Unknown initializer: "+d)}return c};var Dj;Q.Builders=Dj=new ka("string","function");
Dj.add("Button",function(){var a=new Be(Me);a.addColorStop(0,"white");a.addColorStop(1,"lightgray");var b=new Be(Me);b.addColorStop(0,"white");b.addColorStop(1,"dodgerblue");var c=Cj(v,Hh,{yu:h},Cj(X,{name:"ButtonBorder",Ua:"RoundedRectangle",fill:a,stroke:"gray"}));c.my=function(a,c){var g=c.Z(0),i=c._buttonFillOver;i===f&&(i=b);c._buttonFillNormal=g.fill;g.fill=i;i=c._buttonStrokeOver;i===f&&(i="blue");c._buttonStrokeNormal=g.stroke;g.stroke=i};c.ny=function(b,c){var g=c.Z(0),i=c._buttonFillNormal;
i===f&&(i=a);g.fill=i;i=c._buttonStrokeNormal;i===f&&(i="gray");g.stroke=i};return c});
Dj.add("TreeExpanderButton",function(){var a=Cj("Button",Cj(X,{name:"ButtonIcon",Ua:"MinusLine",ia:new eb(6,6)},(new Se("figure","isTreeExpanded",function(a,c){var d=m,e=c.U;e&&(d=a?e._treeExpandedFigure:e._treeCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).ty("")),{visible:o},(new Se("visible","isTreeLeaf",function(a){return!a})).ty(""));a.click=function(a,c){var d=c.W;if(d instanceof U){var e=d.b;if(!(e===m||e.Ja)){a.td=h;d.Nd?e.Jd.Xq(d):e.Jd.dr(d)}}};return a});
Dj.add("SubGraphExpanderButton",function(){var a=Cj("Button",Cj(X,{name:"ButtonIcon",Ua:"MinusLine",ia:new eb(6,6)},(new Se("figure","isSubGraphExpanded",function(a,c){var d=m,e=c.U;e&&(d=a?e._subGraphExpandedFigure:e._subGraphCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).ty("")));a.click=function(a,c){var d=c.W;if(d instanceof V){var e=d.b;if(!(e===m||e.Ja)){a.td=h;d.ee?e.Jd.Wq(d):e.Jd.cr(d)}}};return a});
Dj.add("ContextMenuButton",function(){var a=Cj("Button");a.$g=Qi;var b=a.Le("ButtonBorder");if(b instanceof X){b.Ua="Rectangle";b.n=new K(0,0,2,2);b.o=new K(1,1,-2,-2)}return a});
function v(a){Q.call(this);if(a===f)arguments.length===0?this.I=Og:u.g("invalid argument to Panel constructor: undefined");else{u.Sa(a,v,v,"type");this.I=a}this.wa=new z(Q);this.Ed=(new qb).freeze();this.ro=Ub;this.Gb=Jg;this.ze=[];this.qe=[];this.jo=this.gq=kk;this.mm=this.Hm=0;this.Im=Kg;this.Ro=(new eb(10,10)).freeze();this.So=(new E(0,0)).freeze();this.tk=this.Vl=m;this.kw="";this.Jf=this.xj=m;this.im="category";this.qh=m;this.qk=new J(NaN,NaN,NaN,NaN);this.$D=new J(0,0,0,0);this.PG=new eb(0,
0);this.yq=m}u.H("Panel",v);u.ma(v,Q);
v.prototype.eb=function(a){Q.prototype.eb.call(this,a);a.I=this.I;a.Ed.Oa(this.Ed);a.ro=this.ro.B();a.Gb=this.Gb;if(this.ze.length>0){for(var b=[],c=this.ze,d=c.length,e=0;e<d;e++)if(c[e]!==f){var g=c[e].copy();g.yl(a);b[e]=g}a.ze=b}if(this.qe.length>0){b=[];c=this.qe;d=c.length;for(e=0;e<d;e++)if(c[e]!==f){g=c[e].copy();g.yl(a);b[e]=g}a.qe=b}a.gq=this.gq;a.jo=this.jo;a.Hm=this.Hm;a.mm=this.mm;a.Im=this.Im;a.Ro.Oa(this.Ro);a.So.Oa(this.So);a.Vl=this.Vl;a.tk=this.tk;a.kw=this.kw;a.xj=this.xj;a.Jf=
this.Jf;a.im=this.im;this._buttonFillNormal&&(a._buttonFillNormal=this._buttonFillNormal);this._buttonFillOver&&(a._buttonFillOver=this._buttonFillOver);this._buttonStrokeNormal&&(a._buttonStrokeNormal=this._buttonStrokeNormal);this._buttonStrokeOver&&(a._buttonStrokeOver=this._buttonStrokeOver);this._treeExpandedFigure&&(a._treeExpandedFigure=this._treeExpandedFigure);this._treeCollapsedFigure&&(a._treeCollapsedFigure=this._treeCollapsedFigure);this._subGraphExpandedFigure&&(a._subGraphExpandedFigure=
this._subGraphExpandedFigure);this._subGraphCollapsedFigure&&(a._subGraphCollapsedFigure=this._subGraphCollapsedFigure)};v.prototype.Pg=function(a){Q.prototype.Pg.call(this,a);a.wa=this.wa;for(var b=a.wa.f;b.next();)b.value.Gj=a};v.prototype.copy=v.prototype.copy=function(){var a=Q.prototype.copy.call(this);if(a instanceof v){var b=this.wa;if(b.length>0)for(var c=b.length,d=0;d<c;d++){var e=b.j[d].copy(),g=a;e.yl(g);e.ri=m;var i=g.wa,j=i.count;i.dc(j,e);i=g.W;i!==m&&i.ke(ve,"elements",g,m,e,m,j)}return a}return m};
v.prototype.toString=function(){return"Panel("+this.type+")#"+u.cc(this)};var Og;v.Position=Og=u.l(v,"Position",0);v.Horizontal=u.l(v,"Horizontal",1);var Gh;v.Vertical=Gh=u.l(v,"Vertical",2);var Hg;v.Spot=Hg=u.l(v,"Spot",3);var Hh;v.Auto=Hh=u.l(v,"Auto",4);var fj;v.Table=fj=u.l(v,"Table",5);v.Viewbox=u.l(v,"Viewbox",6);var lk;v.TableRow=lk=u.l(v,"TableRow",7);var mk;v.TableColumn=mk=u.l(v,"TableColumn",8);var ng;v.Link=ng=u.l(v,"Link",9);var Ph;v.Grid=Ph=u.l(v,"Grid",10);
u.m(v,{elements:"elements"},function(){return this.wa.f});u.m(v,{la:"naturalBounds"},r("Hc"));u.a(v,"padding",v.prototype.padding);u.defineProperty(v,{padding:"padding"},r("Ed"),function(a){typeof a==="number"?a=new qb(a):u.c(a,qb,v,"padding");var b=this.Ed;if(!b.u(a)){this.Ed=a=a.B();this.M();this.d("padding",b,a)}});u.a(v,"type",v.prototype.type);u.defineProperty(v,{type:"type"},r("I"),function(a){var b=this.I;if(b!==a){s&&u.Sa(a,v,v,"type");this.I=a;this.M();this.d("type",b,a)}});
u.a(v,"defaultAlignment",v.prototype.Di);u.defineProperty(v,{Di:"defaultAlignment"},r("ro"),function(a){var b=this.ro;if(!b.u(a)){s&&u.c(a,K,v,"defaultAlignment");this.ro=a=a.B();this.M();this.d("defaultAlignment",b,a)}});u.a(v,"defaultStretch",v.prototype.Dx);u.defineProperty(v,{Dx:"defaultStretch"},r("Gb"),function(a){var b=this.Gb;if(b!==a){u.Sa(a,Q,v,"defaultStretch");this.Gb=a;this.M();this.d("defaultStretch",b,a)}});u.a(v,"viewboxStretch",v.prototype.Sy);
u.defineProperty(v,{Sy:"viewboxStretch"},r("Im"),function(a){var b=this.Im;if(b!==a){u.Sa(a,Q,v,"viewboxStretch");this.Im=a;this.d("viewboxStretch",b,a)}});u.a(v,"gridCellSize",v.prototype.lr);u.defineProperty(v,{lr:"gridCellSize"},r("Ro"),function(a){var b=this.Ro;if(!b.u(a)){u.c(a,eb,v,"gridCellSize");(!a.V()||a.width===0||a.height===0)&&u.g("Invalid Panel.gridCellSize: "+a);this.Ro=a.B();this.b!==m&&this===this.b.wu&&ii(this.b);$i(this);this.d("gridCellSize",b,a)}});u.a(v,"gridOrigin",v.prototype.Sx);
u.defineProperty(v,{Sx:"gridOrigin"},r("So"),function(a){var b=this.So;if(!b.u(a)){u.c(a,E,v,"gridOrigin");a.V()||u.g("Invalid Panel.gridOrigin: "+a);this.So=a.B();$i(this);this.d("gridOrigin",b,a)}});ea=v.prototype;
ea.ar=function(a,b){if(this.I===Ph){var c=this.ml()*b.scale;c<=0&&(c=1);var d=this.lr,e=d.width,d=d.height,g=this.la,i=g.width,g=g.height,j=Math.ceil(i/e),k=Math.ceil(g/d),l=this.Sx;a.save();a.beginPath();a.rect(0,0,i,g);a.clip();for(var n=[],q=this.wa.j,p=this.wa.length,t=0;t<p;t++){var w=[];n.push(w);var A=q[t];if(A.visible)for(var A=A.Ua==="LineV",F=t+1;F<p;F++){var H=q[F];if(H.visible&&H.Ua==="LineV"===A){H=H.Uh;H>=2&&w.push(H)}}}q=this.wa.length;for(p=0;p<q;p++){A=this.wa.j[p];if(A.visible){t=
n[p];w=A.Uh;if(A.Ua==="LineV"){a.lineWidth=A.Na;aj(this,a,A.stroke,o);a.beginPath();for(F=A=Math.floor(-l.x/e);F<=A+j;F++){H=F*e+l.x;if(0<=H&&H<i&&nk(F,w,t)){a.moveTo(H,0);a.lineTo(H,g);if(e*w*c<2)break}}}else{a.lineWidth=A.Na;aj(this,a,A.stroke,o);a.beginPath();for(F=A=Math.floor(-l.y/d);F<=A+k;F++){H=F*d+l.y;if(0<=H&&H<=g&&nk(F,w,t)){a.moveTo(0,H);a.lineTo(i,H);if(d*w*c<2)break}}}a.stroke()}}a.restore();Nh(b,a)}else{c=this.wa.length;for(e=0;e<c;e++)this.wa.j[e].ag(a,b)}};
ea.gg=function(){Q.prototype.gg.call(this);var a=this.b;if(a!==m){Ei(a,"type",this.type);this.Sy!==Kg&&Ei(a,"viewboxStretch",this.Sy);Ei(a,"elements",this.elements)}};function nk(a,b,c){if(a%b!==0)return o;for(var b=c.length,d=0;d<b;d++)if(a%c[d]===0)return o;return h}
ea.wr=function(a,b,c,d){var e=this.qk;e.width=0;e.height=0;var g=this.ia,i=this.Od;if(c===f){c=i.width;d=i.height}var c=Math.max(c/this.scale,i.width),d=Math.max(d/this.scale,i.height),j=this.xd;isNaN(g.width)||(a=Math.min(g.width,j.width));isNaN(g.height)||(b=Math.min(g.height,j.height));var a=Math.max(c,a),b=Math.max(d,b),k=this.padding,a=Math.max(a-k.left-k.right,0),b=Math.max(b-k.top-k.bottom,0),l=this.wa,n=l.length;if(n===0){var q=this.Hc;jb(q,!isNaN(g.width)?a:0,!isNaN(g.height)?b:0);Ri(this,
0,0,q.width,q.height)}else{var p=this.I.pb;switch(p){case "Position":var t=a,w=b,A=c,F=d;e.x=0;e.y=0;e.width=0;for(var H=e.height=0;H<n;H++){var x=l.j[H];if(x.visible||x===this.tb){var I=x.margin,y=I.right+I.left,G=I.top+I.bottom;gh(x,t,w,A,F);var fa=x.fa,R=Math.max(fa.width+y,0),S=Math.max(fa.height+G,0),da=x.position.x,ma=x.position.y;isFinite(da)||(da=0);isFinite(ma)||(ma=0);mb(e,da,ma,R,S)}}break;case "Vertical":for(var ua=a,sa=c,ib=d,db=[],$a=0;$a<n;$a++){var Oa=l.j[$a];if(Oa.visible||Oa===this.tb){var fb=
Ui(Oa);if(fb!==Oi&&fb!==Pi)db.push(Oa);else{var Va=Oa.margin,vc=Va.right+Va.left,Cd=Va.top+Va.bottom;gh(Oa,ua,Infinity,sa,ib);var Wa=Oa.fa,Fc=Math.max(Wa.width+vc,0),Dd=Math.max(Wa.height+Cd,0);e.width=Math.max(e.width,Fc);e.height=e.height+Dd}}}var qc=db.length;if(qc!==0){this.ia.width?ua=Math.min(this.ia.width,this.xd.width):e.width!==0&&(ua=Math.min(e.width,this.xd.width));for($a=0;$a<qc;$a++){Oa=db[$a];if(Oa.visible||Oa===this.tb){Va=Oa.margin;vc=Va.right+Va.left;Cd=Va.top+Va.bottom;gh(Oa,ua,
Infinity,sa,ib);Wa=Oa.fa;Fc=Math.max(Wa.width+vc,0);Dd=Math.max(Wa.height+Cd,0);e.width=Math.max(e.width,Fc);e.height=e.height+Dd}}}break;case "Horizontal":for(var Wb=b,gc=c,Gc=d,Gb=[],Hb=0;Hb<n;Hb++){var Ib=l.j[Hb];if(Ib.visible||Ib===this.tb){var Ce=Ui(Ib);if(Ce!==Oi&&Ce!==Qi)Gb.push(Ib);else{var Oc=Ib.margin,nd=Oc.right+Oc.left,Hc=Oc.top+Oc.bottom;gh(Ib,Infinity,Wb,gc,Gc);var xc=Ib.fa,ed=Math.max(xc.width+nd,0),rb=Math.max(xc.height+Hc,0);e.width=e.width+ed;e.height=Math.max(e.height,rb)}}}var yc=
Gb.length;if(yc!==0){this.ia.height?Wb=Math.min(this.ia.height,this.xd.height):e.height!==0&&(Wb=Math.min(e.height,this.xd.height));for(Hb=0;Hb<yc;Hb++){Ib=Gb[Hb];if(Ib.visible||Ib===this.tb){Oc=Ib.margin;nd=Oc.right+Oc.left;Hc=Oc.top+Oc.bottom;gh(Ib,Infinity,Wb,gc,Gc);xc=Ib.fa;ed=Math.max(xc.width+nd,0);rb=Math.max(xc.height+Hc,0);e.width=e.width+ed;e.height=Math.max(e.height,rb)}}}break;case "Spot":a:{var Ed=a,Fd=b,qa=c,Ea=d,zc=ok(this,l,n),lb=zc.margin,Pc,Gd,od=lb.right+lb.left,Jb=lb.top+lb.bottom;
gh(zc,Ed,Fd,qa,Ea);var vb=zc.fa,pd=vb.width,Qc=vb.height,Rc=Math.max(pd+od,0),Ud=Math.max(Qc+Jb,0);e.x=-lb.left;e.y=-lb.top;e.width=Rc;e.height=Ud;for(var Vd=0;Vd<n;Vd++){var hc=l.j[Vd];if(hc!==zc&&(hc.visible||hc===this.tb)){lb=hc.margin;Pc=lb.right+lb.left;Gd=lb.top+lb.bottom;gh(hc,Ed,Fd,0,0);var vb=hc.fa,Rc=Math.max(vb.width+Pc,0),Ud=Math.max(vb.height+Gd,0),$b=hc.kb;if(Qb($b))$b=this.Di;Nb($b)||($b=Zb);var Za=hc.xi;Qb(Za)&&(Za=Zb);mb(e,$b.x*pd+$b.offsetX-(Za.x*vb.width-Za.offsetX)-lb.left,$b.y*
Qc+$b.offsetY-(Za.y*vb.height-Za.offsetY)-lb.top,Rc,Ud)}}var Cb=zc.$g;Cb===Jg&&(Cb=Ui(zc));switch(Cb){case Oi:break a;case Ad:if(!isFinite(Ed)&&!isFinite(Fd))break a;break;case Qi:if(!isFinite(Ed))break a;break;case Pi:if(!isFinite(Fd))break a}vb=zc.fa;pd=vb.width;Qc=vb.height;Rc=Math.max(pd+od,0);Ud=Math.max(Qc+Jb,0);lb=zc.margin;e.x=-lb.left;e.y=-lb.top;e.width=Rc;e.height=Ud;for(Vd=0;Vd<n;Vd++){hc=l.j[Vd];if(hc!==zc&&(hc.visible||hc===this.tb)){lb=hc.margin;Pc=lb.right+lb.left;Gd=lb.top+lb.bottom;
vb=hc.fa;Rc=Math.max(vb.width+Pc,0);Ud=Math.max(vb.height+Gd,0);$b=hc.kb;if(Qb($b))$b=this.Di;Nb($b)||($b=Zb);Za=hc.xi;Qb(Za)&&(Za=Zb);mb(e,$b.x*pd+$b.offsetX-(Za.x*vb.width-Za.offsetX)-lb.left,$b.y*Qc+$b.offsetY-(Za.y*vb.height-Za.offsetY)-lb.top,Rc,Ud)}}}break;case "Auto":var qd=a,ac=b,wb=c,Wd=d,Rb=ok(this,l,n),bc=Rb.margin,Xd=bc.right+bc.left,De=bc.top+bc.bottom;gh(Rb,qd,ac,wb,Wd);var rd=Rb.fa,fd=Math.max(rd.width+Xd,0),Ic=Math.max(rd.height+De,0),cc=(new E).zl(0,0,fd,Ic,pk(Rb)),Hd=(new E).zl(0,
0,fd,Ic,qk(Rb)),cf=new J(cc,Hd),Yd=qd,Zd=ac;if(isFinite(qd))Yd=cf.width;if(isFinite(ac))Zd=cf.height;for(var he=new eb(0,0),sd=0;sd<n;sd++){var td=l.j[sd];if(td!==Rb&&(td.visible||td===this.tb)){var bc=td.margin,gb=bc.right+bc.left,ob=bc.top+bc.bottom;gh(td,Yd,Zd,wb,Wd);rd=td.fa;fd=Math.max(rd.width+gb,0);Ic=Math.max(rd.height+ob,0);he=new eb(Math.max(fd,he.width),Math.max(Ic,he.height))}}if(n===1){e.width=fd;e.height=Ic}else{var Zc=pk(Rb),ha=qk(Rb),Ta,Ba;if(ha.x!==Zc.x&&ha.y!==Zc.y){Ta=he.width/
Math.abs(ha.x-Zc.x);Ba=he.height/Math.abs(ha.y-Zc.y)}var xb=0;Rb instanceof X&&(xb=Rb.Na*Rb.scale);Ta=Ta+(Math.abs(Zc.offsetX)+Math.abs(ha.offsetX)+xb);Ba=Ba+(Math.abs(Zc.offsetY)+Math.abs(ha.offsetY)+xb);var ic=Rb.$g;ic===Jg&&(ic=Ui(Rb));switch(ic){case Oi:Wd=wb=0;break;case Ad:isFinite(qd)&&(Ta=qd);isFinite(ac)&&(Ba=ac);break;case Qi:isFinite(qd)&&(Ta=qd);Wd=0;break;case Pi:wb=0;isFinite(ac)&&(Ba=ac)}if(Rb instanceof X)Rb.ta=m;Rb.Yb=h;gh(Rb,Ta,Ba,wb,Wd);e.width=Rb.fa.width+Xd;e.height=Rb.fa.height+
De}break;case "Table":for(var ud=a,vd=b,Qa=n,Sb=c,df=d,Kf=[],Ca=0;Ca<Qa;Ca++){var ia=l.j[Ca];if(ia instanceof v&&(ia.type===lk||ia.type===mk))for(var ie=ia.wa,Id=ie.length,Db=0;Db<Id;Db++){var wd=ie.j[Db];if(ia.type===lk)wd.kd=ia.kd;else if(ia.type===mk)wd.hd=ia.hd;Kf.push(wd)}else Kf.push(ia)}for(var Qa=Kf.length,Jd=[],Ca=0;Ca<Qa;Ca++){ia=Kf[Ca];ia.Yb=h;ia.Fc=h;Jd[ia.kd]||(Jd[ia.kd]=[]);Jd[ia.kd][ia.hd]||(Jd[ia.kd][ia.hd]=[]);Jd[ia.kd][ia.hd].push(ia)}for(var Th=[],ef=[],vg=[],ff={count:0},je={count:0},
gf=ud,ke=vd,za,xd,ih=Jd.length,Ca=0;Ca<ih;Ca++)if(Jd[Ca]){var cl=Jd[Ca].length,yb=this.ce(Ca);rk(yb,0);for(Db=0;Db<cl;Db++)if(Jd[Ca][Db]){var zb=this.sd(Db);if(Th[Db]===f){rk(zb,0);Th[Db]=h}for(var $d=Jd[Ca][Db],Uh=$d.length,hf=0;hf<Uh;hf++){ia=$d[hf];if(ia.visible||ia===this.tb)if(ia.Lj>1||ia.jj>1)ef.push(ia);else{var Sc=gj(ia,yb,zb);if(Sc!==Oi&&!ia.ia.V()){if(ff[Db]===f){ff[Db]=-1;ff.count++}if(je[Ca]===f){je[Ca]=-1;je.count++}vg.push(ia);gh(ia,Infinity,Infinity,Sb,df)}else{var wg=isFinite(zb.width)?
zb.width:ud,jh=isFinite(yb.height)?yb.height:vd,Kb=new eb(Math.max(zb.nf,Math.min(wg,zb.yd)),Math.max(yb.nf,Math.min(jh,yb.yd))),jc=ia.margin,jf=jc.right+jc.left,Ac=jc.top+jc.bottom;gh(ia,Infinity,Infinity,Sb,df);var ae=ia.fa,Ee=Math.max(ae.width+jf,0),gd=Math.max(ae.height+Ac,0);za=this.ce(Ca);xd=Math.max(gd-za.Fa,0);xd>ke&&(xd=ke);rk(za,za.Fa+xd);ke=Math.max(ke-xd,0);za=this.sd(Db);xd=Math.max(Ee-za.Fa,0);xd>gf&&(xd=gf);rk(za,za.Fa+xd);gf=Math.max(gf-xd,0)}}}}}for(var Fe=0,le=0,Qa=this.$t,Ca=0;Ca<
Qa;Ca++)this.qe[Ca]!==f&&(Fe=Fe+this.sd(Ca).Fa);Qa=this.Mu;for(Ca=0;Ca<Qa;Ca++)this.ze[Ca]!==f&&(le=le+this.ce(Ca).Fa);gf=Math.max(ud-Fe,0);ke=Math.max(vd-le,0);Qa=vg.length;for(Ca=0;Ca<Qa;Ca++){var ia=vg[Ca],yb=this.ce(ia.kd),zb=this.sd(ia.hd),xg=ia.fa,jc=ia.margin,jf=jc.right+jc.left,Ac=jc.top+jc.bottom;ff[ia.hd]=Math.max(xg.width+jf-zb.Ee,0);je[ia.kd]=Math.max(xg.height+Ac-yb.Ee,0)}var Vh=0,Lf=0;for(Ca in je)Ca!=="count"&&(Vh=Vh+je[Ca]);for(Ca in ff)Ca!=="count"&&(Lf=Lf+ff[Ca]);for(Ca=0;Ca<Qa;Ca++){ia=
vg[Ca];if(ia.visible||ia===this.tb){yb=this.ce(ia.kd);zb=this.sd(ia.hd);wg=isFinite(zb.width)?zb.width:isFinite(gf)?zb.Ee+ff[ia.hd]/Lf*gf:zb.Ee||gf;jh=isFinite(yb.height)?yb.height:isFinite(ke)?yb.Ee+je[ia.kd]/Vh*ke:yb.Ee||ke;Kb=new eb(Math.max(zb.nf,Math.min(wg,zb.yd)),Math.max(yb.nf,Math.min(jh,yb.yd)));Sc=gj(ia,yb,zb);switch(Sc){case Qi:Kb.height=Math.max(Kb.height,ia.fa.height);break;case Pi:Kb.width=Math.max(Kb.width,ia.fa.width)}jc=ia.margin;jf=jc.right+jc.left;Ac=jc.top+jc.bottom;cj(ia);gh(ia,
Kb.width,Kb.height,zb.nf,yb.nf);ae=ia.fa;Ee=Math.max(ae.width+jf,0);gd=Math.max(ae.height+Ac,0);rk(yb,Math.max(yb.Fa,gd));rk(zb,Math.max(zb.Fa,Ee))}}Qa=ef.length;for(Ca=0;Ca<Qa;Ca++){ia=ef[Ca];if(ia.visible||ia===this.tb){yb=this.ce(ia.kd);zb=this.sd(ia.hd);Kb=new eb(Math.max(zb.nf,Math.min(ud,zb.yd)),Math.max(yb.nf,Math.min(vd,yb.yd)));Sc=gj(ia,yb,zb);switch(Sc){case Ad:if(zb.Ee!==0)Kb.width=Math.min(Kb.width,zb.Ee);if(yb.Ee!==0)Kb.height=Math.min(Kb.height,yb.Ee);break;case Qi:if(zb.Ee!==0)Kb.width=
Math.min(Kb.width,zb.Ee);break;case Pi:if(yb.Ee!==0)Kb.height=Math.min(Kb.height,yb.Ee)}if(isFinite(zb.width))Kb.width=zb.width;if(isFinite(yb.height))Kb.height=yb.height;for(var me=new eb(0,0),kc=1;kc<ia.Lj;kc++){if(ia.kd+kc>=this.Mu)break;za=this.ce(ia.kd+kc);me.height=me.height+Math.max(za.nf,isNaN(za.Be)?za.yd:Math.min(za.Be,za.yd))}for(kc=1;kc<ia.jj;kc++){if(ia.hd+kc>=this.$t)break;za=this.sd(ia.hd+kc);me.width=me.width+Math.max(za.nf,isNaN(za.Be)?za.yd:Math.min(za.Be,za.yd))}Kb.width=Kb.width+
me.width;Kb.height=Kb.height+me.height;jc=ia.margin;jf=jc.right+jc.left;Ac=jc.top+jc.bottom;gh(ia,Kb.width,Kb.height,Sb,df);for(var ae=ia.fa,Ee=Math.max(ae.width+jf,0),gd=Math.max(ae.height+Ac,0),yg=0,kc=0;kc<ia.Lj;kc++){za=this.ce(ia.kd+kc);yg=yg+(za.Fa||0)}if(yg<gd)for(var Ld=gd-yg;Ld>0;){var Bc=za.Fa||0;if(isNaN(za.height)&&za.yd>Bc){rk(za,Math.min(za.yd,Bc+Ld));za.Fa!==Bc&&(Ld=Ld-(za.Fa-Bc))}if(za.index-1===-1)break;za=this.ce(za.index-1)}for(var Ge=0,kc=0;kc<ia.jj;kc++){za=this.sd(ia.hd+kc);
Ge=Ge+(za.Fa||0)}if(Ge<Ee)for(Ld=Ee-Ge;Ld>0;){Bc=za.Fa||0;if(isNaN(za.width)&&za.yd>Bc){rk(za,Math.min(za.yd,Bc+Ld));za.Fa!==Bc&&(Ld=Ld-(za.Fa-Bc))}if(za.index-1===-1)break;za=this.sd(za.index-1)}}}for(var kf=0,He=0,Sc=Ui(this),zg=this.ia,Ag=this.xd,be=le=Fe=0,Mf=0,Qa=this.$t,Ca=0;Ca<Qa;Ca++)if(this.qe[Ca]!==f){za=this.sd(Ca);isFinite(za.width)?be=be+za.width:sk(za)===tk?be=be+za.Fa:Fe=Fe+za.Fa}var kf=isFinite(zg.width)?Math.min(zg.width,Ag.width):Sc!==Oi&&isFinite(ud)?ud:Fe,kf=Math.max(kf,this.Od.width),
kf=Math.max(kf-be,0),Cg=Math.max(kf/Fe,1);isFinite(Cg)||(Cg=1);for(Ca=0;Ca<Qa;Ca++)if(this.qe[Ca]!==f){za=this.sd(Ca);!isFinite(za.width)&&sk(za)!==tk&&rk(za,za.Fa*Cg);za.jb=e.width;e.width=e.width+za.Fa}Qa=this.Mu;for(Ca=0;Ca<Qa;Ca++)if(this.ze[Ca]!==f){za=this.ce(Ca);isFinite(za.height)?Mf=Mf+za.height:sk(za)===tk?Mf=Mf+za.Fa:le=le+za.Fa}var He=isFinite(zg.height)?Math.min(zg.height,Ag.height):Sc!==Oi&&isFinite(vd)?vd:le,He=Math.max(He,this.Od.height),He=Math.max(He-Mf,0),Ie=Math.max(He/le,1);isFinite(Ie)||
(Ie=1);for(Ca=0;Ca<Qa;Ca++)if(this.ze[Ca]!==f){za=this.ce(Ca);!isFinite(za.height)&&sk(za)!==tk&&rk(za,za.Fa*Ie);za.jb=e.height;e.height=e.height+za.Fa}this.YD=Jd;break;case "Viewbox":var lj=a,mj=b,Kn=c,Ln=d;n>1&&u.g("Viewbox Panel cannot contain more than one GraphObject.");var ce=l.j[0];ce.Hb=1;cj(ce);gh(ce,Infinity,Infinity,Kn,Ln);var Wh=ce.fa,nj=ce.margin,Mn=nj.right+nj.left,Nn=nj.top+nj.bottom;if(isFinite(lj)||isFinite(mj)){var Bp=ce.scale,On=Wh.width,Pn=Wh.height,Qn=Math.max(lj-Mn,0),Rn=Math.max(mj-
Nn,0);ce.Hb=this.Im===Kg?ce.Hb*Math.min(Qn/On,Rn/Pn):ce.Hb*Math.max(Qn/On,Rn/Pn);if(Bp!==ce.scale){ce.Yb=h;gh(ce,Infinity,Infinity,Kn,Ln)}}Wh=ce.fa;e.width=isFinite(lj)?lj:Math.max(Wh.width+Mn,0);e.height=isFinite(mj)?mj:Math.max(Wh.height+Nn,0);break;case "Link":var Sn=this instanceof bf?this.Om:this;if(n===0){var oj=this.Hc;jb(oj,0,0);var Md=this.fa;Md.Vd(0,0,0,0)}else{var pj=this.Qo(),Je=this.oj(),Ke=Je.copy();Ke.x=0;Ke.y=0;var Dg,kh=this.$v();Dg=this.Y!==f?this.Y:kh.count;for(var qj=new E(Infinity,
Infinity),Eg=0;Eg<Dg;Eg++){var Tn=kh.j[Eg];qj.x=Math.min(Tn.x,qj.x);qj.y=Math.min(Tn.y,qj.y)}this.ki=new E(Je.x,Je.y);this.gh.clear();if(pj!==m){uk(pj,Je.width,Je.height);Md=pj.fa;Ke.mk(Md);this.gh.add(Md)}for(var Fg=m,hg=m,Nf=m,Eg=0;Eg<n;Eg++){var lc=l.j[Eg];if(lc!==pj)if(lc.Mi&&lc instanceof X){uk(lc,Je.width,Je.height);Md=lc.fa;Ke.mk(Md);this.gh.add(Md)}else if(Dg<2){gh(lc,Infinity,Infinity);Md=lc.fa;Ke.mk(Md);this.gh.add(Md)}else{if(Fg===m){Fg=new Ya;hg=new E;Nf=new E}var Of=lc.Zg,Vn=lc.Ay,dl=
lc.xi;Pb(dl)&&(dl=Zb);var rj=lc.Kr,Cp=lc.By,Xh,Yh,sj=0;if(Of<-Dg||Of>=Dg){var Wn=Sn.nC,tj=Sn.mC;if(rj!==Ni){sj=vk(rj,tj);lc.Ka=sj}Xh=Wn.x-Je.x;Yh=Wn.y-Je.y}else{var lf,lh;if(Of>=0){lf=kh.j[Of];lh=Of<Dg-1?kh.j[Of+1]:lf}else{var el=Dg+Of;lf=kh.j[el];lh=el>0?kh.j[el-1]:lf}tj=Of>=0?lf.Oh(lh):lh.Oh(lf);if(rj!==Ni){sj=vk(rj,tj);lc.Mb=sj}Xh=lf.x+(lh.x-lf.x)*Vn-Je.x;Yh=lf.y+(lh.y-lf.y)*Vn-Je.y}gh(lc,Infinity,Infinity);var Md=lc.fa,oj=lc.la,Zh=0;if(lc instanceof X)Zh=lc.Na;var Xn=oj.width+Zh,Yn=oj.height+
Zh;Fg.reset();Fg.translate(-Md.x,-Md.y);Fg.scale(lc.scale,lc.scale);Fg.rotate(lc.Ka,Xn/2,Yn/2);var Zn=new J(0,0,Xn,Yn);hg.Mn(Zn,dl);Fg.ub(hg);var Dp=-hg.x+Zh/2,Ep=-hg.y+Zh/2;Nf.set(Cp);if(isNaN(Nf.x))Nf.x=Of>=0?hg.x+3:-(hg.x+3);if(isNaN(Nf.y))Nf.y=-(hg.y+3);Nf.rotate(tj);Xh=Xh+Nf.x;Yh=Yh+Nf.y;var $h=Zn;$h.set(Md);$h.x=Xh+Dp;$h.y=Yh+Ep;this.gh.add($h);Ke.mk($h)}}if(this.$e)for(var $n=this.Xh;$n.next();)gh($n.value,Infinity,Infinity);this.qk=Ke;var vj=this.ki;vj&&vj.Vd(vj.x+Ke.x,vj.y+Ke.y);jb(e,Ke.width||
0,Ke.height||0)}break;case "Grid":break;default:u.g("Unknown panel type: "+p)}var ne=e.width,oe=e.height,wj=this.padding,Fp=wj.top+wj.bottom,ne=ne+(wj.left+wj.right),oe=oe+Fp;if(isFinite(g.width))ne=g.width;if(isFinite(g.height))oe=g.height;ne=Math.min(j.width,ne);oe=Math.min(j.height,oe);ne=Math.max(i.width,ne);oe=Math.max(i.height,oe);ne=Math.max(c,ne);oe=Math.max(d,oe);e.width=ne;e.height=oe;q=this.Hc;jb(q,ne,oe);Ri(this,0,0,ne,oe)}};
function ok(a,b,c){for(var d=0;d<c;d++){var e=b.j[d];if(e.Mi===h)return a.yq=e}b=b.j[0];return a.yq=b}
ea.zi=function(a,b,c,d){var e=this.qk,g=this.wa,i=g.length,j=this.$D;j.reset();if(i===0){var k=this.oa;k.x=a;k.y=b;k.width=c;k.height=d}else{if(!this.ia.V()){var l=Ui(this),n=this.xc,q=n.width,p=n.height;q===c&&p===d&&(l=Oi);switch(l){case Oi:if(q>c||p>d){this.M();gh(this,q>c?c:q,p>d?d:p)}break;case Ad:this.Yb=h;gh(this,c,d,0,0);break;case Qi:this.Yb=h;gh(this,c,p,0,0);break;case Pi:this.Yb=h;gh(this,q,d,0,0)}}k=this.oa;k.x=a;k.y=b;k.width=c;k.height=d;var t=this.I.pb;switch(t){case "Position":for(var w=
e.x+this.padding.left,A=e.y+this.padding.top,F=0;F<i;F++){var H=g.j[F],x=H.fa,I=H.margin,y=H.position.x,G=H.position.y;j.x=isNaN(y)?-w:y-w;j.y=isNaN(G)?-A:G-A;j.x=j.x+I.left;j.y=j.y+I.top;j.width=x.width;j.height=x.height;H.visible&&H.mc(j.x,j.y,j.width,j.height)}break;case "Vertical":for(var fa=this.padding.left,R=this.padding.top,S=0;S<i;S++){var da=fa,ma=g.j[S],ua=ma.fa,sa=ma.margin,ib=sa.left+sa.right,db=ua.width,$a=Ui(ma);if(isNaN(ma.ia.width)&&$a===Ad||$a===Qi)db=Math.max(e.width-ib,0);var Oa=
db+ib,fb=ma.kb;if(Qb(fb))fb=this.Di;Nb(fb)||(fb=Zb);j.x=da+fb.offsetX+sa.left+(e.width*fb.x-Oa*fb.x);j.y=R+fb.offsetY+sa.top;j.width=db;j.height=ua.height;if(ma.visible){ma.mc(j.x,j.y,j.width,j.height);R=R+(ua.height+sa.bottom+sa.top)}}break;case "Horizontal":for(var Va=this.padding.top,vc=this.padding.left,Cd=0;Cd<i;Cd++){var Wa=Va,Fc=g.j[Cd],Dd=Fc.fa,qc=Fc.margin,Wb=qc.top+qc.bottom,gc=Dd.height,Gc=Ui(Fc);if(isNaN(Fc.ia.height)&&Gc===Ad||Gc===Pi)gc=Math.max(e.height-Wb,0);var Gb=gc+Wb,Hb=Fc.kb;
if(Qb(Hb))Hb=this.Di;Nb(Hb)||(Hb=Zb);j.x=vc+Hb.offsetX+qc.left;j.y=Wa+Hb.offsetY+qc.top+(e.height*Hb.y-Gb*Hb.y);j.width=Dd.width;j.height=gc;if(Fc.visible){Fc.mc(j.x,j.y,j.width,j.height);vc=vc+(Dd.width+qc.left+qc.right)}}break;case "Spot":var Ib=ok(this,g,i),Ce=Ib.fa,Oc=Ce.width,nd=Ce.height,Hc=this.padding,xc=Hc.left,ed=Hc.top;j.x=xc-e.x;j.y=ed-e.y;Ib.mc(j.x,j.y,Oc,nd);for(var rb=0;rb<i;rb++){var yc=g.j[rb];if(yc!==Ib){var Ed=yc.fa,Fd=Ed.width,qa=Ed.height,Ea=yc.kb;if(Qb(Ea))Ea=this.Di;Nb(Ea)||
(Ea=Zb);var zc=yc.xi;Qb(zc)&&(zc=Zb);j.x=Ea.x*Oc+Ea.offsetX-(zc.x*Fd-zc.offsetX);j.y=Ea.y*nd+Ea.offsetY-(zc.y*qa-zc.offsetY);j.x=j.x-e.x;j.y=j.y-e.y;yc.visible&&yc.mc(xc+j.x,ed+j.y,Fd,qa)}}break;case "Auto":var lb=ok(this,g,i),Pc=lb.fa,Gd=0;if(lb instanceof X)Gd=lb.Na;var od=new J(0,0,Pc.width-Gd,Pc.height-Gd),Jb=new J(0,0,1,1),vb=lb.margin,pd=vb.left,Qc=vb.top,Rc=this.padding,Ud=Rc.left,Vd=Rc.top;j.x=pd;j.y=Qc;j.width=Pc.width;j.height=Pc.height;lb.mc(Ud+j.x,Vd+j.y,j.width,j.height);var hc=pk(lb),
$b=qk(lb),Za=(new E).Mn(od,hc),Cb=(new E).Mn(od,$b);Jb.x=Za.x;Jb.y=Za.y;Jb.Wu(Cb);Jb.x=Jb.x+(pd+Ud+Gd/2);Jb.y=Jb.y+(Qc+Vd+Gd/2);for(var qd=0;qd<i;qd++){var ac=g.j[qd];if(ac!==lb){var wb=ac.fa,vb=ac.margin,Wd=Math.max(wb.width+vb.right+vb.left,0),Rb=Math.max(wb.height+vb.top+vb.bottom,0),bc=ac.kb;if(Qb(bc))bc=this.Di;Nb(bc)||(bc=Zb);j.x=Jb.width*bc.x+bc.offsetX-Wd*bc.x+vb.left+Jb.x;j.y=Jb.height*bc.y+bc.offsetY-Rb*bc.y+vb.top+Jb.y;j.width=Jb.width;j.height=Jb.height;ac.visible&&(tb(Jb.x,Jb.y,Jb.width,
Jb.height,j.x,j.y,wb.width,wb.height)?ac.mc(j.x,j.y,wb.width,wb.height):ac.mc(j.x,j.y,wb.width,wb.height,new J(Jb.x,Jb.y,Jb.width,Jb.height)))}}break;case "Table":for(var Xd=this.YD,De,rd,fd=Xd.length,Ic=0,cc=0;cc<fd;cc++)Xd[cc]&&(Ic=Math.max(Ic,Xd[cc].length));for(var Hd=Math.min(this.Hm,fd-1);Hd!==fd&&(this.ze[Hd]===f||this.ze[Hd].Fa===0);)Hd++;for(var Hd=Math.min(Hd,fd-1),cf=-this.ze[Hd].jb,Yd=Math.min(this.mm,Ic-1);Yd!==Ic&&(this.qe[Yd]===f||this.qe[Yd].Fa===0);)Yd++;for(var Yd=Math.min(Yd,Ic-
1),Zd=-this.qe[Yd].jb,cc=0;cc<fd;cc++)if(Xd[cc]){var Ic=Xd[cc].length,he=this.ce(cc);rd=he.jb+cf;for(var sd=0;sd<Ic;sd++)if(Xd[cc][sd]){var td=this.sd(sd);De=td.jb+Zd;for(var gb=Xd[cc][sd],ob=gb.length,Zc=0;Zc<ob;Zc++){for(var ha=gb[Zc],Ta=ha.fa,Ba=new eb(0,0),xb=1;xb<ha.rowSpan;xb++){if(cc+xb>=this.Mu)break;var ic=this.ce(cc+xb);Ba.height=Ba.height+ic.Fa}for(xb=1;xb<ha.VA;xb++){if(sd+xb>=this.$t)break;var ud=this.sd(sd+xb);Ba.width=Ba.width+ud.Fa}var vd=td.Fa+Ba.width,Qa=he.Fa+Ba.height;j.x=De;j.y=
rd;j.width=vd;j.height=Qa;var Sb=De,df=rd,Kf=vd,Ca=Qa,ia=ha.kb.copy();if(Qb(ia)){ia.Oa(this.Di);Nb(ia)||ia.Oa(Zb);var ie=td.kb;if(Nb(ie)){ia.x=ie.x;ia.offsetX=ie.offsetX}var Id=he.kb;if(Nb(Id)){ia.y=Id.y;ia.offsetY=Id.offsetY}}Nb(ia)||(ia=Zb);var Db=Ta.width,wd=Ta.height,Jd=ha.xd,Th=ha.Od,Db=Math.min(Jd.width,Db),wd=Math.min(Jd.height,wd),Db=Math.max(Th.width,Db),wd=Math.max(Th.height,wd),ef=ha.margin,vg=ef.left+ef.right,ff=ef.top+ef.bottom,je=gj(ha,he,td);if(isNaN(ha.ia.width)&&je===Ad||je===Qi)Db=
Math.max(vd-vg,0);if(isNaN(ha.ia.height)&&je===Ad||je===Pi)wd=Math.max(Qa-ff,0);var gf=wd+ff;j.x=j.x+(j.width*ia.x-(Db+vg)*ia.x+ia.offsetX+ef.left);j.y=j.y+(j.height*ia.y-gf*ia.y+ia.offsetY+ef.top);ha.visible&&(tb(Sb,df,Kf,Ca,j.x,j.y,Db,wd)?ha.mc(j.x,j.y,Db,wd):ha.mc(j.x,j.y,Db,wd,new J(Sb,df,Kf,Ca)))}}}for(cc=0;cc<i;cc++){ha=g.j[cc];if(ha instanceof v&&(ha.type===lk||ha.type===mk)){ha.Ml=this.Xd.copy();ha.xc=this.fa.B();var ke=this.oa.copy();ke.x=0;ke.y=0;ke.freeze();ha.Hc=this.la.B()}}break;case "Viewbox":var za=
g.j[0],xd=za.fa,ih=za.margin,cl=ih.top+ih.bottom,yb=Math.max(xd.width+(ih.right+ih.left),0),zb=Math.max(xd.height+cl,0),$d=za.kb;if(Qb($d))$d=this.Di;Nb($d)||($d=Zb);j.x=e.width*$d.x-yb*$d.x+$d.offsetX;j.y=e.height*$d.y-zb*$d.y+$d.offsetY;j.width=xd.width;j.height=xd.height;za.mc(j.x,j.y,j.width,j.height);break;case "Link":var Uh=this.Qo(),hf=0;if(Uh!==m&&hf<this.gh.count){var Sc=this.gh.j[hf];hf++;Uh.mc(Sc.x-this.qk.x,Sc.y-this.qk.y,Sc.width,Sc.height)}for(var wg=0;wg<i;wg++){var jh=g.j[wg];if(jh!==
Uh&&hf<this.gh.count){Sc=this.gh.j[hf];hf++;jh.mc(Sc.x-this.qk.x,Sc.y-this.qk.y,Sc.width,Sc.height)}}var Kb=this.$v(),jc=Kb.count;if(jc>=2&&this.$e)for(var jf=this.Xh;jf.next();){var Ac=jf.value,ae=jc,Ee=Kb,gd=Ac.Zg,Fe=Ac.Ay,le=Ac.xi;Pb(le)&&(le=Zb);var xg=Ac.Kr,Vh=Ac.By,Lf=f,me=f,kc=0;if(gd<-ae||gd>=ae){var yg=this.nC,Ld=this.mC;if(xg!==Ni){kc=vk(xg,Ld);Ac.Ka=kc}Lf=yg.x;me=yg.y}else{var Bc=f,Ge=f;if(gd>=0){Bc=Ee.j[gd];Ge=gd<ae-1?Ee.j[gd+1]:Bc}else var kf=ae+gd,Bc=Ee.j[kf],Ge=kf>0?Ee.j[kf-1]:Bc;Ld=
gd>=0?Bc.Oh(Ge):Ge.Oh(Bc);if(xg!==Ni){kc=vk(xg,Ld);Ac.Ka=kc}Lf=Bc.x+(Ge.x-Bc.x)*Fe;me=Bc.y+(Ge.y-Bc.y)*Fe}var He=new Ya;He.scale(Ac.scale,Ac.scale);He.rotate(Ac.Ka,0,0);var zg=Ac.la,Ag=new J(0,0,zg.width,zg.height),be=new E;be.Mn(Ag,le);He.ub(be);var Mf=-be.x,Cg=-be.y,Ie=Vh.copy();if(isNaN(Ie.x))Ie.x=gd>=0?be.x+3:-(be.x+3);if(isNaN(Ie.y))Ie.y=-(be.y+3);Ie.rotate(Ld);Lf=Lf+Ie.x;me=me+Ie.y;He.qD(Ag);Mf=Mf+Ag.x;Cg=Cg+Ag.y;Ac.position=new E(Lf+Mf,me+Cg)}break;case "Grid":break;default:u.g("Unknown panel type: "+
t)}}};ea.Bi=function(a){var b=this.la;if(tb(0,0,b.width,b.height,a.x,a.y)){for(var c=this.wa.length,b=new E;c--;){var d=this.wa.j[0];if(d.visible||d===this.tb){ab(b.set(a),d.transform);if(d.da(b))return h}}return this.fh===m&&this.eh===m?o:h}return o};function wk(a,b,c){c(a,b);if(b instanceof v)for(b=b.elements;b.next();)wk(a,b.value,c)}function ni(a,b,c){c(b);for(b=b.elements;b.next();){var d=b.value;d instanceof v&&ni(a,d,c)}}
function xk(a,b,c){if(c(b))return b;if(b instanceof v)for(b=b.elements;b.next();){var d=xk(a,b.value,c);if(d!==m){b.Ff();return d}}return m}v.prototype.findObject=v.prototype.Le=function(a){if(this.name===a)return this;for(var b=this.elements;b.next();){var c=b.value;if(c.name===a)return c;if(c instanceof v&&!c.CF()){c=c.Le(a);if(c!==m)return c}}return m};Q.prototype.findObjectByPred=v.prototype.wB=function(a){return a(this)?this:yk(this,a)};
function yk(a,b){for(var c=a.elements;c.next();){var d=c.value;if(b(d))return d;if(d instanceof v){d=yk(d,b);if(d!==m)return d}}return m}
v.prototype.Xc=function(a,b,c){if(this.pd===o)return m;if(this.I===Ph){if(this.pd===o)a=m;else if(this.Fc)a=m;else{b=this.la;a=tb(0,0,b.width,b.height,a.x,a.y)?this:m}return a}b===f&&(b=m);c===f&&(c=m);if(this.Fc)return m;var d=this.la,e=1/this.ml();if(tb(-(5*e),-(5*e),d.width+10*e,d.height+10*e,a.x,a.y)){for(var g=this.wa.length,e=new E;g--;){var i=this.wa.j[g];if(i.visible||i===this.tb){ab(e.set(a),i.transform);var j=m;i instanceof v?j=i.Xc(e,b,c):i.pd===h&&i.da(e)&&(j=i);if(j!==m){b!==m&&(j=b(j));
if(j&&(c===m||c(j)))return j}}}return this.background===m&&this.Lg===m?m:tb(0,0,d.width,d.height,a.x,a.y)?this:m}return m};
v.prototype.gn=function(a,b,c,d){if(this.pd===o)return o;if(this.I===Ph){if(this.pd===o)a=o;else{!(d instanceof z)&&!(d instanceof la)&&new z(Q);b=this.la;a=tb(0,0,b.width,b.height,a.x,a.y)?this.background!==m||this.Lg!==m:o}return a}b===f&&(b=m);c===f&&(c=m);!(d instanceof z)&&!(d instanceof la)&&(d=new z(Q));var e=this.la;if(tb(0,0,e.width,e.height,a.x,a.y)){for(var g=this.wa.length,e=new E;g--;){var i=this.wa.j[g];if(i.visible||i===this.tb){ab(e.set(a),i.transform);if((i instanceof v?i.gn(e,b,
c,d):i.da(e))&&i.pd!==o){b!==m&&(i=b(i));i&&(c===m||c(i))&&d.add(i)}}}return this.background!==m||this.Lg!==m}return o};
v.prototype.ll=function(a,b,c,d,e,g){if(this.pd===o)return o;if(this.I===Ph){if(this.pd===o)a=o;else{g===f&&(g=new Ya);b===f&&(b=m);c===f&&(c=m);g.multiply(this.transform);if(this.cu(a,g)){Ti(this,b,c,e);a=h}else a=this.de(a,g)?d:o}return a}g===f&&(g=new Ya);b===f&&(b=m);c===f&&(c=m);g.multiply(this.transform);if(this.cu(a,g)){Ti(this,b,c,e);return h}if(this.de(a,g)){for(var i=this.wa.length;i--;){var j=this.wa.j[i];if(j.visible||j===this.tb){var k=j.oa,l=this.oa;if(!(k.x>l.width||k.y>l.height||k.x+
k.width<0||k.y+k.height<0)){if(j instanceof v)k=j.ll(a,b,c,d,e,g.copy());else{var k=j,l=a,n=d,q=g.copy();if(k.pd===o)k=o;else{q===f&&(q=new Ya);q.multiply(k.transform);k=n?k.de(l,q):k.cu(l,q)}}if(k){b!==m&&(j=b(j));j&&(c===m||c(j))&&e.add(j)}}}}return d}return o};
v.prototype.hn=function(a,b,c,d,e){if(this.pd===o)return o;if(this.I===Ph){if(this.pd===o)a=o;else{c=this.la;b=a.Ph(b);a=a.x>0&&a.x<c.width&&a.y>0&&a.y<c.height||bb(a.x,a.y,0,0,0,c.height)<b||bb(a.x,a.y,0,c.height,c.width,c.height)<b||bb(a.x,a.y,c.width,c.height,c.width,0)<b||bb(a.x,a.y,c.width,0,0,0)<b?h:o}return a}c===f&&(c=m);d===f&&(d=m);var g=this.la,i=a.Ph(b);if(a.x>0&&a.x<g.width&&a.y>0&&a.y<g.height||bb(a.x,a.y,0,0,0,g.height)<i||bb(a.x,a.y,0,g.height,g.width,g.height)<i||bb(a.x,a.y,g.width,
g.height,g.width,0)<i||bb(a.x,a.y,g.width,0,0,0)<i){for(var g=new E,i=new E,j=this.wa.length;j--;){var k=this.wa.j[j];if(k.visible||k===this.tb){var l=k.oa,n=this.oa;if(!(l.x>n.width||l.y>n.height||l.x+l.width<0||l.y+l.height<0)){l=k.transform;ab(g.set(a),l);ab(i.set(b),l);if(k instanceof v?k.hn(g,i,c,d,e):k.xB(g,i)){c!==m&&(k=c(k));k&&(d===m||d(k))&&e.add(k)}}}}return h}return o};
function pk(a){var b=a.n;if(b===f||b===Ub)b=m;if(b===m&&a instanceof X){a=a.ta;if(a!==m)b=a.n}b===m&&(b=Vb);return b}function qk(a){var b=a.o;if(b===f||b===Ub)b=m;if(b===m&&a instanceof X){a=a.ta;if(a!==m)b=a.o}b===m&&(b=fc);return b}v.prototype.add=v.prototype.add=function(a){u.c(a,Q,v,"add:element");this.dc(this.wa.count,a)};v.prototype.elt=v.prototype.Z=function(a){return this.wa.Z(a)};
v.prototype.insertAt=v.prototype.dc=function(a,b){b instanceof T&&u.g("Cannot add a Part to a Panel: "+b);if(this===b||this.Wh(b)){this===b&&u.g("Cannot make a Panel contain itself: "+this.toString());u.g("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+b.toString())}this.I===Ph&&!(b instanceof X)&&u.g("Can only add Shapes to a Grid Panel, not: "+b);b.yl(this);b.ri=m;var c=this.wa;c.dc(a,b);a>=c.count&&(a=c.count-1);this.M();b.M();c=this.W;c!==m&&c.ke(ve,"elements",
this,m,b,m,a)};v.prototype.remove=v.prototype.remove=function(a){u.c(a,Q,v,"remove:element");for(var b=this.wa,c=b.count,d=-1,e=0;e<c;e++)if(b.j[e]===a){d=e;break}d!==-1&&this.ud(d)};v.prototype.removeAt=v.prototype.Se=function(a){s&&u.i(a,v,"removeAt:idx");a>=0&&this.ud(a)};
v.prototype.ud=function(a){var b=this.wa,c=b.Z(a);c.ri=m;if(this.qh!==m){var d=c.data;typeof d==="object"&&this.qh.remove(d)}b.Se(a);this.Yb=o;this.M();if(this instanceof W&&c===this.ri)this.ri=m;b=this.W;b!==m&&b.ke(we,"elements",this,c,m,a,m)};u.m(v,{Mu:"rowCount"},function(){return this.ze.length});
v.prototype.getRowDefinition=v.prototype.ce=function(a){s&&u.i(a,v,"getRowDefinition:idx");a<0&&u.ha(a,">= 0",v,"getRowDefinition:idx");var a=Math.round(a),b=this.ze;if(b[a]===f){var c=new Fj;c.yl(this);c.Hk=h;c.T=a;b[a]=c}return b[a]};v.prototype.removeRowDefinition=v.prototype.PJ=function(a){s&&u.i(a,v,"removeRowDefinition:idx");a<0&&u.ha(a,">= 0",v,"removeRowDefinition:idx");var a=Math.round(a),b=this.ze;b[a]&&(b[a]=f)};u.m(v,{$t:"columnCount"},function(){return this.qe.length});
v.prototype.getColumnDefinition=v.prototype.sd=function(a){s&&u.i(a,v,"getColumnDefinition:idx");a<0&&u.ha(a,">= 0",v,"getColumnDefinition:idx");var a=Math.round(a),b=this.qe;if(b[a]===f){var c=new Fj;c.yl(this);c.Hk=h;c.T=a;b[a]=c}return b[a]};v.prototype.removeColumnDefinition=v.prototype.NJ=function(a){s&&u.i(a,v,"removeColumnDefinition:idx");a<0&&u.ha(a,">= 0",v,"removeColumnDefinition:idx");var a=Math.round(a),b=this.qe;b[a]&&(b[a]=f)};u.a(v,"rowSizing",v.prototype.SC);
u.defineProperty(v,{SC:"rowSizing"},r("gq"),function(a){var b=this.gq;if(b!==a){a!==kk&&a!==tk&&u.g("rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None");this.gq=a;this.M();this.d("rowSizing",b,a)}});u.a(v,"columnSizing",v.prototype.UA);
u.defineProperty(v,{UA:"columnSizing"},r("jo"),function(a){var b=this.jo;if(b!==a){a!==kk&&a!==tk&&u.g("columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None");this.jo=a;this.M();this.d("columnSizing",b,a)}});u.a(v,"topIndex",v.prototype.HG);u.defineProperty(v,{HG:"topIndex"},r("Hm"),function(a){var b=this.Hm;if(b!==a){(!isFinite(a)||a<0)&&u.g("topIndex must be greater than zero and a real number. Was "+a);this.Hm=a;dj(this);this.d("topIndex",b,a)}});
u.a(v,"leftIndex",v.prototype.KF);u.defineProperty(v,{KF:"leftIndex"},r("mm"),function(a){var b=this.mm;if(b!==a){(!isFinite(a)||a<0)&&u.g("leftIndex must be greater than zero and a real number. Was "+a);this.mm=a;dj(this);this.d("leftIndex",b,a)}});u.a(v,"data",v.prototype.data);
u.defineProperty(v,{data:"data"},r("Vl"),function(a){var b=this.Vl;if(b!==a){var c=this instanceof T&&!(this instanceof bf);c&&u.e(a,"object",v,"data");nf(this);this.Vl=a;var d=this.b;if(d!==m)if(c){b!==m&&d.Ef.remove(b);a!==m&&d.Ef.add(a,this)}else{c=this.U;if(c!==m&&c.qh!==m){b!==m&&c.qh.remove(b);a!==m&&c.qh.add(a,this)}}this.d("data",b,a);a!==m&&this.fc()}});function Bj(a){a=a.tk;return a!==m&&a.Ha}
function nf(a){var b=a.tk;if(b===m){a.data!==m&&u.g("Template cannot have .data be non-null: "+a);a.tk=b=new z(Se)}else if(b.Ha)return;var c=new z(Q);wk(a,a,function(a,d){var e=d.Nb;if(e!==m){d.Ol=o;for(var g=e.f;g.next();){e=g.value;if(e.mode===Ue)d.Ol=h;var i=e.On;if(i!==m){var p=a;i!==""&&(p=a.Le(i));if(p!==m){c.add(p);if(p.uq===f)p.uq=new z(Se);p.uq.add(e)}}b.add(e)}}if(d instanceof v){if(d.ze.length>0){g=d.ze;i=g.length;for(p=0;p<i;p++){var t=g[p];if(t!==f&&t.Nb!==m)for(var w=t.Nb.f;w.next();){e=
w.value;e.cf=t;e.Qw=2;e.It=t.index;b.add(e)}}}if(d.qe.length>0){g=d.qe;i=g.length;for(p=0;p<i;p++){t=g[p];if(t!==f&&t.Nb!==m)for(w=t.Nb.f;w.next();){e=w.value;e.cf=t;e.Qw=1;e.It=t.index;b.add(e)}}}}});for(var d=c.f;d.next();){var e=d.value;if(e.uq!==f){e.Ol=h;for(var g=e.uq.f;g.next();){var i=g.value;if(e.Nb===m)e.Nb=new z(Se);e.Nb.add(i)}}delete e.uq}for(d=b.f;d.next();){e=d.value;g=e.cf;if(g!==m){e.cf=m;if(g===a)e.Cl="";else{if(g instanceof Fj)g=g.U;e.Cl=g.name!==""?g.name:g.name="_"+u.cc(g)}}}b.freeze()}
v.prototype.updateTargetBindings=v.prototype.fc=function(a){var b=this.tk;if(b!==m){a===f&&(a="");for(b=b.f;b.next();){var c=b.value,d=c.Gy;if(!(a!==""&&d!==a)){d=c.Ly;if(!(c.XA===m&&d==="")){var d=this.data,e=c.On;e!==m&&(d=this.Le(e));if(d===m)s&&u.trace("Binding error: missing GraphObject named "+e+" in "+this.toString());else{var e=this,g=c.Cl;if(g!==""){e=this.Le(g);if(e===m)continue}else if(c.cf!==m)e=c.cf;g=c.Qw;if(g!==0){if(!(e instanceof v))continue;g===1?e=e.sd(c.It):g===2&&(e=e.ce(c.It))}e!==
f&&c.wD(e,d)}}}}}};u.a(v,"itemArray",v.prototype.YB);u.defineProperty(v,{YB:"itemArray"},r("xj"),function(a){var b=this.xj;if(b!==a){s&&(a!==m&&!u.isArray(a))&&u.g("Panel.itemArray must be an Array-like object or null, not: "+a);var c=this.b;c!==m&&b!==m&&qi(c,this);this.xj=a;c!==m&&a!==m&&oi(c,this);this.d("itemArray",b,a);this.xy()}});v.prototype.rebuildItemElements=v.prototype.xy=function(){for(;this.wa.length>0;)this.ud(0);var a=this.YB;if(a!==m)for(var b=u.vb(a),c=0;c<b;c++)zh(this,u.lb(a,c))};
function zh(a,b,c){if(!(b===f||b===m)){var d=a.getCategoryForItemData(b),e=a.ZB,g=m;e!==m&&(g=e.$(d));if(g===m){if(u.eE===f){u.eE=h;u.trace('No item template Panel found for category "'+d+'" on '+a);u.trace("  Using default item template.")}g=a.b.LD}if(g instanceof v){nf(g);e=g.copy();if(typeof b==="object"){if(a.qh===m)a.qh=new ka(Object,v);a.qh.add(b,e)}typeof c==="number"?a.dc(c,e):a.add(e);e.kw=d;e.data=b}}}v.prototype.isItemPanel=v.prototype.CF=function(){return this.xj!==m||this.Jf!==m};
u.a(v,"itemTemplate",v.prototype.GF);u.defineProperty(v,{GF:"itemTemplate"},function(){return this.Jf===m?m:this.Jf.$("")},function(a){if(this.Jf===m)this.Jf=new ka("string",v);var b=this.Jf.$("");if(b!==a){u.c(a,v,v,"itemTemplate");a instanceof T&&u.g("itemTemplate must not be a Part: "+a);this.Jf.add("",a);this.d("itemTemplate",b,a);this.xy()}});u.a(v,"itemTemplateMap",v.prototype.ZB);
u.defineProperty(v,{ZB:"itemTemplateMap"},r("Jf"),function(a){var b=this.Jf;if(b!==a){u.c(a,ka,v,"itemTemplateMap");for(var c=a.f;c.next();){var d=c.value;d instanceof T&&u.g("Template in itemTemplateMap must not be a Part: "+d)}this.Jf=a;this.d("itemTemplateMap",b,a);this.xy()}});u.a(v,"itemCategoryProperty",v.prototype.FF);
u.defineProperty(v,{FF:"itemCategoryProperty"},r("im"),function(a){var b=this.im;if(b!==a){typeof a!=="string"&&typeof a!=="function"&&u.sc(a,"string or function",v,"itemCategoryProperty");this.im=a;this.d("itemCategoryProperty",b,a)}});
v.prototype.getCategoryForItemData=v.prototype.EI=function(a){if(a===m)return"";var b=this.im;if(typeof b==="function")b=b(a);else if(typeof b==="string"&&typeof a==="object"){if(b==="")return"";b=u.Wa(a,b)}else return"";if(b===f)return"";if(typeof b==="string")return b;s&&u.trace("Panel.getCategoryForItemData found a non-string category for "+a+": "+b);return""};
function Fj(){u.Fb(this);this.Gj=m;this.Hk=h;this.T=0;this.Be=NaN;this.Nk=0;this.Mk=Infinity;this.ja=Ub;this.jb=this.Fa=0;this.Nb=m;this.rq=zk;this.Cg=Jg}u.H("RowColumnDefinition",Fj);Fj.prototype.copy=function(){var a=new Fj;a.Hk=this.Hk;a.T=this.T;a.Be=this.Be;a.Nk=this.Nk;a.Mk=this.Mk;a.ja=this.ja;a.Fa=this.Fa;a.jb=this.jb;a.Cg=this.Cg;a.rq=this.rq;a.Nb=this.Nb;return a};var zk;Fj.Default=zk=u.l(Fj,"Default",0);var tk;Fj.None=tk=u.l(Fj,"None",1);var kk;
Fj.ProportionalExtra=kk=u.l(Fj,"ProportionalExtra",2);Fj.prototype.yl=ba("Gj");function rk(a,b){a.Fa=isNaN(a.Be)?Math.max(Math.min(a.Mk,b),a.Nk):Math.max(Math.min(a.Mk,a.Be),a.Nk)}Fj.prototype.qd=function(a,b,c,d,e){var g=this.Gj;if(g!==m){g.M();for(var i=this.Au,j=g.wa,k=j.length,l=0;l<k;l++){var n=j.j[l];(i?n.kd:n.hd)===this.index&&n.M()}g.ke(ue,a,this,b,c,d,e);if(this.Nb!==m){b=g.gr();if(b!==m){b=b.data;if(b!==m)for(c=this.Nb.f;c.next();)c.value.vD(this,b,a)}}}};u.m(Fj,{U:"panel"},r("Gj"));
u.m(Fj,{Au:"isRow"},r("Hk"));u.m(Fj,{index:"index"},r("T"));u.a(Fj,"height",Fj.prototype.height);u.defineProperty(Fj,{height:"height"},r("Be"),function(a){s&&u.e(a,"number",Fj,"height");a<0&&u.ha(a,">= 0",Fj,"height");var b=this.Be;if(b!==a){this.Be=a;rk(this,this.Fa);this.qd("size",b,a)}});u.a(Fj,"width",Fj.prototype.width);
u.defineProperty(Fj,{width:"width"},r("Be"),function(a){s&&u.e(a,"number",Fj,"width");a<0&&u.ha(a,">= 0",Fj,"width");var b=this.Be;if(b!==a){this.Be=a;rk(this,this.Fa);this.qd("size",b,a)}});u.a(Fj,"minimum",Fj.prototype.nf);u.defineProperty(Fj,{nf:"minimum"},r("Nk"),function(a){s&&u.e(a,"number",Fj,"minimum");(a<0||!isFinite(a))&&u.ha(a,">= 0",Fj,"minimum");var b=this.Nk;if(b!==a){this.Nk=a;rk(this,this.Fa);this.qd("minimum",b,a)}});u.a(Fj,"maximum",Fj.prototype.yd);
u.defineProperty(Fj,{yd:"maximum"},r("Mk"),function(a){s&&u.e(a,"number",Fj,"maximum");a<0&&u.ha(a,">= 0",Fj,"maximum");var b=this.Mk;if(b!==a){this.Mk=a;rk(this,this.Fa);this.qd("maximum",b,a)}});u.a(Fj,"alignment",Fj.prototype.kb);u.defineProperty(Fj,{kb:"alignment"},r("ja"),function(a){var b=this.ja;if(!b.u(a)){s&&u.c(a,K,Fj,"alignment");this.ja=a.B();this.qd("alignment",b,a)}});u.a(Fj,"stretch",Fj.prototype.$g);
u.defineProperty(Fj,{$g:"stretch"},r("Cg"),function(a){var b=this.Cg;if(b!==a){s&&u.Sa(a,Q,Fj,"stretch");this.Cg=a;this.qd("stretch",b,a)}});u.a(Fj,"sizing",Fj.prototype.Pr);u.defineProperty(Fj,{Pr:"sizing"},r("rq"),function(a){var b=this.rq;if(b!==a){s&&u.Sa(a,Fj,Fj,"sizing");this.rq=a;this.qd("sizing",b,a)}});function sk(a){if(a.Pr===zk){var b=a.Gj;return a.Au?b.SC:b.UA}return a.Pr}u.m(Fj,{Ee:"actual"},r("Fa"));u.m(Fj,{position:"position"},r("jb"));
Fj.prototype.bind=Fj.prototype.bind=function(a){a.cf=this;var b=this.U;if(b!==m){b=b.gr();b!==m&&Bj(b)&&u.g("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a)}if(this.Nb===m)this.Nb=new z(Se);this.Nb.add(a)};function X(){Q.call(this);this.ta=m;this.Ho="None";this.Ah=o;this.Po=Jg;this.wk=m;this.lc=this.Ve="black";this.Eh=1;this.Bm="butt";this.Cm="miter";this.Dm=10;this.Ch=this.Bh=Ub;this.Qp=this.Pp=0;this.fp=h;this.aE=new J;this.cm=this.Gm="None";this.Yo=1}u.H("Shape",X);
u.ma(X,Q);X.prototype.eb=function(a){Q.prototype.eb.call(this,a);a.ta=this.ta;a.Ho=this.Ho;a.Ah=this.Ah;a.Po=this.Po;a.wk=this.wk;a.Ve=this.Ve;a.lc=this.lc;a.Eh=this.Eh;a.Bm=this.Bm;a.Cm=this.Cm;a.Dm=this.Dm;a.Bh=this.Bh.B();a.Ch=this.Ch.B();a.Pp=this.Pp;a.Qp=this.Qp;a.fp=this.fp;a.Gm=this.Gm;a.cm=this.cm;a.Yo=this.Yo};X.prototype.toString=function(){return"Shape("+(this.Ua!=="None"?this.Ua:this.Fl!=="None"?this.Fl:this.uu)+")#"+u.cc(this)};
X.prototype.ar=function(a){if(!(this.lc===m&&this.Ve===m)){this.Ve!==m&&aj(this,a,this.Ve,h);this.lc!==m&&aj(this,a,this.lc,o);a.lineWidth=this.Eh;a.lineJoin=this.Cm;a.lineCap=this.Bm;a.miterLimit=this.Dm;var b=h;this.lc!==m&&this.Ve===m&&(b=o);var c=this.ta;if(c!==m)if(c.I===Bd){a.beginPath();a.moveTo(c.Ib,c.Tb);a.lineTo(c.vc,c.Ec);this.Ve!==m&&a.fill();this.lc!==m&&a.stroke()}else if(c.I===Kd){var d=c.Ib,e=c.Tb,g=c.vc,c=c.Ec,i=Math.min(d,g),j=Math.min(e,c),d=Math.abs(g-d),e=Math.abs(c-e);this.Ve!==
m&&a.fillRect(i,j,d,e);if(this.lc!==m){if(b){var k=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}a.strokeRect(i,j,d,e);if(b){a.shadowOffsetX=k[0];a.shadowOffsetY=k[1];a.shadowBlur=k[2]}}}else if(c.I===Nd){d=c.Ib;e=c.Tb;g=c.vc;c=c.Ec;i=Math.abs(g-d)/2;j=Math.abs(c-e)/2;d=Math.min(d,g)+i;e=Math.min(e,c)+j;a.beginPath();a.moveTo(d,e-j);a.bezierCurveTo(d+Cc*i,e-j,d+i,e-Cc*j,d+i,e);a.bezierCurveTo(d+i,e+Cc*j,d+Cc*i,e+j,d,e+j);a.bezierCurveTo(d-Cc*i,e+
j,d-i,e+Cc*j,d-i,e);a.bezierCurveTo(d-i,e-Cc*j,d-Cc*i,e-j,d,e-j);a.closePath();this.Ve!==m&&a.fill();if(this.lc!==m){if(b){k=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}a.stroke();if(b){a.shadowOffsetX=k[0];a.shadowOffsetY=k[1];a.shadowBlur=k[2]}}}else if(c.I===yd){e=c.Ak;c=e.length;for(d=0;d<c;d++){b=e.j[d];a.beginPath();a.moveTo(b.La,b.Ma);g=b.rb.j;i=g.length;for(j=0;j<i;j++){var l=g[j];switch(l.I){case Rd:a.moveTo(l.aa,l.ba);break;case Qd:a.lineTo(l.aa,
l.ba);break;case Sd:a.bezierCurveTo(l.Hj,l.Ij,l.Qk,l.Rk,l.Sk,l.Tk);break;case Td:a.quadraticCurveTo(l.Hj,l.Ij,l.Sk,l.Tk);break;case de:var n=Math.PI/180;a.arc(l.Ql,l.Rl,l.vy,l.hk*n,(l.hk+l.Bl)*n,l.Bl<0?h:o);break;default:u.g("Segment not of valid type")}l.ii&&a.closePath()}if(b.$o===h&&this.Ve!==m){a.fill();b=h}else b=b.Ze?o:h;if(this.lc!==m){if(b){k=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}a.stroke();if(b){a.shadowOffsetX=k[0];a.shadowOffsetY=
k[1];a.shadowBlur=k[2]}}}}}};X.prototype.gg=function(){Q.prototype.gg.call(this);var a=this.b;if(a!==m){Ei(a,"fill",this.fill);Ei(a,"geometry",this.jr);this.jn!==Jg&&Ei(a,"geometryStretch",this.jn);Ei(a,"stroke",this.stroke);this.Iy!=="butt"&&Ei(a,"strokeCap",this.Iy);this.Jy!=="miter"&&Ei(a,"strokeJoin",this.Jy);this.Ky!==10&&Ei(a,"strokeMiterLimit",this.Ky);Ei(a,"strokeWidth",this.Na)}};
X.prototype.getDocumentPoint=X.prototype.sb=function(a){Pb(a)&&u.g("Spot must be real");var b=this.la,c=this.Na,a=new E(a.x*(b.width+c)-c/2+b.x+a.offsetX,a.y*(b.height+c)-c/2+b.y+a.offsetY);this.Xd.ub(a);return a};
X.prototype.Bi=function(a,b){var c=this.ta;if(c===m||this.fill===m&&this.stroke===m)return o;var d=c.fb,e=this.Na/2;c.type===Bd&&!b&&(e=e+2);var g=this.aE;g.set(d);g.hf(e+2,e+2);if(!g.da(a))return o;d=e+1E-4;if(c.type===Bd){if(this.stroke===m)return o;d=(c.aa-c.La)*(a.x-c.La)+(c.ba-c.Ma)*(a.y-c.Ma);return(c.La-c.aa)*(a.x-c.aa)+(c.Ma-c.ba)*(a.y-c.ba)<0||d<0?o:Nc(c.La,c.Ma,c.aa,c.ba,e,a.x,a.y)}if(c.type===Kd){var i=c.La,j=c.Ma,k=c.aa,l=c.ba,c=Math.min(i,k),n=Math.min(j,l),i=Math.abs(k-i),j=Math.abs(l-
j);g.x=c;g.y=n;g.width=i;g.height=j;if(this.fill===m){g.hf(-d,-d);if(g.da(a))return o;g.hf(d,d)}this.stroke!==m&&g.hf(e,e);return g.da(a)}if(c.type===Nd){i=c.La;j=c.Ma;k=c.aa;l=c.ba;c=Math.min(i,k);n=Math.min(j,l);i=Math.abs(k-i);j=Math.abs(l-j);g=i/2;j=j/2;c=a.x-(c+g);n=a.y-(n+j);if(this.fill===m){g=g-d;j=j-d;if(g<=0||j<=0||c*c/(g*g)+n*n/(j*j)<=1)return o;g=g+d;j=j+d}if(this.stroke!==m){g=g+e;j=j+e}return g<=0||j<=0?o:c*c/(g*g)+n*n/(j*j)<=1}if(c.type===yd)return this.fill===m?ge(c,a.x,a.y,e):c.da(a,
e,this.Na>1,b);u.g("Unknown Geometry type");return o};
X.prototype.wr=function(a,b,c,d){var e=this.ia,g=this.Eh,a=Math.max(a,0),b=Math.max(b,0),i;if(this.Ah)i=this.ta.fb;else{Ak[this.Ua]===f&&u.g("Unsupported Figure:"+this.Ua);i=Ak[this.Ua].fb}var j=i.width,k=i.height,l=i.width;i=i.height;switch(Ui(this)){case Oi:d=c=0;break;case Ad:l=Math.max(a-g,0);i=Math.max(b-g,0);break;case Qi:l=Math.max(a-g,0);d=0;break;case Pi:c=0;i=Math.max(b-g,0)}if(isFinite(e.width))l=e.width;if(isFinite(e.height))i=e.height;var e=this.xd,n=this.Od,c=Math.max(c/this.scale,n.width)-
g,d=Math.max(d/this.scale,n.height)-g,l=Math.min(e.width,l);i=Math.min(e.height,i);l=Math.max(c,l);i=Math.max(d,i);c=this.jn;c=this.Ah?c===Jg?Ad:c:c===Jg?Ak[this.Ua].Gb:c;switch(c){case Oi:break;case Ad:j=l;k=i;break;case Kg:l=Math.min(l/j,i/k);isFinite(l)||(l=1);j=j*l;k=k*l;break;default:u.g(c+"is not a valid geometryStretch.")}if(this.Ah){d=this.jr;i=j;c=k;l=d.copy();d=d.fb;i=i/d.width;c=c/d.height;isFinite(i)||(i=1);isFinite(c)||(c=1);if(!(i===1&&c===1)){switch(l.type){case Bd:case Kd:case Nd:l.Ib=
l.Ib*i;l.Tb=l.Tb*c;l.vc=l.vc*i;l.Ec=l.Ec*c;break;case yd:d=l.qc;e=d.length;for(n=0;n<e;n++){var q=d.j[n];q.La=q.La*i;q.Ma=q.Ma*c;for(var q=q.rb,p=q.length,t=0;t<p;t++){var w=q.j[t];switch(w.type){case Qd:w.aa=w.aa*i;w.ba=w.ba*c;break;case Sd:w.Hj=w.Hj*i;w.Ij=w.Ij*c;w.Qk=w.Qk*i;w.Rk=w.Rk*c;w.vc=w.vc*i;w.Ec=w.Ec*c;break;case Td:w.zd=w.zd*i;w.rf=w.rf*c;w.aa=w.aa*i;w.ba=w.ba*c;break;default:u.g("Unknown Segment type: "+w.type)}}}}l.Ea=h}this.ta=l}else if(this.ta===m||this.ta.Hs!==a||this.ta.Gs!==b){l=
j;i=k;d=this.ia;c=d.width;d=d.height;l!==f&&(!isNaN(l)&&isFinite(l))&&(c=l);i!==f&&(!isNaN(i)&&isFinite(i))&&(d=i);isFinite(c)||(c=100);isFinite(d)||(d=100);e=f;if(this.Fl!=="None")e=Bk(this.Fl);else if(this.uu!=="None")e=Bk(this.uu);else{n=Ck[this.Ua];typeof n==="string"&&(n=Ck[n]);n===f&&u.g("Unknown Shape.figure: "+this.Ua);e=n(this,c,d);e.Gc=new eb(c,d)}if(e===f)(n=Ck.Rectangle)&&(e=n(this,c,d));e.Hs=l;e.Gs=i;this.ta=e}i=this.ta.fb;Ri(this,i.x-g/2,i.y-g/2,a===0&&j===0?0:i.width+g,b===0&&k===0?
0:i.height+g)};function uk(a,b,c){if(a.Yb!==o){a.xc.xa();var d=a.Eh*a.Hb;Ri(a,-(d/2),-(d/2),b+d,c+d);b=a.xc;c=a.xd;d=a.Od;b.width=Math.min(c.width,b.width);b.height=Math.min(c.height,b.height);b.width=Math.max(d.width,b.width);b.height=Math.max(d.height,b.height);a.xc.freeze();a.xc.V()||u.g("Non-real measuredBounds has been set");a.Yb=o}}X.prototype.zi=function(a,b,c,d){Xi(this,a,b,c,d)};
X.prototype.vu=function(a,b,c){var d=this.transform.copy();d.xu();var e=Ab(d,a),g=Ab(d,b),i=this.Na/2,d=this.ta;if(d===m){gh(this,Infinity,Infinity);d=this.ta}var j=d.fb,k=o;if(d.type===Bd)if(this.Na<=1.5)k=ad(d.Ib,d.Tb,d.vc,d.Ec,e.x,e.y,g.x,g.y,c);else{if(d.Ib===d.vc){a=i;k=0}else{a=(d.Ec-d.Tb)/(d.vc-d.Ib);k=i/Math.sqrt(1+a*a);a=k*a}i=[];b=new E;ad(d.Ib+a,d.Tb+k,d.vc+a,d.Ec+k,e.x,e.y,g.x,g.y,b)&&i.push(b);b=new E;ad(d.Ib-a,d.Tb-k,d.vc-a,d.Ec-k,e.x,e.y,g.x,g.y,b)&&i.push(b);b=new E;ad(d.Ib+a,d.Tb+
k,d.Ib-a,d.Tb-k,e.x,e.y,g.x,g.y,b)&&i.push(b);b=new E;ad(d.vc+a,d.Ec+k,d.vc-a,d.Ec-k,e.x,e.y,g.x,g.y,b)&&i.push(b);if(i.length===0)return o;k=h;g=Infinity;for(j=0;j<i.length;j++){var d=i[j],l=(d.x-e.x)*(d.x-e.x)+(d.y-e.y)*(d.y-e.y);if(l<g){g=l;c.x=d.x;c.y=d.y}}}else if(d.type===Kd)k=cd(j.copy().hf(i,i),e,g,c);else if(d.type===Nd)a:{d=j.copy().hf(i,i);if(d.width===0)k=ad(d.x,d.y,d.x,d.y+d.height,e.x,e.y,g.x,g.y,c);else if(d.height===0)k=ad(d.x,d.y,d.x+d.width,d.y,e.x,e.y,g.x,g.y,c);else{var a=d.width/
2,n=d.height/2,k=d.x+a,d=d.y+n,b=9999;e.x!==g.x&&(b=(e.y-g.y)/(e.x-g.x));if(Math.abs(b)<9999){g=e.y-d-b*(e.x-k);if(a*a*b*b+n*n-g*g<0){c.x=NaN;c.y=NaN;k=o;break a}j=Math.sqrt(a*a*b*b+n*n-g*g);i=(-(a*a*b*g)+a*n*j)/(n*n+a*a*b*b)+k;n=(-(a*a*b*g)-a*n*j)/(n*n+a*a*b*b)+k;a=b*(i-k)+g+d;d=b*(n-k)+g+d;k=Math.abs((e.x-i)*(e.x-i))+Math.abs((e.y-a)*(e.y-a));b=Math.abs((e.x-n)*(e.x-n))+Math.abs((e.y-d)*(e.y-d));if(k<b){c.x=i;c.y=a}else{c.x=n;c.y=d}}else{i=n*n;k=e.x-k;k=i-i/(a*a)*k*k;if(k<0){c.x=NaN;c.y=NaN;k=o;
break a}j=Math.sqrt(k);a=d+j;d=d-j;k=Math.abs(a-e.y);b=Math.abs(d-e.y);if(k<b){c.x=e.x;c.y=a}else{c.x=e.x;c.y=d}}k=h}}else if(d.type===yd){var q,p,t,w=e.x,A=e.y,F=g.x,H=g.y,x=new E,g=e.Ph(g);c.x=F;c.y=H;for(j=0;j<d.qc.count;j++){p=d.qc.j[j];var I=p.rb;q=p.La;p=p.Ma;for(var y=q,G=p,fa,R,S=0;S<I.count;S++){fa=I.j[S];R=fa.type;l=fa.aa;t=fa.ba;var da=o;switch(R){case Rd:y=l;G=t;break;case Qd:da=Dk(q,p,l,t,w,A,F,H,x);break;case Sd:da=fa.zd;R=fa.rf;var ma=fa.Hn,ua=fa.In,da=Xc(q,p,da,R,ma,ua,l,t,w,A,F,H,
0.5,x);break;case Td:da=(q+2*fa.zd)/3;R=(p+2*fa.rf)/3;ma=(fa.zd*2+l)/3;ua=(fa.zd*2+l)/3;da=Xc(q,p,da,R,ma,ua,l,t,w,A,F,H,0.5,x);break;case de:t=ee(fa);R=t.length;for(j=0;j<R;j++){n=t[j];if(j===0&&Dk(q,p,n.Gl,n.Hl,w,A,F,H,x)){l=Ek(e,x,g,c);if(l<g){g=l;k=h}}if(Xc(n.Gl,n.Hl,n.av,n.cv,n.bv,n.dv,n.nk,n.ok,w,A,F,H,0.5,x)){l=Ek(e,x,g,c);if(l<g){g=l;k=h}}}l=n.nk;t=n.ok;break;default:u.g("Unknown Segment type: "+fa.type)}q=l;p=t;if(da){l=Ek(e,x,g,c);if(l<g){g=l;k=h}}if(fa.SB){l=y;t=G;if(Dk(q,p,l,t,w,A,F,H,
x)){l=Ek(e,x,g,c);if(l<g){g=l;k=h}}}}}e=b.x-a.x;d=b.y-a.y;a=Math.sqrt(e*e+d*d);c.x=c.x-e/a*i;c.y=c.y-d/a*i}else u.g("Invalid Geometry type");if(!k)return o;b=Ab(this.transform,c);c.x=b.x;c.y=b.y;return h};function Ek(a,b,c,d){a=a.Ph(b);if(a<c){d.x=b.x;d.y=b.y;return a}return c}
function Dk(a,b,c,d,e,g,i,j,k){var l=o,n=(e-i)*(b-d)-(g-j)*(a-c);if(n===0)return o;k.x=((e*j-g*i)*(a-c)-(e-i)*(a*d-b*c))/n;k.y=((e*j-g*i)*(b-d)-(g-j)*(a*d-b*c))/n;if((a>c?a-c:c-a)<(b>d?b-d:d-b)){e=b<d?b:d;a=b<d?d:b;if((k.y>e||Sa(k.y,e))&&(k.y<a||Sa(k.y,a)))l=h}else{e=a<c?a:c;a=a<c?c:a;if((k.x>e||Sa(k.x,e))&&(k.x<a||Sa(k.x,a)))l=h}return l}
X.prototype.containedInRect=X.prototype.cu=function(a,b){if(b===f)return a.el(this.oa);var c=this.ta;if(c===m){gh(this,Infinity,Infinity);c=this.ta}var c=c.fb,d=this.Na/2;return!a.da(b.ub(new E(c.x-d,c.y-d)))||!a.da(b.ub(new E(c.x-d,c.bottom+d)))||!a.da(b.ub(new E(c.right+d,c.bottom+d)))||!a.da(b.ub(new E(c.right+d,c.y-d)))?o:h};
X.prototype.intersectsRect=X.prototype.de=function(a){function b(a,b){i.x=a*c.m11+b*c.m21+c.Pa;i.y=a*c.m12+b*c.m22+c.Qa}if(a.el(this.oa))return h;var c=this.transform.copy();c.xu();var d=a.left,e=a.right,g=a.top,a=a.bottom,i=new E;b(d,g);if(this.Bi(i,h))return h;b(e,g);if(this.Bi(i,h))return h;b(d,a);if(this.Bi(i,h))return h;b(e,a);if(this.Bi(i,h))return h;var j=new E,k=new E;j.x=e;j.y=g;i.x=d;i.y=g;if(Fk(this,i,j,k))return h;i.x=e;i.y=a;if(Fk(this,i,j,k))return h;j.x=d;j.y=a;if(Fk(this,i,j,k))return h;
i.x=d;i.y=g;return Fk(this,i,j,k)?h:o};function Fk(a,b,c,d){if(!a.vu(b,c,d))return o;var a=b.x,b=b.y,e=c.x,g=c.y,c=d.x,d=d.y;if(a===e){var i;if(b<g){i=b;a=g}else{i=g;a=b}return d>=i&&d<=a}if(a<e){i=a;a=e}else i=e;return c>=i&&c<=a}
X.prototype.xB=function(a,b){if(this.fill!==m&&this.Bi(a,h))return h;var c=a.Ph(b),d=c;if(this.Na>1.5){c=this.Na/2+Math.sqrt(c);c=c*c}var e=this.ta;if(e===m){gh(this,Infinity,Infinity);e=this.ta}var g=e.Ib,i=e.Tb,j=e.vc,k=e.Ec;if(e.type===Bd){var e=bb(a.x,a.y,g,i,j,k),l=(g-j)*(a.x-j)+(i-k)*(a.y-k);if(e<=((j-g)*(a.x-g)+(k-i)*(a.y-i)>=0&&l>=0?c:d))return h}else if(e.type===Kd){if(bb(a.x,a.y,g,i,g,k)<=c||bb(a.x,a.y,g,i,j,i)<=c||bb(a.x,a.y,j,i,j,k)<=c||bb(a.x,a.y,g,k,j,k)<=c)return h}else if(e.type===
Nd){var e=a.x-(g+j)/2,d=a.y-(i+k)/2,l=Math.abs(j-g)/2,n=Math.abs(k-i)/2;if(l===0||n===0){e=bb(a.x,a.y,g,i,j,k);return e<=c?h:o}g=new E(Infinity,Infinity);bd(e,d,0,0,-l,-n,l,n,g);bd(e,d,0,n,-l,-n,l,n,g);bd(e,d,0,-n,-l,-n,l,n,g);bd(e,d,0,l,-l,-n,l,n,g);bd(e,d,0,-l,-l,-n,l,n,g);bd(e,d,l/2,n/2,-l,-n,l,n,g);bd(e,d,-l/2,n/2,-l,-n,l,n,g);bd(e,d,l/2,-n/2,-l,-n,l,n,g);bd(e,d,-l/2,-n/2,-l,-n,l,n,g);if((g.x-e)*(g.x-e)+(g.y-d)*(g.y-d)<c)return h}else if(e.type===yd){k=e.fb;g=k.x;i=k.y;j=k.x+k.width;k=k.y+k.height;
if(a.x>j&&a.x<g&&a.y>k&&a.y<i&&bb(a.x,a.y,g,i,g,k)>c&&bb(a.x,a.y,g,i,j,i)>c&&bb(a.x,a.y,j,k,g,k)>c&&bb(a.x,a.y,j,k,j,i)>c)return o;c=Math.sqrt(c);if(this.fill===m?ge(e,a.x,a.y,c):e.da(a,c,h))return h}return o};u.a(X,"geometry",X.prototype.jr);u.defineProperty(X,{jr:"geometry"},function(){return this.wk?this.wk:this.ta},function(a){var b=this.ta;if(b!==a){if(a!==m){s&&u.c(a,md,X,"geometry");this.wk=this.ta=a.freeze()}else this.wk=this.ta=m;this.Ah=h;this.M();this.d("geometry",b,a)}});
X.prototype.Ye=function(){this.Ah?this.wk=m:this.ta=m;this.M()};u.a(X,"fill",X.prototype.fill);u.defineProperty(X,{fill:"fill"},r("Ve"),function(a){var b=this.Ve;if(b!==a&&(a===m||typeof a==="string"||a instanceof Be)){a instanceof Be&&a.freeze();this.Ve=a;$i(this);this.d("fill",b,a)}});u.a(X,"stroke",X.prototype.stroke);
u.defineProperty(X,{stroke:"stroke"},r("lc"),function(a){var b=this.lc;if(b!==a&&(a===m||typeof a==="string"||a instanceof Be)){a instanceof Be&&a.freeze();this.lc=a;$i(this);this.d("stroke",b,a)}});u.a(X,"strokeWidth",X.prototype.Na);u.defineProperty(X,{Na:"strokeWidth"},r("Eh"),function(a){var b=this.Eh;if(b!==a){s&&u.i(a,X,"strokeWidth");if(a>=0){this.Eh=a;this.M();this.d("strokeWidth",b,a)}}});u.a(X,"strokeCap",X.prototype.Iy);
u.defineProperty(X,{Iy:"strokeCap"},r("Bm"),function(a){var b=this.Bm;if(b!==a)if(typeof a==="string"&&(a==="butt"||a==="round"||a==="square")){this.Bm=a;$i(this);this.d("strokeCap",b,a)}else u.ha(a,'"butt", "round", or "square"',X,"strokeCap")});u.a(X,"strokeJoin",X.prototype.Jy);
u.defineProperty(X,{Jy:"strokeJoin"},r("Cm"),function(a){var b=this.Cm;if(b!==a)if(typeof a==="string"&&(a==="miter"||a==="bevel"||a==="round")){this.Cm=a;$i(this);this.d("strokeJoin",b,a)}else u.ha(a,'"miter", "bevel", or "round"',X,"strokeJoin")});u.a(X,"strokeMiterLimit",X.prototype.Ky);u.defineProperty(X,{Ky:"strokeMiterLimit"},r("Dm"),function(a){var b=this.Dm;if(b!==a){s&&u.i(a,X,"strokeMiterLimit");if(a>0){this.Dm=a;$i(this);this.d("strokeMiterLimit",b,a)}}});u.a(X,"figure",X.prototype.Ua);
u.defineProperty(X,{Ua:"figure"},r("Ho"),function(a){var b=this.Ho;if(b!==a){s&&u.e(a,"string",X,"figure");var c=Ck[a];if(typeof c==="function")c=a;else(c=Ck[a.toLowerCase()])||u.g("Unknown Shape.figure: "+a);if(b!==c){this.Ho=c;this.Ah=o;this.Ye();this.d("figure",b,c)}}});u.a(X,"toArrow",X.prototype.Fl);
u.defineProperty(X,{Fl:"toArrow"},r("Gm"),function(a){var b=this.Gm;a===h?a="Standard":a===o&&(a="None");if(b!==a){s&&u.e(a,"string",X,"toArrow");var c=Bk(a);if(c instanceof md)c=a;else(c=Bk(a.toLowerCase()))||u.g("Unknown Shape.toArrow: "+a);if(b!==c){this.Gm=c;this.Ah=o;this.Ye();Gk(this,c);this.d("toArrow",b,c)}}});u.a(X,"fromArrow",X.prototype.uu);
u.defineProperty(X,{uu:"fromArrow"},r("cm"),function(a){var b=this.cm;a===h?a="Standard":a===o&&(a="None");if(b!==a){s&&u.e(a,"string",X,"fromArrow");var c=Bk(a);if(c instanceof md)c=a;else(c=Bk(a.toLowerCase()))||u.g("Unknown Shape.fromArrow: "+a);if(b!==c){this.cm=c;this.Ah=o;this.Ye();Gk(this,c);this.d("fromArrow",b,c)}}});
function Gk(a,b){a.Kr=Hk;var c=oc;switch(b){case "halfarrowtop":c=fc;break;case "halftriangletop":c=fc;break;case "openrighttriangletop":c=fc;break;case "opentriangletop":c=fc}if(a.Gm!=="None"){a.Zg=-1;a.xi=c}else if(a.cm!=="None"){a.Zg=0;a.xi=new K(1-c.x,c.y)}}u.defineProperty(X,{n:"spot1"},r("Bh"),function(a){u.c(a,K,X,"spot1");var b=this.Bh;if(!b.u(a)){this.Bh=a=a.B();this.M();this.d("spot1",b,a)}});
u.defineProperty(X,{o:"spot2"},r("Ch"),function(a){u.c(a,K,X,"spot2");var b=this.Ch;if(!b.u(a)){this.Ch=a=a.B();this.M();this.d("spot2",b,a)}});u.defineProperty(X,{Db:"parameter1"},r("Pp"),function(a){var b=this.Pp;if(b!==a){this.Pp=a;this.M();this.d("parameter1",b,a)}});u.defineProperty(X,{Gr:"parameter2"},r("Qp"),function(a){var b=this.Qp;if(b!==a){this.Qp=a;this.M();this.d("parameter2",b,a)}});
u.m(X,{la:"naturalBounds"},function(){if(this.ta!==m){this.Hc.Oa(this.ta.fb);return this.Hc}var a=this.ia;return new J(0,0,a.width,a.height)});u.a(X,"isRectangular",X.prototype.EF);u.defineProperty(X,{EF:"isRectangular"},r("fp"),function(a){var b=this.fp;if(b!==a){s&&u.e(a,"boolean",X,"isRectangular");this.fp=a;this.M();this.d("isRectangular",b,a)}});u.a(X,"geometryStretch",X.prototype.jn);
u.defineProperty(X,{jn:"geometryStretch"},r("Po"),function(a){var b=this.Po;if(b!==a){u.Sa(a,Q,X,"geometryStretch");this.Po=a;this.d("geometryStretch",b,a)}});u.a(X,"interval",X.prototype.Uh);u.defineProperty(X,{Uh:"interval"},r("Yo"),function(a){var b=this.Yo;s&&u.i(a,X,"interval");a=Math.floor(a);if(b!==a&&a>=0){this.Yo=a;this.M();this.d("interval",b,a)}});
function na(){Q.call(this);this.fd="";this.lc="black";this.fi="13px sans-serif";this.Ce="start";this.cp=h;this.Ms=o;this.Yk=Ik;this.Ts=this.Lk=0;this.nj=this.ow=this.pw=m;this.nm={};this.Fo=o;this.Rd=this.vi=this.Aq=m}u.H("TextBlock",na);u.ma(na,Q);
na.prototype.eb=function(a){Q.prototype.eb.call(this,a);a.fd=this.fd;a.lc=this.lc;a.fi=this.fi;a.Ce=this.Ce;a.cp=this.cp;a.Ms=this.Ms;a.Yk=this.Yk;a.Lk=this.Lk;a.Ts=this.Ts;a.pw=this.pw;a.ow=this.ow;a.nj=this.nj;a.nm=this.nm;a.Fo=this.Fo;a.Aq=this.Aq;a.vi=this.vi;a.Rd=this.Rd};na.prototype.toString=function(){return this.fd.length>22?'TextBlock("'+this.fd.substring(0,20)+'"...)':'TextBlock("'+this.fd+'")'};var Jk;na.None=Jk=u.l(na,"None",0);var Kk;na.WrapFit=Kk=u.l(na,"WrapFit",1);var Ik;
na.WrapDesiredSize=Ik=u.l(na,"WrapDesiredSize",2);na.prototype.M=function(){Q.prototype.M.call(this);this.nj=this.ow=this.pw=m};u.a(na,"font",na.prototype.font);u.defineProperty(na,{font:"font"},r("fi"),function(a){var b=this.fi;if(b!==a){s&&u.e(a,"string",na,"font");this.fi=a;this.M();this.d("font",b,a)}});u.a(na,"text",na.prototype.text);u.defineProperty(na,{text:"text"},r("fd"),function(a){var b=this.fd,a=a!==m&&a!==f?a.toString():"";if(b!==a){this.fd=a;this.M();this.d("text",b,a)}});
u.a(na,"textAlign",na.prototype.textAlign);u.defineProperty(na,{textAlign:"textAlign"},r("Ce"),function(a){var b=this.Ce;if(b!==a){s&&u.e(a,"string",na,"textAlign");if(a==="start"||a==="end"||a==="left"||a==="right"||a==="center"){this.Ce=a;$i(this);this.d("textAlign",b,a)}else u.ha(a,'"start", "end", "left", "right", or "center"',na,"textAlign")}});
u.m(na,{la:"naturalBounds"},function(){if(!this.Hc.V()){var a=Lk(this,this.fd,this.font,{},999999).width,b=Mk(this,a,{}),c=this.ia;if(!isNaN(c.width))a=c.width;if(!isNaN(c.height))b=c.height;jb(this.Hc,a,b)}return this.Hc});u.a(na,"isMultiline",na.prototype.zu);u.defineProperty(na,{zu:"isMultiline"},r("cp"),function(a){var b=this.cp;if(b!==a){s&&u.e(a,"boolean",na,"isMultiline");this.cp=a;this.M();this.d("isMultiline",b,a)}});u.a(na,"wrap",na.prototype.Ty);
u.defineProperty(na,{Ty:"wrap"},r("Yk"),function(a){var b=this.Yk;if(b!==a){s&&u.Sa(a,na,na,"wrap");this.Yk=a;this.M();this.d("wrap",b,a)}});u.a(na,"stroke",na.prototype.stroke);u.defineProperty(na,{stroke:"stroke"},r("lc"),function(a){var b=this.lc;if(b!==a&&(a===m||typeof a==="string"||a instanceof Be)){a instanceof Be&&a.freeze();this.lc=a;$i(this);this.d("stroke",b,a)}});u.m(na,{iJ:"lineCount"},r("Lk"));u.a(na,"editable",na.prototype.ku);
u.defineProperty(na,{ku:"editable"},r("Fo"),function(a){var b=this.Fo;if(b!==a){s&&u.e(a,"boolean",na,"editable");this.Fo=a;this.d("editable",b,a)}});u.a(na,"textEditor",na.prototype.My);u.defineProperty(na,{My:"textEditor"},r("Aq"),function(a){var b=this.Aq;if(b!==a){a instanceof HTMLElement||u.g("textEditor must be an HTMLElement");this.Aq=a;this.d("textEditor",b,a)}});u.a(na,"errorFunction",na.prototype.br);
u.defineProperty(na,{br:"errorFunction"},r("Rd"),function(a){var b=this.Rd;if(b!==a){a!==m&&u.e(a,"function",na,"errorFunction");this.Rd=a;this.d("errorFunction",b,a)}});
na.prototype.ar=function(a,b){if(this.lc!==m&&this.fd.length!==0){var c=this.fi;if(c!==m){var d=this.la.width,e=hh(this,c);if(a.zv!==c){a.font=c;a.zv=c}a.textAlign=this.Ce;aj(this,a,this.lc,h);if(this.Ms){aj(this,a,this.lc,o);a.lineWidth=e*0.05}var c=this.nm,g=0,i=o,j=this.Xd.ub(new E(0,0)),k=this.Xd.ub(new E(0,e)),j=j.Ph(k),k=b.scale;j*k*k<3&&(i=h);j=c.Ih.length;for(k=0;k<j;k++){var l=c.Ih[k],n=c.al[k];l>d&&(l=d);var q=a,p=g,t=e,w=i,A=0;this.Ce==="start"||this.Ce==="left"?A=0:this.Ce==="end"||this.Ce===
"right"?A=d:this.Ce==="center"?A=d/2:u.g("textAlign must be start, end, left, right, or center");if(w)q.fillRect(0+A-l/2,p+t*0.25,l,1);else{q.fillText(n,0+A,p+t-t*0.25);if(this.Ms){this.Ce==="end"||this.Ce==="right"?A=A-l:this.Ce==="center"&&(A=A-l/2);q.moveTo(0+A,p+t-t*0.2);q.lineTo(0+A+l,p+t-t*0.2);q.stroke()}}g=g+e}}}};
na.prototype.wr=function(a,b,c,d){var b={},e=0,g=0;if(isNaN(this.ia.width)){e=this.fd;if(e.length===0)e=0;else if(this.zu){for(var i=g=0,j=o,k={dh:0};!j;){var l=Nk(e,i,k);if(l===-1){l=e.length;j=h}i=Ok(e.substr(i,l-i).replace(/^\s+|\s+$/g,""),this.fi);i>g&&(g=i);i=k.dh}e=g}else{g=Nk(e,0,{});g>=0&&(e=e.substr(0,g));e=i=Ok(e,this.fi)}e=Math.min(e,a/this.scale)}else e=this.ia.width;if(this.U){e=Math.min(e,this.U.xd.width);e=Math.max(e,this.U.Od.width)}g=Mk(this,e,b);if(!isNaN(this.ia.height))g=this.ia.height;
if(this.Ty===Kk||isNaN(this.ia.width))e=b.Yh;e=Math.max(c,e);g=Math.max(d,g);jb(this.Hc,e,g);Ri(this,0,0,e,g);this.nm=b};na.prototype.zi=function(a,b,c,d){Xi(this,a,b,c,d)};
function Lk(a,b,c,d,e){b=b.replace(/^\s+|\s+$/g,"");if(d.Yh===f)d.Yh=0;if(d.Ih===f)d.Ih=[];if(d.al===f)d.al=[];var g=0,i;if(a.Yk===Jk){d.dh=1;d.Yh=Ok(b,c);d.Ih.push(d.Yh);d.al.push(b);return new eb(d.Yh,hh(a,c))}if(a.nj===m)a.nj=hh(a,c);var a=a.nj,j=b,k=0;if(j.length===0){k=1;d.Ih.push(0);d.al.push(j)}for(;j.length>0;){for(var l=Pk(j),j=j.substr(l.length);Ok(l,c)>e;){var n=1,b=Ok(l.substr(0,n),c);for(i=0;b<=e;){n++;i=b;b=Ok(l.substr(0,n),c)}if(n===1){d.Ih[k]=b;g=Math.max(g,b)}else{d.Ih[k]=i;g=Math.max(g,
i)}n--;n<1&&(n=1);d.al[k]=l.substr(0,n);k++;l=l.substr(n)}i=Pk(j);for(b=Ok(l+i,c);i.length>0&&b<=e;){l=l+i;j=j.substr(i.length);i=Pk(j);b=Ok((l+i).replace(/^\s+|\s+$/g,""),c)}l=l.replace(/^\s+|\s+$/g,"");if(l!==""){if(i.length===0){d.Ih.push(b);g=Math.max(g,b)}else{i=Ok(l,c);d.Ih.push(i);g=Math.max(g,i)}d.al.push(l);k++}}d.dh=k;d.Yh=Math.max(d.Yh,g);return new eb(d.Yh,a*d.dh)}
function Pk(a){for(var b=a.length,c=0;c<b&&a.charAt(c)!==" ";)c++;for(;c<b&&a.charAt(c)===" ";)c++;return c>=b?a:a.substr(0,c)}function Ok(a,b){if(u.Bt!==b){u.At.font=b;u.Bt=b}return u.At.measureText(a).width}function hh(a,b){if(a.nj!==m)return a.nj;if(u.Bt!==b){u.At.font=b;u.Bt=b}var c=0;if(u.Zv[b]!==f&&u.xz<5E3)c=u.Zv[b];else{c=u.At.measureText("M").width*1.3;u.Zv[b]=c;u.xz++}return c}
function Nk(a,b,c){if(c.dh===f)c.dh=0;var d=a.indexOf("\r",b);d===-1&&(d=a.indexOf("\n",b));if(d>=0)c.dh=a[d]==="\r"&&d+1<a.length&&a[d+1]==="\n"?d+2:d+1;return d}
function Mk(a,b,c){var d=a.fd,e=a.fi,g=hh(a,e);if(d.length===0){c.Yh=0;a.Lk=1;return g}if(!a.zu){var i=Nk(d,0,{});i>=0&&(d=d.substr(0,i))}for(var j=i=0,k=0,l=-1,n={dh:0},q=o;!q;){l=Nk(d,k,n);if(l===-1){l=d.length;q=h}if(k<=l){k=d.substr(k,l-k);if(a.Yk!==Jk){c.dh=0;k=Lk(a,k,e,c,b);i=i+k.height;j=j+c.dh}else{Lk(a,k,e,c,Infinity);i=i+g;j++}}k=n.dh}a.Lk=j;return a.Ts=i}
na.prototype.gg=function(){Q.prototype.gg.call(this);var a=this.b;if(a!==m){var b=this.nm;if(b!==m){Ei(a,"sizeArray",b.Ih);Ei(a,"textArray",b.al);Ei(a,"font",this.font);Ei(a,"stroke",this.stroke);Ei(a,"textAlign",this.textAlign)}}};u.a(na,"textValidation",na.prototype.Sr);u.defineProperty(na,{Sr:"textValidation"},r("vi"),function(a){var b=this.vi;if(b!==a){a!==m&&u.e(a,"function",na,"textValidation");this.vi=a;this.d("textValidation",b,a)}});
function Ej(){Q.call(this);this.Gf=m;this.tq="";this.ui=(new J(NaN,NaN,NaN,NaN)).freeze();this.em=Ad;this.Fm=this.Rd=m;this.Cj=o}u.H("Picture",Ej);u.ma(Ej,Q);Ej.prototype.eb=function(a){Q.prototype.eb.call(this,a);a.Gf=this.Gf;a.tq=this.tq;a.ui.Oa(this.ui);a.em=this.em;a.Rd=this.Rd};Ej.prototype.toString=function(){return"Picture("+this.source+")#"+u.cc(this)};u.a(Ej,"element",Ej.prototype.element);
u.defineProperty(Ej,{element:"element"},r("Gf"),function(a){var b=this.Gf;if(b!==a){a instanceof HTMLImageElement||(a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement)||u.g("Picture.element must be an instance of Image, Canvas, or Video.");var c=this;a.onerror=function(a){c.Rd!==m&&c.Rd(c,a)};this.Gf=a;this.d("element",b,a);if(a.complete===h||a.complete===f){this.Cj=h;if(!this.ia.V()){this.Yb=o;this.M()}}else{u.Zw.push(this);if(u.pt===m)u.pt=setInterval(function(){for(var a=[],b=u.Zw,c=
b.length,i=0;i<c;i++){var j=b[i];Qk(j)||a.push(j)}if(a.length===0){clearInterval(u.pt);u.pt=m}u.Zw=a},600)}}});function Qk(a){var b=a.Gf;if(!b)return h;if(!b.complete)return o;if(a.Cj===h)return h;a.Cj=h;if(a.b){if(!a.ia.V())a.Yb=o;a.ia.V()||a.M();ph(a.b)}else{var a=u.qz,c=a.length;if(c===0)for(var c=document.getElementsByTagName("canvas"),d=c.length,b=0;b<d;b++){var e=c[b];e.parentElement&&e.parentElement.L&&a.push(e.parentElement.L)}c=a.length;for(b=0;b<c;b++)ph(a[b])}return h}
function Rk(a){var b=document.createElement("canvas").getContext("2d");b.drawImage(a.Gf,0,0);try{b.getImageData(0,0,1,1);a.Fm=o}catch(c){a.Fm=h}}u.a(Ej,"source",Ej.prototype.source);u.defineProperty(Ej,{source:"source"},r("tq"),function(a){var b=this.tq;if(b!==a){u.e(a,"string",Ej,"source");this.tq=a;this.d("source",b,a);b=u.RD;if(b[a]!==f)this.element=b[a];else{var c=new Image;c.src=a;this.element=b[a]=c}}});u.a(Ej,"sourceRect",Ej.prototype.uf);
u.defineProperty(Ej,{uf:"sourceRect"},r("ui"),function(a){var b=this.ui;if(!b.u(a)){u.c(a,J,Ej,"sourceRect");this.ui=a=a.B();this.d("sourceRect",b,a)}});u.a(Ej,"imageStretch",Ej.prototype.OB);u.defineProperty(Ej,{OB:"imageStretch"},r("em"),function(a){var b=this.em;if(b!==a){u.Sa(a,Q,Ej,"imageStretch");this.em=a;this.d("imageStretch",b,a)}});u.a(Ej,"errorFunction",Ej.prototype.br);
u.defineProperty(Ej,{br:"errorFunction"},r("Rd"),function(a){var b=this.Rd;if(b!==a){a!==m&&u.e(a,"function",Ej,"errorFunction");this.Rd=a;if(this.Gf){var c=this;this.Gf.onerror=function(a){c.Rd!==m&&c.Rd(c,a)}}this.d("errorFunction",b,a)}});
Ej.prototype.ar=function(a,b){if(!b.Bo){this.Fm===m&&Rk(this);if(this.Fm)return}var c=this.Gf;if(c!==m){var d=c.src;(d===m||d==="")&&u.g("Element has no source attribute: "+c);var d=this.la,e=0,g=0,i=c.naturalWidth,j=c.naturalHeight;if(!(i===0||j===0)){i===f&&c.videoWidth&&(i=c.videoWidth||d.width);j===f&&c.videoHeight&&(j=c.videoHeight||d.height);if(this.uf.V()){e=this.ui.x;g=this.ui.y;i=this.ui.width;j=this.ui.height}var k=i,l=j,n=this.em;switch(n){case Oi:if(this.uf.V())break;e=e+Math.max((k-d.width)/
2,0);g=g+Math.max((l-d.height)/2,0);i=Math.min(d.width,k);j=Math.min(d.height,l);break;case Ad:k=d.width;l=d.height;break;case Kg:case Lg:if(n===Kg){n=Math.min(d.height/l,d.width/k);k=k*n;l=l*n}else if(n===Lg){n=Math.max(d.height/l,d.width/k);k=k*n;l=l*n;e=e+(k-d.width)/2;g=g+(l-d.height)/2;i=i*(1/(k/d.width));j=j*(1/(l/d.height));k=d.width;l=d.height}}a.drawImage(c,e,g,i,j,Math.max((d.width-k)/2,0),Math.max((d.height-l)/2,0),Math.min(d.width,k),Math.min(d.height,l))}}};
u.m(Ej,{la:"naturalBounds"},r("Hc"));
Ej.prototype.wr=function(a,b,c,d){var e=this.ia,g=Ui(this),i=this.Gf;if(!this.Cj&&i&&i.complete)this.Cj=h;if(i===m)b=a=0;if(g!==Ad&&g!==Qi)isFinite(e.width)?a=e.width:i!==m&&this.Cj!==o&&(a=this.uf.V()?this.uf.width:i.naturalWidth);else{isFinite(a)||(a=this.uf.V()?this.uf.width:i.naturalWidth);c=0}if(g!==Ad&&g!==Pi)isFinite(e.height)?b=e.height:i!==m&&this.Cj!==o&&(b=this.uf.V()?this.uf.height:i.naturalHeight);else{isFinite(b)||(b=this.uf.V()?this.uf.height:i.naturalHeight);d=0}e=this.xd;g=this.Od;
c=Math.max(c/this.scale,g.width);d=Math.max(d/this.scale,g.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);if(i!==m&&!i.complete){isFinite(a)||(a=0);isFinite(b)||(b=0)}jb(this.Hc,a,b);Ri(this,0,0,a,b)};Ej.prototype.zi=function(a,b,c,d){Xi(this,a,b,c,d)};
Ej.prototype.gg=function(){Q.prototype.gg.call(this);var a=this.b;if(a!==m){Ei(a,"source",this.source);Ei(a,"imageStretch",this.OB);this.uf.V()&&Ei(a,"sourceRect",this.uf);var b,c;this instanceof Ej&&this.element!==m&&(c=a.lh.$(u.cc(this.element)));b=typeof c==="number"?c:-1;if(b>-1){a=a.lg;a.add(",");Da(a);a.add('"base64": { "class":"ref", "id":'+b+" }")}else{c=this.Gf;b=c.naturalWidth;var d=c.naturalHeight;this.Fm===m&&Rk(this);if(!(this.Cj===o||this.Fm===h||b===0||d===0)){if(b===f&&c.videoWidth)b=
c.videoWidth;if(d===f&&c.videoHeight)d=c.videoHeight;var e=document.createElement("canvas");e.width=b;e.height=d;e.getContext("2d").drawImage(c,0,0);c=e.toDataURL();b=-1;if(this instanceof Ej&&this.element!==m){u.nn(this.element);b=a.lh.count;a.lh.add(u.cc(this.element),b)}if(b>-1){a=a.lg;a.add(",");Da(a);a.add('"base64": { "id":'+b+', "value":"'+c+'" }')}else Ei(a,"base64",c)}}}};function L(){this.k=new md;this.Xb=m}
function M(a,b,c,d,e){a.k===m&&u.g("StreamGeometryContext has been closed");if(e!==f&&e===h){a.Xb===m&&u.g("Need to call beginFigure first");d=new pe(Rd);d.aa=b;d.ba=c;a.Xb.rb.add(d)}else{a.Xb=new zd;a.Xb.La=b;a.Xb.Ma=c;a.Xb.pr=d;a.k.qc.add(a.Xb)}}function O(a){a.k===m&&u.g("StreamGeometryContext has been closed");a.Xb===m&&u.g("Need to call beginFigure first");var b=a.Xb.rb.length;b>0&&a.Xb.rb.j[b-1].close()}
function Sk(a){a.k===m&&u.g("StreamGeometryContext has been closed");a.Xb===m&&u.g("Need to call beginFigure first");a.Xb.qr=o}L.prototype.moveTo=function(a,b,c){this.k===m&&u.g("StreamGeometryContext has been closed");this.Xb===m&&u.g("Need to call beginFigure first");var d=new pe(Rd);d.aa=a;d.ba=b;c&&d.close();this.Xb.rb.add(d)};
L.prototype.lineTo=function(a,b,c){this.k===m&&u.g("StreamGeometryContext has been closed");this.Xb===m&&u.g("Need to call beginFigure first");var d=new pe(Qd);d.aa=a;d.ba=b;c&&d.close();this.Xb.rb.add(d)};function N(a,b,c,d,e,g,i,j){a.k===m&&u.g("StreamGeometryContext has been closed");a.Xb===m&&u.g("Need to call beginFigure first");var k=new pe(Sd);k.zd=b;k.rf=c;k.Hn=d;k.In=e;k.aa=g;k.ba=i;j&&k.close();a.Xb.rb.add(k)}
function Pd(a,b,c,d,e){a.k===m&&u.g("StreamGeometryContext has been closed");a.Xb===m&&u.g("Need to call beginFigure first");var g=new pe(Td);g.zd=b;g.rf=c;g.aa=d;g.ba=e;a.Xb.rb.add(g)}L.prototype.arcTo=function(a,b,c,d,e,g,i){this.k===m&&u.g("StreamGeometryContext has been closed");this.Xb===m&&u.g("Need to call beginFigure first");var j=new pe(de);j.hk=a;j.Bl=b;j.za=c;j.Aa=d;j.vy=e;if(g)j.cG=g;i&&j.close();this.Xb.rb.add(j)};
function Tk(a,b,c,d,e,g,i,j,k,l,n,q,p,t){var w=1-k,a=a*w+c*k,b=b*w+d*k,c=c*w+e*k,d=d*w+g*k,e=e*w+i*k,g=g*w+j*k,j=a*w+c*k,i=b*w+d*k,c=c*w+e*k,d=d*w+g*k;l.x=a;l.y=b;n.x=j;n.y=i;q.x=j*w+c*k;q.y=i*w+d*k;p.x=c;p.y=d;t.x=e;t.y=g}function Uk(a){var a=Vk(a),b=[];b[0]=a[0];for(var c=1,d=1;c<a.length;c=c+2,d=d+3){b[d]=a[c];b[d+1]=a[c];b[d+2]=a[c+1]}return b}
function Vk(a){for(var b=Wk(a),c=[],d=Math.floor(b.length/2),e=b.length-1,a=a%2===0?2:1,g=0;g<e;g++){var i=b[g],j=b[g+1],k=b[(d+g-1)%e],l=b[(d+g+a)%e];c[g*2]=i;c[g*2+1]=Xk(i.x,i.y,k.x,k.y,j.x,j.y,l.x,l.y)}c[c.length]=c[0];return c}function Xk(a,b,c,d,e,g,i,j){c=a-c;i=e-i;if(c===0||i===0)if(c===0){i=(g-j)/i;j=a;e=i*j+(g-i*e)}else{d=(b-d)/c;j=e;e=d*j+(b-d*a)}else{d=(b-d)/c;i=(g-j)/i;a=b-d*a;j=(g-i*e-a)/(d-i);e=d*j+a}return new E(j,e)}
function Wk(a){for(var b=[],c=Math.PI*1.5,d=0,e=0;e<a;e++){d=2*Math.PI/a*e+c;b[e]=new E(0.5+0.5*Math.cos(d),0.5+0.5*Math.sin(d))}b.push(b[0]);return b}
var Ck={None:"Rectangle",Rectangle:function(a,b,c){a=new md;a.type=Kd;a.La=0;a.Ma=0;a.aa=b;a.ba=c;return a},Circle:function(a,b,c){a=new md;a.Gb=Kg;a.type=Nd;a.La=0;a.Ma=0;a.aa=b;a.ba=c;a.n=new K(0.156,0.156);a.o=new K(0.844,0.844);return a},Connector:"Ellipse",Ellipse:function(a,b,c){a=new md;a.type=Nd;a.La=0;a.Ma=0;a.aa=b;a.ba=c;a.n=new K(0.156,0.156);a.o=new K(0.844,0.844);return a},TriangleRight:function(a,b,c){var a=new md,d=new zd,e=new pe;e.aa=b;e.ba=0.5*c;d.rb.add(e);b=new pe;b.aa=0;b.ba=
c;d.rb.add(b.close());a.qc.add(d);a.n=new K(0,0.25);a.o=new K(0.5,0.75);return a},TriangleDown:function(a,b,c){var a=new md,d=new zd,e=new pe;e.aa=b;e.ba=0;d.rb.add(e);e=new pe;e.aa=0.5*b;e.ba=c;d.rb.add(e.close());a.qc.add(d);a.n=new K(0.25,0);a.o=new K(0.75,0.5);return a},TriangleLeft:function(a,b,c){var a=new md,d=new zd;d.La=b;d.Ma=c;var e=new pe;e.aa=0;e.ba=0.5*c;d.rb.add(e);c=new pe;c.aa=b;c.ba=0;d.rb.add(c.close());a.qc.add(d);a.n=new K(0.5,0.25);a.o=new K(1,0.75);return a},TriangleUp:function(a,
b,c){var a=new md,d=new zd;d.La=b;d.Ma=c;var e=new pe;e.aa=0;e.ba=c;d.rb.add(e);c=new pe;c.aa=0.5*b;c.ba=0;d.rb.add(c.close());a.qc.add(d);a.n=new K(0.25,0.5);a.o=new K(0.75,1);return a},Line1:function(a,b,c){a=new md;a.type=Bd;a.La=0;a.Ma=0;a.aa=b;a.ba=c;return a},Line2:function(a,b,c){a=new md;a.type=Bd;a.La=b;a.Ma=0;a.aa=0;a.ba=c;return a},MinusLine:"LineH",LineH:function(a,b,c){a=new md;a.type=Bd;a.La=0;a.Ma=c/2;a.aa=b;a.ba=c/2;return a},LineV:function(a,b,c){a=new md;a.type=Bd;a.La=b/2;a.Ma=
0;a.aa=b/2;a.ba=c;return a},Curve1:function(a,b,c){a=new L;M(a,0,0,o);N(a,Cc*b,0,1*b,(1-Cc)*c,b,c);return a.k},Curve2:function(a,b,c){a=new L;M(a,0,0,o);N(a,0,Cc*c,(1-Cc)*b,c,b,c);return a.k},Curve3:function(a,b,c){a=new L;M(a,1*b,0,o);N(a,1*b,Cc*c,Cc*b,1*c,0,1*c);return a.k},Curve4:function(a,b,c){a=new L;M(a,1*b,0,o);N(a,(1-Cc)*b,0,0,(1-Cc)*c,0,1*c);return a.k},Alternative:"Triangle",Merge:"Triangle",Triangle:function(a,b,c){a=new L;M(a,0.5*b,0*c,h);a.lineTo(0*b,1*c);a.lineTo(1*b,1*c,h);b=a.k;b.n=
new K(0.25,0.5);b.o=new K(0.75,1);return b},Decision:"Diamond",Diamond:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(0,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0.5*c,h);b=a.k;b.n=new K(0.25,0.25);b.o=new K(0.75,0.75);return b},Pentagon:function(a,b,c){var a=Wk(5),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<5;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.2,0.22);b.o=new K(0.8,0.9);return b},DataTransmission:"Hexagon",Hexagon:function(a,b,c){var a=Wk(6),d=new L;M(d,a[0].x*b,a[0].y*c,h);
for(var e=1;e<6;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.07,0.25);b.o=new K(0.93,0.75);return b},Heptagon:function(a,b,c){var a=Wk(7),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<7;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.2,0.15);b.o=new K(0.8,0.85);return b},Octagon:function(a,b,c){var a=Wk(8),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<8;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.15,0.15);b.o=new K(0.85,0.85);return b},Nonagon:function(a,b,c){var a=Wk(9),
d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<9;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.17,0.13);b.o=new K(0.82,0.82);return b},Decagon:function(a,b,c){var a=Wk(10),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<10;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.16,0.16);b.o=new K(0.84,0.84);return b},Dodecagon:function(a,b,c){var a=Wk(12),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<12;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.16,0.16);b.o=new K(0.84,0.84);return b},
FivePointedStar:function(a,b,c){var a=Vk(5),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<10;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.312,0.383);b.o=new K(0.693,0.765);return b},SixPointedStar:function(a,b,c){var a=Vk(6),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<12;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.17,0.251);b.o=new K(0.833,0.755);return b},SevenPointedStar:function(a,b,c){var a=Vk(7),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<14;e++)d.lineTo(a[e].x*b,
a[e].y*c);O(d);b=d.k;b.n=new K(0.363,0.361);b.o=new K(0.641,0.709);return b},EightPointedStar:function(a,b,c){var a=Vk(8),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<16;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.252,0.255);b.o=new K(0.75,0.75);return b},NinePointedStar:function(a,b,c){var a=Vk(9),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<18;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.355,0.361);b.o=new K(0.645,0.651);return b},TenPointedStar:function(a,b,c){var a=Vk(10),
d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<20;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.281,0.261);b.o=new K(0.723,0.748);return b},FivePointedBurst:function(a,b,c){var a=Uk(5),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e=e+3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new K(0.312,0.383);b.o=new K(0.693,0.765);return b},SixPointedBurst:function(a,b,c){var a=Uk(6),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e=e+3)N(d,a[e].x*
b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new K(0.17,0.251);b.o=new K(0.833,0.755);return b},SevenPointedBurst:function(a,b,c){var a=Uk(7),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e=e+3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new K(0.363,0.361);b.o=new K(0.641,0.709);return b},EightPointedBurst:function(a,b,c){var a=Uk(8),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e=e+3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*
b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new K(0.252,0.255);b.o=new K(0.75,0.75);return b},NinePointedBurst:function(a,b,c){var a=Uk(9),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e=e+3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new K(0.355,0.361);b.o=new K(0.645,0.651);return b},TenPointedBurst:function(a,b,c){var a=Uk(10),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e=e+3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*
b,a[e+2].y*c);O(d);b=d.k;b.n=new K(0.281,0.261);b.o=new K(0.723,0.748);return b},Cloud:function(a,b,c){a=new L;M(a,0.08034461*b,0.1944299*c,h);N(a,-0.09239631*b,0.07836421*c,0.1406031*b,-0.0542823*c,0.2008615*b,0.05349299*c);N(a,0.2450511*b,-0.00697547*c,0.3776197*b,-0.01112067*c,0.4338609*b,0.074219*c);N(a,0.4539471*b,0,0.6066018*b,-0.02526587*c,0.6558228*b,0.07004196*c);N(a,0.6914277*b,-0.01904177*c,0.8921095*b,-0.01220843*c,0.8921095*b,0.08370865*c);N(a,1.036446*b,0.04105738*c,1.020377*b,0.3022052*
c,0.9147671*b,0.3194596*c);N(a,1.04448*b,0.360238*c,0.992256*b,0.5219009*c,0.9082935*b,0.562044*c);N(a,1.032337*b,0.5771781*c,1.018411*b,0.8120651*c,0.9212406*b,0.8217117*c);N(a,1.028411*b,0.9571472*c,0.8556702*b,1.052487*c,0.7592566*b,0.9156953*c);N(a,0.7431877*b,1.009325*c,0.5624123*b,1.021761*c,0.5101666*b,0.9310455*c);N(a,0.4820677*b,1.031761*c,0.3030112*b,1.002796*c,0.2609328*b,0.9344623*c);N(a,0.2329994*b,1.01518*c,0.03213784*b,1.01518*c,0.08034461*b,0.870098*c);N(a,-0.02812061*b,0.9032597*
c,-0.01205169*b,0.6835638*c,0.06829292*b,0.6545475*c);N(a,-0.01812061*b,0.6089503*c,-0.00606892*b,0.4555777*c,0.06427569*b,0.4265613*c);N(a,-0.01606892*b,0.3892545*c,-0.01205169*b,0.1944299*c,0.08034461*b,0.1944299*c);O(a);b=a.k;b.n=new K(0.1,0.1);b.o=new K(0.9,0.9);return b},Gate:"Crescent",Crescent:function(a,b,c){a=new L;M(a,0,0,h);N(a,1*b,0,1*b,1*c,0,1*c);N(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);O(a);b=a.k;b.n=new K(0.511,0.19);b.o=new K(0.776,0.76);return b},FramedRectangle:function(a,b,c){var d=new L,
e=a?a.Db:0,a=a?a.Gr:0;e===0&&(e=0.1);a===0&&(a=0.1);M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c,h);M(d,e*b,a*c,o,h);d.lineTo(e*b,(1-a)*c);d.lineTo((1-e)*b,(1-a)*c);d.lineTo((1-e)*b,a*c,h);b=d.k;b.n=new K(e,a);b.o=new K(1-e,1-a);return b},Delay:"HalfEllipse",HalfEllipse:function(a,b,c){a=new L;M(a,0,0,h);N(a,Cc*b,0,1*b,(0.5-Cc/2)*c,1*b,0.5*c);N(a,1*b,(0.5+Cc/2)*c,Cc*b,1*c,0,1*c);O(a);b=a.k;b.n=new K(0,0.2);b.o=new K(0.75,0.8);return b},Heart:function(a,b,c){a=new L;M(a,0.5*b,1*c,h);
N(a,0.1*b,0.8*c,0,0.5*c,0*b,0.3*c);N(a,0*b,0,0.45*b,0,0.5*b,0.3*c);N(a,0.55*b,0,1*b,0,1*b,0.3*c);N(a,b,0.5*c,0.9*b,0.8*c,0.5*b,1*c);O(a);b=a.k;b.n=new K(0.15,0.29);b.o=new K(0.86,0.68);return b},Spade:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(0.51*b,0.01*c);N(a,0.6*b,0.2*c,b,0.25*c,b,0.5*c);N(a,b,0.8*c,0.6*b,0.8*c,0.55*b,0.7*c);N(a,0.5*b,0.75*c,0.55*b,0.95*c,0.75*b,c);a.lineTo(0.25*b,c);N(a,0.45*b,0.95*c,0.5*b,0.75*c,0.45*b,0.7*c);N(a,0.4*b,0.8*c,0,0.8*c,0,0.5*c);N(a,0,0.25*c,0.4*b,0.2*c,0.49*
b,0.01*c);O(a);b=a.k;b.n=new K(0.19,0.26);b.o=new K(0.8,0.68);return b},Club:function(a,b,c){a=new L;M(a,0.4*b,0.6*c,h);N(a,0.5*b,0.75*c,0.45*b,0.95*c,0.15*b,1*c);a.lineTo(0.85*b,c);N(a,0.55*b,0.95*c,0.5*b,0.75*c,0.6*b,0.6*c);var d=0.2,e=0.3,g=0,i=d*(4*(Math.SQRT2-1)/3);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-
i+e)*b,(0.5-d+g)*c,(0.5-d+e+0.05)*b,(0.5-i+g-0.02)*c,0.65*b,0.36771243*c);d=0.2;e=0;g=-0.3;i=d*(4*(Math.SQRT2-1)/3);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,0.35*b,0.36771243*c);d=0.2;e=-0.3;g=0;i=d*(4*(Math.SQRT2-1)/3);N(a,(0.5+d+e-0.05)*b,(0.5-i+g-0.02)*c,(0.5+i+
e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,0.4*b,0.6*c);O(a);b=a.k;b.n=new K(0.06,0.39);b.o=new K(0.93,0.58);return b},YinYang:function(a,b,c){var a=0.5,d=new L,a=0.5;M(d,b*0.5,0,h);d.arcTo(270,180,b*0.5,b*0.5,b*0.5);N(d,1*b,a*c,0,a*c,a*b,0,h);var a=0.1,e=0.25;M(d,(0.5+a)*b,e*c,h,h);d.arcTo(0,-360,b*0.5,
c*e,a*b);O(d);M(d,b*0.5,0,o);d.arcTo(270,-180,b*0.5,b*0.5,b*0.5);Sk(d);e=0.75;M(d,(0.5+a)*b,e*c,h);d.arcTo(0,360,b*0.5,c*e,a*b);O(d);b=d.k;b.Gb=Kg;return b},Peace:function(a,b,c){var a=new L,d=0.5*(4*(Math.SQRT2-1)/3);M(a,b,0.5*c,h);N(a,b,(0.5-d)*c,(0.5+d)*b,0,0.5*b,0);N(a,(0.5-d)*b,0,0,(0.5-d)*c,0,0.5*c);N(a,0,(0.5+d)*c,(0.5-d)*b,c,0.5*b,c);N(a,(0.5+d)*b,c,b,(0.5+d)*c,b,0.5*c);d=0.4*(4*(Math.SQRT2-1)/3);M(a,0.5*b,0.1*c,h,h);N(a,(0.5+d)*b,0.1*c,0.9*b,(0.5-d)*c,0.9*b,0.5*c);N(a,0.9*b,(0.5+d)*c,(0.5+
d)*b,0.9*c,0.5*b,0.9*c);N(a,(0.5-d)*b,0.9*c,0.1*b,(0.5+d)*c,0.1*b,0.5*c);N(a,0.1*b,(0.5-d)*c,(0.5-d)*b,0.1*c,0.5*b,0.1*c);var d=0.07,e=0,g=-0.707*0.11,i=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*
c);d=0.07;e=-0.707*0.11;g=0.707*0.11;i=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);d=0.07;e=0.707*0.11;g=0.707*0.11;i=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h);N(a,(0.5+d+e)*b,(0.5-i+
g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);b=a.k;b.n=new K(0.146,0.146);b.o=new K(0.853,0.853);b.Gb=Kg;return b},NotAllowed:function(a,b,c){var a=Cc*0.5,d=0.5,e=new L;M(e,0.5*b,(0.5-d)*c,h);N(e,(0.5-a)*b,(0.5-d)*c,(0.5-d)*b,(0.5-a)*c,(0.5-d)*b,0.5*c);N(e,(0.5-d)*b,(0.5+
a)*c,(0.5-a)*b,(0.5+d)*c,0.5*b,(0.5+d)*c);N(e,(0.5+a)*b,(0.5+d)*c,(0.5+d)*b,(0.5+a)*c,(0.5+d)*b,0.5*c);N(e,(0.5+d)*b,(0.5-a)*c,(0.5+a)*b,(0.5-d)*c,0.5*b,(0.5-d)*c);var d=0.4,a=Cc*0.4,g=new E(0,0),i=new E(0,0),j=new E(0,0),k=new E(0,0);Tk(0.5,0.5-d,0.5+a,0.5-d,0.5+d,0.5-a,0.5+d,0.5,0.42,g,i,j,k,k);var l=new E(0,0),n=new E(0,0),q=new E(0,0);Tk(0.5,0.5-d,0.5+a,0.5-d,0.5+d,0.5-a,0.5+d,0.5,0.58,k,k,q,l,n);var p=new E(0,0),t=new E(0,0),w=new E(0,0);Tk(0.5,0.5+d,0.5-a,0.5+d,0.5-d,0.5+a,0.5-d,0.5,0.42,p,
t,w,k,k);var A=new E(0,0),F=new E(0,0),H=new E(0,0);Tk(0.5,0.5+d,0.5-a,0.5+d,0.5-d,0.5+a,0.5-d,0.5,0.58,k,k,H,A,F);M(e,H.x*b,H.y*c,h,h);N(e,A.x*b,A.y*c,F.x*b,F.y*c,(0.5-d)*b,0.5*c);N(e,(0.5-d)*b,(0.5-a)*c,(0.5-a)*b,(0.5-d)*c,0.5*b,(0.5-d)*c);N(e,g.x*b,g.y*c,i.x*b,i.y*c,j.x*b,j.y*c);e.lineTo(H.x*b,H.y*c);O(e);M(e,w.x*b,w.y*c,h,h);e.lineTo(q.x*b,q.y*c);N(e,l.x*b,l.y*c,n.x*b,n.y*c,(0.5+d)*b,0.5*c);N(e,(0.5+d)*b,(0.5+a)*c,(0.5+a)*b,(0.5+d)*c,0.5*b,(0.5+d)*c);N(e,p.x*b,p.y*c,t.x*b,t.y*c,w.x*b,w.y*c);O(e);
e.k.Gb=Kg;return e.k},Fragile:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.25*b,0);a.lineTo(0.2*b,0.15*c);a.lineTo(0.3*b,0.25*c);a.lineTo(0.29*b,0.33*c);a.lineTo(0.35*b,0.25*c);a.lineTo(0.3*b,0.15*c);a.lineTo(0.4*b,0);a.lineTo(1*b,0);N(a,1*b,0.25*c,0.75*b,0.5*c,0.55*b,0.5*c);a.lineTo(0.55*b,0.9*c);a.lineTo(0.7*b,0.9*c);a.lineTo(0.7*b,1*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.9*c);a.lineTo(0.45*b,0.9*c);a.lineTo(0.45*b,0.5*c);N(a,0.25*b,0.5*c,0,0.25*c,0,0);O(a);b=a.k;b.n=new K(0.25,0);b.o=new K(0.75,
0.4);return b},HourGlass:function(a,b,c){a=new L;M(a,0.65*b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.35*b,0.5*c);a.lineTo(0,0);a.lineTo(1*b,0);O(a);return a.k},Lightning:function(a,b,c){a=new L;M(a,0*b,0.55*c,h);a.lineTo(0.75*b,0);a.lineTo(0.25*b,0.45*c);a.lineTo(0.9*b,0.48*c);a.lineTo(0.4*b,1*c);a.lineTo(0.65*b,0.55*c);O(a);return a.k},Parallelogram1:function(a,b,c){a=a?a.Db:0;a===0&&(a=0.1);var d=new L;M(d,a*b,0,h);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=
new K(a,0);b.o=new K(1-a,1);return b},Input:"Output",Output:function(a,b,c){a=new L;M(a,0,1*c,h);a.lineTo(0.1*b,0);a.lineTo(1*b,0);a.lineTo(0.9*b,1*c);O(a);b=a.k;b.n=new K(0.1,0);b.o=new K(0.9,1);return b},Parallelogram2:function(a,b,c){a=a?a.Db:0;a===0&&(a=0.25);var d=new L;M(d,a*b,0,h);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=new K(a,0);b.o=new K(1-a,1);return b},ThickCross:function(a,b,c){a=a?a.Db:0;a===0&&(a=0.25);var d=new L;M(d,(0.5-a/2)*b,0,h);d.lineTo((0.5+a/2)*
b,0);d.lineTo((0.5+a/2)*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,1*c);d.lineTo((0.5-a/2)*b,1*c);d.lineTo((0.5-a/2)*b,(0.5+a/2)*c);d.lineTo(0,(0.5+a/2)*c);d.lineTo(0,(0.5-a/2)*c);d.lineTo((0.5-a/2)*b,(0.5-a/2)*c);O(d);b=d.k;b.n=new K(0.5-a/2,0.5-a/2);b.o=new K(0.5+a/2,0.5+a/2);return b},ThickX:function(a,b,c){var a=0.25/Math.SQRT2,d=new L;M(d,0.3*b,0,h);d.lineTo(0.5*b,0.2*c);d.lineTo(0.7*b,0);d.lineTo(1*b,0.3*c);d.lineTo(0.8*
b,0.5*c);d.lineTo(1*b,0.7*c);d.lineTo(0.7*b,1*c);d.lineTo(0.5*b,0.8*c);d.lineTo(0.3*b,1*c);d.lineTo(0,0.7*c);d.lineTo(0.2*b,0.5*c);d.lineTo(0,0.3*c);O(d);b=d.k;b.n=new K(0.5-a,0.5-a);b.o=new K(0.5+a,0.5+a);return b},ThinCross:function(a,b,c){a=a?a.Db:0;a===0&&(a=0.1);var d=new L;M(d,(0.5-a/2)*b,0,h);d.lineTo((0.5+a/2)*b,0);d.lineTo((0.5+a/2)*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,1*c);d.lineTo((0.5-a/2)*b,1*c);d.lineTo((0.5-
a/2)*b,(0.5+a/2)*c);d.lineTo(0,(0.5+a/2)*c);d.lineTo(0,(0.5-a/2)*c);d.lineTo((0.5-a/2)*b,(0.5-a/2)*c);O(d);return d.k},ThinX:function(a,b,c){a=new L;M(a,0.1*b,0,h);a.lineTo(0.5*b,0.4*c);a.lineTo(0.9*b,0);a.lineTo(1*b,0.1*c);a.lineTo(0.6*b,0.5*c);a.lineTo(1*b,0.9*c);a.lineTo(0.9*b,1*c);a.lineTo(0.5*b,0.6*c);a.lineTo(0.1*b,1*c);a.lineTo(0,0.9*c);a.lineTo(0.4*b,0.5*c);a.lineTo(0,0.1*c);O(a);return a.k},RightTriangle:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);O(a);b=a.k;b.n=
new K(0,0.5);b.o=new K(0.5,1);return b},RoundedIBeam:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(1*b,0);N(a,0.5*b,0.25*c,0.5*b,0.75*c,1*b,1*c);a.lineTo(0,1*c);N(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);O(a);return a.k},RoundedRectangle:function(a,b,c){var d=a?a.Db:0;d<=0&&(d=5);var d=Math.min(d,b/3),d=Math.min(d,c/3),a=d*Cc,e=new L;M(e,d,0,h);e.lineTo(b-d,0);N(e,b-a,0,b,a,b,d);e.lineTo(b,c-d);N(e,b,c-a,b-a,c,b-d,c);e.lineTo(d,c);N(e,a,c,0,c-a,0,c-d);e.lineTo(0,d);N(e,0,a,a,0,d,0);O(e);b=e.k;if(a>1){b.n=new K(0,
0,a,a);b.o=new K(1,1,-a,-a)}else{b.n=Vb;b.o=fc}return b},Border:function(a,b,c){a=a?a.Db:0;a<=0&&(a=5);var a=Math.min(a,b/3),a=Math.min(a,c/3),d=new L;M(d,a,0,h);d.lineTo(b-a,0);N(d,b-0,0,b,0,b,a);d.lineTo(b,c-a);N(d,b,c-0,b-0,c,b-a,c);d.lineTo(a,c);N(d,0,c,0,c-0,0,c-a);d.lineTo(0,a);N(d,0,0,0,0,a,0);O(d);b=d.k;b.n=Vb;b.o=fc;return b},SquareIBeam:function(a,b,c){a=a?a.Db:0;a===0&&(a=0.2);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,a*c);d.lineTo((0.5+a/2)*b,a*c);d.lineTo((0.5+a/2)*b,(1-a)*
c);d.lineTo(1*b,(1-a)*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);d.lineTo(0,(1-a)*c);d.lineTo((0.5-a/2)*b,(1-a)*c);d.lineTo((0.5-a/2)*b,a*c);d.lineTo(0,a*c);O(d);return d.k},Trapezoid:function(a,b,c){a=a?a.Db:0;a===0&&(a=0.2);var d=new L;M(d,a*b,0,h);d.lineTo((1-a)*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=new K(a,0);b.o=new K(1-a,1);return b},ManualLoop:"ManualOperation",ManualOperation:function(a,b,c){var a=a?a.Db:0,d=new L;M(d,a,0,h);d.lineTo(0,0);d.lineTo(1*b,0);d.lineTo(0.9*b,1*c);d.lineTo(0.1*
b,1*c);O(d);b=d.k;b.n=new K(0.1,0);b.o=new K(0.9,1);return b},GenderMale:function(a,b,c){var a=new L,d=Cc*0.4,e=0.4,g=new E(0,0),i=new E(0,0),j=new E(0,0),k=new E(0,0);M(a,(0.5-e)*b,0.5*c,h);N(a,(0.5-e)*b,(0.5-d)*c,(0.5-d)*b,(0.5-e)*c,0.5*b,(0.5-e)*c);Tk(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.44,j,k,i,g,g);N(a,j.x*b,j.y*c,k.x*b,k.y*c,i.x*b,i.y*c);var l=new E(i.x,i.y);Tk(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.56,g,g,i,j,k);g=new E(i.x,i.y);a.lineTo((l.x*0.1+0.855)*b,l.y*0.1*c);a.lineTo(0.85*
b,l.y*0.1*c);a.lineTo(0.85*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.15*c);a.lineTo((g.x*0.1+0.9)*b,0.15*c);a.lineTo((g.x*0.1+0.9)*b,(g.y*0.1+0.05*0.9)*c);a.lineTo(g.x*b,g.y*c);N(a,j.x*b,j.y*c,k.x*b,k.y*c,(0.5+e)*b,0.5*c);N(a,(0.5+e)*b,(0.5+d)*c,(0.5+d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);N(a,(0.5-d)*b,(0.5+e)*c,(0.5-e)*b,(0.5+d)*c,(0.5-e)*b,0.5*c);e=0.35;d=Cc*0.35;M(a,0.5*b,(0.5-e)*c,h,h);N(a,(0.5-d)*b,(0.5-e)*c,(0.5-e)*b,(0.5-d)*c,(0.5-e)*b,0.5*c);N(a,(0.5-e)*b,(0.5+d)*c,(0.5-d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);
N(a,(0.5+d)*b,(0.5+e)*c,(0.5+e)*b,(0.5+d)*c,(0.5+e)*b,0.5*c);N(a,(0.5+e)*b,(0.5-d)*c,(0.5+d)*b,(0.5-e)*c,0.5*b,(0.5-e)*c);M(a,(0.5-e)*b,0.5*c,h);b=a.k;b.n=new K(0.202,0.257);b.o=new K(0.692,0.839);b.Gb=Kg;return b},GenderFemale:function(a,b,c){var a=new L,d=0.375,e=0,g=-0.125,i=d*(4*(Math.SQRT2-1)/3);M(a,(0.525+e)*b,(0.5+d+g)*c,h);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-
d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.475+e)*b,(0.5+d+g)*c);a.lineTo(0.475*b,0.85*c);a.lineTo(0.425*b,0.85*c);a.lineTo(0.425*b,0.9*c);a.lineTo(0.475*b,0.9*c);a.lineTo(0.475*b,1*c);a.lineTo(0.525*b,1*c);a.lineTo(0.525*b,0.9*c);a.lineTo(0.575*b,0.9*c);a.lineTo(0.575*b,0.85*c);a.lineTo(0.525*b,0.85*c);O(a);d=0.325;e=0;g=-0.125;i=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h,h);N(a,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+i+e)*b,(0.5+d+g)*
c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5-i+e)*b,(0.5+d+g)*c,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+d+e)*b,(0.5+g)*c);M(a,(0.525+e)*b,(0.5+d+g)*c,h);b=a.k;b.n=new K(0.232,0.136);b.o=new K(0.782,0.611);b.Gb=Kg;return b},PlusLine:function(a,b,c){a=new L;M(a,0,0.5*c,o);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);return a.k},XLine:function(a,b,c){a=new L;M(a,
0,1*c,o);a.lineTo(1*b,0);a.moveTo(0,0);a.lineTo(1*b,1*c);return a.k},AsteriskLine:function(a,b,c){var a=new L,d=0.2/Math.SQRT2;M(a,d*b,(1-d)*c,o);a.lineTo((1-d)*b,d*c);a.moveTo(d*b,d*c);a.lineTo((1-d)*b,(1-d)*c);a.moveTo(0*b,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0*c);a.lineTo(0.5*b,1*c);return a.k},CircleLine:function(a,b,c){var a=Cc*0.5,d=new L;M(d,1*b,0.5*c,o);N(d,1*b,(0.5+a)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(d,(0.5-a)*b,1*c,0,(0.5+a)*c,0,0.5*c);N(d,0,(0.5-a)*c,(0.5-a)*b,0,0.5*b,0);N(d,(0.5+a)*b,
0,1*b,(0.5-a)*c,1*b,0.5*c);b=d.k;b.n=new K(0.146,0.146);b.o=new K(0.853,0.853);b.Gb=Kg;return b},Pie:function(a,b,c){var a=new L,d=0.5*(4*(Math.SQRT2-1)/3);M(a,(0.5*Math.SQRT2/2+0.5)*b,(0.5-0.5*Math.SQRT2/2)*c,h);N(a,0.7*b,0*c,0.5*b,0*c,0.5*b,0*c);N(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);N(a,0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.5*b,1*c);N(a,(0.5+d+0)*b,1*c,1*b,(0.5+d+0)*c,1*b,0.5*c);a.lineTo(0.5*b,0.5*c);O(a);return a.k},PiePiece:function(a,b,c){var a=Cc/Math.SQRT2*0.5,d=Math.SQRT2/2,e=1-Math.SQRT2/
2,g=new L;M(g,b,c,h);N(g,b,(1-a)*c,(d+a)*b,(e+a)*c,d*b,e*c);g.lineTo(0,c);O(g);return g.k},StopSign:function(a,b,c){var d=1/(Math.SQRT2+2),e=new L;M(e,d*b,0,h);e.lineTo((1-d)*b,0);e.lineTo(1*b,d*c);e.lineTo(1*b,(1-d)*c);e.lineTo((1-d)*b,1*c);e.lineTo(d*b,1*c);e.lineTo(0,(1-d)*c);e.lineTo(0,d*c);O(e);b=e.k;if(a&&Qb(a.n))a.n=new K(d/2,d/2);if(a&&Qb(a.o))a.o=new K(1-d/2,1-d/2);return b},LogicImplies:function(a,b,c){a=a?a.Db:0;a===0&&(a=0.2);var d=new L;M(d,(1-a)*b,0*c,o);d.lineTo(1*b,0.5*c);d.lineTo((1-
a)*b,c);d.moveTo(0,0.5*c);d.lineTo(b,0.5*c);b=d.k;b.n=new K(0,0);b.o=new K(0.8,0.5);return b},LogicIff:function(a,b,c){a=a?a.Db:0;a===0&&(a=0.2);var d=new L;M(d,(1-a)*b,0*c,o);d.lineTo(1*b,0.5*c);d.lineTo((1-a)*b,c);d.moveTo(0,0.5*c);d.lineTo(b,0.5*c);d.moveTo(a*b,0);d.lineTo(0,0.5*c);d.lineTo(a*b,c);b=d.k;b.n=new K(0.2,0);b.o=new K(0.8,0.5);return b},LogicNot:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(1*b,0);a.lineTo(1*b,1*c);return a.k},LogicAnd:function(a,b,c){a=new L;M(a,0,1*c,o);a.lineTo(0.5*
b,0);a.lineTo(1*b,1*c);b=a.k;b.n=new K(0.25,0.5);b.o=new K(0.75,1);return b},LogicOr:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);b=a.k;b.n=new K(0.219,0);b.o=new K(0.78,0.409);return b},LogicXor:function(a,b,c){a=new L;M(a,0.5*b,0,o);a.lineTo(0.5*b,1*c);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);var d=Cc*0.5;N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);b=a.k;b.Gb=
Kg;return b},LogicTruth:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(1*b,0);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);return a.k},LogicFalsity:function(a,b,c){a=new L;M(a,0,1*c,o);a.lineTo(1*b,1*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0);return a.k},LogicThereExists:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(1*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0,0.5*c);a.moveTo(1*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);return a.k},LogicForAll:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);a.moveTo(0.25*
b,0.5*c);a.lineTo(0.75*b,0.5*c);b=a.k;b.n=new K(0.25,0);b.o=new K(0.75,0.5);return b},LogicIsDefinedAs:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(b,0);a.moveTo(0,0.5*c);a.lineTo(b,0.5*c);a.moveTo(0,c);a.lineTo(b,c);b=a.k;b.n=new K(0.01,0.01);b.o=new K(0.99,0.49);return b},LogicIntersect:function(a,b,c){var a=Cc*0.5,d=new L;M(d,0,1*c,o);d.lineTo(0,0.5*c);N(d,0,(0.5-a)*c,(0.5-a)*b,0,0.5*b,0);N(d,(0.5+a)*b,0,1*b,(0.5-a)*c,1*b,0.5*c);d.lineTo(1*b,1*c);b=d.k;b.n=new K(0,0.5);b.o=new K(1,1);return b},
LogicUnion:function(a,b,c){var a=Cc*0.5,d=new L;M(d,1*b,0,o);d.lineTo(1*b,0.5*c);N(d,1*b,(0.5+a)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(d,(0.5-a)*b,1*c,0,(0.5+a)*c,0,0.5*c);d.lineTo(0,0);b=d.k;b.n=new K(0,0);b.o=new K(1,0.5);return b},Arrow:function(a,b,c){var d=a?a.Db:0,a=a?a.Gr:0;d===0&&(d=0.3);a===0&&(a=0.3);var e=new L;M(e,0,(0.5-a/2)*c,h);e.lineTo((1-d)*b,(0.5-a/2)*c);e.lineTo((1-d)*b,0);e.lineTo(1*b,0.5*c);e.lineTo((1-d)*b,1*c);e.lineTo((1-d)*b,(0.5+a/2)*c);e.lineTo(0,(0.5+a/2)*c);O(e);b=e.k;b.n=new K(0,
0.5-a/2);d=Xk(0,0.5+a/2,1,0.5+a/2,1-d,1,1,0.5);b.o=new K(d.x,d.y);return b},ISOProcess:"Chevron",Chevron:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.5*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);O(a);return a.k},DoubleArrow:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.3*b,0.214*c);a.lineTo(0.3*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.786*c);a.lineTo(0,1*c);O(a);M(a,0.3*b,0.214*c,o);a.lineTo(0.3*b,0.786*c);Sk(a);return a.k},DoubleEndArrow:function(a,
b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.3*b,0.7*c);a.lineTo(0.3*b,1*c);a.lineTo(0,0.5*c);a.lineTo(0.3*b,0);a.lineTo(0.3*b,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);O(a);b=a.k;c=Xk(0,0.5,0.3,0,0,0.3,0.3,0.3);b.n=new K(c.x,c.y);c=Xk(0.7,1,1,0.5,0.7,0.7,1,0.7);b.o=new K(c.x,c.y);return b},IBeamArrow:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.2*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);
a.lineTo(0.2*b,0);a.lineTo(0.2*b,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);O(a);b=a.k;b.n=new K(0,0.3);c=Xk(0.7,1,1,0.5,0.7,0.7,1,0.7);b.o=new K(c.x,c.y);return b},Pointer:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0);O(a);b=a.k;b.n=new K(0.2,0.35);c=Xk(0.2,0.65,1,0.65,0,1,1,0.5);b.o=new K(c.x,c.y);return b},RoundedPointer:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0,1*c);N(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);O(a);b=a.k;b.n=new K(0.4,0.35);c=
Xk(0.2,0.65,1,0.65,0,1,1,0.5);b.o=new K(c.x,c.y);return b},SplitEndArrow:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0,0.7*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);O(a);b=a.k;b.n=new K(0.2,0.3);c=Xk(0.7,1,1,0.5,0.7,0.7,1,0.7);b.o=new K(c.x,c.y);return b},MessageToUser:"SquareArrow",SquareArrow:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.7*b,0);O(a);b=
a.k;b.n=new K(0,0);b.o=new K(0.7,1);return b},Cone1:function(a,b,c){var a=Cc*0.5,d=Cc*0.1,e=new L;M(e,0,0.9*c,h);e.lineTo(0.5*b,0);e.lineTo(1*b,0.9*c);N(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);O(e);b=e.k;b.n=new K(0.25,0.5);b.o=new K(0.75,0.97);return b},Cone2:function(a,b,c){a=new L;M(a,0,0.9*c,h);N(a,(1-0.85/0.9)*b,1*c,0.85/0.9*b,1*c,1*b,0.9*c);a.lineTo(0.5*b,0);a.lineTo(0,0.9*c);O(a);M(a,0,0.9*c,o);N(a,(1-0.85/0.9)*b,0.8*c,0.85/0.9*b,0.8*c,1*b,0.9*c);Sk(a);
b=a.k;b.n=new K(0.25,0.5);b.o=new K(0.75,0.82);return b},Cube1:function(a,b,c){a=new L;M(a,0.5*b,1*c,h);a.lineTo(1*b,0.85*c);a.lineTo(1*b,0.15*c);a.lineTo(0.5*b,0*c);a.lineTo(0*b,0.15*c);a.lineTo(0*b,0.85*c);O(a);M(a,0.5*b,1*c,o);a.lineTo(0.5*b,0.3*c);a.lineTo(0,0.15*c);a.moveTo(0.5*b,0.3*c);a.lineTo(1*b,0.15*c);Sk(a);b=a.k;b.n=new K(0,0.3);b.o=new K(0.5,0.85);return b},Cube2:function(a,b,c){a=new L;M(a,0,0.3*c,h);a.lineTo(0*b,1*c);a.lineTo(0.7*b,c);a.lineTo(1*b,0.7*c);a.lineTo(1*b,0*c);a.lineTo(0.3*
b,0*c);O(a);M(a,0,0.3*c,o);a.lineTo(0.7*b,0.3*c);a.lineTo(1*b,0*c);a.moveTo(0.7*b,0.3*c);a.lineTo(0.7*b,1*c);Sk(a);b=a.k;b.n=new K(0,0.3);b.o=new K(0.7,1);return b},MagneticData:"Cylinder1",Cylinder1:function(a,b,c){var a=Cc*0.5,d=Cc*0.1,e=new L;M(e,0,0.1*c,h);N(e,0,(0.1-d)*c,(0.5-a)*b,0,0.5*b,0);N(e,(0.5+a)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);e.lineTo(b,0.9*c);N(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);e.lineTo(0,0.1*c);M(e,0,0.1*c,o);N(e,0,(0.1+d)*c,(0.5-a)*b,0.2*
c,0.5*b,0.2*c);N(e,(0.5+a)*b,0.2*c,1*b,(0.1+d)*c,1*b,0.1*c);Sk(e);b=e.k;b.n=new K(0,0.2);b.o=new K(1,0.9);return b},Cylinder2:function(a,b,c){var a=Cc*0.5,d=Cc*0.1,e=new L;M(e,0,0.9*c,h);e.lineTo(0,0.1*c);N(e,0,(0.1-d)*c,(0.5-a)*b,0,0.5*b,0);N(e,(0.5+a)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);e.lineTo(1*b,0.9*c);N(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);M(e,0,0.9*c,o);N(e,0,(0.9-d)*c,(0.5-a)*b,0.8*c,0.5*b,0.8*c);N(e,(0.5+a)*b,0.8*c,1*b,(0.9-d)*c,1*b,0.9*c);Sk(e);b=e.k;
b.n=new K(0,0.1);b.o=new K(1,0.8);return b},Cylinder3:function(a,b,c){var a=Cc*0.1,d=Cc*0.5,e=new L;M(e,0.1*b,0,h);e.lineTo(0.9*b,0);N(e,(0.9+a)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);N(e,1*b,(0.5+d)*c,(0.9+a)*b,1*c,0.9*b,1*c);e.lineTo(0.1*b,1*c);N(e,(0.1-a)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(e,0,(0.5-d)*c,(0.1-a)*b,0,0.1*b,0);M(e,0.1*b,0,o);N(e,(0.1+a)*b,0,0.2*b,(0.5-d)*c,0.2*b,0.5*c);N(e,0.2*b,(0.5+d)*c,(0.1+a)*b,1*c,0.1*b,1*c);Sk(e);b=e.k;b.n=new K(0.2,0);b.o=new K(0.9,1);return b},DirectData:"Cylinder4",Cylinder4:function(a,
b,c){var a=Cc*0.1,d=Cc*0.5,e=new L;M(e,0.9*b,0,h);N(e,(0.9+a)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);N(e,1*b,(0.5+d)*c,(0.9+a)*b,1*c,0.9*b,1*c);e.lineTo(0.1*b,1*c);N(e,(0.1-a)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(e,0,(0.5-d)*c,(0.1-a)*b,0,0.1*b,0);e.lineTo(0.9*b,0);M(e,0.9*b,0,o);N(e,(0.9-a)*b,0,0.8*b,(0.5-d)*c,0.8*b,0.5*c);N(e,0.8*b,(0.5+d)*c,(0.9-a)*b,1*c,0.9*b,1*c);Sk(e);b=e.k;b.n=new K(0.1,0);b.o=new K(0.8,1);return b},Prism1:function(a,b,c){a=new L;M(a,0.25*b,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(b,0.5*c);a.lineTo(0.5*
b,c);a.lineTo(0,c);O(a);M(a,0.25*b,0.25*c,o);a.lineTo(0.5*b,c);Sk(a);b=a.k;b.n=new K(0.408,0.172);b.o=new K(0.833,0.662);return b},Prism2:function(a,b,c){a=new L;M(a,0,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);O(a);M(a,0,c,o);a.lineTo(0.25*b,0.5*c);a.lineTo(b,0.25*c);a.moveTo(0,0.25*c);a.lineTo(0.25*b,0.5*c);Sk(a);b=a.k;b.n=new K(0.25,0.5);b.o=new K(0.75,0.75);return b},Pyramid1:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(b,0.75*c);a.lineTo(0.5*
b,1*c);a.lineTo(0,0.75*c);O(a);M(a,0.5*b,0,o);a.lineTo(0.5*b,1*c);Sk(a);b=a.k;b.n=new K(0.25,0.367);b.o=new K(0.75,0.875);return b},Pyramid2:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(b,0.85*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.85*c);O(a);M(a,0.5*b,0,o);a.lineTo(0.5*b,0.7*c);a.lineTo(0,0.85*c);a.moveTo(0.5*b,0.7*c);a.lineTo(1*b,0.85*c);Sk(a);b=a.k;b.n=new K(0.25,0.367);b.o=new K(0.75,0.875);return b},Actor:function(a,b,c){var d=Cc*0.2,e=Cc*0.1,a=0.5,g=0.1,i=new L;M(i,a*b,(g+0.1)*c,h);N(i,(a-d)*
b,(g+0.1)*c,(a-0.2)*b,(g+e)*c,(a-0.2)*b,g*c);N(i,(a-0.2)*b,(g-e)*c,(a-d)*b,(g-0.1)*c,a*b,(g-0.1)*c);N(i,(a+d)*b,(g-0.1)*c,(a+0.2)*b,(g-e)*c,(a+0.2)*b,g*c);N(i,(a+0.2)*b,(g+e)*c,(a+d)*b,(g+0.1)*c,a*b,(g+0.1)*c);d=0.05;e=Cc*d;M(i,0.5*b,0.2*c,h);i.lineTo(0.95*b,0.2*c);a=0.95;g=0.25;N(i,(a+e)*b,(g-d)*c,(a+d)*b,(g-e)*c,(a+d)*b,g*c);i.lineTo(1*b,0.6*c);i.lineTo(0.85*b,0.6*c);i.lineTo(0.85*b,0.35*c);d=0.025;e=Cc*d;a=0.825;g=0.35;N(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);N(i,(a-e)*b,(g-d)*c,(a-d)*
b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.8*b,1*c);i.lineTo(0.55*b,1*c);i.lineTo(0.55*b,0.7*c);d=0.05;e=Cc*d;a=0.5;g=0.7;N(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);N(i,(a-e)*b,(g-d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.45*b,1*c);i.lineTo(0.2*b,1*c);i.lineTo(0.2*b,0.35*c);d=0.025;e=Cc*d;a=0.175;g=0.35;N(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);N(i,(a-e)*b,(g-d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.15*b,0.6*c);i.lineTo(0*b,0.6*c);i.lineTo(0*b,0.25*c);d=0.05;e=Cc*d;a=0.05;g=0.25;N(i,(a-
d)*b,(g-e)*c,(a-e)*b,(g-d)*c,a*b,(g-d)*c);i.lineTo(0.5*b,0.2*c);b=i.k;b.n=new K(0.2,0.2);b.o=new K(0.8,0.65);return b},Card:function(a,b,c){a=new L;M(a,1*b,0*c,h);a.lineTo(1*b,1*c);a.lineTo(0*b,1*c);a.lineTo(0*b,0.2*c);a.lineTo(0.2*b,0*c);O(a);b=a.k;b.n=new K(0,0.2);b.o=new K(1,1);return b},Collate:function(a,b,c){a=new L;M(a,0.5*b,0.5*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(0.5*b,0.5*c);M(a,0.5*b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);b=a.k;b.n=new K(0.25,0);b.o=new K(0.75,
0.25);return b},CreateRequest:function(a,b,c){a=a?a.Db:0;a===0&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,0,a*c,o);d.lineTo(1*b,a*c);d.moveTo(0,(1-a)*c);d.lineTo(1*b,(1-a)*c);Sk(d);b=d.k;b.n=new K(0,a);b.o=new K(1,1-a);return b},Database:function(a,b,c){var a=new L,d=Cc*0.5,e=Cc*0.1;M(a,1*b,0.1*c,h);a.lineTo(1*b,0.9*c);N(a,1*b,(0.9+e)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.9+e)*c,0,0.9*c);a.lineTo(0,0.1*c);N(a,0,(0.1-e)*c,(0.5-d)*b,0,0.5*
b,0);N(a,(0.5+d)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);M(a,1*b,0.1*c,o);N(a,1*b,(0.1+e)*c,(0.5+d)*b,0.2*c,0.5*b,0.2*c);N(a,(0.5-d)*b,0.2*c,0,(0.1+e)*c,0,0.1*c);a.moveTo(1*b,0.2*c);N(a,1*b,(0.2+e)*c,(0.5+d)*b,0.3*c,0.5*b,0.3*c);N(a,(0.5-d)*b,0.3*c,0,(0.2+e)*c,0,0.2*c);a.moveTo(1*b,0.3*c);N(a,1*b,(0.3+e)*c,(0.5+d)*b,0.4*c,0.5*b,0.4*c);N(a,(0.5-d)*b,0.4*c,0,(0.3+e)*c,0,0.3*c);Sk(a);b=a.k;b.n=new K(0,0.4);b.o=new K(1,0.9);return b},StoredData:"DataStorage",DataStorage:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.75*
b,0);N(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0,1*c);N(a,0.25*b,0.9*c,0.25*b,0.1*c,0,0);O(a);b=a.k;b.n=new K(0.226,0);b.o=new K(0.81,1);return b},DiskStorage:function(a,b,c){var a=new L,d=Cc*0.5,e=Cc*0.1;M(a,1*b,0.1*c,h);a.lineTo(1*b,0.9*c);N(a,1*b,(0.9+e)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.9+e)*c,0,0.9*c);a.lineTo(0,0.1*c);N(a,0,(0.1-e)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);M(a,1*b,0.1*c,o);N(a,1*b,(0.1+e)*c,(0.5+d)*b,0.2*c,0.5*b,0.2*c);N(a,(0.5-d)*b,0.2*c,
0,(0.1+e)*c,0,0.1*c);a.moveTo(1*b,0.2*c);N(a,1*b,(0.2+e)*c,(0.5+d)*b,0.3*c,0.5*b,0.3*c);N(a,(0.5-d)*b,0.3*c,0,(0.2+e)*c,0,0.2*c);Sk(a);b=a.k;b.n=new K(0,0.3);b.o=new K(1,0.9);return b},Display:function(a,b,c){a=new L;M(a,0.25*b,0,h);a.lineTo(0.75*b,0);N(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);a.lineTo(0,0.5*c);O(a);b=a.k;b.n=new K(0.25,0);b.o=new K(0.75,1);return b},DividedEvent:function(a,b,c){a=a?a.Db:0;a===0?a=0.2:a<0.15&&(a=0.15);var d=new L,e=Cc*0.2;M(d,0,0.2*c,h);N(d,0,(0.2-e)*c,(0.2-
e)*b,0,0.2*b,0);d.lineTo(0.8*b,0);N(d,(0.8+e)*b,0,1*b,(0.2-e)*c,1*b,0.2*c);d.lineTo(1*b,0.8*c);N(d,1*b,(0.8+e)*c,(0.8+e)*b,1*c,0.8*b,1*c);d.lineTo(0.2*b,1*c);N(d,(0.2-e)*b,1*c,0,(0.8+e)*c,0,0.8*c);d.lineTo(0,0.2*c);M(d,0,a*c,o);d.lineTo(1*b,a*c);Sk(d);b=d.k;b.n=new K(0,a);b.o=new K(1,1-a);return b},DividedProcess:function(a,b,c){a=a?a.Db:0;a<0.1&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,0,a*c,o);d.lineTo(1*b,a*c);Sk(d);b=d.k;b.n=new K(0,a);b.o=new K(1,
1);return b},Document:function(a,b,c){c=c/0.8;a=new L;M(a,0,0.7*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);N(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);O(a);b=a.k;b.n=new K(0,0);b.o=new K(1,0.6);return b},ExternalOrganization:function(a,b,c){a=a?a.Db:0;a<0.2&&(a=0.2);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,a*b,0,o);d.lineTo(0,a*c);d.moveTo(1*b,a*c);d.lineTo((1-a)*b,0);d.moveTo(0,(1-a)*c);d.lineTo(a*b,1*c);d.moveTo((1-a)*b,1*c);d.lineTo(1*b,(1-a)*c);Sk(d);
b=d.k;b.n=new K(a/2,a/2);b.o=new K(1-a/2,1-a/2);return b},ExternalProcess:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);O(a);M(a,0.1*b,0.4*c,o);a.lineTo(0.1*b,0.6*c);a.moveTo(0.9*b,0.6*c);a.lineTo(0.9*b,0.4*c);a.moveTo(0.6*b,0.1*c);a.lineTo(0.4*b,0.1*c);a.moveTo(0.4*b,0.9*c);a.lineTo(0.6*b,0.9*c);Sk(a);b=a.k;b.n=new K(0.25,0.25);b.o=new K(0.75,0.75);return b},File:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*
b,1*c);a.lineTo(0,1*c);O(a);M(a,0.75*b,0,o);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.25*c);Sk(a);b=a.k;b.n=new K(0,0.25);b.o=new K(1,1);return b},Interrupt:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,0.5*c);M(a,1*b,0.5*c,o);a.lineTo(1*b,1*c);M(a,1*b,0.5*c,o);a.lineTo(1*b,0);b=a.k;b.n=new K(0,0.25);b.o=new K(0.5,0.75);return b},InternalStorage:function(a,b,c){var d=a?a.Db:0,a=a?a.Gr:0;d===0&&(d=0.1);a===0&&(a=0.1);var e=new L;M(e,0,0,h);e.lineTo(1*b,0);e.lineTo(1*
b,1*c);e.lineTo(0,1*c);O(e);M(e,d*b,0,o);e.lineTo(d*b,1*c);e.moveTo(0,a*c);e.lineTo(1*b,a*c);Sk(e);b=e.k;b.n=new K(d,a);b.o=new K(1,1);return b},Junction:function(a,b,c){var a=new L,d=1/Math.SQRT2,e=(1-1/Math.SQRT2)/2,g=Cc*0.5;M(a,1*b,0.5*c,h);N(a,1*b,(0.5+g)*c,(0.5+g)*b,1*c,0.5*b,1*c);N(a,(0.5-g)*b,1*c,0,(0.5+g)*c,0,0.5*c);N(a,0,(0.5-g)*c,(0.5-g)*b,0,0.5*b,0);N(a,(0.5+g)*b,0,1*b,(0.5-g)*c,1*b,0.5*c);M(a,(e+d)*b,(e+d)*c,o);a.lineTo(e*b,e*c);a.moveTo(e*b,(e+d)*c);a.lineTo((e+d)*b,e*c);Sk(a);b=a.k;
b.Gb=Kg;return b},LinedDocument:function(a,b,c){c=c/0.8;a=new L;M(a,0,0.7*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);N(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);O(a);M(a,0.1*b,0,o);a.lineTo(0.1*b,0.75*c);Sk(a);b=a.k;b.n=new K(0.1,0);b.o=new K(1,0.6);return b},LoopLimit:function(a,b,c){a=new L;M(a,0,1*c,h);a.lineTo(0,0.25*c);a.lineTo(0.25*b,0);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*b,1*c);O(a);b=a.k;b.n=new K(0,0.25);b.o=new K(1,1);return b},SequentialData:"MagneticTape",MagneticTape:function(a,
b,c){var a=new L,d=Cc*0.5;M(a,0.5*b,1*c,h);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);N(a,1*b,(0.5+d)*c,(0.5+d)*b,0.9*c,0.6*b,0.9*c);a.lineTo(1*b,0.9*c);a.lineTo(1*b,1*c);a.lineTo(0.5*b,1*c);b=a.k;b.n=new K(0.15,0.15);b.o=new K(0.85,0.8);return b},ManualInput:function(a,b,c){a=new L;M(a,1*b,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.25*c);O(a);b=a.k;b.n=new K(0,0.25);b.o=new K(1,1);return b},MessageFromUser:function(a,
b,c){a=a?a.Db:0;a===0&&(a=0.7);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(a*b,0.5*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=new K(0,0);b.o=new K(a,1);return b},MicroformProcessing:function(a,b,c){a=a?a.Db:0;a===0&&(a=0.25);var d=new L;M(d,0,0,h);d.lineTo(0.5*b,a*c);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.5*b,(1-a)*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=new K(0,a);b.o=new K(1,1-a);return b},MicroformRecording:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.15*
c);a.lineTo(1*b,0.85*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);O(a);b=a.k;b.n=new K(0,0.25);b.o=new K(1,0.75);return b},MultiDocument:function(a,b,c){c=c/0.8;a=new L;M(a,b,0,h);a.lineTo(b,0.5*c);N(a,0.96*b,0.47*c,0.93*b,0.45*c,0.9*b,0.44*c);a.lineTo(0.9*b,0.6*c);N(a,0.86*b,0.57*c,0.83*b,0.55*c,0.8*b,0.54*c);a.lineTo(0.8*b,0.7*c);N(a,0.4*b,0.4*c,0.4*b,1*c,0,0.7*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);a.lineTo(0.1*b,0.1*c);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);O(a);M(a,0.1*b,0.2*c,o);a.lineTo(0.8*
b,0.2*c);a.lineTo(0.8*b,0.54*c);a.moveTo(0.2*b,0.1*c);a.lineTo(0.9*b,0.1*c);a.lineTo(0.9*b,0.44*c);Sk(a);b=a.k;b.n=new K(0,0.25);b.o=new K(0.8,0.77);return b},MultiProcess:function(a,b,c){a=new L;M(a,0.1*b,0.1*c,h);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.8*c);a.lineTo(0.9*b,0.8*c);a.lineTo(0.9*b,0.9*c);a.lineTo(0.8*b,0.9*c);a.lineTo(0.8*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);O(a);M(a,0.2*b,0.1*c,o);a.lineTo(0.9*b,0.1*c);a.lineTo(0.9*b,0.8*c);
a.moveTo(0.1*b,0.2*c);a.lineTo(0.8*b,0.2*c);a.lineTo(0.8*b,0.9*c);Sk(a);b=a.k;b.n=new K(0,0.2);b.o=new K(0.8,1);return b},OfflineStorage:function(a,b,c){a=a?a.Db:0;a===0&&(a=0.1);var d=1-a,e=new L;M(e,0,0,h);e.lineTo(1*b,0);e.lineTo(0.5*b,1*c);O(e);M(e,0.5*a*b,a*c,o);e.lineTo((1-0.5*a)*b,a*c);Sk(e);b=e.k;b.n=new K(d/4+0.5*a,a);b.o=new K(3*d/4+0.5*a,a+0.5*d);return b},OffPageConnector:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.75*b,1*c);a.lineTo(0,1*c);O(a);
b=a.k;b.n=new K(0,0);b.o=new K(0.75,1);return b},Or:function(a,b,c){var a=new L,d=Cc*0.5;M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);M(a,1*b,0.5*c,o);a.lineTo(0,0.5*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0);Sk(a);b=a.k;b.Gb=Kg;return b},PaperTape:function(a,b,c){c=c/0.8;a=new L;M(a,0,0.7*c,h);a.lineTo(0,0.3*c);N(a,0.5*b,0.6*c,0.5*b,0,1*b,0.3);a.lineTo(1*b,0.7*c);N(a,
0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);O(a);b=a.k;b.n=new K(0,0.49);b.o=new K(1,0.75);return b},PrimitiveFromCall:function(a,b,c){var d=a?a.Db:0,a=a?a.Gr:0;d===0&&(d=0.1);a===0&&(a=0.3);var e=new L;M(e,0,0,h);e.lineTo(1*b,0);e.lineTo((1-a)*b,0.5*c);e.lineTo(1*b,1*c);e.lineTo(0,1*c);O(e);b=e.k;b.n=new K(d,0);b.o=new K(1-a,1);return b},PrimitiveToCall:function(a,b,c){var d=a?a.Db:0,a=a?a.Gr:0;d===0&&(d=0.1);a===0&&(a=0.3);var e=new L;M(e,0,0,h);e.lineTo((1-a)*b,0);e.lineTo(1*b,0.5*c);e.lineTo((1-a)*b,1*c);
e.lineTo(0,1*c);O(e);b=e.k;b.n=new K(d,0);b.o=new K(1-a,1);return b},Subroutine:"Procedure",Procedure:function(a,b,c){a=a?a.Db:0;a===0&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,(1-a)*b,0,o);d.lineTo((1-a)*b,1*c);d.moveTo(a*b,0);d.lineTo(a*b,1*c);Sk(d);b=d.k;b.n=new K(a,0);b.o=new K(1-a,1);return b},Process:function(a,b,c){a=a?a.Db:0;a===0&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,a*b,0,o);d.lineTo(a*
b,1*c);Sk(d);b=d.k;b.n=new K(a,0);b.o=new K(1,1);return b},Sort:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);O(a);M(a,0,0.5*c,o);a.lineTo(1*b,0.5*c);Sk(a);b=a.k;b.n=new K(0.25,0.25);b.o=new K(0.75,0.5);return b},Start:function(a,b,c){a=new L;M(a,0.25*b,0,h);a.lineTo(0.75*b,0);N(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);N(a,0,1*c,0,0,0.25*b,0);M(a,0.25*b,0,o);a.lineTo(0.25*b,1*c);a.moveTo(0.75*b,0);a.lineTo(0.75*b,1*c);Sk(a);b=a.k;b.n=new K(0.25,
0);b.o=new K(0.75,1);return b},Terminator:function(a,b,c){a=new L;M(a,0.25*b,0,h);a.lineTo(0.75*b,0);N(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);N(a,0,1*c,0,0,0.25*b,0);b=a.k;b.n=new K(0.23,0);b.o=new K(0.77,1);return b},TransmittalTape:function(a,b,c){a=a?a.Db:0;a===0&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.75*b,(1-a)*c);d.lineTo(0,(1-a)*c);O(d);b=d.k;b.n=new K(0,0);b.o=new K(1,1-a);return b},AndGate:function(a,b,c){var a=new L,d=Cc*0.5;M(a,0,0,h);a.lineTo(0.5*
b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);a.lineTo(0,1*c);O(a);b=a.k;b.n=new K(0,0);b.o=new K(0.55,1);return b},Buffer:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);O(a);b=a.k;b.n=new K(0,0.25);b.o=new K(0.5,0.75);return b},Clock:function(a,b,c){var a=new L,d=Cc*0.5;M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*
c,1*b,0.5*c);M(a,1*b,0.5*c,o);a.lineTo(1*b,0.5*c);M(a,0.8*b,0.75*c,o);a.lineTo(0.8*b,0.25*c);a.lineTo(0.6*b,0.25*c);a.lineTo(0.6*b,0.75*c);a.lineTo(0.4*b,0.75*c);a.lineTo(0.4*b,0.25*c);a.lineTo(0.2*b,0.25*c);a.lineTo(0.2*b,0.75*c);Sk(a);b=a.k;b.Gb=Kg;return b},Ground:function(a,b,c){a=new L;M(a,0.5*b,0,o);a.lineTo(0.5*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*b,0.6*c);a.moveTo(0.3*b,0.8*c);a.lineTo(0.7*b,0.8*c);a.moveTo(0.4*b,1*c);a.lineTo(0.6*b,1*c);return a.k},Inverter:function(a,b,c){var a=new L,
d=Cc*0.1;M(a,0.8*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.8*b,0.5*c);M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.9+d)*b,0.6*c,0.9*b,0.6*c);N(a,(0.9-d)*b,0.6*c,0.8*b,(0.5+d)*c,0.8*b,0.5*c);N(a,0.8*b,(0.5-d)*c,(0.9-d)*b,0.4*c,0.9*b,0.4*c);N(a,(0.9+d)*b,0.4*c,1*b,(0.5-d)*c,1*b,0.5*c);b=a.k;b.n=new K(0,0.25);b.o=new K(0.4,0.75);return b},NandGate:function(a,b,c){var a=new L,d=Cc*0.5,e=Cc*0.4,g=Cc*0.1;M(a,0.8*b,0.5*c,h);N(a,0.8*b,(0.5+e)*c,(0.4+d)*b,1*c,0.4*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.4*
b,0);N(a,(0.4+d)*b,0,0.8*b,(0.5-e)*c,0.8*b,0.5*c);M(a,1*b,0.5*c,h);N(a,1*b,(0.5+g)*c,(0.9+g)*b,0.6*c,0.9*b,0.6*c);N(a,(0.9-g)*b,0.6*c,0.8*b,(0.5+g)*c,0.8*b,0.5*c);N(a,0.8*b,(0.5-g)*c,(0.9-g)*b,0.4*c,0.9*b,0.4*c);N(a,(0.9+g)*b,0.4*c,1*b,(0.5-g)*c,1*b,0.5*c);b=a.k;b.n=new K(0,0.05);b.o=new K(0.55,0.95);return b},NorGate:function(a,b,c){var a=new L,d=0.5,e=Cc*d,g=0,i=0.5;M(a,0.8*b,0.5*c,h);N(a,0.7*b,(i+e)*c,(g+e)*b,(i+d)*c,0,1*c);N(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);N(a,(g+e)*b,(i-d)*c,0.7*b,(i-e)*c,
0.8*b,0.5*c);d=0.1;e=Cc*0.1;g=0.9;i=0.5;M(a,(g-d)*b,i*c,h);N(a,(g-d)*b,(i-e)*c,(g-e)*b,(i-d)*c,g*b,(i-d)*c);N(a,(g+e)*b,(i-d)*c,(g+d)*b,(i-e)*c,(g+d)*b,i*c);N(a,(g+d)*b,(i+e)*c,(g+e)*b,(i+d)*c,g*b,(i+d)*c);N(a,(g-e)*b,(i+d)*c,(g-d)*b,(i+e)*c,(g-d)*b,i*c);b=a.k;b.n=new K(0.2,0.25);b.o=new K(0.6,0.75);return b},OrGate:function(a,b,c){var a=new L,d=Cc*0.5;M(a,0,0,h);N(a,(0+d+d)*b,0*c,0.8*b,(0.5-d)*c,1*b,0.5*c);N(a,0.8*b,(0.5+d)*c,(0+d+d)*b,1*c,0,1*c);N(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);O(a);b=a.k;b.n=
new K(0.2,0.25);b.o=new K(0.75,0.75);return b},XnorGate:function(a,b,c){var a=new L,d=0.5,e=Cc*d,g=0.2,i=0.5;M(a,0.1*b,0,o);N(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);M(a,0.8*b,0.5*c,h);N(a,0.7*b,(i+e)*c,(g+e)*b,(i+d)*c,0.2*b,1*c);N(a,0.45*b,0.75*c,0.45*b,0.25*c,0.2*b,0);N(a,(g+e)*b,(i-d)*c,0.7*b,(i-e)*c,0.8*b,0.5*c);d=0.1;e=Cc*0.1;g=0.9;i=0.5;M(a,(g-d)*b,i*c,h);N(a,(g-d)*b,(i-e)*c,(g-e)*b,(i-d)*c,g*b,(i-d)*c);N(a,(g+e)*b,(i-d)*c,(g+d)*b,(i-e)*c,(g+d)*b,i*c);N(a,(g+d)*b,(i+e)*c,(g+e)*b,(i+d)*c,g*
b,(i+d)*c);N(a,(g-e)*b,(i+d)*c,(g-d)*b,(i+e)*c,(g-d)*b,i*c);b=a.k;b.n=new K(0.4,0.25);b.o=new K(0.65,0.75);return b},XorGate:function(a,b,c){var a=new L,d=Cc*0.5;M(a,0.1*b,0,o);N(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);M(a,0.2*b,0,h);N(a,(0.2+d)*b,0*c,0.9*b,(0.5-d)*c,1*b,0.5*c);N(a,0.9*b,(0.5+d)*c,(0.2+d)*b,1*c,0.2*b,1*c);N(a,0.45*b,0.75*c,0.45*b,0.25*c,0.2*b,0);O(a);b=a.k;b.n=new K(0.4,0.25);b.o=new K(0.8,0.75);return b},Capacitor:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(0,1*c);a.moveTo(1*b,
0);a.lineTo(1*b,1*c);return a.k},Resistor:function(a,b,c){a=new L;M(a,0,0.5*c,o);a.lineTo(0.1*b,0);a.lineTo(0.2*b,1*c);a.lineTo(0.3*b,0);a.lineTo(0.4*b,1*c);a.lineTo(0.5*b,0);a.lineTo(0.6*b,1*c);a.lineTo(0.7*b,0.5*c);return a.k},Inductor:function(a,b,c){var a=new L,d=Cc*0.1,e=0.1,g=0.5;M(a,(e-d*0.5)*b,(g+0.1)*c,o);N(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.3;g=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);N(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);
g=e=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);N(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.7;g=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);N(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.9;g=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,(e+d*0.5)*b,(g+0.1)*c);return a.k},ACvoltageSource:function(a,b,c){var a=new L,d=Cc*0.5;M(a,0*b,0.5*c,o);N(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);N(a,(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*c);N(a,1*b,(0.5+
d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);a.moveTo(0.1*b,0.5*c);N(a,0.5*b,0*c,0.5*b,1*c,0.9*b,0.5*c);b=a.k;b.Gb=Kg;return b},DCvoltageSource:function(a,b,c){a=new L;M(a,0,0.75*c,o);a.lineTo(0,0.25*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.k},Diode:function(a,b,c){a=new L;M(a,1*b,0,o);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,0.5*c);a.lineTo(1*b,1*c);b=a.k;b.n=new K(0,0.25);b.o=new K(0.5,0.75);return b},Wifi:function(a,b,c){var d=b,e=c,b=b*0.38,
c=c*0.6,a=new L,g=Cc*0.8,i=0.8,j=0,k=0.5,d=(d-b)/2,e=(e-c)/2;M(a,j*b+d,(k+i)*c+e,h);N(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);N(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);N(a,j*b+d,(k-i)*c+e,(j-i+g*0.5)*b+d,(k-g)*c+e,(j-i+g*0.5)*b+d,k*c+e);N(a,(j-i+g*0.5)*b+d,(k+g)*c+e,j*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);O(a);g=Cc*0.4;i=0.4;j=0.2;k=0.5;M(a,j*b+d,(k+i)*c+e,h);N(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);N(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+
d,(k-i)*c+e);N(a,j*b+d,(k-i)*c+e,(j-i+g*0.5)*b+d,(k-g)*c+e,(j-i+g*0.5)*b+d,k*c+e);N(a,(j-i+g*0.5)*b+d,(k+g)*c+e,j*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);O(a);g=Cc*0.2;i=0.2;k=j=0.5;M(a,(j-i)*b+d,k*c+e,h);N(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);N(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);N(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);N(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);g=Cc*0.4;i=0.4;j=0.8;k=0.5;M(a,j*b+d,(k-i)*c+e,h);N(a,(j+g)*b+
d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);N(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);N(a,j*b+d,(k+i)*c+e,(j+i-g*0.5)*b+d,(k+g)*c+e,(j+i-g*0.5)*b+d,k*c+e);N(a,(j+i-g*0.5)*b+d,(k-g)*c+e,j*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);O(a);g=Cc*0.8;i=0.8;j=1;k=0.5;M(a,j*b+d,(k-i)*c+e,h);N(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);N(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);N(a,j*b+d,(k+i)*c+e,(j+i-g*0.5)*b+d,(k+g)*c+e,(j+i-g*0.5)*b+d,k*c+e);N(a,(j+i-g*0.5)*
b+d,(k-g)*c+e,j*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);O(a);return a.k},Email:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(1*b,0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);O(a);M(a,0,0,o);a.lineTo(0.5*b,0.6*c);a.lineTo(1*b,0);a.moveTo(0,1*c);a.lineTo(0.45*b,0.54*c);a.moveTo(1*b,1*c);a.lineTo(0.55*b,0.54*c);Sk(a);return a.k},Ethernet:function(a,b,c){a=new L;M(a,0.35*b,0,h);a.lineTo(0.65*b,0);a.lineTo(0.65*b,0.4*c);a.lineTo(0.35*b,0.4*c);a.lineTo(0.35*b,0);O(a);M(a,0.1*b,1*c,h,h);a.lineTo(0.4*b,1*c);a.lineTo(0.4*
b,0.6*c);a.lineTo(0.1*b,0.6*c);a.lineTo(0.1*b,1*c);O(a);M(a,0.6*b,1*c,h,h);a.lineTo(0.9*b,1*c);a.lineTo(0.9*b,0.6*c);a.lineTo(0.6*b,0.6*c);a.lineTo(0.6*b,1*c);O(a);M(a,0,0.5*c,o);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.5*b,0.4*c);a.moveTo(0.75*b,0.5*c);a.lineTo(0.75*b,0.6*c);a.moveTo(0.25*b,0.5*c);a.lineTo(0.25*b,0.6*c);Sk(a);return a.k},Power:function(a,b,c){var a=new L,d=Cc*0.4,e=0.4,g=new E(0,0),i=new E(0,0),j=new E(0,0),k=new E(0,0);new E(0,0);Tk(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,
0.5+e,0.5,0.5,g,g,i,j,k);new E(i.x,i.y);M(a,i.x*b,i.y*c,h);N(a,j.x*b,j.y*c,k.x*b,k.y*c,(0.5+e)*b,0.5*c);N(a,(0.5+e)*b,(0.5+d)*c,(0.5+d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);N(a,(0.5-d)*b,(0.5+e)*c,(0.5-e)*b,(0.5+d)*c,(0.5-e)*b,0.5*c);Tk(0.5-e,0.5,0.5-e,0.5-d,0.5-d,0.5-e,0.5,0.5-e,0.5,j,k,i,g,g);N(a,j.x*b,j.y*c,k.x*b,k.y*c,i.x*b,i.y*c);d=Cc*0.3;e=0.3;Tk(0.5-e,0.5,0.5-e,0.5-d,0.5-d,0.5-e,0.5,0.5-e,0.5,j,k,i,g,g);a.lineTo(i.x*b,i.y*c);N(a,k.x*b,k.y*c,j.x*b,j.y*c,(0.5-e)*b,0.5*c);N(a,(0.5-e)*b,(0.5+d)*c,(0.5-
d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);N(a,(0.5+d)*b,(0.5+e)*c,(0.5+e)*b,(0.5+d)*c,(0.5+e)*b,0.5*c);Tk(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.5,g,g,i,j,k);N(a,k.x*b,k.y*c,j.x*b,j.y*c,i.x*b,i.y*c);O(a);M(a,0.45*b,0,h);a.lineTo(0.45*b,0.5*c);a.lineTo(0.55*b,0.5*c);a.lineTo(0.55*b,0);O(a);b=a.k;b.n=new K(0.25,0.55);b.o=new K(0.75,0.8);return b},Fallout:function(a,b,c){var a=new L,d=Cc*0.5;M(a,0*b,0.5*c,h);N(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);N(a,(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*c);N(a,1*b,(0.5+
d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);var e=d=0;M(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.4;e=0;O(a);M(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.2;e=-0.3;O(a);M(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);O(a);b=a.k;b.Gb=Kg;return b},
IrritationHazard:function(a,b,c){a=new L;M(a,0.2*b,0*c,h);a.lineTo(0.5*b,0.3*c);a.lineTo(0.8*b,0*c);a.lineTo(1*b,0.2*c);a.lineTo(0.7*b,0.5*c);a.lineTo(1*b,0.8*c);a.lineTo(0.8*b,1*c);a.lineTo(0.5*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0*b,0.8*c);a.lineTo(0.3*b,0.5*c);a.lineTo(0*b,0.2*c);O(a);b=a.k;b.n=new K(0.3,0.3);b.o=new K(0.7,0.7);return b},ElectricalHazard:function(a,b,c){a=new L;M(a,0.37,0*c,h);a.lineTo(0.5*b,0.11*c);a.lineTo(0.77*b,0.04*c);a.lineTo(0.33*b,0.49*c);a.lineTo(1*b,0.37*c);a.lineTo(0.63*
b,0.86*c);a.lineTo(0.77*b,0.91*c);a.lineTo(0.34*b,1*c);a.lineTo(0.34*b,0.78*c);a.lineTo(0.44*b,0.8*c);a.lineTo(0.65*b,0.56*c);a.lineTo(0*b,0.68*c);O(a);return a.k},FireHazard:function(a,b,c){a=new L;M(a,0.1*b,1*c,h);N(a,-0.25*b,0.63*c,0.45*b,0.44*c,0.29*b,0*c);N(a,0.48*b,0.17*c,0.54*b,0.35*c,0.51*b,0.42*c);N(a,0.59*b,0.29*c,0.58*b,0.28*c,0.59*b,0.18*c);N(a,0.8*b,0.34*c,0.88*b,0.43*c,0.75*b,0.6*c);N(a,0.87*b,0.48*c,0.88*b,0.43*c,0.88*b,0.31*c);N(a,1.17*b,0.76*c,0.82*b,0.8*c,0.9*b,1*c);O(a);b=a.k;b.n=
new K(0.05,0.645);b.o=new K(0.884,0.908);return b},BpmnActivityLoop:function(a,b,c){var a=new L,d=0.5*(4*(Math.SQRT2-1)/3);M(a,(0.5*Math.SQRT2/2+0.5)*b,(1-(0.5-0.5*Math.SQRT2/2))*c,o);N(a,1*b,0.7*c,1*b,0.5*c,1*b,0.5*c);N(a,1*b,(0.5-d+0)*c,(0.5+d+0)*b,0*c,0.5*b,0*c);N(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);N(a,0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.35*b,0.98*c);a.moveTo(0.35*b,0.8*c);a.lineTo(0.35*b,1*c);a.lineTo(0.15*b,1*c);return a.k},BpmnActivityParallel:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(0,
1*c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.k},BpmnActivitySequential:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(1*b,0);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0,1*c);a.lineTo(1*b,1*c);return a.k},BpmnActivityAdHoc:function(a,b,c){a=new L;M(a,0,0,o);M(a,1*b,1*c,o);M(a,0,0.5*c,o);N(a,0.2*b,0.35*c,0.3*b,0.35*c,0.5*b,0.5*c);N(a,0.7*b,0.65*c,0.8*b,0.65*c,1*b,0.5*c);return a.k},BpmnActivityCompensation:function(a,b,c){a=new L;M(a,0,0.5*c,h);a.lineTo(0.5*
b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(1*b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(0.5*b,1*c);O(a);return a.k},BpmnTaskMessage:function(a,b,c){a=new L;M(a,0,0.2*c,h);a.lineTo(1*b,0.2*c);a.lineTo(1*b,0.8*c);a.lineTo(0,0.8*c);a.lineTo(0,0.8*c);O(a);M(a,0,0.2*c,o);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,0.2*c);Sk(a);return a.k},BpmnTaskScript:function(a,b,c){a=new L;M(a,0.7*b,1*c,h);a.lineTo(0.3*b,1*c);N(a,0.6*b,0.5*c,0,0.5*c,0.3*b,0);a.lineTo(0.7*b,0);N(a,0.4*b,0.5*c,1*b,0.5*c,0.7*b,1*c);O(a);M(a,
0.45*b,0.73*c,o);a.lineTo(0.7*b,0.73*c);a.moveTo(0.38*b,0.5*c);a.lineTo(0.63*b,0.5*c);a.moveTo(0.31*b,0.27*c);a.lineTo(0.56*b,0.27*c);Sk(a);return a.k},BpmnTaskUser:function(a,b,c){a=new L;M(a,0,0,o);M(a,0.335*b,(1-0.555)*c,h);a.lineTo(0.335*b,0.595*c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.665*b,(1-0.555)*c);N(a,0.88*b,0.46*c,0.98*b,0.54*c,1*b,0.68*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.68*c);N(a,0.02*b,0.54*c,0.12*b,0.46*c,0.335*b,(1-0.555)*c);a.lineTo(0.365*b,0.405*c);var d=0.5-0.285,
e=Math.PI/4,g=4*(1-Math.cos(e))/(3*Math.sin(e)),e=g*d,g=g*d;N(a,(0.5-(e+d)/2)*b,(d+(d+g)/2)*c,(0.5-d)*b,(d+g)*c,(0.5-d)*b,d*c);N(a,(0.5-d)*b,(d-g)*c,(0.5-e)*b,(d-d)*c,0.5*b,(d-d)*c);N(a,(0.5+e)*b,(d-d)*c,(0.5+d)*b,(d-g)*c,(0.5+d)*b,d*c);N(a,(0.5+d)*b,(d+g)*c,(0.5+(e+d)/2)*b,(d+(d+g)/2)*c,0.635*b,0.405*c);a.lineTo(0.635*b,0.405*c);a.lineTo(0.665*b,(1-0.555)*c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.335*b,0.595*c);M(a,0.2*b,1*c,o);a.lineTo(0.2*b,0.8*c);M(a,0.8*b,1*c,o);a.lineTo(0.8*b,0.8*c);return a.k},
BpmnEventConditional:function(a,b,c){a=new L;M(a,0.1*b,0,h);a.lineTo(0.9*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.1*b,1*c);O(a);M(a,0.2*b,0.2*c,o);a.lineTo(0.8*b,0.2*c);a.moveTo(0.2*b,0.4*c);a.lineTo(0.8*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*b,0.6*c);a.moveTo(0.2*b,0.8*c);a.lineTo(0.8*b,0.8*c);Sk(a);return a.k},BpmnEventError:function(a,b,c){a=new L;M(a,0,1*c,h);a.lineTo(0.33*b,0);a.lineTo(0.66*b,0.5*c);a.lineTo(1*b,0);a.lineTo(0.66*b,1*c);a.lineTo(0.33*b,0.5*c);O(a);return a.k},BpmnEventEscalation:function(a,
b,c){a=new L;M(a,0,0,o);M(a,1*b,1*c,o);M(a,0.1*b,1*c,h);a.lineTo(0.5*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.5*b,0.5*c);O(a);return a.k},BpmnEventTimer:function(a,b,c){var a=new L,d=Cc*0.5;M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);M(a,0.5*b,0,o);a.lineTo(0.5*b,0.15*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0.85*c);a.moveTo(0,0.5*c);a.lineTo(0.15*b,0.5*c);a.moveTo(1*b,0.5*
c);a.lineTo(0.85*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.58*b,0.1*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.78*b,0.54*c);Sk(a);b=a.k;b.Gb=Kg;return b}},Yk;for(Yk in Ck)Ck[Yk.toLowerCase()]=Yk;
var Zk={None:"",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",OpenTriangle:"m 0,0 l 8,4 -8,4",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",Line:"m 0,0 l 0,8",
DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",
BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 12,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -4 0 4 z",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",
HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",
ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 -8,-4 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 -8,0 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",Fork:"m 0,4 l 8,0 m -6,0 l 6,-4 m -6,4 l 6,4",CircleFork:"F1 m 6,3 b 0 360 -3 0 3 m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
LineFork:"m 0,0 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",CircleLine:"F1 m 8 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",CircleLineFork:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m 4 -4 l 0 8",OpenTriangleTop:"m 0,0 l 8,4 -8,0 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4 -8,0",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",
OpenTriangleLine:"m 0,0 8,4 -8,4 m 8.5,0 l 0,-8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z",ForwardSlash:"m 0,8 l 5,-8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",BackSlash:"m 0,0 l 5,8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",
BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3"},Ak,$k={},al;for(al in Ck){var bl=Ck[al];"string"===typeof bl&&(bl=Ck[bl]);"string"===typeof bl&&(bl=Ck[bl]);bl&&($k[al]=bl(m,100,100));$k[al].Yd()}Ak=$k;var fl={};function Bk(a){if(Zk){for(var b in Zk){var c=Od(Zk[b],o);fl[b]=c;fl[b.toLowerCase()]=b}Zk=f}return fl[a]}X.FigureGenerators=Ck;X.ArrowheadGeometries=fl;
function T(a){arguments.length===0?v.call(this):v.call(this,a);this.km=this.ij="";this.mp=m;this.Sp=this.Ip=this.To=this.zq=this.zo=this.mo=h;this.cq=this.Yp=this.Xp=o;this.vm=h;this.pq="";this.mq=h;this.Oj=this.dq=this.Zp=this.nq=m;this.Ks=o;this.hg=this.oq=m;this.aq="";this.Uk=m;this.$p=(new eb(NaN,NaN)).freeze();this.eq="";this.Vk=m;this.fd="";this.ap=h;this.s=this.lo=this.kj=m;this.ki=(new E(NaN,NaN)).freeze();this.Ps=new E(NaN,NaN);this.vp="";this.li=m;this.wp=Vb;this.Dp=Jc;this.yp=Kc;this.Ao=
m;this.bp=h;this.np=gl;this.Ze=o;this.ym=(new E(6,6)).freeze();this.xm="gray";this.wm=4;this.TD=-1;this.uj=h;this.it=this.Xe=o}u.H("Part",T);u.ma(T,v);
T.prototype.eb=function(a){v.prototype.eb.call(this,a);a.ij=this.ij;a.km=this.km;a.mp=this.mp;a.mo=this.mo;a.zo=this.zo;a.zq=this.zq;a.To=this.To;a.Ip=this.Ip;a.Sp=this.Sp;a.Xp=this.Xp;a.Yp=this.Yp;a.cq=this.cq;a.vm=this.vm;a.pq=this.pq;a.mq=this.mq;a.nq=this.nq;a.Zp=this.Zp;a.dq=this.dq;a.Ks=o;a.oq=this.oq;a.hg=m;a.aq=this.aq;a.$p.Oa(this.$p);a.eq=this.eq;a.fd=this.fd;a.ap=this.ap;a.lo=this.lo;a.ki.Oa(this.ki);a.vp=this.vp;a.wp=this.wp.B();a.Dp=this.Dp.B();a.yp=this.yp.B();a.Ao=this.Ao;a.bp=this.bp;
a.np=this.np;a.Ze=this.Ze;a.ym.Oa(this.ym);a.xm=this.xm;a.wm=this.wm};T.prototype.Pg=function(a){v.prototype.Pg.call(this,a);Yi(a);a.Oj=m;a.Uk=m;a.Vk=m;a.li=m};T.prototype.toString=function(){var a=u.Ii(Object.getPrototypeOf(this))+"#"+u.cc(this);this.data&&(a=a+("("+xe(this.data)+")"));return a};
T.prototype.dumpReferences=T.prototype.tB=function(){u.trace("References for "+this);this.ra&&u.trace("  "+this.ra.toString()+' LayerName: "'+this.wd+'"');this.Ln!==this&&u.trace("  SelectionObject: "+this.Ln.toString()+' SelectionObjectName: "'+this.gk+'"');this.tb!==this&&u.trace("  LocationObject: "+this.tb.toString()+' LocationObjectName: "'+this.vr+'"');if(this.hg){for(var a="",b=this.hg.f;b.next();)a=a+(b.key+" ");u.trace("  Adornments: "+a)}this.Ta&&u.trace("  ContainingGroup: "+this.Ta.toString());
if(this instanceof U){if(this.ic)for(b=this.ic.f;b.next(););if(this.ge.count>0){a="";for(b=this.ge;b.next();)a=a+(b.value.toString()+", ");u.trace("  Links: "+a)}this.fe&&u.trace("  LabeledLink: "+this.fe.toString());if(this instanceof V){u.trace("  Placeholder: "+this.placeholder);a="";for(b=this.ec;b.next();)a=a+(b.value.toString()+", ");u.trace("  Members: "+a);a="";for(b=this.Pk.f;b.next();)a=a+(b.value.toString()+", ");u.trace("  NestedGroups: "+a);u.trace("  Layout: "+this.qb)}}else if(this instanceof
W){u.trace("  Path: "+this.path);u.trace("  From: "+this.ca+" "+this.zc+' "'+this.Tg+'"');u.trace("  To: "+this.ea+" "+this.ld+' "'+this.Zh+'"');a="";for(b=this.Xh;b.next();)a=a+(b.value.toString()+", ");u.trace("  LabelNodes: "+a)}};T.LayoutNone=0;var mi;T.LayoutAdded=mi=1;var ri;T.LayoutRemoved=ri=2;var hj;T.LayoutShown=hj=4;var ij;T.LayoutHidden=ij=8;T.LayoutNodeSized=16;var wi;T.LayoutGroupLayout=wi=32;var gl;T.LayoutStandard=gl=mi|ri|hj|ij|16|wi;
T.prototype.gg=function(){v.prototype.gg.call(this);var a=this.b;if(a!==m&&this.qr){Ei(a,"shadowOffset",this.$C);Ei(a,"shadowColor",this.shadowColor);Ei(a,"shadowBlur",this.shadowBlur)}};T.prototype.vl=function(a,b,c,d,e,g,i){var j=this.b;if(j!==m){a===ve&&b==="elements"?e instanceof v&&ni(e,e,function(a){oi(j,a)}):a===we&&b==="elements"&&e instanceof v&&ni(e,e,function(a){qi(j,a)});j.ke(a,b,c,d,e,g,i)}};
T.prototype.updateTargetBindings=T.prototype.fc=function(a){v.prototype.fc.call(this,a);if(this.data!==m)for(a=this.elements;a.next();){var b=a.value;b instanceof v&&ni(b,b,function(a){a.data!==m&&a.fc()})}};u.m(T,{mE:"adornments"},function(){return this.hg===m?m:this.hg.f});T.prototype.findAdornment=T.prototype.cn=function(a){s&&u.e(a,"string",T,"findAdornment:category");var b=this.hg;return b===m?m:b.$(a)};
T.prototype.addAdornment=T.prototype.Km=function(a,b){if(b!==m){if(s){u.e(a,"string",T,"addAdornment:category");u.c(b,bf,T,"addAdornment:ad")}var c=m,d=this.hg;d!==m&&(c=d.$(a));if(c!==b){if(c!==m){var e=c.ra;e!==m&&e.ud(-1,c)}if(d===m)this.hg=d=new ka("string",bf);d.add(a,b);c=this.b;if(c!==m){d=c.dn("Adornment");d===m&&(d=c.dn(""));if(d!==m){d.ak(99999999,b);b.data=this.data}}}}};
T.prototype.removeAdornment=T.prototype.xl=function(a){s&&u.e(a,"string",T,"removeAdornment:category");var b=this.hg;if(b!==m){var c=b.$(a);if(c!==m){var d=c.ra;d!==m&&d.ud(-1,c)}b.remove(a);if(b.count===0)this.hg=m}};T.prototype.clearAdornments=T.prototype.Ng=function(){var a=this.hg;if(a!==m){for(var b=[],a=a.f;a.next();)b.push(a.key);for(var a=b.length,c=0;c<a;c++)this.xl(b[c])}};
T.prototype.updateAdornments=T.prototype.$h=function(){a:{var a=this.b;if(a!==m){var b=m;if(this.Da&&this.VC){var c=this.Ln;if(c!==m&&this.gb()&&c.ck()&&c.oa.V()){b=this.cn("Selection");if(b===m){b=this.WC;if(b===m)this instanceof W?b=a.fC:this instanceof T&&(b=this instanceof V?a.HB:a.tC);if(!(b instanceof bf))break a;nf(b);b=b.copy();if(!(b instanceof bf))break a;b.gd="Selection";b.Fd=c}if(b!==m){a=b.placeholder;if(a!==m){var d=c.ml(),e=0;if(c instanceof X)e=c.Na;a.ia=new eb((c.la.width+e)*d,(c.la.height+
e)*d)}else if(this instanceof W){a=b.wa;a=ok(b,a,a.length);d=this.path;if(a instanceof X&&d===c){d=c.ta;ki(this);d=c.ta;a.jr=d;if(a.Na===0)a.Na=c.Na}}b.Ka=c.kn();if(b.type!==ng)b.location=c.sb(Vb)}}this.Km("Selection",b)}else this.xl("Selection")}}c=this.b;if(c!==m){c=c.Lb.ie.j;b=c.length;for(a=0;a<b;a++){d=c[a];d.isEnabled&&d.updateAdornments(this)}}};u.m(T,{ra:"layer"},r("s"));u.m(T,{b:"diagram"},function(){var a=this.s;return a!==m?a.b:m});u.a(T,"layerName",T.prototype.wd);
u.defineProperty(T,{wd:"layerName"},r("km"),function(a){var b=this.km;if(b!==a){s&&u.e(a,"string",T,"layerName");this.km=a;this.d("layerName",b,a);b=this.ra;if(b!==m&&b.name!==a){var c=b.b;if(c!==m){a=c.dn(a);if(a!==m&&a!==b){var d=b.ud(-1,this,h);d>=0&&c.ke(we,"parts",b,this,m,d,h);d=a.ak(99999999,this,h);d>=0&&c.ke(ve,"parts",a,m,this,h,d);d=this.sr;if(d!==m){var e=c.ua;c.ua=h;d(this,b,a);c.ua=e}}}}}});u.a(T,"layerChanged",T.prototype.sr);
u.defineProperty(T,{sr:"layerChanged"},r("mp"),function(a){a!==m&&u.e(a,"function",T,"layerChanged");var b=this.mp;if(b!==a){this.mp=a;this.d("layerChanged",b,a)}});u.a(T,"location",T.prototype.location);u.defineProperty(T,{location:"location"},r("ki"),function(a){var b=this.ki;if(!b.u(a)){s&&u.c(a,E,T,"location");this.ki=a=a.B();if(this.Fc===o){var c=this.jb,d=this.Ps,e=c.copy();c.Vd(a.x-d.x,a.y-d.y);c.u(e)||this.d("position",e,c);kj(this)}this.d("location",b,a)}});
function kj(a){if(a.uj===o){var b=a.b;if(b!==m){b.sg.add(a);a instanceof U&&!b.va.rc&&a.jf();pf(b)}a.uj=h}}function hl(a){if(a.uj!==o){var b=a.jb,c=a.Vb,d=c.copy();c.xa();c.x=b.x;c.y=b.y;c.freeze();Wi(a,d,c);a.uj=o}}u.m(T,{tb:"locationObject"},function(){if(this.li===m){var a=this.vr;if(a!==f&&a!==m&&a!==""){a=this.Le(a);this.li=a!==m?a:this}else this.li=this}return this.li.visible?this.li:this});u.a(T,"minLocation",T.prototype.oC);
u.defineProperty(T,{oC:"minLocation"},r("Dp"),function(a){var b=this.Dp;if(!b.u(a)){s&&u.c(a,E,T,"minLocation");this.Dp=a=a.B();this.d("minLocation",b,a)}});u.a(T,"maxLocation",T.prototype.iC);u.defineProperty(T,{iC:"maxLocation"},r("yp"),function(a){var b=this.yp;if(!b.u(a)){s&&u.c(a,E,T,"maxLocation");this.yp=a=a.B();this.d("maxLocation",b,a)}});u.a(T,"locationObjectName",T.prototype.vr);
u.defineProperty(T,{vr:"locationObjectName"},r("vp"),function(a){var b=this.vp;if(b!==a){s&&u.e(a,"string",T,"locationObjectName");this.vp=a;this.li=m;dj(this);this.d("locationObjectName",b,a)}});u.a(T,"locationSpot",T.prototype.mf);u.defineProperty(T,{mf:"locationSpot"},r("wp"),function(a){var b=this.wp;if(!b.u(a)){if(s){u.c(a,K,T,"locationSpot");Nb(a)||u.g("Part.locationSpot must be a specific Spot value, not: "+a)}this.wp=a=a.B();dj(this);this.d("locationSpot",b,a)}});
T.prototype.move=T.prototype.move=function(a){this.position=a;this.Fc===o&&hl(this)};
T.prototype.isVisible=T.prototype.gb=function(){if(!this.Kg)return o;var a=this.ra;if(a!==m&&!a.visible)return o;var b=this.Ta;if(b!==m&&!b.ee)return o;if(this instanceof U){if(a!==m)if(a.b.lf)for(a=this.gf();a.next();){b=a.value;b=b.ca;if(b!==m&&!b.Nd)return o}else for(a=this.pu();a.next();){b=a.value;b=b.ea;if(b!==m&&!b.Nd)return o}a=this.fe;if(a!==m&&!a.gb())return o}else if(this instanceof W){b=this.ca;if(b!==m&&il(b)===m)return o;b=this.ea;if(b!==m&&il(b)===m)return o}return h};
function jl(a,b,c){Pb(c)&&(c=Zb);var d=b.la;if(b===m||b===a)return new E(d.width*c.x+c.offsetX,d.height*c.y+c.offsetY);c=new E(d.width*c.x+c.offsetX,d.height*c.y+c.offsetY);b.transform.ub(c);for(b=b.U;b!==m&&b!==a;){b.transform.ub(c);b=b.U}a.om.ub(c);c.offset(-a.xc.x,-a.xc.y);return c}T.prototype.ensureBounds=T.prototype.Sh=function(){gh(this,Infinity,Infinity);this.mc()};
T.prototype.mc=function(){Vi(this);if(this.Fc===o)hl(this);else{if(this instanceof bf&&this.I!==ng&&this.Za!==m)this.li=this.Za;var a=this.tA;a.set(this.Vb);bj(this);this.Vb.xa();var b=this.Xe;this.zi(0,0,this.xc.width,this.xc.height);var c=NaN,d=NaN,e=this.mf,g=this.tb;Pb(e)&&u.g("Spot must be real: "+e.toString());var i=g.la,j=this.Ps;j.zl(0,0,i.width,i.height,e);if(g!==this){g.transform.ub(j);if(g.Na){e=g.Eh/2;j.offset(-e,-e)}for(g=g.U;g!==m&&g!==this;){g.transform.ub(j);g=g.U}}this.om.ub(j);j.offset(-this.xc.x,
-this.xc.y);j=this.Ps;g=this.position;e=this.location;if(e.V()){c=e.x-j.x;d=e.y-j.y;g.copy();g.Vd(c,d)}else if(g.V()){c=g.x;d=g.y;e.copy();e.Vd(c+j.x,d+j.y)}j=this.Vb;j.x=c;j.y=d;j.freeze();Vi(this);Wi(this,a,j);a.u(j)?this.Xe=b:(this instanceof U||this.constructor===T)&&(!Ua(a.width,j.width)||!Ua(a.height,j.height))&&this.r(16);this.uj=o}};
function pi(a,b){a.it=o;var c=a.b;if(c!==m){a.updateAdornments();var d=a.mE;if(d!==m){Vi(a);for(bj(a);d.next();){gh(d.value,Infinity,Infinity);d.value.mc()}}a instanceof U&&Bi(c,a);!a.ra.Yc&&!b&&fi(c);var d=a.Vb,e=c.ib;if(e.V())if(a.Xe){if(!d.de(e)){a.Xe=o;ph(c)}}else{if(d.de(e))a.Xe=h}else c.hm=h;a.Vb.V()&&ph(c,a.Vb)}}T.prototype.bk=ca(h);u.a(T,"isInDocumentBounds",T.prototype.$x);
u.defineProperty(T,{$x:"isInDocumentBounds"},r("ap"),function(a){var b=this.ap;if(b!==a){s&&u.e(a,"boolean",T,"isInDocumentBounds");this.ap=a;this.d("isInDocumentBounds",b,a)}});u.a(T,"category",T.prototype.gd);
u.defineProperty(T,{gd:"category"},r("ij"),function(a){var b=this.ij;if(b!==a){s&&u.e(a,"string",T,"category");this.ij=a;this.d("category",b,a);var b=this.b,c=this.data;if(b!==m&&c!==m)if(this instanceof U||this.constructor===T){b=b.findTemplateForNodeData(c,a);if(b instanceof T){nf(b);b=b.copy();b instanceof T&&kl(this,b,a)}}else if(this instanceof W){b=b.findTemplateForLinkData(c,a);if(b instanceof W){nf(b);b=b.copy();b instanceof W&&kl(this,b,a)}}}});
function kl(a,b,c){a.Ng();var d=a.data,e=a.wd,g=a.Da;b.Pg(a);b.eb(a);a.ij=c;a.M();$i(a);a.Vl=d;d!==m&&a.fc();b=a.wd;if(b!==e){a.km=e;a.wd=b}a.Da=g}T.prototype.canCopy=T.prototype.aH=function(){if(!this.aB)return o;var a=this.ra;if(a===m)return h;if(!a.Hh)return o;a=a.b;return a===m?h:!a.Hh?o:h};T.prototype.canDelete=T.prototype.eH=function(){if(!this.kB)return o;var a=this.ra;if(a===m)return h;if(!a.Rj)return o;a=a.b;return a===m?h:!a.Rj?o:h};
T.prototype.canEdit=T.prototype.gH=function(){if(!this.gD)return o;var a=this.ra;if(a===m)return h;if(!a.Vm)return o;a=a.b;return a===m?h:!a.Vm?o:h};T.prototype.canGroup=T.prototype.kH=function(){if(!this.IB)return o;var a=this.ra;if(a===m)return h;if(!a.Pm)return o;a=a.b;return a===m?h:!a.Pm?o:h};T.prototype.canMove=T.prototype.nH=function(){if(!this.rC)return o;var a=this.ra;if(a===m)return h;if(!a.Sj)return o;a=a.b;return a===m?h:!a.Sj?o:h};
T.prototype.canPrint=T.prototype.LE=function(){if(!this.zC)return o;var a=this.ra;if(a===m)return h;if(!a.Rm)return o;a=a.b;return a===m?h:!a.Rm?o:h};T.prototype.canReshape=T.prototype.sH=function(){if(!this.IC)return o;var a=this.ra;if(a===m)return h;if(!a.Sm)return o;a=a.b;return a===m?h:!a.Sm?o:h};T.prototype.canResize=T.prototype.tH=function(){if(!this.JC)return o;var a=this.ra;if(a===m)return h;if(!a.Tm)return o;a=a.b;return a===m?h:!a.Tm?o:h};
T.prototype.canRotate=T.prototype.uH=function(){if(!this.OC)return o;var a=this.ra;if(a===m)return h;if(!a.Um)return o;a=a.b;return a===m?h:!a.Um?o:h};T.prototype.canSelect=T.prototype.qx=function(){if(!this.fk)return o;var a=this.ra;if(a===m)return h;if(!a.Gd)return o;a=a.b;return a===m?h:!a.Gd?o:h};u.a(T,"copyable",T.prototype.aB);u.defineProperty(T,{aB:"copyable"},r("mo"),function(a){var b=this.mo;if(b!==a){s&&u.e(a,"boolean",T,"copyable");this.mo=a;this.d("copyable",b,a)}});
u.a(T,"deletable",T.prototype.kB);u.defineProperty(T,{kB:"deletable"},r("zo"),function(a){var b=this.zo;if(b!==a){s&&u.e(a,"boolean",T,"deletable");this.zo=a;this.d("deletable",b,a)}});u.a(T,"textEditable",T.prototype.gD);u.defineProperty(T,{gD:"textEditable"},r("zq"),function(a){var b=this.zq;if(b!==a){s&&u.e(a,"boolean",T,"textEditable");this.zq=a;this.d("textEditable",b,a);this.updateAdornments()}});u.a(T,"groupable",T.prototype.IB);
u.defineProperty(T,{IB:"groupable"},r("To"),function(a){var b=this.To;if(b!==a){s&&u.e(a,"boolean",T,"groupable");this.To=a;this.d("groupable",b,a)}});u.a(T,"movable",T.prototype.rC);u.defineProperty(T,{rC:"movable"},r("Ip"),function(a){var b=this.Ip;if(b!==a){s&&u.e(a,"boolean",T,"movable");this.Ip=a;this.d("movable",b,a)}});u.a(T,"printable",T.prototype.zC);
u.defineProperty(T,{zC:"printable"},r("Sp"),function(a){var b=this.Sp;if(b!==a){s&&u.e(a,"boolean",T,"printable");this.Sp=a;this.d("printable",b,a)}});u.a(T,"reshapable",T.prototype.IC);u.defineProperty(T,{IC:"reshapable"},r("Xp"),function(a){var b=this.Xp;if(b!==a){s&&u.e(a,"boolean",T,"reshapable");this.Xp=a;this.d("reshapable",b,a);this.updateAdornments()}});u.a(T,"resizable",T.prototype.JC);
u.defineProperty(T,{JC:"resizable"},r("Yp"),function(a){var b=this.Yp;if(b!==a){s&&u.e(a,"boolean",T,"resizable");this.Yp=a;this.d("resizable",b,a);this.updateAdornments()}});u.a(T,"rotatable",T.prototype.OC);u.defineProperty(T,{OC:"rotatable"},r("cq"),function(a){var b=this.cq;if(b!==a){s&&u.e(a,"boolean",T,"rotatable");this.cq=a;this.d("rotatable",b,a);this.updateAdornments()}});u.a(T,"selectable",T.prototype.fk);
u.defineProperty(T,{fk:"selectable"},r("vm"),function(a){var b=this.vm;if(b!==a){s&&u.e(a,"boolean",T,"selectable");this.vm=a;this.d("selectable",b,a);this.updateAdornments()}});u.a(T,"selectionObjectName",T.prototype.gk);u.defineProperty(T,{gk:"selectionObjectName"},r("pq"),function(a){var b=this.pq;if(b!==a){s&&u.e(a,"string",T,"selectionObjectName");this.pq=a;this.Oj=m;this.d("selectionObjectName",b,a)}});u.a(T,"selectionAdorned",T.prototype.VC);
u.defineProperty(T,{VC:"selectionAdorned"},r("mq"),function(a){var b=this.mq;if(b!==a){s&&u.e(a,"boolean",T,"selectionAdorned");this.mq=a;this.d("selectionAdorned",b,a);this.updateAdornments()}});u.a(T,"selectionAdornmentTemplate",T.prototype.WC);u.defineProperty(T,{WC:"selectionAdornmentTemplate"},r("nq"),function(a){var b=this.nq;if(b!==a){s&&u.c(a,bf,T,"selectionAdornmentTemplate");if(this instanceof W)a.type=ng;this.nq=a;this.d("selectionAdornmentTemplate",b,a)}});
u.m(T,{Ln:"selectionObject"},function(){if(this.Oj===m){var a=this.gk;if(a!==m&&a!==""){a=this.Le(a);this.Oj=a!==m?a:this}else if(this instanceof W){a=this.path;this.Oj=a!==m?a:this}else this.Oj=this}return this.Oj});u.a(T,"isSelected",T.prototype.Da);
u.defineProperty(T,{Da:"isSelected"},r("Ks"),function(a){var b=this.Ks;if(b!==a){s&&u.e(a,"boolean",T,"isSelected");var c=this.b;if(!a||this.qx()&&!(c!==m&&c.selection.count>=c.jC)){this.Ks=a;var d=o;if(c!==m){d=c.ab;c.ab=h;a?c.selection.add(this):c.selection.remove(this)}this.d("isSelected",b,a);this.updateAdornments();a=this.XC;a!==m&&a(this);if(c!==m){pf(c);c.ab=d}}}});u.a(T,"selectionChanged",T.prototype.XC);
u.defineProperty(T,{XC:"selectionChanged"},r("oq"),function(a){a!==m&&u.e(a,"function",T,"selectionChanged");var b=this.oq;if(b!==a){this.oq=a;this.d("selectionChanged",b,a)}});u.a(T,"resizeAdornmentTemplate",T.prototype.KC);u.defineProperty(T,{KC:"resizeAdornmentTemplate"},r("Zp"),function(a){var b=this.Zp;if(b!==a){s&&u.c(a,bf,T,"resizeAdornmentTemplate");this.Zp=a;this.d("resizeAdornmentTemplate",b,a)}});u.a(T,"resizeObjectName",T.prototype.MC);
u.defineProperty(T,{MC:"resizeObjectName"},r("aq"),function(a){var b=this.aq;if(b!==a){s&&u.e(a,"string",T,"resizeObjectName");this.aq=a;this.Uk=m;this.d("resizeObjectName",b,a)}});u.m(T,{kG:"resizeObject"},function(){if(this.Uk===m){var a=this.MC;if(a!==m&&a!==""){a=this.Le(a);this.Uk=a!==m?a:this}else this.Uk=this}return this.Uk});u.a(T,"resizeCellSize",T.prototype.LC);
u.defineProperty(T,{LC:"resizeCellSize"},r("$p"),function(a){var b=this.$p;if(!b.u(a)){this.$p=a=a.B();this.d("resizeCellSize",b,a)}});u.a(T,"rotateAdornmentTemplate",T.prototype.PC);u.defineProperty(T,{PC:"rotateAdornmentTemplate"},r("dq"),function(a){var b=this.dq;if(b!==a){s&&u.c(a,bf,T,"rotateAdornmentTemplate");this.dq=a;this.d("rotateAdornmentTemplate",b,a)}});u.a(T,"rotateObjectName",T.prototype.QC);
u.defineProperty(T,{QC:"rotateObjectName"},r("eq"),function(a){var b=this.eq;if(b!==a){s&&u.e(a,"string",T,"rotateObjectName");this.eq=a;this.Vk=m;this.d("rotateObjectName",b,a)}});u.m(T,{oG:"rotateObject"},function(){if(this.Vk===m){var a=this.QC;if(a!==m&&a!==""){a=this.Le(a);this.Vk=a!==m?a:this}else this.Vk=this}return this.Vk});u.a(T,"text",T.prototype.text);u.defineProperty(T,{text:"text"},r("fd"),function(a){var b=this.fd;if(b!==a){s&&u.e(a,"string",T,"text");this.fd=a;this.d("text",b,a)}});
u.a(T,"containingGroup",T.prototype.Ta);
u.defineProperty(T,{Ta:"containingGroup"},r("kj"),function(a){if(this instanceof U||this.constructor===T){var b=this.kj;if(b!==a){s&&a!==m&&u.c(a,V,T,"containingGroup");if(a!==m&&(this===a||a.ql(this))){this===a&&u.g("Cannot make a Group a member of itself: "+this.toString());u.g("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+a.toString())}this.r(ri);var c=this.b;b!==m?ll(b,this):this instanceof V&&c!==m&&c.Wk.remove(this);this.kj=a;a!==m?ml(a,this):this instanceof
V&&c!==m&&c.Wk.add(this);this.r(mi);if(c!==m){var d=this.data,e=c.J;d!==m&&e instanceof P&&e.Ey(d,e.Ub(a!==m?a.data:m))}d=this.Bx;if(d!==m){e=h;if(c!==m){e=c.ua;c.ua=h}d(this,b,a);if(c!==m)c.ua=e}if(this instanceof V){c=new la(T);af(c,this,h,o);for(c=c.f;c.next();){d=c.value;if(d instanceof U)for(d=d.ge;d.next();){e=d.value;ti(e)}}}if(this instanceof U)for(d=this.ge;d.next();){e=d.value;ti(e)}this.d("containingGroup",b,a);a!==m&&a.Su()}}else u.g("cannot set the Part.containingGroup of a Link or Adornment")});
function nl(a,b){var c=a.kj;if(c!==b){c!==m&&ll(c,a);a.kj=b;b!==m&&ml(b,a);var d=a.Bx;if(d!==m){var e=h,g=a.b;if(g!==m){e=g.ua;g.ua=h}d(a,c,b);if(g!==m)g.ua=e}}}function Yi(a){a=a.Ta;if(a!==m){a.M();a.Za!==m&&a.Za.M();a.jf()}}T.prototype.nr=function(){var a=this.kj;a!==m&&ml(a,this)};T.prototype.or=function(){var a=this.kj;a!==m&&ll(a,this)};T.prototype.il=function(){var a=this.data;if(a!==m){var b=this.b;if(b!==m){b=b.J;b!==m&&b.GC(a)}}};u.a(T,"containingGroupChanged",T.prototype.Bx);
u.defineProperty(T,{Bx:"containingGroupChanged"},r("lo"),function(a){a!==m&&u.e(a,"function",T,"containingGroupChanged");var b=this.lo;if(b!==a){this.lo=a;this.d("containingGroupChanged",b,a)}});u.m(T,{lK:"topLevelPart"},function(){return ol(this,this)});function ol(a,b){var c=b.Ta;if(c!==m)return ol(a,c);if(b instanceof U){c=b.fe;if(c!==m)return ol(a,c)}return b}u.m(T,{rr:"isTopLevel"},function(){return this.Ta!==m||this instanceof U&&this.Li?o:h});
T.prototype.isMemberOf=T.prototype.ql=function(a){return!(a instanceof V)?o:pl(this,this,a)};function pl(a,b,c){if(b===c||c===m)return o;var d=b.Ta;if(d!==m&&(d===c||pl(a,d,c)))return h;if(b instanceof U){b=b.fe;if(b!==m)return pl(a,b,c)}return o}T.prototype.findCommonContainingGroup=T.prototype.gF=function(a){return ql(this,this,a)};function ql(a,b,c){if(b===m||c===m)return m;var d=b.Ta;if(d===m)return m;if(b===c)return d;var e=c.Ta;return e===m?m:d===e?e:pl(a,c,d)?d:pl(a,b,e)?e:ql(a,d,e)}
u.a(T,"isLayoutPositioned",T.prototype.by);u.defineProperty(T,{by:"isLayoutPositioned"},r("bp"),function(a){var b=this.bp;if(b!==a){s&&u.e(a,"boolean",T,"isLayoutPositioned");this.bp=a;this.d("isLayoutPositioned",b,a);this.r(a?hj:ij)}});u.a(T,"layoutConditions",T.prototype.bC);u.defineProperty(T,{bC:"layoutConditions"},r("np"),function(a){var b=this.np;if(b!==a){s&&u.e(a,"number",T,"layoutConditions");this.np=a;this.d("layoutConditions",b,a)}});
T.prototype.canLayout=T.prototype.Uq=function(){if(!this.by||!this.gb())return o;var a=this.ra;return a!==m&&a.Yc||this instanceof U&&this.Li?o:h};T.prototype.invalidateLayout=T.prototype.r=function(a){a===f&&(a=16777215);var b;if(!this.by||(a&this.bC)===0)b=o;else{b=this.ra;if(b!==m&&b.Yc||this instanceof U&&this.Li)b=o;else{b=this.b;b=b!==m&&b.va.rc?o:h}}if(b){b=this.kj;if(b!==m){var c=b.qb;c!==m?c.r():b.r(a)}else{a=this.b;if(a!==m){c=a.qb;c!==m&&c.r()}}}};u.a(T,"dragComputation",T.prototype.Hx);
u.defineProperty(T,{Hx:"dragComputation"},r("Ao"),function(a){var b=this.Ao;if(b!==a){this.Ao=a;this.d("dragComputation",b,a)}});u.a(T,"isShadowed",T.prototype.qr);u.defineProperty(T,{qr:"isShadowed"},r("Ze"),function(a){var b=this.Ze;if(b!==a){this.Ze=a;$i(this);this.d("isShadowed",b,a)}});u.a(T,"shadowOffset",T.prototype.$C);u.defineProperty(T,{$C:"shadowOffset"},r("ym"),function(a){var b=this.ym;if(!b.u(a)){s&&u.c(a,E,T,"shadowOffset");this.ym=a=a.B();$i(this);this.d("shadowOffset",b,a)}});
u.a(T,"shadowColor",T.prototype.shadowColor);u.defineProperty(T,{shadowColor:"shadowColor"},r("xm"),function(a){var b=this.xm;if(b!==a){this.xm=a;$i(this);this.d("shadowColor",b,a)}});u.a(T,"shadowBlur",T.prototype.shadowBlur);u.defineProperty(T,{shadowBlur:"shadowBlur"},r("wm"),function(a){var b=this.wm;if(b!==a){this.wm=a;$i(this);this.d("shadowBlur",b,a)}});
function bf(a){arguments.length===0?T.call(this,Og):T.call(this,a);this.wd="Adornment";this.sa=m;this.vm=o;this.ki=new E(NaN,NaN);this.gh=new z(J);this.$b=m;this.yc=(new z(E)).freeze();this.Lt=new E;this.Za=m}u.H("Adornment",bf);u.ma(bf,T);bf.prototype.toString=function(){var a=this.Om;return"Adornment("+this.gd+")"+(a!==m?a.toString():"")};bf.prototype.oj=function(){return this.sa&&this.sa.W instanceof W?this.sa.W.oj():m};bf.prototype.Qo=ca(m);
bf.prototype.$v=function(){var a=this.Om;return a instanceof W?a.yc:m};u.m(bf,{placeholder:"placeholder"},r("Za"));u.a(bf,"adornedObject",bf.prototype.Fd);u.defineProperty(bf,{Fd:"adornedObject"},r("sa"),ba("sa"));u.m(bf,{Om:"adornedPart"},function(){var a=this.sa;return a!==m?a.W:m});bf.prototype.bk=function(){var a=this.sa;if(a===m)return h;a=a.W;return a===m||!a.Fc};u.m(bf,{Ta:"containingGroup"},ca(m));
bf.prototype.vl=function(a,b,c,d,e,g,i){if(a===ve&&b==="elements")if(e instanceof Ig)this.Za===m?this.Za=e:this.Za!==e&&u.g("Cannot insert a second Placeholder into the visual tree of an Adornment.");else{if(e instanceof v){var j=xk(e,e,function(a){return a instanceof Ig});if(j instanceof Ig)this.Za===m?this.Za=j:this.Za!==j&&u.g("Cannot insert a second Placeholder into the visual tree of an Adornment.")}}else if(a===we&&b==="elements")if(d===this.Za)this.Za=m;else if(d instanceof v&&this.Za.Wh(d))this.Za=
m;T.prototype.vl.call(this,a,b,c,d,e,g,i)};bf.prototype.updateAdornments=bf.prototype.$h=aa();bf.prototype.il=aa();function U(a){arguments.length===0?T.call(this,Og):T.call(this,a);this.od=new z(W);this.jm=this.sp=this.qp=m;this.hp=h;this.Nq=o;this.Gq=m;this.eo=this.ip=h;this.fo=(new qb(2)).freeze();this.ic=this.jg=m}u.H("Node",U);u.ma(U,T);U.prototype.eb=function(a){T.prototype.eb.call(this,a);a.qp=this.qp;a.sp=this.sp;a.hp=this.hp;a.Nq=this.Nq;a.Gq=this.Gq;a.ip=this.ip;a.eo=this.eo;a.fo.Oa(this.fo)};
U.prototype.Pg=function(a){T.prototype.Pg.call(this,a);a.jf();a.jg=this.jg;a.ic=m};var rl;U.DirectionDefault=rl=u.l(U,"DirectionDefault",0);U.DirectionAbsolute=u.l(U,"DirectionAbsolute",1);var sl;U.DirectionRotatedNode=sl=u.l(U,"DirectionRotatedNode",2);var Mi;U.DirectionRotatedNodeOrthogonal=Mi=u.l(U,"DirectionRotatedNodeOrthogonal",3);function tl(a,b){if(b!==m){if(a.jg==m)a.jg=new la(ul);a.jg.add(b)}}
U.prototype.vl=function(a,b,c,d,e,g,i){if(a===ve&&b==="elements")this.ic=m;else if(a===we&&b==="elements")this.b===m?this.ic=m:d instanceof Q&&wk(this,d,function(a,b){uj(a,b,h)});T.prototype.vl.call(this,a,b,c,d,e,g,i)};U.prototype.invalidateConnectedLinks=U.prototype.jf=function(a){a===f&&(a=m);for(var b=this.ge;b.next();){var c=b.value;if(!(a!==m&&a.contains(c))){var d=c.zc;if(d!==m)d.ed=m;var e=c.ld;if(e!==m&&e!==d)e.ed=m;If(c)}}};
U.prototype.bk=function(){if(this.Li===o)return h;var a=this.fe;return a===m?h:!a.Fc};u.a(U,"avoidable",U.prototype.ox);u.defineProperty(U,{ox:"avoidable"},r("eo"),function(a){var b=this.eo;if(b!==a){s&&u.e(a,"boolean",U,"avoidable");this.eo=a;var c=this.b;c!==m&&Bi(c,this);this.d("avoidable",b,a)}});u.a(U,"avoidableMargin",U.prototype.NA);
u.defineProperty(U,{NA:"avoidableMargin"},r("fo"),function(a){typeof a==="number"?a=new qb(a):u.c(a,qb,U,"avoidableMargin");var b=this.fo;if(!b.u(a)){this.fo=a=a.B();var c=this.b;c!==m&&Bi(c,this);this.d("avoidableMargin",b,a)}});U.prototype.canAvoid=U.prototype.YG=function(){return this.ox&&!this.Li};U.prototype.getAvoidableRectangle=U.prototype.DI=function(a){a===f&&(a=new J);a.set(this.oa);a.ix(this.NA);return a};function il(a){for(;a!==m&&!a.gb();)a=a.Ta;return a}u.m(U,{ge:"linksConnected"},function(){return this.od.f});
U.prototype.findLinksConnected=U.prototype.Mx=function(a){a===f&&(a=m);if(a===m)return this.od.f;s&&u.e(a,"string",U,"findLinksConnected:pid");var b=new Ha(this.od),c=this;b.Iu=function(b){return b.ca===c&&b.Tg===a||b.ea===c&&b.Zh===a};return b};U.prototype.findLinksOutOf=U.prototype.pu=function(a){a===f&&(a=m);var b=new Ha(this.od),c=this;b.Iu=function(b){return b.ca!==c?o:a===m?h:b.Tg===a};return b};
U.prototype.findLinksInto=U.prototype.gf=function(a){a===f&&(a=m);var b=new Ha(this.od),c=this;b.Iu=function(b){return b.ea!==c?o:a===m?h:b.Zh===a};return b};
U.prototype.findNodesConnected=U.prototype.vB=function(a){a===f&&(a=m);for(var b=m,c=m,d=this.od.f;d.next();){var e=d.value;if(e.ca===this){if(a===m||e.Tg===a){e=e.ea;if(b!==m)b.add(e);else if(c!==m&&c!==e){b=new la(U);b.add(c);b.add(e)}else c=e}}else if(e.ea===this&&(a===m||e.Zh===a)){e=e.ca;if(b!==m)b.add(e);else if(c!==m&&c!==e){b=new la(U);b.add(c);b.add(e)}else c=e}}return b!==m?b.f:c!==m?new Ga(c):u.yf};
U.prototype.findNodesOutOf=U.prototype.fn=function(a){a===f&&(a=m);for(var b=m,c=m,d=this.od.f;d.next();){var e=d.value;if(e.ca===this&&(a===m||e.Tg===a)){e=e.ea;if(b!==m)b.add(e);else if(c!==m&&c!==e){b=new la(U);b.add(c);b.add(e)}else c=e}}return b!==m?b.f:c!==m?new Ga(c):u.yf};
U.prototype.findNodesInto=U.prototype.en=function(a){a===f&&(a=m);for(var b=m,c=m,d=this.od.f;d.next();){var e=d.value;if(e.ea===this&&(a===m||e.Zh===a)){e=e.ca;if(b!==m)b.add(e);else if(c!==m&&c!==e){b=new la(U);b.add(c);b.add(e)}else c=e}}return b!==m?b.f:c!==m?new Ga(c):u.yf};u.a(U,"linkConnected",U.prototype.cC);u.defineProperty(U,{cC:"linkConnected"},r("qp"),function(a){a!==m&&u.e(a,"function",U,"linkConnected");var b=this.qp;if(b!==a){this.qp=a;this.d("linkConnected",b,a)}});
u.a(U,"linkDisconnected",U.prototype.dC);u.defineProperty(U,{dC:"linkDisconnected"},r("sp"),function(a){a!==m&&u.e(a,"function",U,"linkDisconnected");var b=this.sp;if(b!==a){this.sp=a;this.d("linkDisconnected",b,a)}});function vl(a,b,c){if(!a.od.contains(b)){a.od.add(b);var d=a.cC;if(d!==m){var e=h,g=a.b;if(g!==m){e=g.ua;g.ua=h}d(a,b,c);if(g!==m)g.ua=e}if(a.Ni){c=h;g=a.b;if(g!==m)c=g.lf;if(c){if(b.ca===a)a.Ni=o}else if(b.ea===a)a.Ni=o}}}
function wl(a,b,c){if(a.od.remove(b)){var d=a.dC,e=a.b;if(d!==m){var g=h;if(e!==m){g=e.ua;e.ua=h}d(a,b,c);if(e!==m)e.ua=g}if(!a.Ni&&!(e!==m&&e.va.rc)){b=a.od.count;b===0?a.Ni=h:b===1&&xi(a)}}}function xi(a){if(a.od.count!==0){var b=h,c=a.b;if(c!==m)b=c.lf;for(c=a.od.f;c.next();){var d=c.value;if(b){if(d.ca===a){a.Ni=o;return}}else if(d.ea===a){a.Ni=o;return}}a.Ni=h}}U.prototype.nr=function(){T.prototype.nr.call(this);xi(this);var a=this.jm;a!==m&&xl(a,this)};
U.prototype.or=function(){T.prototype.or.call(this);var a=this.jm;if(a!==m&&a.$e!==m){a.$e.remove(this);a.M()}};U.prototype.il=function(){if(this.od.count>0){var a=this.b;if(a===m)return;for(var b=this.od.copy().f;b.next();)a.remove(b.value)}T.prototype.il.call(this)};u.m(U,{Li:"isLinkLabel"},function(){return this.jm!==m});u.a(U,"labeledLink",U.prototype.fe);
u.defineProperty(U,{fe:"labeledLink"},r("jm"),function(a){var b=this.jm;if(b!==a){s&&a!==m&&u.c(a,W,U,"labeledLink");var c=this.b,d=this.data;if(b!==m){if(b.$e!==m){b.$e.remove(this);b.M()}if(c!==m&&d!==m){var e=b.data,g=c.J;if(e!==m&&g instanceof P){var i=g.Ub(d);i!==f&&g.gG(e,i)}}}this.jm=a;if(a!==m){xl(a,this);if(c!==m&&d!==m){e=a.data;g=c.J;if(e!==m&&g instanceof P){i=g.Ub(d);i!==f&&g.DA(e,i)}}}dj(this);this.d("labeledLink",b,a)}});
U.prototype.findPort=U.prototype.fr=function(a){s&&u.e(a,"string",U,"findPort:pid");this.ic===m&&xj(this);if(this.ic!==m){var b=this.ic.$(a);if(b!==m)return b}if(a!==""&&this.ic!==m){b=this.ic.$("");if(b!==m)return b}this.ic===m&&xj(this);return this};u.m(U,{port:"port"},function(){return this.fr("")});u.m(U,{ports:"ports"},function(){this.ic===m&&xj(this);return this.ic!==m?this.ic.f:u.yf});function xj(a){a.ic!==m&&a.ic.clear();wk(a,a,function(a,c){yj(a,c)})}
function yj(a,b){var c=b.je;if(c!==m){if(a.ic===m)a.ic=new ka("string",Q);a.ic.add(c,b)}}function uj(a,b,c){var d=b.je;if(d!==m){a.ic!==m&&a.ic.remove(d);b=a.b;if(b!==m&&c){c=m;for(a=a.Mx(d);a.next();){c===m&&(c=[]);c.push(a.value)}if(c!==m)for(a=0;a<c.length;a++)b.remove(c[a])}}}
U.prototype.isInTreeOf=U.prototype.aJ=function(a){if(a===m||a===this)return o;var b=h,c=this.b;if(c!==m)b=c.lf;if(b)a:{for(b=this;b!==a;){for(var c=m,d=b.gf();d.next();){c=d.value.ca;if(c!==b)break}if(c===m){a=o;break a}b=c}a=h}else a:{for(b=this;b!==a;){c=m;for(d=b.pu();d.next();){c=d.value.ea;if(c!==b)break}if(c===m){a=o;break a}b=c}a=h}return a};U.prototype.findTreeParts=U.prototype.BI=function(){var a=new la(T);af(a,this,o,h);return a};
U.prototype.collapseTree=U.prototype.Xq=function(){var a=this.b;if(a!==m&&!a.kf){a.kf=h;var b=a.lf,c=new la(U);c.add(this);yl(this,c,b);a.kf=o}};function yl(a,b,c){a.Nd=o;for(var d=c?a.pu():a.gf();d.next();){var e=d.value,g=e.EB(a);if(g!==m&&g!==a&&!b.contains(g)){b.add(g);$i(e);e.Ng();$i(g);g.Ng();Yi(g);g.r(ij);if(g.Nd){g.Zu=g.Nd;yl(g,b,c)}}}}U.prototype.expandTree=U.prototype.dr=function(){var a=this.b;if(a!==m&&!a.kf){a.kf=h;var b=a.lf,c=new la(U);c.add(this);zl(this,c,b);a.kf=o}};
function zl(a,b,c){a.Nd=h;for(var d=c?a.pu():a.gf();d.next();){var e=d.value,g=e.EB(a);if(g!==m&&g!==a&&!b.contains(g)){b.add(g);$i(e);e.$h();$i(g);g.$h();Yi(g);g.r(hj);if(g.Zu){g.Zu=o;zl(g,b,c)}}}}u.a(U,"isTreeExpanded",U.prototype.Nd);
u.defineProperty(U,{Nd:"isTreeExpanded"},r("hp"),function(a){var b=this.hp;if(b!==a){s&&u.e(a,"boolean",U,"isTreeExpanded");this.hp=a;var c=this.b;c!==m&&ph(c);this.d("isTreeExpanded",b,a);b=this.sD;if(b!==m){var d=h;if(c!==m){d=c.ua;c.ua=h}b(this);if(c!==m)c.ua=d}a?this.dr():this.Xq()}});u.a(U,"wasTreeExpanded",U.prototype.Zu);u.defineProperty(U,{Zu:"wasTreeExpanded"},r("Nq"),function(a){var b=this.Nq;if(b!==a){s&&u.e(a,"boolean",U,"wasTreeExpanded");this.Nq=a;this.d("wasTreeExpanded",b,a)}});
u.a(U,"treeExpandedChanged",U.prototype.sD);u.defineProperty(U,{sD:"treeExpandedChanged"},r("Gq"),function(a){a!==m&&u.e(a,"function",U,"treeExpandedChanged");var b=this.Gq;if(b!==a){this.Gq=a;this.d("treeExpandedChanged",b,a)}});u.a(U,"isTreeLeaf",U.prototype.Ni);u.defineProperty(U,{Ni:"isTreeLeaf"},r("ip"),function(a){var b=this.ip;if(b!==a){s&&u.e(a,"boolean",U,"isTreeLeaf");this.ip=a;this.d("isTreeLeaf",b,a)}});
function W(){T.call(this,ng);this.og=m;this.gi="";this.Oo=m;this.qg=Ub;this.ng=NaN;this.mg=rl;this.pg=NaN;this.Gg=m;this.wi="";this.Fq=m;this.Ig=Ub;this.Fg=NaN;this.Eg=rl;this.Hg=NaN;this.Wp=this.Vp=o;this.Zn=Ni;this.no=0;this.po=Ni;this.qo=NaN;this.si=Mj;this.sq=0.5;this.$b=this.$e=m;this.yc=(new z(E)).freeze();this.Tf=m;this.Xk=o;this.Fw=m;this.Em=o;this.uk=this.mh=this.ta=m;this.Bd=0;this.gh=new z(J);this.Lt=new E;this.Kv=o}u.H("Link",W);u.ma(W,T);
W.prototype.eb=function(a){T.prototype.eb.call(this,a);a.gi=this.gi;a.Oo=this.Oo;a.qg=this.qg.B();a.ng=this.ng;a.mg=this.mg;a.pg=this.pg;a.wi=this.wi;a.Fq=this.Fq;a.Ig=this.Ig.B();a.Fg=this.Fg;a.Eg=this.Eg;a.Hg=this.Hg;a.Vp=this.Vp;a.Wp=this.Wp;a.Zn=this.Zn;a.no=this.no;a.po=this.po;a.qo=this.qo;a.si=this.si;a.sq=this.sq};W.prototype.Pg=function(a){T.prototype.Pg.call(this,a);a.$b=m;a.Tf=m;If(a);a.uk=this.uk;a.Bd=this.Bd};var Mj;W.Normal=Mj=u.l(W,"Normal",1);var oh;
W.Orthogonal=oh=u.l(W,"Orthogonal",2);var Hf;W.AvoidsNodes=Hf=u.l(W,"AvoidsNodes",3);var Ni;W.None=Ni=u.l(W,"None",0);var Gj;W.Bezier=Gj=u.l(W,"Bezier",9);var Hj;W.JumpGap=Hj=u.l(W,"JumpGap",10);var Ij;W.JumpOver=Ij=u.l(W,"JumpOver",11);var Jj;W.End=Jj=u.l(W,"End",17);var Kj;W.Scale=Kj=u.l(W,"Scale",18);var Lj;W.Stretch=Lj=u.l(W,"Stretch",19);var Hk;W.OrientAlong=Hk=u.l(W,"OrientAlong",21);var Al;W.OrientPlus90=Al=u.l(W,"OrientPlus90",22);var Bl;W.OrientMinus90=Bl=u.l(W,"OrientMinus90",23);var Cl;
W.OrientOpposite=Cl=u.l(W,"OrientOpposite",24);var Dl;W.OrientUpright=Dl=u.l(W,"OrientUpright",25);var El;W.OrientPlus90Upright=El=u.l(W,"OrientPlus90Upright",26);var Fl;W.OrientMinus90Upright=Fl=u.l(W,"OrientMinus90Upright",27);var Gl;W.OrientUpright45=Gl=u.l(W,"OrientUpright45",28);W.prototype.bk=function(){var a=this.ca;if(a!==m&&(a.Fc||a.uj))return o;a=this.ea;return a!==m&&(a.Fc||a.uj)?o:h};
function vk(a,b){var c;switch(a){default:case Ni:c=0;break;case Hk:c=b;break;case Al:c=b+90;break;case Bl:c=b-90;break;case Cl:c=b+180;break;case Dl:c=jd(b);c>90&&c<270&&(c=c-180);break;case El:c=jd(b+90);c>90&&c<270&&(c=c-180);break;case Fl:c=jd(b-90);c>90&&c<270&&(c=c-180);break;case Gl:c=jd(b);if(c>45&&c<135||c>225&&c<315)return 0;c>90&&c<270&&(c=c-180)}return jd(c)}u.a(W,"fromNode",W.prototype.ca);
u.defineProperty(W,{ca:"fromNode"},r("og"),function(a){var b=this.og;if(b!==a){s&&a!==m&&u.c(a,U,W,"fromNode");var c=this.zc;if(b!==m){this.Gg!==b&&wl(b,this,c);if(c!==m)c.ed=m;Hl(this);b.r(ri)}this.og=a;this.mh=m;If(this);var d=this.b;if(d!==m){var e=this.data,g=d.J;e!==m&&g instanceof P&&g.Qu(e,g.Ub(a!==m?a.data:m))}e=this.zc;g=this.Qx;if(g!==m){var i=h;if(d!==m){i=d.ua;d.ua=h}g(this,c,e);if(d!==m)d.ua=i}if(a!==m){this.Gg!==a&&vl(a,this,e);if(e!==m)e.ed=m;Il(this);a.r(mi)}this.d("fromNode",b,a);
ti(this)}});u.a(W,"fromPortId",W.prototype.Tg);u.defineProperty(W,{Tg:"fromPortId"},r("gi"),function(a){var b=this.gi;if(b!==a){s&&u.e(a,"string",W,"fromPortId");var c=this.zc;if(c!==m)c.ed=m;Hl(this);this.gi=a;var d=this.zc;if(d!==m)d.ed=m;var e=this.b;if(e!==m){var g=this.data,i=e.J;g!==m&&i instanceof P&&i.Lr(g,a)}if(c!==d){this.mh=m;If(this);g=this.Qx;if(g!==m){i=h;if(e!==m){i=e.ua;e.ua=h}g(this,c,d);if(e!==m)e.ua=i}}Il(this);this.d("fromPortId",b,a)}});
u.m(W,{zc:"fromPort"},function(){var a=this.og;return a===m?m:a.fr(this.gi)});u.a(W,"fromPortChanged",W.prototype.Qx);u.defineProperty(W,{Qx:"fromPortChanged"},r("Oo"),function(a){a!==m&&u.e(a,"function",W,"fromPortChanged");var b=this.Oo;if(b!==a){this.Oo=a;this.d("fromPortChanged",b,a)}});u.a(W,"toNode",W.prototype.ea);
u.defineProperty(W,{ea:"toNode"},r("Gg"),function(a){var b=this.Gg;if(b!==a){s&&a!==m&&u.c(a,U,W,"toNode");var c=this.ld;if(b!==m){this.og!==b&&wl(b,this,c);if(c!==m)c.ed=m;Hl(this);b.r(ri)}this.Gg=a;this.mh=m;If(this);var d=this.b;if(d!==m){var e=this.data,g=d.J;e!==m&&g instanceof P&&g.Ru(e,g.Ub(a!==m?a.data:m))}e=this.ld;g=this.Oy;if(g!==m){var i=h;if(d!==m){i=d.ua;d.ua=h}g(this,c,e);if(d!==m)d.ua=i}if(a!==m){this.og!==a&&vl(a,this,e);if(e!==m)e.ed=m;Il(this);a.r(mi)}this.d("toNode",b,a);ti(this)}});
u.a(W,"toPortId",W.prototype.Zh);u.defineProperty(W,{Zh:"toPortId"},r("wi"),function(a){var b=this.wi;if(b!==a){s&&u.e(a,"string",W,"toPortId");var c=this.ld;if(c!==m)c.ed=m;Hl(this);this.wi=a;var d=this.ld;if(d!==m)d.ed=m;var e=this.b;if(e!==m){var g=this.data,i=e.J;g!==m&&i instanceof P&&i.Nr(g,a)}if(c!==d){this.mh=m;If(this);g=this.Oy;if(g!==m){i=h;if(e!==m){i=e.ua;e.ua=h}g(this,c,d);if(e!==m)e.ua=i}}Il(this);this.d("toPortId",b,a)}});
u.m(W,{ld:"toPort"},function(){var a=this.Gg;return a===m?m:a.fr(this.wi)});u.a(W,"toPortChanged",W.prototype.Oy);u.defineProperty(W,{Oy:"toPortChanged"},r("Fq"),function(a){a!==m&&u.e(a,"function",W,"toPortChanged");var b=this.Fq;if(b!==a){this.Fq=a;this.d("toPortChanged",b,a)}});u.a(W,"fromSpot",W.prototype.Va);u.defineProperty(W,{Va:"fromSpot"},r("qg"),function(a){var b=this.qg;if(!b.u(a)){s&&u.c(a,K,W,"fromSpot");this.qg=a=a.B();this.d("fromSpot",b,a);If(this)}});
u.a(W,"fromEndSegmentLength",W.prototype.$j);u.defineProperty(W,{$j:"fromEndSegmentLength"},r("ng"),function(a){a<0&&u.ha(a,">= 0",W,"fromEndSegmentLength");var b=this.ng;if(b!==a){s&&u.e(a,"number",W,"fromEndSegmentLength");this.ng=a;this.d("fromEndSegmentLength",b,a);If(this)}});u.a(W,"fromEndSegmentDirection",W.prototype.hr);
u.defineProperty(W,{hr:"fromEndSegmentDirection"},r("mg"),function(a){var b=this.mg;if(b!==a){s&&u.Sa(a,U,W,"fromEndSegmentDirection");this.mg=a;this.d("fromEndSegmentDirection",b,a);If(this)}});u.a(W,"fromShortLength",W.prototype.ir);u.defineProperty(W,{ir:"fromShortLength"},r("pg"),function(a){var b=this.pg;if(b!==a){s&&u.e(a,"number",W,"fromShortLength");this.pg=a;this.d("fromShortLength",b,a);If(this)}});u.a(W,"toSpot",W.prototype.Xa);
u.defineProperty(W,{Xa:"toSpot"},r("Ig"),function(a){var b=this.Ig;if(!b.u(a)){s&&u.c(a,K,W,"toSpot");this.Ig=a=a.B();this.d("toSpot",b,a);If(this)}});u.a(W,"toEndSegmentLength",W.prototype.jk);u.defineProperty(W,{jk:"toEndSegmentLength"},r("Fg"),function(a){a<0&&u.ha(a,">= 0",W,"toEndSegmentLength");var b=this.Fg;if(b!==a){s&&u.e(a,"number",W,"toEndSegmentLength");this.Fg=a;this.d("toEndSegmentLength",b,a);If(this)}});u.a(W,"toEndSegmentDirection",W.prototype.Tr);
u.defineProperty(W,{Tr:"toEndSegmentDirection"},r("Eg"),function(a){var b=this.Eg;if(b!==a){s&&u.Sa(a,U,W,"toEndSegmentDirection");this.Eg=a;this.d("toEndSegmentDirection",b,a);If(this)}});u.a(W,"toShortLength",W.prototype.Ur);u.defineProperty(W,{Ur:"toShortLength"},r("Hg"),function(a){var b=this.Hg;if(b!==a){s&&u.e(a,"number",W,"toShortLength");this.Hg=a;this.d("toShortLength",b,a);If(this)}});function ti(a){var b=a.ca,c=a.ea;b!==m&&c!==m?nl(a,b.gF(c)):nl(a,m)}
W.prototype.getOtherNode=W.prototype.EB=function(a){s&&u.c(a,U,W,"getOtherNode:node");var b=this.ca;return a===b?this.ea:b};W.prototype.getOtherPort=W.prototype.FI=function(a){s&&u.c(a,Q,W,"getOtherPort:port");var b=this.zc;return a===b?this.ld:b};u.m(W,{Xh:"labelNodes"},function(){return this.$e===m?u.yf:this.$e.f});function xl(a,b){if(a.$e===m)a.$e=new la(U);a.$e.add(b);a.M()}
W.prototype.nr=function(){T.prototype.nr.call(this);var a=this.og,b=this.Gg;if(a!==m){var c=this.zc;if(c!==m)c.ed=m;vl(a,this,c);Il(this)}if(b!==m){c=this.ld;if(c!==m)c.ed=m;vl(b,this,c);Il(this)}};W.prototype.or=function(){T.prototype.or.call(this);var a=this.og,b=this.Gg;if(a!==m){var c=this.zc;if(c!==m)c.ed=m;wl(a,this,c);Hl(this)}if(b!==m){c=this.ld;if(c!==m)c.ed=m;wl(b,this,c);Hl(this)}};
W.prototype.il=function(){if(this.$e!==m){var a=this.b;if(a===m)return;for(var b=this.$e.copy().f;b.next();)a.remove(b.value)}b=this.data;if(b!==m){a=this.b;if(a!==m){a=a.J;a instanceof P&&a.hG(b)}}};W.prototype.move=W.prototype.move=function(a){var b=this.position,c=a.x-b.x,b=a.y-b.y;T.prototype.move.call(this,a);this.dk(c,b);for(a=this.Xh;a.next();){var d=a.value,e=d.position;d.move(new E(e.x+c,e.y+b))}};u.a(W,"relinkableFrom",W.prototype.CC);
u.defineProperty(W,{CC:"relinkableFrom"},r("Vp"),function(a){var b=this.Vp;if(b!==a){s&&u.e(a,"boolean",W,"relinkableFrom");this.Vp=a;this.d("relinkableFrom",b,a)}});u.a(W,"relinkableTo",W.prototype.DC);u.defineProperty(W,{DC:"relinkableTo"},r("Wp"),function(a){var b=this.Wp;if(b!==a){s&&u.e(a,"boolean",W,"relinkableTo");this.Wp=a;this.d("relinkableTo",b,a)}});
W.prototype.canRelinkFrom=W.prototype.pH=function(){if(!this.CC)return o;var a=this.ra;if(a!==m&&!a.yi)return o;a=a.b;return a!==m&&!a.yi?o:h};W.prototype.canRelinkTo=W.prototype.qH=function(){if(!this.DC)return o;var a=this.ra;if(a!==m&&!a.yi)return o;a=a.b;return a!==m&&!a.yi?o:h};u.m(W,{path:"path"},function(){var a=this.$b;if(a!==m)return a;a=this.wa;a=ok(this,a,a.length);if(a instanceof X)return this.$b=a;return m});W.prototype.Qo=r("path");W.prototype.$v=r("yc");
W.prototype.oj=function(){Jl(this);var a=this.Yd();return this.Fw=a};
W.prototype.Yd=function(){var a=Infinity,b=Infinity,c=this.Y,d;if(c===0)return new J(NaN,NaN,0,0);if(c===1){c=this.h(0);a=Math.min(c.x,a);b=Math.min(c.y,b);d=new J(c.x,c.y,0,0)}else if(c===2){d=this.h(0);var e=this.h(1),a=Math.min(d.x,e.x),b=Math.min(d.y,e.y);d=new J(d,e)}else if(Kl(this)===Gj&&c>=4&&!ug(this)){d=this.h(0);var a=Math.min(d.x,a),b=Math.min(d.y,b),e=d.x,g=d.y,i=d.x,j=d.y,k,l,n,q;d=new J(e,g,0,0);for(var p=3;p<c;p=p+3){k=this.h(p-3);l=this.h(p-2);p+3>=c&&(p=c-1);n=this.h(p-1);q=this.h(p);
Uc(k.x,k.y,l.x,l.y,n.x,n.y,q.x,q.y,0.5,d);e=Math.min(e,d.x);g=Math.min(g,d.y);i=Math.max(i,d.x+d.width);j=Math.max(j,d.y+d.height);a=Math.min(q.x,a);b=Math.min(q.y,b)}}else{d=this.h(0);e=this.h(1);a=Math.min(d.x,e.x);b=Math.min(d.y,e.y);d=new J(d,e);for(p=2;p<c;p++){e=this.h(p);a=Math.min(e.x,a);b=Math.min(e.y,b);d.Wu(e)}}this.Lt.Vd(a-d.x,b-d.y);return d};u.m(W,{nC:"midPoint"},function(){Jl(this);return Ll(this)});
function Ll(a){var b=a.Y;if(b===0)return Mc;if(b===1)return a.h(0);if(b===2){var c=a.h(0),d=a.h(1);return new E((c.x+d.x)/2,(c.y+d.y)/2)}if(Kl(a)===Gj&&b>=3&&!ug(a)){if(b===3)return a.h(1);var c=(b-1)/3|0,e=(c/2|0)*3;if(c%2===1){var c=a.h(e),d=a.h(e+1),g=a.h(e+2),a=a.h(e+3),e=new E,b=d.x,i=d.y,d=g.x,j=g.y,g=(b+d)/2,k=(i+j)/2,i=((c.y+i)/2+k)/2,j=(k+(j+a.y)/2)/2;e.x=(((c.x+b)/2+g)/2+(g+(d+a.x)/2)/2)/2;e.y=(i+j)/2;return e}return a.h(e)}e=0;g=[];for(i=0;i<b-1;i++){c=a.h(i);d=a.h(i+1);if(Sa(c.x,d.x)){c=
d.y-c.y;c<0&&(c=-c)}else if(Sa(c.y,d.y)){c=d.x-c.x;c<0&&(c=-c)}else c=Math.sqrt(c.Ph(d));g.push(c);e=e+c}for(d=i=c=0;c<e/2&&i<b;){d=g[i];if(c+d>e/2)break;c=c+d;i++}b=a.h(i);a=a.h(i+1);if(b.x===a.x)return b.y>a.y?new E(b.x,b.y-(e/2-c)):new E(b.x,b.y+(e/2-c));if(b.y===a.y)return b.x>a.x?new E(b.x-(e/2-c),b.y):new E(b.x+(e/2-c),b.y);c=(e/2-c)/d;return new E(b.x+c*(a.x-b.x),b.y+c*(a.y-b.y))}u.m(W,{mC:"midAngle"},function(){Jl(this);return Ml(this)});
function Ml(a){var b=a.Y;if(b<2)return NaN;if(Kl(a)===Gj&&b>=4&&!ug(a)){var c=(b-1)/3|0,d=(c/2|0)*3;if(c%2===1){var d=Math.floor(d),b=a.h(d),e=a.h(d+1),c=a.h(d+2),a=a.h(d+3),d=e.x,e=e.y,g=c.x,c=c.y,i=(d+g)/2,j=(e+c)/2;return cb(((b.x+d)/2+i)/2,((b.y+e)/2+j)/2,(i+(g+a.x)/2)/2,(j+(c+a.y)/2)/2)}if(d>0&&d+1<b){b=a.h(d-1);e=a.h(d+1);return b.Oh(e)}}c=b/2|0;if(b%2===0){b=a.h(c-1);e=a.h(c);return b.Oh(e)}b=a.h(c-1);e=a.h(c);c=a.h(c+1);a=b.Ph(e);d=e.Ph(c);return a>d?b.Oh(e):e.Oh(c)}u.a(W,"points",W.prototype.hb);
u.defineProperty(W,{hb:"points"},r("yc"),function(a){s&&u.c(a,z,W,"points");var b=this.yc;if(b!==a&&a!==m){for(var c=a.f;c.next();){var d=c.value;d.freeze()}a.freeze();this.yc=a.copy();this.Ye();Nl(this);for(var c=a.count,e=new z,g=0;g<c;g++){d=a.j[g];e.add(d.copy())}this.d("points",b,e)}});u.m(W,{Y:"pointsCount"},function(){return this.yc.count});W.prototype.getPoint=W.prototype.h=function(a){return this.yc.j[a]};
W.prototype.setPoint=W.prototype.w=function(a,b){if(s){u.c(b,E,W,"setPoint");b.V()||u.g("Link.setPoint called with a Point that does not have real numbers: "+b.toString())}this.Tf===m&&u.g("Call Link.startRoute before modifying the points of the route.");this.yc.Pu(a,b)};
W.prototype.insertPoint=W.prototype.q=function(a,b){if(s){u.c(b,E,W,"insertPoint");b.V()||u.g("Link.insertPoint called with a Point that does not have real numbers: "+b.toString())}this.Tf===m&&u.g("Call Link.startRoute before modifying the points of the route.");this.yc.dc(a,b)};
W.prototype.addPoint=W.prototype.Vc=function(a){if(s){u.c(a,E,W,"addPoint");a.V()||u.g("Link.addPoint called with a Point that does not have real numbers: "+a.toString())}this.Tf===m&&u.g("Call Link.startRoute before modifying the points of the route.");this.yc.add(a)};W.prototype.removePoint=W.prototype.HC=function(a){this.Tf===m&&u.g("Call Link.startRoute before modifying the points of the route.");this.yc.Se(a)};
W.prototype.clearPoints=W.prototype.Xm=function(){this.Tf===m&&u.g("Call Link.startRoute before modifying the points of the route.");this.yc.clear()};W.prototype.movePoints=W.prototype.dk=function(a,b){for(var c=new z(E),d=this.yc.f;d.next();){var e=d.value;c.add(new E(e.x+a,e.y+b))}this.hb=c};W.prototype.startRoute=W.prototype.ik=function(){if(this.Tf===m){for(var a=new z(E),b=this.yc.f;b.next();)a.add(b.value.B());this.Tf=a;this.yc.xa()}};
W.prototype.commitRoute=W.prototype.Mh=function(){if(this.Tf!==m){for(var a=this.Tf,b=Infinity,c=Infinity,d=a.count,e=0;e<d;e++)var g=a.j[e],b=Math.min(g.x,b),c=Math.min(g.y,c);for(var i=Infinity,j=Infinity,k=this.yc,l=k.count,e=0;e<l;e++){g=k.j[e];i=Math.min(g.x,i);j=Math.min(g.y,j)}if(l===d)for(e=0;e<l;e++){g=a.j[e];d=k.j[e];if(g.x-b!==d.x-i||g.y-c!==d.y-j){this.Ye();break}}this.Tf=m;this.yc.freeze();Nl(this);b=new z(E);for(e=0;e<l;e++){g=k.j[e];b.add(g.copy())}this.d("points",a,b)}};
W.prototype.rollbackRoute=W.prototype.lG=function(){this.Tf=m};function Nl(a){if(a.yc.count===0)a.Xk=o;else{a.Xk=h;Ol(a,o)}}function If(a){if(!a.Em&&(!a.b||!a.b.va.rc)){a.Xk=o;a.Ye();a=a.Qo();a!==m&&a.M()}}
function Jl(a){if(!a.Xk&&!a.Kv){var b=h;try{a.Kv=h;a.ik();var c=a.ca,d=m,d=c===m?m:a.zc;if(d!==m){var e=zj(d);if(e===c||!c.gb()){var g=il(c);if(g!==m&&g!==c){c=g;d=g.fr("")}else c=g}else d=e}if(c===m||d===m||!c.location.V())b=o;else{var i=a.ea,e=m,e=i===m?m:a.ld;if(e!==m){var j=zj(e);if(j===i||!i.gb()){var k=il(i);if(k!==m&&k!==i){i=k;e=k.fr("")}else i=k}else e=j}if(i===m||e===m||!i.location.V())b=o;else{var l=a.Y,n=Pl(a,d),q=Ql(a,e),j=d===e,p=ug(a),t=a.Ie===Gj;if(j&&!p){t=h;a.mh=h}else a.mh=o;var w=
a.Ut===Ni||j;if(!p&&n===Tb&&q===Tb&&!j){q=o;if(!w&&l>=3)var A=a.Ld(c,d,Tb,h,o,i,e),F=a.Ld(i,e,Tb,o,o,c,d),q=Rl(a,0,A,l-1,F);if(!q){a.Xm();if(t){var q=c,p=d,H=e,x=a.Ld(q,p,Tb,h,o,i,H),I=a.Ld(i,H,Tb,o,o,q,p),y=I.x-x.x,G=I.y-x.y,fa=Sl(a),R=0,S=0,da=x.x+y/3,ma=x.y+G/3,ua=da,sa=ma;if(Ua(G,0))sa=y>0?sa-fa:sa+fa;else{R=-y/G;S=Math.sqrt(fa*fa/(R*R+1));fa<0&&(S=-S);ua=(G<0?-1:1)*S+da;sa=R*(ua-da)+ma}var da=x.x+2*y/3,ma=x.y+2*G/3,ib=da,db=ma;if(Ua(G,0))db=y>0?db-fa:db+fa;else{ib=(G<0?-1:1)*S+da;db=R*(ib-da)+
ma}a.Xm();a.Vc(x);a.Vc(new E(ua,sa));a.Vc(new E(ib,db));a.Vc(I);a.w(0,a.Ld(q,p,Tb,h,o,i,H));a.w(3,a.Ld(i,H,Tb,o,o,q,p))}else{var q=c,p=d,H=e,$a=a.Ld(q,p,Tb,h,o,i,H),Oa=a.Ld(i,H,Tb,o,o,q,p);if(!isNaN(a.fu)||a.Bd!==0&&!ug(a)){var fb=Oa.x-$a.x,Va=Oa.y-$a.y,vc=Sl(a),Cd=$a.x+fb/2,Wa=$a.y+Va/2,i=Cd,q=Wa;if(Ua(Va,0))q=fb>0?q-vc:q+vc;else{var p=-fb/Va,Fc=Math.sqrt(vc*vc/(p*p+1));vc<0&&(Fc=-Fc);i=(Va<0?-1:1)*Fc+Cd;q=p*(i-Cd)+Wa}a.Vc($a);a.Vc(new E(i,q))}else a.Vc($a);a.Vc(Oa)}}}else{var Dd=a.Te===Hf;w&&(p&&
Dd||j)&&a.Xm();var qc=Sl(a),Wb=a.Ld(c,d,n,h,p,i,e),I=G=y=0;if(p||n!==Tb||j){var gc=Tl(a,d,n,h),I=Ul(a,c,d,Wb,n,h,p,e);if(j){I=I-(p?90:30);qc<0&&(I=I-180)}I<0?I=I+360:I>=360&&(I=I-360);j&&(gc=gc+Math.abs(qc));if(I===0)y=gc;else if(I===90)G=gc;else if(I===180)y=-gc;else if(I===270)G=-gc;else{y=gc*Math.cos(I*Math.PI/180);G=gc*Math.sin(I*Math.PI/180)}if(Pb(n)&&j)var Gc=d.sb(Zb),Wb=a.Rx(c,d,Gc,new E(Gc.x+y*1E3,Gc.y+G*1E3),h)}H=a.Ld(i,e,q,o,p,c,d);x=da=fa=0;if(p||q!==Tb||j){var Gb=Tl(a,e,q,o),x=Ul(a,i,
e,H,q,o,p,d);if(j){x=x+(p?0:30);qc<0&&(x=x+180)}x<0?x=x+360:x>=360&&(x=x-360);j&&(Gb=Gb+Math.abs(qc));if(x===0)fa=Gb;else if(x===90)da=Gb;else if(x===180)fa=-Gb;else if(x===270)da=-Gb;else{fa=Gb*Math.cos(x*Math.PI/180);da=Gb*Math.sin(x*Math.PI/180)}if(Pb(q)&&j){Gc=e.sb(Zb);H=a.Rx(i,e,Gc,new E(Gc.x+fa*1E3,Gc.y+da*1E3),o)}}ma=Wb;if(p||n!==Tb||j)ma=new E(Wb.x+y,Wb.y+G);e=H;if(p||q!==Tb||j)e=new E(H.x+fa,H.y+da);if(w||p||!Pb(n)||!(l>3&&Rl(a,0,Wb,l-2,e)))if(!w&&!p&&Pb(q)&&l>3&&Rl(a,1,ma,l-1,H))a.w(0,Wb);
else if(!w&&!p&&l>4&&Rl(a,1,ma,l-2,e)){a.w(0,Wb);a.w(l-1,H)}else if(!w&&p&&l>=6&&!Dd&&Rl(a,1,ma,l-2,e)){a.w(0,Wb);a.w(l-1,H)}else{a.Xm();a.Vc(Wb);(p||n!==Tb||j)&&a.Vc(ma);if(p)b:{y=ma;G=e;I=-45<=I&&I<45?0:45<=I&&I<135?90:135<=I&&I<225?180:270;x=-45<=x&&x<45?0:45<=x&&x<135?90:135<=x&&x<225?180:270;R=c.oa.copy();S=i.oa.copy();if(R.V()&&S.V()){R.hf(8,8);S.hf(8,8);R.Wu(y);S.Wu(G);ua=a.b;if(a.Te===Hf&&ua!==m&&!R.da(G)&&!S.da(y)&&c!==i&&!a.ra.Yc){if(ua.Ic===m)ua.Ic=new Vl;i=m;ua.Ic.on||(i=a!==m?a.Ta:m);
if(ua.Ic.on||ua.Ic.group!==i){if(i===m){ua.tj&&ei(ua,ua.Yd());ib=ua.pc.copy();ib.hf(100,100);Wl(ua.Ic,ib);for(db=ua.ek;db.next();){var Hb=db.value,Ib=Hb.ra;Ib===m||(!Ib.visible||Ib.Yc)||zi(ua,Hb)}}else{var Ce=i.oa.copy();Ce.hf(20,20);Wl(ua.Ic,Ce);for(var Oc=i.ec;Oc.next();){var nd=Oc.value;nd instanceof U&&zi(ua,nd)}}ua.Ic.group=i;ua.Ic.on=o}else Xl(ua.Ic);var sa=ua.Ic,Hc=R.copy().mk(S);Hc.hf(sa.cl*2,sa.bl*2);Yl(sa,y,I,G,x,Hc);var xc=Zl(sa,G.x,G.y);if(!sa.abort&&xc===$l){Xl(sa);var ed=sa.aD;Hc.hf(sa.cl*
ed,sa.bl*ed);Yl(sa,y,I,G,x,Hc);xc=Zl(sa,G.x,G.y)}if(!sa.abort&&xc===$l){Xl(sa);ed=sa.$B;Hc.hf(sa.cl*ed,sa.bl*ed);Yl(sa,y,I,G,x,Hc);xc=Zl(sa,G.x,G.y)}if(!sa.abort&&xc===$l&&sa.yD){Xl(sa);Yl(sa,y,I,G,x,sa.fb);xc=Zl(sa,G.x,G.y)}if(!sa.abort&&xc<$l&&Zl(sa,G.x,G.y)!==0){am(a,sa,G.x,G.y,x,h);var rb=a.h(2);if(a.Y<4){if(I===0||I===180){rb.x=y.x;rb.y=G.y}else{rb.x=G.x;rb.y=y.y}a.w(2,rb);a.q(3,rb)}else{var yc=a.h(3);if(I===0||I===180)if(Ua(rb.x,yc.x)){var Ed=I===0?Math.max(rb.x,y.x):Math.min(rb.x,y.x);a.w(2,
new E(Ed,y.y));a.w(3,new E(Ed,yc.y))}else if(Ua(rb.y,yc.y)){if(Math.abs(y.y-rb.y)<=sa.bl/2){a.w(2,new E(rb.x,y.y));a.w(3,new E(yc.x,y.y))}a.q(2,new E(rb.x,y.y))}else a.w(2,new E(y.x,rb.y));else if(I===90||I===270)if(Ua(rb.y,yc.y)){var Fd=I===90?Math.max(rb.y,y.y):Math.min(rb.y,y.y);a.w(2,new E(y.x,Fd));a.w(3,new E(yc.x,Fd))}else if(Ua(rb.x,yc.x)){if(Math.abs(y.x-rb.x)<=sa.cl/2){a.w(2,new E(y.x,rb.y));a.w(3,new E(y.x,yc.y))}a.q(2,new E(y.x,rb.y))}else a.w(2,new E(rb.x,y.y))}break b}}var qa,Ea;if(I===
0)if(G.x>y.x||x===270&&G.y<y.y&&S.right>y.x||x===90&&G.y>y.y&&S.right>y.x){qa=new E(G.x,y.y);Ea=new E(G.x,(y.y+G.y)/2);if(x===180){qa.x=bm(a,y.x,G.x);Ea.x=qa.x;Ea.y=G.y}else if(x===270&&G.y<y.y||x===90&&G.y>y.y){qa.x=y.x<S.left?bm(a,y.x,S.left):y.x<S.right&&(x===270&&y.y<S.top||x===90&&y.y>S.bottom)?bm(a,y.x,G.x):S.right;Ea.x=qa.x;Ea.y=G.y}else if(x===0&&y.x<S.left&&y.y>S.top&&y.y<S.bottom){qa.x=y.x;qa.y=y.y<G.y?Math.min(G.y,S.top):Math.max(G.y,S.bottom);Ea.y=qa.y}}else{qa=new E(y.x,G.y);Ea=new E((y.x+
G.x)/2,G.y);if(x===180||x===90&&G.y<R.top||x===270&&G.y>R.bottom){if(x===180&&(S.da(y)||R.da(G)))qa.y=bm(a,y.y,G.y);else if(G.y<y.y&&(x===180||x===90))qa.y=bm(a,R.top,Math.max(G.y,S.bottom));else if(G.y>y.y&&(x===180||x===270))qa.y=bm(a,R.bottom,Math.min(G.y,S.top));Ea.x=G.x;Ea.y=qa.y}if(qa.y>R.top&&qa.y<R.bottom)if(G.x>=R.left&&G.x<=y.x||y.x<=S.right&&y.x>=G.x){if(x===90||x===270){qa=new E(Math.max((y.x+G.x)/2,y.x),y.y);Ea=new E(qa.x,G.y)}}else{qa.y=x===270||(x===0||x===180)&&G.y<y.y?Math.min(G.y,
x===0?R.top:Math.min(R.top,S.top)):Math.max(G.y,x===0?R.bottom:Math.max(R.bottom,S.bottom));Ea.x=G.x;Ea.y=qa.y}}else if(I===180)if(G.x<y.x||x===270&&G.y<y.y&&S.left<y.x||x===90&&G.y>y.y&&S.left<y.x){qa=new E(G.x,y.y);Ea=new E(G.x,(y.y+G.y)/2);if(x===0){qa.x=bm(a,y.x,G.x);Ea.x=qa.x;Ea.y=G.y}else if(x===270&&G.y<y.y||x===90&&G.y>y.y){qa.x=y.x>S.right?bm(a,y.x,S.right):y.x>S.left&&(x===270&&y.y<S.top||x===90&&y.y>S.bottom)?bm(a,y.x,G.x):S.left;Ea.x=qa.x;Ea.y=G.y}else if(x===180&&y.x>S.right&&y.y>S.top&&
y.y<S.bottom){qa.x=y.x;qa.y=y.y<G.y?Math.min(G.y,S.top):Math.max(G.y,S.bottom);Ea.y=qa.y}}else{qa=new E(y.x,G.y);Ea=new E((y.x+G.x)/2,G.y);if(x===0||x===90&&G.y<R.top||x===270&&G.y>R.bottom){if(x===0&&(S.da(y)||R.da(G)))qa.y=bm(a,y.y,G.y);else if(G.y<y.y&&(x===0||x===90))qa.y=bm(a,R.top,Math.max(G.y,S.bottom));else if(G.y>y.y&&(x===0||x===270))qa.y=bm(a,R.bottom,Math.min(G.y,S.top));Ea.x=G.x;Ea.y=qa.y}if(qa.y>R.top&&qa.y<R.bottom)if(G.x<=R.right&&G.x>=y.x||y.x>=S.left&&y.x<=G.x){if(x===90||x===270){qa=
new E(Math.min((y.x+G.x)/2,y.x),y.y);Ea=new E(qa.x,G.y)}}else{qa.y=x===270||(x===0||x===180)&&G.y<y.y?Math.min(G.y,x===180?R.top:Math.min(R.top,S.top)):Math.max(G.y,x===180?R.bottom:Math.max(R.bottom,S.bottom));Ea.x=G.x;Ea.y=qa.y}}else if(I===90)if(G.y>y.y||x===180&&G.x<y.x&&S.bottom>y.y||x===0&&G.x>y.x&&S.bottom>y.y){qa=new E(y.x,G.y);Ea=new E((y.x+G.x)/2,G.y);if(x===270){qa.y=bm(a,y.y,G.y);Ea.x=G.x;Ea.y=qa.y}else if(x===180&&G.x<y.x||x===0&&G.x>y.x){qa.y=y.y<S.top?bm(a,y.y,S.top):y.y<S.bottom&&
(x===180&&y.x<S.left||x===0&&y.x>S.right)?bm(a,y.y,G.y):S.bottom;Ea.x=G.x;Ea.y=qa.y}else if(x===90&&y.y<S.top&&y.x>S.left&&y.x<S.right){qa.x=y.x<G.x?Math.min(G.x,S.left):Math.max(G.x,S.right);qa.y=y.y;Ea.x=qa.x}}else{qa=new E(G.x,y.y);Ea=new E(G.x,(y.y+G.y)/2);if(x===270||x===0&&G.x<R.left||x===180&&G.x>R.right){if(x===270&&(S.da(y)||R.da(G)))qa.x=bm(a,y.x,G.x);else if(G.x<y.x&&(x===270||x===0))qa.x=bm(a,R.left,Math.max(G.x,S.right));else if(G.x>y.x&&(x===270||x===180))qa.x=bm(a,R.right,Math.min(G.x,
S.left));Ea.x=qa.x;Ea.y=G.y}if(qa.x>R.left&&qa.x<R.right)if(G.y>=R.top&&G.y<=y.y||y.y<=S.bottom&&y.y>=G.y){if(x===0||x===180){qa=new E(y.x,Math.max((y.y+G.y)/2,y.y));Ea=new E(G.x,qa.y)}}else{qa.x=x===180||(x===90||x===270)&&G.x<y.x?Math.min(G.x,x===90?R.left:Math.min(R.left,S.left)):Math.max(G.x,x===90?R.right:Math.max(R.right,S.right));Ea.x=qa.x;Ea.y=G.y}}else if(G.y<y.y||x===180&&G.x<y.x&&S.top<y.y||x===0&&G.x>y.x&&S.top<y.y){qa=new E(y.x,G.y);Ea=new E((y.x+G.x)/2,G.y);if(x===90){qa.y=bm(a,y.y,
G.y);Ea.x=G.x;Ea.y=qa.y}else if(x===180&&G.x<y.x||x===0&&G.x>=y.x){qa.y=y.y>S.bottom?bm(a,y.y,S.bottom):y.y>S.top&&(x===180&&y.x<S.left||x===0&&y.x>S.right)?bm(a,y.y,G.y):S.top;Ea.x=G.x;Ea.y=qa.y}else if(x===270&&y.y>S.bottom&&y.x>S.left&&y.x<S.right){qa.x=y.x<G.x?Math.min(G.x,S.left):Math.max(G.x,S.right);qa.y=y.y;Ea.x=qa.x}}else{qa=new E(G.x,y.y);Ea=new E(G.x,(y.y+G.y)/2);if(x===90||x===0&&G.x<R.left||x===180&&G.x>R.right){if(x===90&&(S.da(y)||R.da(G)))qa.x=bm(a,y.x,G.x);else if(G.x<y.x&&(x===90||
x===0))qa.x=bm(a,R.left,Math.max(G.x,S.right));else if(G.x>y.x&&(x===90||x===180))qa.x=bm(a,R.right,Math.min(G.x,S.left));Ea.x=qa.x;Ea.y=G.y}if(qa.x>R.left&&qa.x<R.right)if(G.y<=R.bottom&&G.y>=y.y||y.y>=S.top&&y.y<=G.y){if(x===0||x===180){qa=new E(y.x,Math.min((y.y+G.y)/2,y.y));Ea=new E(G.x,qa.y)}}else{qa.x=x===180||(x===90||x===270)&&G.x<y.x?Math.min(G.x,x===270?R.left:Math.min(R.left,S.left)):Math.max(G.x,x===270?R.right:Math.max(R.right,S.right));Ea.x=qa.x;Ea.y=G.y}}a.Vc(qa);a.Vc(Ea)}}(p||q!==
Tb||j)&&a.Vc(e);a.Vc(H)}}b=h}}}finally{a.Kv=o;b?a.Mh():a.lG()}}}function cm(a,b){if(Math.abs(b.x-a.x)>Math.abs(b.y-a.y)){b.x=b.x>=a.x?a.x+9E9:a.x-9E9;b.y=a.y}else{b.y=b.y>=a.y?a.y+9E9:a.y-9E9;b.x=a.x}return b}W.prototype.getLinkPointFromPoint=W.prototype.Rx=function(a,b,c,d){if(a===m||b===m)return c;if(!a.gb()){var e=il(a);if(e!==m&&e!==a)b=e.port}a=b.U===m?new Ya:b.U.Xd.copy();e=a.copy();e.xu();d=Ab(e,d);e=Ab(e,c);c=e.copy();b.vu(d,e,c);b=Ab(a,c);c.x=b.x;c.y=b.y;return c};
function dm(a,b){var c=a.ed;if(c===m){c=new em;c.port=a;c.Wg=a.W;a.ed=c}return fm(c,b)}W.prototype.getLinkPoint=W.prototype.Ld=function(a,b,c,d,e,g,i){if(Nb(c))return c=b.sb(c);if(Ob(c)){c=dm(b,this);if(c!==m)return c=c.wn}c=b.sb(Zb);if(this.Y>(e?6:2)){i=d?this.h(1):this.h(this.Y-2);e&&(i=cm(c,i.copy()))}else{i=i.sb(Zb);e&&(i=cm(c,i))}return this.Rx(a,b,c,i,d)};
function Ul(a,b,c,d,e,g,i,j){a:if(Nb(e))d=e.x>e.y?e.x>1-e.y?0:e.x<1-e.y?270:315:e.x<e.y?e.x>1-e.y?90:e.x<1-e.y?180:135:e.x<0.5?225:e.x>0.5?45:0;else{if(Ob(e)){e=dm(c,a);if(e!==m)switch(e.Ad){case u.Mc:d=270;break a;case u.tc:d=180;break a;default:case u.Dc:d=0;break a;case u.Cc:d=90;break a}}e=c.sb(Zb);if(a.Y>(i?6:2)){j=g?a.h(1):a.h(a.Y-2);j=i?cm(e,j.copy()):d}else j=j.sb(Zb);d=Math.abs(j.x-e.x)>Math.abs(j.y-e.y)?j.x>=e.x?0:180:j.y>=e.y?90:270}i=rl;i=g?a.hr:a.Tr;i===rl&&(i=g?c.hr:c.Tr);switch(i){case sl:a=
b.Ka;d=d+a;d>=360&&(d=d-360);break;case rl:case Mi:a=b.Ka;if(a===0)break;45<=a&&a<135?d=d+90:135<=a&&a<225?d=d+180:225<=a&&a<315&&(d=d+270);d>=360&&(d=d-360)}return d}function Tl(a,b,c,d){if(Ob(c)){c=dm(b,a);if(c!==m)return c.lu}c=NaN;c=d?a.$j:a.jk;isNaN(c)&&(c=d?b.$j:b.jk);isNaN(c)&&(c=10);return c}function Pl(a,b){var c=a.Va;if(Qb(c)){if(b===f)b=a.zc;if(b!==m)c=b.Va}return c===Ub?Tb:c}function Ql(a,b){var c=a.Xa;if(Qb(c)){if(b===f)b=a.ld;if(b!==m)c=b.Xa}return c===Ub?Tb:c}
function gm(a){var b=a.ir;if(isNaN(b)){a=a.zc;if(a!==m)b=a.ir}return isNaN(b)?0:b}function hm(a){var b=a.Ur;if(isNaN(b)){a=a.ld;if(a!==m)b=a.Ur}return isNaN(b)?0:b}function ug(a){a=a.Te;return a===oh||a===Hf}function Kl(a){if(a.mh===m){var b=ug(a);a.mh=a.zc===a.ld&&!b}return a.mh?Gj:a.Ie}function im(a){if(a.Ie===Gj)return 0;a=a.bB;if(isNaN(a)||a<0)a=10;return a}
function Sl(a){var b=a.fu;if(isNaN(b)){var c=a.Bd;if(c!==0){b=a.uk;b=b!==m?b.Ti:10;a=Math.abs(c);b=b/2+((a-1)/2|0)*b;a%2===0&&(b=-b);c<0&&(b=-b)}else b=10}return b}
function Rl(a,b,c,d,e){var g=a.Ut;if(ug(a)){if(g===Kj)return o;g===Lj&&(g=Jj)}switch(g){case Kj:var i=a.h(b),j=a.h(d);if(!i.u(c)||!j.u(e)){var g=i.x,i=i.y,k=j.x-g,l=j.y-i,n=Math.sqrt(k*k+l*l);if(!Ua(n,0)){var q;if(Ua(k,0))q=l<0?-Math.PI/2:Math.PI/2;else{q=Math.atan(l/Math.abs(k));k<0&&(q=Math.PI-q)}var j=c.x,p=c.y,k=e.x-j,t=e.y-p,l=Math.sqrt(k*k+t*t);if(Ua(k,0))t=t<0?-Math.PI/2:Math.PI/2;else{t=Math.atan(t/Math.abs(k));k<0&&(t=Math.PI-t)}n=l/n;q=t-q;a.w(b,c);for(b=b+1;b<d;b++){c=a.h(b);k=c.x-g;l=
c.y-i;c=Math.sqrt(k*k+l*l);if(!Ua(c,0)){if(Ua(k,0))l=l<0?-Math.PI/2:Math.PI/2;else{l=Math.atan(l/Math.abs(k));k<0&&(l=Math.PI-l)}k=l+q;c=c*n;a.w(b,new E(j+c*Math.cos(k),p+c*Math.sin(k)))}}a.w(d,e)}}return h;case Lj:i=a.h(b);p=a.h(d);if(!i.u(c)||!p.u(e)){g=i.x;i=i.y;j=p.x;p=p.y;n=(j-g)*(j-g)+(p-i)*(p-i);k=c.x;q=c.y;var l=e.x,t=e.y,w=0,A=1,w=l-k!==0?(t-q)/(l-k):9E9;w!==0&&(A=Math.sqrt(1+1/(w*w)));a.w(b,c);for(b=b+1;b<d;b++){var c=a.h(b),F=c.x,H=c.y,x=0.5;n!==0&&(x=((g-F)*(g-j)+(i-H)*(i-p))/n);var I=
g+x*(j-g),y=i+x*(p-i),c=Math.sqrt((F-I)*(F-I)+(H-y)*(H-y));H<w*(F-I)+y&&(c=-c);w>0&&(c=-c);F=k+x*(l-k);x=q+x*(t-q);if(w!==0){c=F+c/A;a.w(b,new E(c,x-(c-F)/w))}else a.w(b,new E(F,x+c))}a.w(d,e)}return h;case Jj:if(ug(a)){g=a.h(b+1);i=a.h(b+2);Ua(g.x,i.x)&&!Ua(g.y,i.y)?a.w(b+1,new E(g.x,c.y)):Ua(g.y,i.y)&&a.w(b+1,new E(c.x,g.y));g=a.h(d-1);i=a.h(d-2);Ua(g.x,i.x)&&!Ua(g.y,i.y)?a.w(d-1,new E(g.x,e.y)):Ua(g.y,i.y)&&a.w(d-1,new E(e.x,g.y))}a.w(b,c);a.w(d,e);return h;default:return o}}
function bm(a,b,c){return!isNaN(a.fu)||a.Bd!==0&&!ug(a)?(b+c)/2+Sl(a):(b+c)/2}
function am(a,b,c,d,e,g){var i=b.cl,j=b.bl,k=Zl(b,c,d),l=c,n=d;for(e===0?l=l+i:e===90?n=n+j:e===180?l=l-i:n=n-j;k>jm&&Zl(b,l,n)===k-km;){c=l;d=n;e===0?l=l+i:e===90?n=n+j:e===180?l=l-i:n=n-j;k=k-km}if(g){if(k>jm)if(e===180||e===0)c=Math.floor(c/i)*i+i/2;else if(e===90||e===270)d=Math.floor(d/j)*j+j/2}else{c=Math.floor(c/i)*i+i/2;d=Math.floor(d/j)*j+j/2}if(k>jm){g=e;l=c;n=d;if(e===0){g=90;n=n+j}else if(e===90){g=180;l=l-i}else if(e===180){g=270;n=n-j}else if(e===270){g=0;l=l+i}if(Zl(b,l,n)===k-km)am(a,
b,l,n,g,o);else{l=c;n=d;if(e===0){g=270;n=n-j}else if(e===90){g=0;l=l+i}else if(e===180){g=90;n=n+j}else if(e===270){g=180;l=l-i}Zl(b,l,n)===k-km&&am(a,b,l,n,g,o)}}a.Vc(new E(c,d))}W.prototype.findClosestSegment=W.prototype.sI=function(a){s&&u.c(a,E,W,"findClosestSegment:p");for(var b=a.x,a=a.y,c=this.h(0),d=this.h(1),e=bb(b,a,c.x,c.y,d.x,d.y),g=0,i=1;i<this.Y-1;i++){var c=this.h(i+1),j=bb(b,a,d.x,d.y,c.x,c.y),d=c;if(j<e){g=i;e=j}}return g};W.prototype.Ye=function(){this.$b=this.ta=m;this.M()};
u.m(W,{jr:"geometry"},function(){if(this.ta===m){Jl(this);this.ta=lm(this)}return this.ta});function ki(a){if(a.ta===m&&a.Xk!==o){a.ta=lm(a);var b=a.Qo();if(b!==m){b.ta=a.ta;for(var c=a.wa,d=c.length,e=0;e<d;e++){var g=c.j[e];if(g!==b&&g.Mi&&g instanceof X)g.ta=a.ta}}}}
function lm(a){var b=a.Y;if(b<2){var a=new md(yd),c=new zd(0,0);a.qc.add(c);return a}var d,e=a.h(0).copy(),g=new E(Infinity,Infinity);g.x=Math.min(e.x,g.x);g.y=Math.min(e.y,g.y);var i=Kl(a);if(i===Gj&&b>=3&&!Sa(a.Qr,0))if(b===3){var j=a.h(2).copy(),c=Math.min(e.x,j.x);d=Math.min(e.y,j.y)}else{if(ug(a))for(j=0;j<b;j++){c=a.yc.j[j];g.x=Math.min(c.x,g.x);g.y=Math.min(c.y,g.y)}else for(var k,j=3;j<b;j=j+3){j+3>=b&&(j=b-1);k=a.h(j);g.x=Math.min(k.x,g.x);g.y=Math.min(k.y,g.y)}c=g.x;d=g.y}else{for(j=0;j<
b;j++){c=a.yc.j[j];g.x=Math.min(c.x,g.x);g.y=Math.min(c.y,g.y)}c=g.x;d=g.y}c=c-a.Lt.x;d=d-a.Lt.y;e.x=e.x-c;e.y=e.y-d;if(b===2){var l=a.h(1).copy();l.x=l.x-c;l.y=l.y-d;gm(a)!==0&&mm(a,e,h,g);hm(a)!==0&&mm(a,l,o,g);a=new md(Bd);a.La=e.x;a.Ma=e.y;a.aa=l.x;a.ba=l.y;return a}l=new L;gm(a)!==0&&mm(a,e,h,g);M(l,e.x,e.y,o,o);if(i===Gj&&b>=3&&!Sa(a.Qr,0))if(b===3){j=a.h(1);b=j.x-c;e=j.y-d;j=a.h(2).copy();j.x=j.x-c;j.y=j.y-d;hm(a)!==0&&mm(a,j,o,g);N(l,b,e,b,e,j.x,j.y)}else if(ug(a)){e=new E(c,d);i=a.h(1).copy();
k=new E(c,d);for(var b=new E(c,d),g=a.h(0),n=m,q=a.Qr/3,j=1;j<a.Y-1;j++){var n=a.h(j),p=g,t=n,w=a.h(nm(a,n,j,o));if(!Sa(p.x,t.x)||!Sa(t.x,w.x))if(!Sa(p.y,t.y)||!Sa(t.y,w.y)){var A=q,F=k,H=b;isNaN(A)&&(A=a.Qr/3);var x=p.x,p=p.y,I=t.x,t=t.y,y=w.x,w=w.y,G=A*om(x,p,I,t),A=A*om(I,t,y,w);if(Sa(p,t)&&Sa(I,y))if(I>x)if(w>t){F.x=I-G;F.y=t-G;H.x=I+A;H.y=t+A}else{F.x=I-G;F.y=t+G;H.x=I+A;H.y=t-A}else if(w>t){F.x=I+G;F.y=t-G;H.x=I-A;H.y=t+A}else{F.x=I+G;F.y=t+G;H.x=I-A;H.y=t-A}if(Sa(x,I)&&Sa(t,w))if(t>p){if(y>
I){F.x=I-G;F.y=t-G;H.x=I+A}else{F.x=I+G;F.y=t-G;H.x=I-A}H.y=t+A}else{if(y>I){F.x=I-G;F.y=t+G;H.x=I+A}else{F.x=I+G;F.y=t+G;H.x=I-A}H.y=t-A}if(Sa(x,I)&&Sa(I,y)||Sa(p,t)&&Sa(t,w)){x=0.5*(x+y);p=0.5*(p+w);F.x=x;F.y=p;H.x=x;H.y=p}if(j===1){i.x=(g.x+n.x)*0.5;i.y=(g.y+n.y)*0.5}else if(j===2&&Sa(g.x,a.h(0).x)&&Sa(g.y,a.h(0).y)){i.x=(g.x+n.x)*0.5;i.y=(g.y+n.y)*0.5}N(l,i.x-c,i.y-d,k.x-c,k.y-d,n.x-c,n.y-d);e.set(k);i.set(b);g=n}}j=g.x;g=g.y;a=a.h(a.Y-1);j=0.5*(j+a.x);g=0.5*(g+a.y);N(l,b.x-c,b.y-d,j-c,g-d,a.x-
c,a.y-d)}else for(j=3;j<b;j=j+3){g=a.h(j-2);j+3>=b&&(j=b-1);e=a.h(j-1);k=a.h(j);if(j===b-1&&hm(a)!==0){k=k.copy();mm(a,k,o,Dc)}N(l,g.x-c,g.y-d,e.x-c,e.y-d,k.x-c,k.y-d)}else{n=a.h(0);for(j=1;j<b;){j=nm(a,n,j,j>1);q=a.h(j);if(j>=b-1){if(n!==q){if(hm(a)!==0){q=q.copy();mm(a,q,o,Dc)}pm(a,l,-c,-d,n,q)}break}j=nm(a,q,j+1,j<b-3);g=a;e=l;i=-c;k=-d;F=a.h(j);if(Ua(n.y,q.y)&&Ua(q.x,F.x)){H=im(g);H=Math.min(H,Math.abs(q.x-n.x)/2);H=x=Math.min(H,Math.abs(F.y-q.y)/2);if(Ua(H,0)){pm(g,e,i,k,n,q);n=q}else{p=q.x;
A=q.y;I=p;t=A;p=q.x>n.x?q.x-H:q.x+H;t=F.y>q.y?q.y+x:q.y-x;pm(g,e,i,k,n,new E(p,A));Pd(e,q.x+i,q.y+k,I+i,t+k);n=new E(I,t)}}else if(Ua(n.x,q.x)&&Ua(q.y,F.y)){H=im(g);x=Math.min(H,Math.abs(q.y-n.y)/2);x=H=Math.min(x,Math.abs(F.x-q.x)/2);if(Ua(H,0)){pm(g,e,i,k,n,q);n=q}else{p=q.x;t=A=q.y;A=q.y>n.y?q.y-x:q.y+x;I=F.x>q.x?q.x+H:q.x-H;pm(g,e,i,k,n,new E(p,A));Pd(e,q.x+i,q.y+k,I+i,t+k);n=new E(I,t)}}else{pm(g,e,i,k,n,q);n=q}}}return l.k}
function om(a,b,c,d){a=c-a;if(isNaN(a)||a===Infinity||a===-Infinity)return NaN;a<0&&(a=-a);b=d-b;if(isNaN(b)||b===Infinity||b===-Infinity)return NaN;b<0&&(b=-b);return Sa(a,0)?b:Sa(b,0)?a:Math.sqrt(a*a+b*b)}
function mm(a,b,c,d){var e=a.Y;if(!(e<2))if(c){var g=a.h(1),c=g.x-d.x,d=g.y-d.y,g=om(b.x,b.y,c,d);if(g!==0){e=e===2?g*0.5:g;a=gm(a);a>e&&(a=e);c=a*(c-b.x)/g;a=a*(d-b.y)/g;b.x=b.x+c;b.y=b.y+a}}else{g=a.h(e-2);c=g.x-d.x;d=g.y-d.y;g=om(b.x,b.y,c,d);if(g!==0){e=e===2?g*0.5:g;a=hm(a);a>e&&(a=e);c=a*(b.x-c)/g;a=a*(b.y-d)/g;b.x=b.x-c;b.y=b.y-a}}}
function nm(a,b,c,d){for(var e=a.Y,g=b;Sa(b.x,g.x)&&Sa(b.y,g.y);){if(c>=e)return e-1;g=a.h(c++)}if(!Sa(b.x,g.x)&&!Sa(b.y,g.y))return c-1;for(var i=g;Sa(b.x,g.x)&&Sa(g.x,i.x)&&(!d||(b.y>=g.y?g.y>=i.y:g.y<=i.y))||Sa(b.y,g.y)&&Sa(g.y,i.y)&&(!d||(b.x>=g.x?g.x>=i.x:g.x<=i.x));){if(c>=e)return e-1;i=a.h(c++)}return c-2}
function pm(a,b,c,d,e,g){if(qm(a)){var i=new z("number"),j;a:{j=a.b;if(j===m)j=0;else{Math.min(e.x,g.x);Math.min(e.y,g.y);Math.max(e.x,g.x);Math.max(e.y,g.y);for(j=j.ur;j.next();){var k=j.value;if(k!==m&&k.visible)for(k=k.Qi;k.next();){var l=k.value;if(l===a){i.length>0&&i.sort(function(a,b){return a-b});j=i.length;break a}if(l instanceof W&&a.gb()&&l.gb()&&qm(l)&&a.oj().de(l.oj())&&!(a.ca===l.ca||a.ea===l.ea)){var n=l.path;if(n!==m&&n.ck())for(var n=e,q=g,p=i,t=l.Y,w=1;w<t;w++){var A=l.h(w-1),F=
l.h(w),H=new E,x;b:{x=n;var I=q,y=H;if(Ua(x.x,I.x)){if(Ua(A.y,F.y)&&Math.min(x.y,I.y)<A.y&&Math.max(x.y,I.y)>A.y&&Math.min(A.x,F.x)<x.x&&Math.max(A.x,F.x)>x.x){y.x=x.x;y.y=A.y;x=h;break b}}else if(Ua(A.x,F.x)&&Math.min(x.x,I.x)<A.x&&Math.max(x.x,I.x)>A.x&&Math.min(A.y,F.y)<x.y&&Math.max(A.y,F.y)>x.y){y.x=A.x;y.y=x.y;x=h;break b}y.x=0;y.y=0;x=o}x&&(Ua(n.y,q.y)?p.add(H.x):p.add(H.y))}}}}i.length>0&&i.sort(function(a,b){return a-b});j=i.length}}n=e.x;n=e.y;if(j>0)if(Ua(e.y,g.y))if(e.x<g.x)for(k=0;k<
j;){p=Math.max(e.x,Math.min(i.j[k++]-5,g.x-10));b.lineTo(p+c,g.y+d);n=p+c;for(q=Math.min(p+10,g.x);k<j;){l=i.j[k];if(l<q+10){k++;q=Math.min(l+5,g.x)}else break}l=(p+q)/2+c;l=g.y-10+d;p=q+c;q=g.y+d;a.Ie===Hj?M(b,p,q,o,o):N(b,n,l,p,l,p,q)}else for(k=j-1;k>=0;){p=Math.min(e.x,Math.max(i.j[k--]+5,g.x+10));b.lineTo(p+c,g.y+d);n=p+c;for(q=Math.max(p-10,g.x);k>=0;){l=i.j[k];if(l>q-10){k--;q=Math.max(l-5,g.x)}else break}l=g.y-10+d;p=q+c;q=g.y+d;a.Ie===Hj?M(b,p,q,o,o):N(b,n,l,p,l,p,q)}else if(Ua(e.x,g.x))if(e.y<
g.y)for(k=0;k<j;){p=Math.max(e.y,Math.min(i.j[k++]-5,g.y-10));b.lineTo(g.x+c,p+d);n=p+d;for(q=Math.min(p+10,g.y);k<j;){l=i.j[k];if(l<q+10){k++;q=Math.min(l+5,g.y)}else break}l=g.x-10+c;p=g.x+c;q=q+d;a.Ie===Hj?M(b,p,q,o,o):N(b,l,n,l,q,p,q)}else for(k=j-1;k>=0;){p=Math.min(e.y,Math.max(i.j[k--]+5,g.y+10));b.lineTo(g.x+c,p+d);n=p+d;for(q=Math.max(p-10,g.y);k>=0;){l=i.j[k];if(l>q-10){k--;q=Math.max(l-5,g.y)}else break}l=g.x-10+c;p=g.x+c;q=q+d;a.Ie===Hj?M(b,p,q,o,o):N(b,l,n,l,q,p,q)}}b.lineTo(g.x+c,g.y+
d)}u.m(W,{ru:"firstPickIndex"},function(){return this.Y<=2?0:ug(this)||Pl(this)!==Tb?1:0});u.m(W,{ey:"lastPickIndex"},function(){var a=this.Y;return a===0?0:a<=2?a-1:ug(this)||Ql(this)!==Tb?a-2:a-1});function qm(a){a=a.Ie;return a===Ij||a===Hj}function Ol(a,b){if(b||qm(a)){var c=a.b;c!==m&&(!c.Yl.contains(a)&&a.Fw!==m)&&c.Yl.add(a,a.Fw)}}
function og(a,b){var c=a.ra;if(!(c===m||!c.visible||c.Yc)){var d=c.b;if(d!==m)for(var e=o,d=d.ur;d.next();){var g=d.value;if(g.visible)if(g===c)for(var e=h,i=o,g=g.Qi;g.next();){var j=g.value;j instanceof W&&(j===a?i=h:i&&rm(a,j,b))}else if(e)for(g=g.Qi;g.next();){j=g.value;j instanceof W&&rm(a,j,b)}}}}function rm(a,b,c){if(b!==m&&qm(b)&&b.ta!==m&&(a.oj().de(b.oj())||c.de(b.oj())))a.ca===b.ca||a.ea===b.ea||b.Ye()}u.a(W,"adjusting",W.prototype.Ut);
u.defineProperty(W,{Ut:"adjusting"},r("Zn"),function(a){var b=this.Zn;if(b!==a){s&&u.Sa(a,W,W,"adjusting");this.Zn=a;this.d("adjusting",b,a)}});u.a(W,"corner",W.prototype.bB);u.defineProperty(W,{bB:"corner"},r("no"),function(a){var b=this.no;if(b!==a){s&&u.e(a,"number",W,"corner");this.no=a;this.Ye();this.d("corner",b,a)}});u.a(W,"curve",W.prototype.Ie);
u.defineProperty(W,{Ie:"curve"},r("po"),function(a){var b=this.po;if(b!==a){s&&u.Sa(a,W,W,"curve");this.po=a;If(this);Ol(this,b===Hj||b===Ij||a===Hj||a===Ij);this.d("curve",b,a)}});u.a(W,"curviness",W.prototype.fu);u.defineProperty(W,{fu:"curviness"},r("qo"),function(a){var b=this.qo;if(b!==a){s&&u.e(a,"number",W,"curviness");this.qo=a;If(this);this.d("curviness",b,a)}});u.a(W,"routing",W.prototype.Te);
u.defineProperty(W,{Te:"routing"},r("si"),function(a){var b=this.si;if(b!==a){s&&u.Sa(a,W,W,"routing");this.si=a;this.mh=m;If(this);Ol(this,b===oh||b===Hf||a===oh||a===Hf);this.d("routing",b,a)}});u.a(W,"smoothness",W.prototype.Qr);u.defineProperty(W,{Qr:"smoothness"},r("sq"),function(a){var b=this.sq;if(b!==a){s&&u.e(a,"number",W,"smoothness");this.sq=a;this.Ye();this.d("smoothness",b,a)}});
function Il(a){var b=a.og;if(b!==m){var c=a.Gg;if(c!==m){var d=a.gi,a=a.wi,e;a:{if(!(c===m||b.jg===m))for(e=b.jg.f;e.next();){var g=e.value;if(g.Dn===b&&g.Dr===c&&g.Fu===d&&g.Gu===a||g.Dn===c&&g.Dr===b&&g.Fu===a&&g.Gu===d){e=g;break a}}e=m}for(var i=g=m,j=b.od.j,k=j.length,l=0;l<k;l++){var n=j[l];if(n.og===b&&n.gi===d&&n.Gg===c&&n.wi===a||n.og===c&&n.gi===a&&n.Gg===b&&n.wi===d)if(i===m)i=n;else{if(g===m){g=new z(W);g.add(i)}g.add(n)}}if(g!==m){if(e===m){e=new ul;e.Dn=b;e.Fu=d;e.Dr=c;e.Gu=a;tl(b,e);
tl(c,e)}e.links=g;for(l=0;l<g.count;l++){n=g.j[l];if(n.Bd===0){b=1;for(c=0;c<g.count;c++)if(Math.abs(g.j[c].Bd)===b){b++;c=-1}n.uk=e;n.Bd=n.ca===e.Dn?b:-b;If(n)}}}}}}
function Hl(a){var b=a.uk;if(b!==m){var c=a.Bd;a.uk=m;a.Bd=0;If(a);b.links.remove(a);if(b.links.count<2){if(b.links.count===1){c=b.links.j[0];c.uk=m;c.Bd=0;If(c)}c=b.Dn;b!==m&&c.jg!==m&&c.jg.remove(b);c=b.Dr;b!==m&&c.jg!==m&&c.jg.remove(b)}else{c=Math.abs(c);a=c%2===0;for(b=b.links.f;b.next();){var d=b.value,e=Math.abs(d.Bd),g=e%2===0;if(e>c&&a===g){d.Bd=d.Bd>0?d.Bd-2:d.Bd+2;If(d)}}}}}function ul(){u.Fb(this);this.links=this.Gu=this.Dr=this.Fu=this.Dn=m;this.Ti=10}
u.jd(ul,{Dn:h,Fu:h,Dr:h,Gu:h,links:h,Ti:h});function Vl(){u.Fb(this);this.group=m;this.on=h;this.abort=o;this.xg=this.wg=1;this.Xs=this.Ws=-1;this.Dd=this.Cd=8;this.wb=m;this.yD=o;this.aD=22;this.$B=111}u.jd(Vl,{group:h,on:h,abort:h,yD:h,aD:h,$B:h});var jm=1,km=1,$l=999999999,sm=$l;
function Wl(a,b){if(!(b.width<=0||b.height<=0)){var c=b.y,d=b.x+b.width,e=b.y+b.height;a.wg=Math.floor((b.x-a.Cd)/a.Cd)*a.Cd;a.xg=Math.floor((c-a.Dd)/a.Dd)*a.Dd;a.Ws=Math.ceil((d+2*a.Cd)/a.Cd)*a.Cd;a.Xs=Math.ceil((e+2*a.Dd)/a.Dd)*a.Dd;c=1+(Math.ceil((a.Ws-a.wg)/a.Cd)|0);d=1+(Math.ceil((a.Xs-a.xg)/a.Dd)|0);if(a.wb===m||a.Jq<c-1||a.Kq<d-1){for(var e=[],g=0;g<=c;g++){for(var i=[],j=0;j<=d;j++)i[j]=0;e[g]=i}a.wb=e;a.Jq=c-1;a.Kq=d-1}if(a.wb!==m)for(c=0;c<=a.Jq;c++)for(d=0;d<=a.Kq;d++)a.wb[c][d]=sm}}
u.m(Vl,{fb:m},function(){return new J(this.wg,this.xg,this.Ws-this.wg,this.Xs-this.xg)});u.a(Vl,"cellWidth",Vl.prototype.cl);u.defineProperty(Vl,{cl:m},r("Cd"),function(a){if(a>0&&a!==this.Cd){this.Cd=a;Wl(this,this.fb)}});u.a(Vl,"cellHeight",Vl.prototype.bl);u.defineProperty(Vl,{bl:m},r("Dd"),function(a){if(a>0&&a!==this.Dd){this.Dd=a;Wl(this,this.fb)}});function tm(a,b,c){return a.wg<=b&&b<=a.Ws&&a.xg<=c&&c<=a.Xs}
function Zl(a,b,c){if(!tm(a,b,c))return 0;b=b-a.wg;b=b/a.Cd;c=c-a.xg;c=c/a.Dd;return a.wb[b|0][c|0]}function Ai(a,b,c){if(tm(a,b,c)){b=b-a.wg;b=b/a.Cd;c=c-a.xg;c=c/a.Dd;a.wb[b|0][c|0]=0}}function Xl(a){if(a.wb!==m)for(var b=0;b<=a.Jq;b++)for(var c=0;c<=a.Kq;c++)a.wb[b][c]>=jm&&(a.wb[b][c]=a.wb[b][c]|$l)}
function um(a,b,c,d,e,g,i,j,k){if(!(b<g||b>i||c<j||c>k)){var l,n;l=b|0;n=c|0;var q=a.wb[l][n];if(q>=jm&&q<$l){e?n=n+d:l=l+d;for(q=q+km;g<=l&&l<=i&&j<=n&&n<=k;){if(q>=a.wb[l][n])break;a.wb[l][n]=q;q=q+km;e?n=n+d:l=l+d}}l=e?n:l;if(e)if(d>0)for(c=c+d;c<l;c=c+d){um(a,b,c,1,!e,g,i,j,k);um(a,b,c,-1,!e,g,i,j,k)}else for(c=c+d;c>l;c=c+d){um(a,b,c,1,!e,g,i,j,k);um(a,b,c,-1,!e,g,i,j,k)}else if(d>0)for(b=b+d;b<l;b=b+d){um(a,b,c,1,!e,g,i,j,k);um(a,b,c,-1,!e,g,i,j,k)}else for(b=b+d;b>l;b=b+d){um(a,b,c,1,!e,g,
i,j,k);um(a,b,c,-1,!e,g,i,j,k)}}}function vm(a,b,c,d,e,g,i,j,k,l,n){for(var q=b|0,p=c|0,t=a.wb[q][p];t===0&&q>j&&q<k&&p>l&&p<n;){i?p=p+g:q=q+g;t=a.wb[q][p];if(Math.abs(q-d)<=1&&Math.abs(p-e)<=1){a.abort=h;return 0}}q=b|0;p=c|0;t=a.wb[q][p];b=jm;for(a.wb[q][p]=b;t===0&&q>j&&q<k&&p>l&&p<n;){i?p=p+g:q=q+g;t=a.wb[q][p];a.wb[q][p]=b;b=b+km}return i?p:q}
function Yl(a,b,c,d,e,g){if(a.wb!==m){a.abort=o;var i=b.x,j=b.y;if(tm(a,i,j)){var i=i-a.wg,i=i/a.Cd,j=j-a.xg,j=j/a.Dd,k=d.x,l=d.y;if(tm(a,k,l)){k=k-a.wg;k=k/a.Cd;l=l-a.xg;l=l/a.Dd;if(Math.abs(i-k)<=1&&Math.abs(j-l)<=1)a.abort=h;else{var n=g.x,b=g.y,d=g.x+g.width,q=g.y+g.height,n=n-a.wg,n=n/a.Cd,b=b-a.xg,b=b/a.Dd,d=d-a.wg,d=d/a.Cd,q=q-a.xg,q=q/a.Dd,g=Math.max(0,Math.min(a.Jq,n|0)),d=Math.min(a.Jq,Math.max(0,d|0)),b=Math.max(0,Math.min(a.Kq,b|0)),q=Math.min(a.Kq,Math.max(0,q|0)),i=i|0,j=j|0,k=k|0,l=
l|0,n=i,p=j,t=c===0||c===90?1:-1;(c=c===90||c===270)?p=vm(a,i,j,k,l,t,c,g,d,b,q):n=vm(a,i,j,k,l,t,c,g,d,b,q);if(!a.abort){a:{for(var c=e===0||e===90?1:-1,e=e===90||e===270,t=k|0,w=l|0,A=a.wb[t][w];A===0&&t>g&&t<d&&w>b&&w<q;){e?w=w+c:t=t+c;A=a.wb[t][w];if(Math.abs(t-i)<=1&&Math.abs(w-j)<=1){a.abort=h;break a}}t=k|0;w=l|0;A=a.wb[t][w];for(a.wb[t][w]=sm;A===0&&t>g&&t<d&&w>b&&w<q;){e?w=w+c:t=t+c;A=a.wb[t][w];a.wb[t][w]=sm}}if(!a.abort){um(a,n,p,1,o,g,d,b,q);um(a,n,p,-1,o,g,d,b,q);um(a,n,p,1,h,g,d,b,q);
um(a,n,p,-1,h,g,d,b,q)}}}}}}}function em(){u.Fb(this);this.of=this.port=this.Wg=m;this.Cr=o}u.jd(em,{Wg:h,port:h,of:h,Cr:h});em.prototype.toString=function(){for(var a=this.of,b=this.Wg.toString()+" "+a.length.toString()+":",c=0;c<a.length;c++){var d=a[c];d!==m&&(b=b+("\n  "+d.toString()))}return b};
function wm(a,b,c,d){b=b.offsetY;switch(b){case u.Cc:return 90;case u.tc:return 180;case u.Mc:return 270;case u.Dc:return 0}switch(b){case u.Cc|u.Mc:return c>180?270:90;case u.tc|u.Dc:return c>90&&c<=270?180:0}a=Math.atan2(a.height,a.width)*180/Math.PI;switch(b){case u.tc|u.Mc:return c>a&&c<=180+a?180:270;case u.Mc|u.Dc:return c>180-a&&c<=360-a?270:0;case u.Dc|u.Cc:return c>a&&c<=180+a?90:0;case u.Cc|u.tc:return c>180-a&&c<=360-a?180:90;case u.tc|u.Mc|u.Dc:return c>90&&c<=180+a?180:c>180+a&&c<=360-
a?270:0;case u.Mc|u.Dc|u.Cc:return c>180&&c<=360-a?270:c>a&&c<=180?90:0;case u.Dc|u.Cc|u.tc:return c>a&&c<=180-a?90:c>180-a&&c<=270?180:0;case u.Cc|u.tc|u.Mc:return c>180-a&&c<=180+a?180:c>180+a?270:90}if(d&&b!==(u.tc|u.Mc|u.Dc|u.Cc)){c=c-15;c<0&&(c=c+360)}return c>a&&c<180-a?90:c>=180-a&&c<=180+a?180:c>180+a&&c<360-a?270:0}
function fm(a,b){var c=a.of;if(c===m){if(!a.Cr){c=a.Cr;a.Cr=h;var d=a.Wg.ge;a.of=[];for(var e=0,g=new J(a.port.sb(Vb),a.port.sb(fc)),d=d.f;d.next();){var i=d.value;if(i.gb()){var j=Tb,j=i.zc===a.port?Pl(i,a.port):Ql(i,a.port);if(Ob(j)){var k;k=i.zc===a.port?i.ld:i.zc;if(k!==m&&k.W!==m){var l=k.sb(Zb);k=k.ed;k=k!==m?fm(k,i):m;if(k!==m)l=k.wn;k=g.Zt.Oh(l);var j=wm(g,j,k,ug(i)),n;if(j===0){n=u.Dc;k>180&&(k=k-360)}else n=j===90?u.Cc:j===180?u.tc:u.Mc;if(j=a.of[e]){j.link=i;j.Ka=k;j.Ad=n}else{j=new xm(i,
k,n);a.of[e]=j}j.Eu.set(l);e++}}}}a.of.sort(em.prototype.UF);g=a.of.length;d=-1;for(e=i=0;e<g;e++){j=a.of[e];if(j!==m){if(j.Ad!==d){d=j.Ad;i=0}j.ol=i;i++}}d=-1;i=0;for(e=g-1;e>=0;e--){j=a.of[e];if(j!==m){if(j.Ad!==d){d=j.Ad;i=j.ol+1}j.Zq=i}}e=a.of;for(g=0;g<e.length;g++){d=e[g];if(d!==m){l=d;j=a.port;i=d=f;switch(l.Ad){case u.Cc:d=j.sb(fc);i=j.sb(dc);break;case u.tc:d=j.sb(dc);i=j.sb(Vb);break;case u.Mc:d=j.sb(Vb);i=j.sb(Yb);break;default:case u.Dc:d=j.sb(Yb);i=j.sb(fc)}j=i.y-d.y;k=(l.ol+1)/(l.Zq+
1);l=l.wn;l.x=d.x+(i.x-d.x)*k;l.y=d.y+j*k}}e=a.of;for(g=0;g<e.length;g++){i=e[g];if(i!==m){d=i;k=i;n=k.link;i=Tl(n,a.port,Tb,n.zc===a.port);l=k.ol;if(!(l<0)){j=k.Zq;if(!(j<=1)&&ug(n)){n=k.Eu;var q=k.wn;if(k.Ad===u.tc||k.Ad===u.Cc)l=j-1-l;i=((k=k.Ad===u.tc||k.Ad===u.Dc)?n.y<q.y:n.x<q.x)?i+l*8:(k?n.y===q.y:n.x===q.x)?i:i+(j-1-l)*8}}d.lu=i}}a.Cr=c}c=a.of}for(e=0;e<c.length;e++){g=c[e];if(g!==m&&g.link===b)return g}return m}
em.prototype.UF=function(a,b){return a===b?0:a===m?-1:b===m?1:a.Ad<b.Ad?-1:a.Ad>b.Ad?1:a.Ka<b.Ka?-1:a.Ka>b.Ka?1:0};function xm(a,b,c){this.link=a;this.Ka=b;this.Ad=c;this.Eu=new E;this.ol=this.Zq=this.ol=0;this.wn=new E;this.lu=0}u.jd(xm,{link:h,Ka:h,Ad:h,Eu:h,ol:h,Zq:h,wn:h,lu:h});xm.prototype.toString=function(){return this.link.toString()+" "+this.Ka.toString()+" "+this.Ad.toString()+":"+this.ol.toString()+"/"+this.Zq.toString()+" "+this.wn.toString()+" "+this.lu.toString()+" "+this.Eu.toString()};
function V(a){arguments.length===0?U.call(this,Og):U.call(this,a);this.Ap=new la(T);this.Pk=new la(V);this.Dj=this.Bp=this.zp=m;this.Hq=o;this.gp=h;this.Mq=o;this.Za=this.xq=m;this.ko=o;this.Rc=new Dh;this.Rc.group=this}u.H("Group",V);u.ma(V,U);ea=V.prototype;
ea.eb=function(a){U.prototype.eb.call(this,a);a.zp=this.zp;a.Bp=this.Bp;a.Dj=this.Dj;a.Hq=this.Hq;a.gp=this.gp;a.Mq=this.Mq;a.xq=this.xq;var b=xk(a,a,function(a){return a instanceof Ig});a.Za=b instanceof Ig?b:m;a.ko=this.ko;if(this.Rc!==m){a.Rc=this.Rc.copy();if(a instanceof V)a.Rc.group=a}else{if(a.Rc!==m)a.Rc.group=m;a.Rc=m}};
ea.Pg=function(a){U.prototype.Pg.call(this,a);for(var b=a.qu(),a=a.ec;a.next();){var c=a.value;c.M();c.r(ij);c.Ng();if(c instanceof V){c.Yu=c.ee;ym(c,b)}if(c instanceof U)c.jf(b);else if(c instanceof W)for(c=c.Xh;c.next();)c.value.jf(b)}};
ea.vl=function(a,b,c,d,e,g,i){if(a===ve&&b==="elements")if(e instanceof Ig)this.Za===m?this.Za=e:this.Za!==e&&u.g("Cannot insert a second Placeholder into the visual tree of a Group.");else{if(e instanceof v){var j=xk(e,e,function(a){return a instanceof Ig});if(j instanceof Ig)this.Za===m?this.Za=j:this.Za!==j&&u.g("Cannot insert a second Placeholder into the visual tree of a Group.")}}else if(a===we&&b==="elements")if(d===this.Za)this.Za=m;else if(d instanceof v&&this.Za.Wh(d))this.Za=m;U.prototype.vl.call(this,
a,b,c,d,e,g,i)};ea.zi=function(a,b,c,d){this.li=this.Za;v.prototype.zi.call(this,a,b,c,d);if(this.Za!==m){a=this.Za.um;this.location=new E(a.x,a.y)}};ea.bk=function(){if(!U.prototype.bk.call(this))return o;for(var a=this.ec;a.next();){var b=a.value;if(b instanceof U){if(b.gb()&&b.Fc)return o}else if(b instanceof W&&b.gb()&&b.Fc&&b.ca!==this&&b.ea!==this)return o}return h};u.m(V,{placeholder:"placeholder"},r("Za"));u.a(V,"computesBoundsAfterDrag",V.prototype.Ax);
u.defineProperty(V,{Ax:"computesBoundsAfterDrag"},r("ko"),function(a){var b=this.ko;if(b!==a){u.e(a,"boolean",V,"computesBoundsAfterDrag");this.ko=a;this.d("computesBoundsAfterDrag",b,a)}});u.m(V,{ec:"memberParts"},function(){return this.Ap.f});function ml(a,b){if(a.Ap.add(b)){b instanceof V&&a.Pk.add(b);var c=a.kC;if(c!==m){var d=h,e=a.b;if(e!==m){d=e.ua;e.ua=h}c(a,b);if(e!==m)e.ua=d}}c=a.Za;c===m&&(c=a);c.M()}
function ll(a,b){if(a.Ap.remove(b)){b instanceof V&&a.Pk.remove(b);var c=a.lC;if(c!==m){var d=h,e=a.b;if(e!==m){d=e.ua;e.ua=h}c(a,b);if(e!==m)e.ua=d}}c=a.Za;c===m&&(c=a);c.M()}V.prototype.il=function(){if(this.Ap.count>0){var a=this.b;if(a===m)return;for(var b=this.Ap.copy().f;b.next();)a.remove(b.value)}U.prototype.il.call(this)};V.prototype.Su=function(){var a=this.ra;a!==m&&a.Su(this)};u.a(V,"layout",V.prototype.qb);
u.defineProperty(V,{qb:"layout"},r("Rc"),function(a){var b=this.Rc;if(b!==a){a!==m&&u.c(a,Dh,V,"layout");if(b!==m){b.b=m;b.group=m}this.Rc=a;if(a!==m){a.b=this.b;a.group=this}this.d("layout",b,a)}});u.a(V,"memberAdded",V.prototype.kC);u.defineProperty(V,{kC:"memberAdded"},r("zp"),function(a){a!==m&&u.e(a,"function",V,"memberAdded");var b=this.zp;if(b!==a){this.zp=a;this.d("memberAdded",b,a)}});u.a(V,"memberRemoved",V.prototype.lC);
u.defineProperty(V,{lC:"memberRemoved"},r("Bp"),function(a){a!==m&&u.e(a,"function",V,"memberRemoved");var b=this.Bp;if(b!==a){this.Bp=a;this.d("memberRemoved",b,a)}});u.a(V,"memberValidation",V.prototype.xr);u.defineProperty(V,{xr:"memberValidation"},r("Dj"),function(a){a!==m&&u.e(a,"function",V,"memberValidation");var b=this.Dj;if(b!==a){this.Dj=a;this.d("memberValidation",b,a)}});
V.prototype.canAddMembers=V.prototype.XG=function(a){var b=this.b;if(b===m)return o;b=b.Jd;for(a=b.Nx(a).f;a.next();)if(!b.dy(this,a.value))return o;return h};V.prototype.addMembers=V.prototype.UG=function(a,b){var c=this.b;if(c===m)return o;for(var c=c.Jd,d=h,e=c.Nx(a).f;e.next();){var g=e.value;!b||c.dy(this,g)?g.Ta=this:d=o}return d};u.a(V,"ungroupable",V.prototype.uD);
u.defineProperty(V,{uD:"ungroupable"},r("Hq"),function(a){var b=this.Hq;if(b!==a){u.e(a,"boolean",V,"ungroupable");this.Hq=a;this.d("ungroupable",b,a)}});V.prototype.canUngroup=V.prototype.xH=function(){if(!this.uD)return o;var a=this.ra;if(a!==m&&!a.Wm)return o;a=a.b;return a!==m&&!a.Wm?o:h};V.prototype.findSubGraphParts=V.prototype.qu=function(){var a=new la(T);af(a,this,h,o);a.remove(this);return a};
V.prototype.collapseSubGraph=V.prototype.Wq=function(){var a=this.b;if(a!==m&&!a.kf){a.kf=h;var b=this.qu();ym(this,b);a.kf=o}};function ym(a,b){a.ee=o;for(var c=a.ec;c.next();){var d=c.value;d.M();d.r(ij);d.Ng();if(d instanceof V){d.Yu=d.ee;ym(d,b)}if(d instanceof U)d.jf(b);else if(d instanceof W)for(d=d.Xh;d.next();)d.value.jf(b)}}V.prototype.expandSubGraph=V.prototype.cr=function(){var a=this.b;if(a!==m&&!a.kf){a.kf=h;var b=this.qu();zm(this,b);a.kf=o}};
function zm(a,b){a.ee=h;for(var c=a.ec;c.next();){var d=c.value;d.M();d.r(hj);d.$h();d instanceof V&&d.Yu&&zm(d,b);if(d instanceof U)d.jf(b);else if(d instanceof W)for(d=d.Xh;d.next();)d.value.jf(b)}}u.a(V,"isSubGraphExpanded",V.prototype.ee);
u.defineProperty(V,{ee:"isSubGraphExpanded"},r("gp"),function(a){var b=this.gp;if(b!==a){u.e(a,"boolean",V,"isSubGraphExpanded");this.gp=a;var c=this.b;c!==m&&ph(c);this.d("isSubGraphExpanded",b,a);b=this.fD;if(b!==m){var d=h;if(c!==m){d=c.ua;c.ua=h}b(this);if(c!==m)c.ua=d}a?this.cr():this.Wq()}});u.a(V,"wasSubGraphExpanded",V.prototype.Yu);
u.defineProperty(V,{Yu:"wasSubGraphExpanded"},r("Mq"),function(a){var b=this.Mq;if(b!==a){u.e(a,"boolean",V,"wasSubGraphExpanded");this.Mq=a;this.d("wasSubGraphExpanded",b,a)}});u.a(V,"subGraphExpandedChanged",V.prototype.fD);u.defineProperty(V,{fD:"subGraphExpandedChanged"},r("xq"),function(a){a!==m&&u.e(a,"function",V,"subGraphExpandedChanged");var b=this.xq;if(b!==a){this.xq=a;this.d("subGraphExpandedChanged",b,a)}});
V.prototype.move=V.prototype.move=function(a){var b=this.position,c=a.x-b.x,b=a.y-b.y;U.prototype.move.call(this,a);for(a=this.qu().f;a.next();){var d=a.value,e=d.position;U.prototype.move.call(d,new E(e.x+c,e.y+b))}};function Ig(){Q.call(this);this.Ed=(new qb(0)).freeze();this.um=new J(NaN,NaN,NaN,NaN)}u.H("Placeholder",Ig);u.ma(Ig,Q);Ig.prototype.eb=function(a){Q.prototype.eb.call(this,a);a.Ed=this.Ed.B();a.um=this.um.copy()};
Ig.prototype.Bi=function(a){if(this.background===m&&this.Lg===m)return o;var b=this.la;return tb(0,0,b.width,b.height,a.x,a.y)};
Ig.prototype.wr=function(){var a=this.W;(a===m||!(a instanceof V)&&!(a instanceof bf))&&u.g("Placeholder is not inside a Group or Adornment.");if(a instanceof V){var b;a:{b=this.W;if(b instanceof V&&b.Ax&&this.um.V()){var c=b.b;if(c!==m){c=c.pa;if(c instanceof vf&&!c.Co&&c.Jb!==m&&!c.Jb.contains(b)){b=this.um;break a}}}b=this.W;if(b instanceof V){for(var d=c=Infinity,e=-Infinity,g=-Infinity,i=b.ec;i.next();){var j=i.value;if(j.gb()){if(j instanceof W){if(j.Yb)continue;if(j.ca===b||j.ea===b)continue}j=
j.oa;if(j.left<c)c=j.left;if(j.top<d)d=j.top;if(j.right>e)e=j.right;if(j.bottom>g)g=j.bottom}}if(!isFinite(c)||!isFinite(d)){b=b.location;c=this.padding;b=new J(b.x+c.left,b.y+c.top,0,0)}else b=new J(c,d,e-c,g-d)}else b=new J;c=this.padding;b=new J(b.x-c.left,b.y-c.top,b.width+c.left+c.right,b.height+c.top+c.bottom)}this.um=b;c=this.Hc;jb(c,b.width||0,b.height||0);Ri(this,0,0,c.width,c.height);c=a.ec;for(d=o;c.next();)if(c.value.gb()){d=h;break}if(d&&!isNaN(b.x)&&!isNaN(b.y))a.location=new E(b.x,
b.y)}else{b=this.ia;c=this.Hc;jb(c,b.width||0,b.height||0);Ri(this,0,0,c.width,c.height)}};Ig.prototype.zi=function(a,b,c,d){var e=this.oa;e.x=a;e.y=b;e.width=c;e.height=d};u.a(Ig,"padding",Ig.prototype.padding);u.defineProperty(Ig,{padding:"padding"},r("Ed"),function(a){typeof a==="number"?a=new qb(a):u.c(a,qb,v,"padding");var b=this.Ed;if(!b.u(a)){this.Ed=a=a.B();this.d("padding",b,a)}});
function Dh(){u.Fb(this);this.dw=this.L=m;this.Js=this.dp=h;this.kp=this.jp=o;this.ao=(new E(0,0)).freeze();this.p=m}u.H("Layout",Dh);Dh.prototype.cloneProtected=Dh.prototype.eb=function(a){a.dp=this.dp;a.Js=this.Js;a.kp=this.kp;a.ao=this.ao.B()};Dh.prototype.copy=Dh.prototype.copy=function(){var a=new this.constructor;this.eb(a);return a};
Dh.prototype.toString=function(){var a=u.Ii(Object.getPrototypeOf(this)),a=a+"(";this.group!==m&&(a=a+(" in "+this.group));this.b!==m&&(a=a+(" for "+this.b));return a+")"};u.a(Dh,"diagram",Dh.prototype.b);u.defineProperty(Dh,{b:"diagram"},r("L"),function(a){if(this.L!==a){a!==m&&u.c(a,B,Dh,"diagram");this.L=a}});u.a(Dh,"group",Dh.prototype.group);u.defineProperty(Dh,{group:"group"},r("dw"),function(a){if(this.dw!==a){a!==m&&u.c(a,V,Dh,"group");this.dw=a}});u.a(Dh,"isOngoing",Dh.prototype.WB);
u.defineProperty(Dh,{WB:"isOngoing"},r("dp"),function(a){if(this.dp!==a){u.e(a,"boolean",Dh,"isOngoing");this.dp=a}});u.a(Dh,"isInitial",Dh.prototype.VB);u.defineProperty(Dh,{VB:"isInitial"},r("Js"),function(a){u.e(a,"boolean",Dh,"isInitial");this.Js=a;if(!a)this.jp=h});u.a(Dh,"isValidLayout",Dh.prototype.Ne);u.defineProperty(Dh,{Ne:"isValidLayout"},r("jp"),function(a){if(this.jp!==a){this.jp=a;if(!a){a=this.b;if(a!==m)a.es=h}}});
Dh.prototype.invalidateLayout=Dh.prototype.r=function(){if(this.jp){var a=this.b;if(a!==m&&!a.va.rc&&(this.WB&&a.rg||this.VB&&!a.rg)){this.Ne=o;a.Iq=h;pf(a)}}};u.a(Dh,"isViewportSized",Dh.prototype.Bu);u.defineProperty(Dh,{Bu:"isViewportSized"},r("kp"),function(a){if(this.kp!==a)(this.kp=a)&&this.r()});u.a(Dh,"network",Dh.prototype.Bc);u.defineProperty(Dh,{Bc:"network"},r("p"),function(a){var b=this.p;if(b!==a){a!==m&&u.c(a,Am,Dh,"network");b!==m&&Bm(b,m);this.p=a;a!==m&&Bm(a,this)}});
Dh.prototype.createNetwork=Dh.prototype.eu=function(){var a=new Am;Bm(a,this);return a};Dh.prototype.makeNetwork=Dh.prototype.OF=function(a){var b=this.createNetwork();if(a instanceof B){b.Rq(a.ek,h);b.Rq(a.links,h)}else a instanceof V?b.Rq(a.ec):a.f&&b.Rq(a.f);return b};Dh.prototype.updateParts=Dh.prototype.pK=function(){var a=this.b;if(a===m&&this.p!==m)for(var b=this.p.P.f;b.next();){var c=b.value.ya;if(c!==m){a=c.b;if(a!==m)break}}a!==m&&a.Eb("Layout");this.commitLayout();a!==m&&a.Kd("Layout")};
Dh.prototype.commitLayout=Dh.prototype.au=aa();
Dh.prototype.doLayout=Dh.prototype.$q=function(a){a===m&&u.g("Layout.doLayout(collection) argument must not be null");var b=new la(T);if(a===this.b){Cm(this,b,a.ek,h,this.oy,h,o,h);Cm(this,b,a.Qi,h,this.oy,h,o,h)}else a===this.group&&Cm(this,b,a.ec,o,this.oy,h,o,h);var c=b.count;if(c>0){a=this.b;a!==m&&a.Eb("Layout");for(var c=Math.ceil(Math.sqrt(c)),d=this.Kc.x,e=d,g=this.Kc.y,i=0,j=0,b=b.f;b.next();){var k=b.value;k.Sh();var l=k.oa.width,n=k.oa.height;k.move(new E(e,g));delete k.Tz;e=e+(Math.max(l,
50)+20);j=Math.max(j,Math.max(n,50));if(i>=c-1){i=0;e=d;g=g+(j+20);j=0}else i++}a!==m&&a.Kd("Layout")}this.Ne=h};Dh.prototype.oy=function(a){return!a.location.V()||a instanceof V&&a.Tz?h:o};function Cm(a,b,c,d,e,g,i,j){for(c=c.f;c.next();){var k=c.value;if(!d||k.rr)if(!e||e(k))k.Uq()&&(g&&k instanceof U?k.Li||(k instanceof V&&k.qb===m?Cm(a,b,k.ec,o,e,g,i,j):b.add(k)):i&&k instanceof W?b.add(k):j&&k.constructor===T&&b.add(k))}}u.a(Dh,"arrangementOrigin",Dh.prototype.Kc);
u.defineProperty(Dh,{Kc:"arrangementOrigin"},r("ao"),function(a){if(!this.ao.u(a)){s&&u.c(a,E,Dh,"arrangementOrigin");this.ao.Oa(a);this.r()}});function Dm(a,b){var c=a.group;if(c!==m){var d=c.location;if(isNaN(d.x)||isNaN(d.y))return b;var e=c.placeholder;if(e!==m){d=e.sb(Vb);d.x=d.x+e.padding.left;d.y=d.y+e.padding.top}else d=c.position.copy();return d}return b}function Am(){u.Fb(this);this.Rc=m;this.clear()}u.H("LayoutNetwork",Am);
Am.prototype.clear=function(){if(this.Lq)for(var a=this.Lq.f;a.next();){var b=a.value;b.clear();b.p=m}if(this.Eo)for(a=this.Eo.f;a.next();){b=a.value;b.clear();b.p=m}this.Lq=new la(Em);this.Eo=new la(Fm);this.vw=new ka(U,Em);this.nw=new ka(W,Fm)};Am.prototype.toString=function(){return"LayoutNetwork"+(this.qb!==m?"("+this.qb.toString()+")":"")};u.m(Am,{qb:"layout"},r("Rc"));function Bm(a,b){s&&b!==m&&u.c(b,Dh,Am,"setLayout");a.Rc=b}u.m(Am,{P:"vertexes"},r("Lq"));u.m(Am,{Kb:"edges"},r("Eo"));
Am.prototype.createVertex=Am.prototype.Ci=function(){return new Em};Am.prototype.createEdge=Am.prototype.$m=function(){return new Fm};
Am.prototype.addParts=Am.prototype.Rq=function(a,b){if(a!==m){b===f&&(b=o);u.e(b,"boolean",Am,"addParts:toplevelonly");for(var c=a.f;c.next();){var d=c.value;if(d instanceof U&&(!b||d.rr)&&d.Uq()&&!d.Li)if(d instanceof V&&d.qb===m)this.Rq(d.ec,o);else if(this.be(d)===m){var e=this.Ci();e.Wg=d;this.Qj(e)}}for(c.reset();c.next();){d=c.value;if(d instanceof W&&(!b||d.rr)&&d.Uq()&&this.nu(d)===m){var g=d.ca,e=d.ea;if(g!==e){g=this.ou(g);e=this.ou(e);g!==m&&e!==m&&this.rl(g,e,d)}}}}};
Am.prototype.findGroupVertex=Am.prototype.ou=function(a){if(a===m)return m;a=il(a);if(a===m)return m;var b=this.be(a);if(b!==m)return b;a=a.Ta;if(a!==m){b=this.be(a);if(b!==m)return b}return m};Am.prototype.addVertex=Am.prototype.Qj=function(a){if(a!==m){s&&u.c(a,Em,Am,"addVertex:vertex");this.Lq.add(a);var b=a.ya;b!==m&&this.vw.add(b,a);a.p=this}};Am.prototype.addNode=Am.prototype.Mm=function(a){if(a===m)return m;s&&u.c(a,U,Am,"addNode:node");var b=this.be(a);if(b===m){b=this.Ci();b.Wg=a;this.Qj(b)}return b};
Am.prototype.deleteVertex=Am.prototype.nB=function(a){if(a!==m){s&&u.c(a,Em,Am,"deleteVertex:vertex");if(Gm(this,a)){for(var b=a.bf,c=b.count-1;c>=0;c--){var d=b.Z(c);this.an(d)}b=a.re;for(c=b.count-1;c>=0;c--){d=b.Z(c);this.an(d)}}}};function Gm(a,b){if(b===m)return o;var c=a.Lq.remove(b);if(c){a.vw.remove(b.ya);b.p=m}return c}Am.prototype.deleteNode=Am.prototype.VH=function(a){if(a!==m){s&&u.c(a,U,Am,"deleteNode:node");a=this.be(a);a!==m&&this.nB(a)}};
Am.prototype.findVertex=Am.prototype.be=function(a){if(a===m)return m;s&&u.c(a,U,Am,"findVertex:node");return this.vw.$(a)};Am.prototype.addEdge=Am.prototype.Lm=function(a){if(a!==m){s&&u.c(a,Fm,Am,"addEdge:edge");this.Eo.add(a);var b=a.Ba;b!==m&&this.nu(b)===m&&this.nw.add(b,a);b=a.D;b!==m&&b.FA(a);b=a.G;b!==m&&b.BA(a);a.p=this}};
Am.prototype.addLink=Am.prototype.TG=function(a){if(a===m)return m;s&&u.c(a,W,Am,"addLink:link");var b=a.ca,c=a.ea,d=this.nu(a);if(d===m){d=this.$m();d.Ba=a;if(b!==m)d.G=this.Mm(b);if(c!==m)d.D=this.Mm(c);this.Lm(d)}else{d.G=b!==m?this.Mm(b):m;d.D=c!==m?this.Mm(c):m}return d};Am.prototype.deleteEdge=Am.prototype.an=function(a){if(a!==m){s&&u.c(a,Fm,Am,"deleteEdge:edge");var b=a.D;b!==m&&b.mB(a);b=a.G;b!==m&&b.lB(a);Hm(this,a)}};function Hm(a,b){if(b!==m&&a.Eo.remove(b)){a.nw.remove(b.Ba);b.p=m}}
Am.prototype.deleteLink=Am.prototype.UH=function(a){if(a!==m){s&&u.c(a,W,Am,"deleteLink:link");a=this.nu(a);a!==m&&this.an(a)}};Am.prototype.findEdge=Am.prototype.nu=function(a){if(a===m)return m;s&&u.c(a,W,Am,"findEdge:link");return this.nw.$(a)};
Am.prototype.linkVertexes=Am.prototype.rl=function(a,b,c){if(a===m||b===m)return m;if(s){u.c(a,Em,Am,"linkVertexes:fromVertex");u.c(b,Em,Am,"linkVertexes:toVertex");u.c(c,W,Am,"linkVertexes:link")}if(a.p===this&&b.p===this){var d=this.$m();d.Ba=c;d.G=a;d.D=b;this.Lm(d);return d}return m};Am.prototype.reverseEdge=Am.prototype.Lu=function(a){if(a!==m){s&&u.c(a,Fm,Am,"reverseEdge:edge");var b=a.G,c=a.D;if(!(b===m||c===m)){b.lB(a);c.mB(a);a.Lu();b.FA(a);c.BA(a)}}};
Am.prototype.deleteSelfEdges=Am.prototype.iu=function(){for(var a=[],b=this.Kb.f;b.next();){var c=b.value;c.G===c.D&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.an(a[c])};Am.prototype.deleteArtificialVertexes=Am.prototype.WE=function(){for(var a=[],b=this.P.f;b.next();){var c=b.value;c.ya===m&&a.push(c)}c=a.length;for(b=0;b<c;b++)this.nB(a[b]);a=[];for(b=this.Kb.f;b.next();){c=b.value;c.Ba===m&&a.push(c)}c=a.length;for(b=0;b<c;b++)this.an(a[b])};
Am.prototype.splitIntoSubNetworks=Am.prototype.wG=function(){this.WE();for(var a=[],b=this.Kb.f;b.next();){var c=b.value;(c.G===m||c.D===m)&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.an(a[c]);this.iu();a=new z(Am);for(c=h;c;)for(var c=o,d=this.P.f;d.next();){b=d.value;if(b.bf.count>0||b.re.count>0){c=this.qb.createNetwork();a.add(c);Im(this,c,b);c=h;break}}a.sort(function(a,b){return a===m||b===m||a===b?0:b.P.count-a.P.count});return a};
function Im(a,b,c){if(c!==m&&c.p!==b){Gm(a,c);b.Qj(c);for(var d=c.nb;d.next();){var e=d.value;if(e.p!==b){Hm(a,e);b.Lm(e);Im(a,b,e.G)}}for(d=c.mb;d.next();){e=d.value;if(e.p!==b){Hm(a,e);b.Lm(e);Im(a,b,e.D)}}}}Am.prototype.getParts=Am.prototype.HI=function(){for(var a=new la(T),b=this.P.f;b.next();)a.add(b.value.ya);for(b=this.Kb.f;b.next();)a.add(b.value.Ba);return a};function Em(){u.Fb(this);this.p=m;this.A=(new J(0,0,10,10)).freeze();this.z=(new E(5,5)).freeze();this.clear()}
u.H("LayoutVertex",Em);Em.prototype.clear=function(){this.ya=m;this.bf=new z(Fm);this.re=new z(Fm)};Em.prototype.toString=function(){return"LayoutVertex#"+u.cc(this)+(this.ya!==m?"("+this.ya.toString()+")":"")};u.a(Em,"network",Em.prototype.Bc);u.defineProperty(Em,{Bc:"network"},r("p"),function(a){if(this.p!==a){a!==m&&u.c(a,Am,Em,"network");this.p=a}});u.a(Em,"node",Em.prototype.Wg);
u.defineProperty(Em,{Wg:"node"},r("ya"),function(a){if(this.ya!==a){s&&a!==m&&u.c(a,U,Em,"node");this.ya=a;a.Sh();var b=a.oa;if(b.V()){this.A.Oa(b);a=a.location;if(a.V()){var c=this.z;c.xa();c.x=a.x-b.x;c.y=a.y-b.y;c.freeze()}}}});u.a(Em,"bounds",Em.prototype.fb);u.defineProperty(Em,{fb:"bounds"},r("A"),function(a){if(!this.A.u(a)){s&&u.c(a,J,Em,"bounds");this.A.Oa(a)}});u.a(Em,"focus",Em.prototype.focus);
u.defineProperty(Em,{focus:"focus"},r("z"),function(a){if(!this.z.u(a)){s&&u.c(a,E,Em,"focus");this.z.Oa(a)}});u.a(Em,"centerX",Em.prototype.za);u.defineProperty(Em,{za:"centerX"},function(){return this.A.x+this.z.x},function(a){var b=this.A;if(b.x+this.z.x!==a){s&&u.i(a,Em,"centerX");b.xa();b.x=a-this.z.x;b.freeze()}});u.a(Em,"centerY",Em.prototype.Aa);
u.defineProperty(Em,{Aa:"centerY"},function(){return this.A.y+this.z.y},function(a){var b=this.A;if(b.y+this.z.y!==a){s&&u.i(a,Em,"centerY");b.xa();b.y=a-this.z.y;b.freeze()}});u.a(Em,"focusX",Em.prototype.su);u.defineProperty(Em,{su:"focusX"},function(){return this.z.x},function(a){var b=this.z;if(b.x!==a){b.xa();b.x=a;b.freeze()}});u.a(Em,"focusY",Em.prototype.tu);u.defineProperty(Em,{tu:"focusY"},function(){return this.z.y},function(a){var b=this.z;if(b.y!==a){b.xa();b.y=a;b.freeze()}});
u.a(Em,"x",Em.prototype.x);u.defineProperty(Em,{x:"x"},function(){return this.A.x},function(a){var b=this.A;if(b.x!==a){b.xa();b.x=a;b.freeze()}});u.a(Em,"y",Em.prototype.y);u.defineProperty(Em,{y:"y"},function(){return this.A.y},function(a){var b=this.A;if(b.y!==a){b.xa();b.y=a;b.freeze()}});u.a(Em,"width",Em.prototype.width);u.defineProperty(Em,{width:"width"},function(){return this.A.width},function(a){var b=this.A;if(b.width!==a){b.xa();b.width=a;b.freeze()}});u.a(Em,"height",Em.prototype.height);
u.defineProperty(Em,{height:"height"},function(){return this.A.height},function(a){var b=this.A;if(b.height!==a){b.xa();b.height=a;b.freeze()}});Em.prototype.commit=Em.prototype.Lh=function(){var a=this.ya;a!==m&&a.move(this.fb.position)};Em.prototype.addSourceEdge=Em.prototype.FA=function(a){if(a!==m){s&&u.c(a,Fm,Em,"addSourceEdge:edge");this.bf.contains(a)||this.bf.add(a)}};Em.prototype.deleteSourceEdge=Em.prototype.mB=function(a){if(a!==m){s&&u.c(a,Fm,Em,"deleteSourceEdge:edge");this.bf.remove(a)}};
Em.prototype.addDestinationEdge=Em.prototype.BA=function(a){if(a!==m){s&&u.c(a,Fm,Em,"addDestinationEdge:edge");this.re.contains(a)||this.re.add(a)}};Em.prototype.deleteDestinationEdge=Em.prototype.lB=function(a){if(a!==m){s&&u.c(a,Fm,Em,"deleteDestinationEdge:edge");this.re.remove(a)}};u.m(Em,{vG:"sourceVertexes"},function(){for(var a=new la(Em),b=this.nb;b.next();){var c=b.value.G;c!==m&&!a.contains(c)&&a.add(c)}return a.f});
u.m(Em,{YE:"destinationVertexes"},function(){for(var a=new la(Em),b=this.mb;b.next();){var c=b.value.D;c!==m&&!a.contains(c)&&a.add(c)}return a.f});u.m(Em,{P:"vertexes"},function(){for(var a=new la(Em),b=this.nb;b.next();){var c=b.value,c=c.G;c!==m&&!a.contains(c)&&a.add(c)}for(b=this.mb;b.next();){c=b.value;c=c.D;c!==m&&!a.contains(c)&&a.add(c)}return a.f});u.m(Em,{nb:"sourceEdges"},function(){return this.bf.f});u.m(Em,{mb:"destinationEdges"},function(){return this.re.f});
u.m(Em,{Kb:"edges"},function(){for(var a=new z(Fm),b=this.nb;b.next();){var c=b.value;a.add(c)}for(b=this.mb;b.next();){c=b.value;a.add(c)}return a.f});u.m(Em,{fF:"edgesCount"},function(){return this.bf.count+this.re.count});var Jm;Em.standardComparer=Jm=function(a,b){s&&u.c(a,Em,Em,"standardComparer:m");s&&u.c(b,Em,Em,"standardComparer:n");var c=a.ya,d=b.ya;if(c){if(d){c=c.text;d=d.text;return c<d?-1:c>d?1:0}return 1}return d!==m?-1:0};
Em.smartComparer=function(a,b){s&&u.c(a,Em,Em,"smartComparer:m");s&&u.c(b,Em,Em,"smartComparer:n");if(a!==m){if(b!==m){var c=a.ya,d=b.ya;if(c!==m){if(d!==m){var c=c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(d[e]!==""&&d[e]!==f){var g=parseFloat(c[e]),i=parseFloat(d[e]);if(isNaN(g))if(isNaN(i)){if(c[e].localeCompare(d[e])!==0)return c[e].localeCompare(d[e])}else return 1;
else{if(isNaN(i))return-1;if(g-i!==0)return g-i}}else if(c[e]!=="")return 1;return d[e]!==""&&d[e]!==f?-1:0}return 1}return d!==m?-1:0}return 1}return b!==m?-1:0};function Fm(){u.Fb(this);this.p=m;this.clear()}u.H("LayoutEdge",Fm);Fm.prototype.clear=function(){this.D=this.G=this.Ba=m};Fm.prototype.toString=function(){return"LayoutEdge#"+u.cc(this)+(this.Ba!==m?"("+this.Ba.toString()+")":"")};u.a(Fm,"network",Fm.prototype.Bc);
u.defineProperty(Fm,{Bc:"network"},r("p"),function(a){if(this.p!==a){s&&a!==m&&u.c(a,Am,Fm,"network");this.p=a}});u.a(Fm,"link",Fm.prototype.link);u.defineProperty(Fm,{link:"link"},r("Ba"),function(a){if(this.Ba!==a){s&&a!==m&&u.c(a,W,Fm,"link");this.Ba=a}});u.a(Fm,"fromVertex",Fm.prototype.mF);u.defineProperty(Fm,{mF:"fromVertex"},r("G"),function(a){if(this.G!==a){s&&a!==m&&u.c(a,Em,Fm,"fromVertex");this.G=a}});u.a(Fm,"toVertex",Fm.prototype.GG);
u.defineProperty(Fm,{GG:"toVertex"},r("D"),function(a){if(this.D!==a){s&&a!==m&&u.c(a,Em,Fm,"toVertex");this.D=a}});Fm.prototype.Lu=function(){var a=this.G;this.G=this.D;this.D=a};Fm.prototype.commit=Fm.prototype.Lh=aa();Fm.prototype.getOtherVertex=Fm.prototype.oF=function(a){s&&u.c(a,Em,Fm,"getOtherVertex:v");return this.D===a?this.G:this.G===a?this.D:m};
function Hi(){Dh.call(this);this.Bu=h;this.Oq=this.Pq=NaN;this.bi=(new eb(NaN,NaN)).freeze();this.Ag=(new eb(10,10)).freeze();this.ja=Tj;this.uc=Rj;this.Sb=Nj;this.Qb=Km}u.H("GridLayout",Hi);u.ma(Hi,Dh);Hi.prototype.cloneProtected=Hi.prototype.eb=function(a){Dh.prototype.eb.call(this,a);a.Pq=this.Pq;a.Oq=this.Oq;a.bi=this.bi.B();a.Ag=this.Ag.B();a.ja=this.ja;a.uc=this.uc;a.Sb=this.Sb;a.Qb=this.Qb};
Hi.prototype.doLayout=Hi.prototype.$q=function(a){var b=this.b;b===m&&u.g("The diagram for this layout is not set.");this.Kc=Dm(this,this.Kc);var c=new la(T);if(a===this.b){Cm(this,c,a.ek,h,m,h,o,h);Cm(this,c,a.links,h,m,h,o,h);Cm(this,c,a.Qi,h,m,h,o,h)}else a===this.group&&Cm(this,c,a.ec,o,m,h,o,h);for(a=c.copy().f;a.next();){var d=a.value;if(d instanceof W&&(d.ca!==m||d.ea!==m))c.remove(d);else{d.Sh();if(d instanceof V)for(d=d.ec;d.next();)c.remove(d.value)}}c=c.xf();if(c.length!==0){switch(this.tf){case Qj:c.reverse();
break;case Nj:c.sort(this.Og);break;case Oj:c.sort(this.Og);c.reverse()}d=this.zD;isNaN(d)&&(d=0);a=this.Uy;a=isNaN(a)?Math.max(this.b.ib.width-b.padding.left-b.padding.right,0):Math.max(this.Uy,0);d<=0&&a<=0&&(d=1);var e=this.Ti.width;isFinite(e)||(e=0);var g=this.Ti.height;isFinite(g)||(g=0);b.Eb("Layout");switch(this.kb){case Uj:var i=Math.max(this.Vj.width,1);if(!isFinite(i))for(var j=i=0;j<c.length;j++)var k=c[j],l=k.la,i=Math.max(i,l.width);var i=Math.max(i+e,1),n=Math.max(this.Vj.height,1);
if(!isFinite(n))for(j=n=0;j<c.length;j++){k=c[j];l=k.la;n=Math.max(n,l.height)}for(var n=Math.max(n+g,1),q=this.Hd,p=this.Kc.x,t=p,w=this.Kc.y,A=0,F=0,j=0;j<c.length;j++){var k=c[j],l=k.la,H=Math.ceil((l.width+e)/i)*i,x=Math.ceil((l.height+g)/n)*n,I;switch(q){case Sj:I=Math.abs(t-l.width)+p;break;default:I=t+l.width-p}if(d>0&&A>d-1||a>0&&A>0&&I>a){A=0;t=p;w=w+F;F=0}F=Math.max(F,x);switch(q){case Sj:l=-l.width;break;default:l=0}k.move(new E(t+l,w));switch(q){case Sj:t=t-H;break;default:t=t+H}A++}break;
case Tj:i=Math.max(this.Vj.width,1);for(k=j=A=w=0;k<c.length;k++){n=c[k];q=n.la;p=jl(n,n.tb,n.mf);w=Math.max(w,p.x);A=Math.max(A,q.width-p.x);j=Math.max(j,p.y)}t=this.Hd;switch(t){case Sj:w=w+e;break;default:A=A+e}var i=isFinite(i)?Math.max(i+e,1):Math.max(w+A,1),y=w=this.Kc.x,A=this.Kc.y,H=F=0,l=Math.max(this.Vj.height,1),x=j=0;I=h;for(k=0;k<c.length;k++){n=c[k];q=n.la;p=jl(n,n.tb,n.mf);if(F>0)switch(t){case Sj:y=Math.floor((y-w-(q.width-p.x))/i)*i+w;break;default:y=Math.ceil((y-w+p.x)/i)*i+w}else switch(t){case Sj:H=
y+p.x+q.width;break;default:H=y-p.x}var G;switch(t){case Sj:G=-(y+p.x)+w+H;break;default:G=y+q.width-p.x-w-H}if(d>0&&F>d-1||a>0&&F>0&&G>a){for(y=0;y<F;y++){if(k===F)break;G=c[k-F+y];var fa=jl(G,G.tb,G.mf);G.move(new E(G.position.x,G.position.y+j-fa.y))}x=x+g;A=I?A+x:A+(x+j);F=x=j=0;y=w;I=o}j=Math.max(j,p.y);x=Math.max(x,q.height-p.y);isFinite(l)&&(x=Math.max(x,Math.max(q.height,l)-p.y));I?n.move(new E(y-p.x,A-p.y)):n.move(new E(y-p.x,A));switch(t){case Sj:y=y-(p.x+e);break;default:y=y+(q.width-p.x+
e)}F++}for(y=0;y<F;y++){if(k===F)break;G=c[k-F+y];fa=jl(G,G.tb,G.mf);G.move(new E(G.position.x,G.position.y+j-fa.y))}}b.Kd("Layout");this.Ne=h}};u.a(Hi,"wrappingWidth",Hi.prototype.Uy);u.defineProperty(Hi,{Uy:"wrappingWidth"},r("Pq"),function(a){if(this.Pq!==a&&(a>0||isNaN(a))){this.Pq=a;this.Bu=isNaN(a);this.r()}});u.a(Hi,"wrappingColumn",Hi.prototype.zD);u.defineProperty(Hi,{zD:"wrappingColumn"},r("Oq"),function(a){if(this.Oq!==a&&(a>0||isNaN(a))){this.Oq=a;this.r()}});u.a(Hi,"cellSize",Hi.prototype.Vj);
u.defineProperty(Hi,{Vj:"cellSize"},r("bi"),function(a){if(!this.bi.u(a)){this.bi.Oa(a);this.r()}});u.a(Hi,"spacing",Hi.prototype.Ti);u.defineProperty(Hi,{Ti:"spacing"},r("Ag"),function(a){if(!this.Ag.u(a)){this.Ag.Oa(a);this.r()}});u.a(Hi,"alignment",Hi.prototype.kb);u.defineProperty(Hi,{kb:"alignment"},r("ja"),function(a){if(this.ja!==a){s&&u.c(a,ja,Hi,"alignment");if(a===Tj||a===Uj){this.ja=a;this.r()}}});u.a(Hi,"arrangement",Hi.prototype.Hd);
u.defineProperty(Hi,{Hd:"arrangement"},r("uc"),function(a){if(this.uc!==a){s&&u.c(a,ja,Hi,"arrangement");if(a===Rj||a===Sj){this.uc=a;this.r()}}});u.a(Hi,"sorting",Hi.prototype.tf);u.defineProperty(Hi,{tf:"sorting"},r("Sb"),function(a){if(this.Sb!==a){s&&u.c(a,ja,Hi,"sorting");if(a===Pj||a===Qj||a===Nj||Oj){this.Sb=a;this.r()}}});u.a(Hi,"comparer",Hi.prototype.Og);u.defineProperty(Hi,{Og:"comparer"},r("Qb"),function(a){if(this.Qb!==a){s&&u.e(a,"function",Hi,"comparer");this.Qb=a;this.r()}});var Km;
Hi.standardComparer=Km=function(a,b){s&&u.c(a,T,Hi,"standardComparer:a");s&&u.c(b,T,Hi,"standardComparer:b");var c=a.text,d=b.text;return c<d?-1:c>d?1:0};
Hi.smartComparer=function(a,b){s&&u.c(a,T,Hi,"standardComparer:a");s&&u.c(b,T,Hi,"standardComparer:b");if(a!==m){if(b!==m){var c=a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(d[e]!==""&&d[e]!==f){var g=parseFloat(c[e]),i=parseFloat(d[e]);if(isNaN(g))if(isNaN(i)){if(c[e].localeCompare(d[e])!==0)return c[e].localeCompare(d[e])}else return 1;else{if(isNaN(i))return-1;
if(g-i!==0)return g-i}}else if(c[e]!=="")return 1;return d[e]!==""&&d[e]!==f?-1:0}return 1}return b!==m?-1:0};var Uj;Hi.Position=Uj=u.l(Hi,"Position",0);var Tj;Hi.Location=Tj=u.l(Hi,"Location",1);var Rj;Hi.LeftToRight=Rj=u.l(Hi,"LeftToRight",2);var Sj;Hi.RightToLeft=Sj=u.l(Hi,"RightToLeft",3);var Pj;Hi.Forward=Pj=u.l(Hi,"Forward",4);var Qj;Hi.Reverse=Qj=u.l(Hi,"Reverse",5);var Nj;Hi.Ascending=Nj=u.l(Hi,"Ascending",6);var Oj;Hi.Descending=Oj=u.l(Hi,"Descending",7);
function Vj(){Dh.call(this);this.Wv=this.$l=this.Wb=0;this.Do=360;this.Vv=gk;this.os=this.Wd=this.wA=this.mj=0;this.Pt=new Lm;this.rs=this.sm=0;this.bA=function(a){a||(a=(new Date).getTime());return(a*9301+49297)%233280/233280};this.XD=600;this.Tp=NaN;this.co=1;this.Bg=0;this.Dg=360;this.uc=gk;this.O=ck;this.Sb=$j;this.Qb=Jm;this.Ag=6;this.Mp=jk}u.H("CircularLayout",Vj);u.ma(Vj,Dh);
Vj.prototype.cloneProtected=Vj.prototype.eb=function(a){Dh.prototype.eb.call(this,a);a.Tp=this.Tp;a.co=this.co;a.Bg=this.Bg;a.Dg=this.Dg;a.uc=this.uc;a.O=this.O;a.Sb=this.Sb;a.Qb=this.Qb;a.Ag=this.Ag;a.Mp=this.Mp};Vj.prototype.createNetwork=Vj.prototype.eu=function(){var a=new Mm;Bm(a,this);return a};
Vj.prototype.doLayout=Vj.prototype.$q=function(a){if(this.Bc===m)this.Bc=this.makeNetwork(a);if(this.p.P.count===1){a=this.p.P.Z(0);a.za=0;a.Aa=0}else{for(var a=this.p.P.f,b=new z(Nm);a.next();){var c=a.value,d=c.ya;if(d!==m){c.width=d.fa.width;c.height=d.fa.height}b.add(c)}var a=new z(Nm),c=new z(Nm),b=this.sort(b),a=new z(Nm),c=new z(Nm),d=this.Vv,e=this.PD,g=this.Wb,i=this.$l,j=this.Wv,k=this.Do,l=this.mj,n=this.wA,q=this.Wd,p=this.os,d=this.Hd,e=this.Er,g=this.AC;if(!isFinite(g)||g<=0)g=NaN;i=
this.LA;if(!isFinite(i)||i<=0)i=1;j=this.hk;isFinite(j)||(j=0);k=this.Bl;if(!isFinite(k)||k>360||k<1)k=360;l=this.Ti;isFinite(l)||(l=NaN);if(d===hk&&e===ik)d=gk;else if(d===hk&&e!==ik){e=ik;d=this.Hd}if((this.direction===ak||this.direction===bk)&&this.tf!==$j){for(var t=0;;t=t+2){if(t>=b.length)break;a.add(b.Z(t));if(t+1>=b.length)break;c.add(b.Z(t+1))}if(this.direction===ak){this.Hd===hk&&a.reverse();b=new z(Nm);b.Xf(a);b.Xf(c)}else{this.Hd===hk&&c.reverse();b=new z(Nm);b.Xf(c);b.Xf(a)}}for(var w=
b.length,A=n=0,t=0;t<b.length;t++){var q=j+k*A*(this.direction===ck?1:-1)/w,F=b.Z(t).Je;isNaN(F)&&(F=Om(b.Z(t),q));if(k<360&&(t===0||t===b.length-1))F=F/2;n=n+F;A++}if(isNaN(g)||d===hk){isNaN(l)&&(l=6);if(d!==gk&&d!==hk){F=-Infinity;for(t=0;t<w;t++){var p=b.Z(t),H=b.Z(t===w-1?0:t+1);isNaN(p.Je)&&Om(p,0);isNaN(H.Je)&&Om(H,0);F=Math.max(F,(p.Je+H.Je)/2)}p=F+l;if(d===ek){q=2*Math.PI/w;g=(F+l)/q}else g=Pm(this,p*(k>=360?w:w-1),i,j*Math.PI/180,k*Math.PI/180)}else g=Pm(this,n+(k>=360?w:w-1)*(d!==hk?l:l*
1.6),i,j*Math.PI/180,k*Math.PI/180);q=g*i}else{q=g*i;A=Qm(this,g,q,j*Math.PI/180,k*Math.PI/180);if(isNaN(l)){if(d===gk||d===hk)l=(A-n)/(k>=360?w:w-1)}else if(d===gk||d===hk){t=(A-n)/(k>=360?w:w-1);if(t<l){g=Pm(this,n+l*(k>=360?w:w-1),i,j*Math.PI/180,k*Math.PI/180);q=g*i}else l=t}else{F=-Infinity;for(t=0;t<w;t++){p=b.Z(t);H=b.Z(t===w-1?0:t+1);isNaN(p.Je)&&Om(p,0);isNaN(H.Je)&&Om(H,0);F=Math.max(F,(p.Je+H.Je)/2)}p=F+l;t=Pm(this,p*(k>=360?w:w-1),i,j*Math.PI/180,k*Math.PI/180);if(t>g){g=t;q=g*i}else p=
A/(k>=360?w:w-1)}}this.Vv=d;this.PD=e;this.Wb=g;this.$l=i;this.Wv=j;this.Do=k;this.mj=l;this.wA=n;this.Wd=q;this.os=p;c=[b,a,c];b=c[0];a=c[1];c=c[2];d=this.Vv;e=this.Wb;i=this.Wv;j=this.Do;k=this.mj;l=this.Wd;n=this.os;if((this.direction===ak||this.direction===bk)&&d===hk)Rm(this,b,j,i-j/2,ck);else if(this.direction===ak||this.direction===bk){g=0;switch(d){case fk:g=Sm(this,e,l,i,n)*180/Math.PI;break;case gk:n=b=0;g=a.ac();g!==m&&(b=Om(g,Math.PI/2));g=c.ac();g!==m&&(n=Om(g,Math.PI/2));g=Sm(this,e,
l,i,k+(b+n)/2)*180/Math.PI;break;case ek:g=j/b.length}if(this.direction===ak){switch(d){case fk:Tm(this,a,i,dk);break;case gk:Um(this,a,i,dk);break;case ek:Vm(this,a,j/2,i,dk)}switch(d){case fk:Tm(this,c,i+g,ck);break;case gk:Um(this,c,i+g,ck);break;case ek:Vm(this,c,j/2,i+g,ck)}}else{switch(d){case fk:Tm(this,c,i,dk);break;case gk:Um(this,c,i,dk);break;case ek:Vm(this,c,j/2,i,dk)}switch(d){case fk:Tm(this,a,i+g,ck);break;case gk:Um(this,a,i+g,ck);break;case ek:Vm(this,a,j/2,i+g,ck)}}}else switch(d){case fk:Tm(this,
b,i,this.direction);break;case gk:Um(this,b,i,this.direction);break;case ek:Vm(this,b,j,i,this.direction);break;case hk:Rm(this,b,j,i,this.direction)}this.updateParts();this.Bc=m;this.Ne=h}};function Vm(a,b,c,d,e){for(var g=a.Do,i=a.Wb,a=a.Wd,d=d*Math.PI/180,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=d+(e===ck?k*c/(g>=360?j:j-1):-(k*c)/j),n=b.Z(k),q=i*Math.tan(l)/a,q=Math.sqrt((i*i+a*a*q*q)/(1+q*q));n.za=q*Math.cos(l);n.Aa=q*Math.sin(l);n.St=l*180/Math.PI}}
function Um(a,b,c,d){for(var e=a.Wb,g=a.Wd,i=a.mj,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=b.Z(k),n=b.Z(k===j-1?0:k+1),q=g*Math.sin(c);l.za=e*Math.cos(c);l.Aa=q;l.St=c*180/Math.PI;isNaN(l.Je)&&Om(l,0);isNaN(n.Je)&&Om(n,0);l=Sm(a,e,g,d===ck?c:-c,(l.Je+n.Je)/2+i);c=c+(d===ck?l:-l)}}function Tm(a,b,c,d){for(var e=a.Wb,g=a.Wd,i=a.os,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=b.Z(k);l.za=e*Math.cos(c);l.Aa=g*Math.sin(c);l.St=c*180/Math.PI;l=Sm(a,e,g,d===ck?c:-c,i);c=c+(d===ck?l:-l)}}
function Rm(a,b,c,d,e){var g=a.rs,g=a.Do;a.aA=0;a.Pt=new Lm;if(c<360){for(g=d+(e===ck?g:-g);g<0;)g=g+360;g=g%360;g>180&&(g=g-360);g=g*(Math.PI/180);a.rs=g;Wm(a,b,c,d,e)}else Xm(a,b,c,d,e);a.Pt.Lh(b)}
function Xm(a,b,c,d,e){for(var g=a.mj,i=a.$l,j=a.Wb*Math.cos(d*Math.PI/180),k=a.Wd*Math.sin(d*Math.PI/180),l=b.xf(),n=0;n<l.length;n++){l[n].za=j;l[n].Aa=k;if(n===l.length-1)break;var q=[],q=Ym(a,j,k,l,n,e);q[0]||(q=Zm(a,j,k,l,n,e));j=q[1];k=q[2]}a.sm++;if(!(a.sm>128)){var j=l[0].za,k=l[0].Aa,n=l[l.length-1].za,q=l[l.length-1].Aa,p=Math.abs(j-n)-((l[0].width+l[l.length-1].width)/2+g),t=Math.abs(k-q)-((l[0].height+l[l.length-1].height)/2+g),g=0;Math.abs(t)<2.5?Math.abs(j-n)<(l[0].width+l[l.length-
1].width)/2&&(g=0):g=t>0?t:Math.abs(p)<2.5?0:p;p=o;p=Math.abs(n)>Math.abs(q)?n>0^k>q:q>0^j<n;if(p=e===ck?p:!p){g=-Math.abs(g);g=Math.min(g,-l[l.length-1].width);g=Math.min(g,-l[l.length-1].height)}j=a.Pt;if(g>0&&j.dm<0||Math.abs(g)<Math.abs(j.dm)&&!(g<0&&j.dm>0)){j.dm=g;j.Zk=[];j.Jm=[];for(k=0;k<l.length;k++){j.Zk[k]=l[k].fb.x;j.Jm[k]=l[k].fb.y}}l=a.sm;if(l>36&&l%13===0){a.Wb=a.Wb*((l%2===0?0.75:1.1)+a.bA(a.sm)*0.15);a.Wd=a.Wb*i}if(Math.abs(g)>2.5){a.Wb=a.Wb-g/(2*Math.PI);a.Wd=a.Wb*i;Xm(a,b,c,d,e)}}}
function Wm(a,b,c,d,e){for(var g=a.Wb,i=a.Wd,j=a.$l,k=g*Math.cos(d*Math.PI/180),l=i*Math.sin(d*Math.PI/180),n=b.xf(),q=0;q<n.length;q++){n[q].za=k;n[q].Aa=l;if(q===n.length-1)break;var p=[],p=Ym(a,k,l,n,q,e);p[0]||(p=Zm(a,k,l,n,q,e));k=p[1];l=p[2]}a.aA++;if(!(a.aA>128)){b.Z(b.length-1);k=Math.atan2(l,k);k=e===ck?a.rs-k:k-a.rs;k=Math.abs(k)<Math.abs(k-2*Math.PI)?k:k-2*Math.PI;g=k*(g+i)/2;i=a.Pt;if(Math.abs(g)<Math.abs(i.dm)){i.dm=g;i.Zk=[];i.Jm=[];for(k=0;k<n.length;k++){i.Zk[k]=n[k].fb.x;i.Jm[k]=
n[k].fb.y}}n=a.sm;if(n>36&&n%13===0){a.Wb=a.Wb*((n%2==0?0.75:1.1)+a.bA(a.sm)*0.15);a.Wd=a.Wb*j}if(Math.abs(g)>2.5){a.Wb=a.Wb-g/(2*Math.PI);a.Wd=a.Wb*j;Wm(a,b,c,d,e)}}}
function Ym(a,b,c,d,e,g){var i=a.mj,j=a.Wb,a=a.Wd,k=0,l=0,n=o;if(c>=0^g===ck){k=b+((d[e].width+d[e+1].width)/2+i);if(k>j){k=b-((d[e].width+d[e+1].width)/2+i);if(k<-j)return[o,k,l];n=h}}else{k=b-((d[e].width+d[e+1].width)/2+i);if(k<-j){k=b+((d[e].width+d[e+1].width)/2+i);if(k>j)return[o,k,l];n=h}}l=Math.sqrt(1-k*k/(j*j))*a;c<0^n&&(l=-l);return Math.abs(c-l)>(d[e].height+d[e+1].height)/2?[o,k,l]:[h,k,l]}
function Zm(a,b,c,d,e,g){var i=a.mj,j=a.Wb,a=a.Wd,k=0,l=0,n=o;if(b>=0^g===ck){l=c-((d[e].height+d[e+1].height)/2+i);if(l<-a){l=c+((d[e].height+d[e+1].height)/2+i);if(l>a)return[o,k,l];n=h}}else{l=c+((d[e].height+d[e+1].height)/2+i);if(l>a){l=c-((d[e].height+d[e+1].height)/2+i);if(l<-a)return[o,k,l];n=h}}k=Math.sqrt(1-l*l/(a*a))*j;b<0^n&&(k=-k);return Math.abs(b-k)>(d[e].width+d[e+1].width)/2?[o,k,l]:[h,k,l]}function Lm(){this.dm=-Infinity;this.Jm=this.Zk=m}
Lm.prototype.Lh=function(a){if(!(this.Zk===m||this.Jm===m))for(var b=0;b<this.Zk.length;b++){var c=a.Z(b);c.x=this.Zk[b];c.y=this.Jm[b]}};Vj.prototype.commitLayout=Vj.prototype.au=function(){this.commitNodes();this.commitLinks()};Vj.prototype.commitNodes=Vj.prototype.zx=function(){for(var a=this.hE,b=this.p.P.f,c;b.next();){c=b.value;c.x=c.x+a.x;c.y=c.y+a.y;c.Lh()}};Vj.prototype.commitLinks=Vj.prototype.yx=function(){for(var a=this.p.Kb.f;a.next();)a.value.Lh()};
function Qm(a,b,c,d,e){var g=a.XD;if(Math.abs(a.$l-1)<0.0010)return d!==f&&e!==f?e*b:2*Math.PI*b;var a=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,i=0,j;j=d!==f&&e!==f?e/(g+1):Math.PI/(2*(g+1));for(var k=0;k<=g;k++)var l=Math.sin(d!==f&&e!==f?d+k*e/g:k*Math.PI/(2*g)),i=i+Math.sqrt(1-a*a*l*l)*j;return d!==f&&e!==f?(b>c?b:c)*i:4*(b>c?b:c)*i}function Pm(a,b,c,d,e){return b/(d!==f&&e!==f?Qm(a,1,c,d,e):Qm(a,1,c))}
function Sm(a,b,c,d,e){if(Math.abs(a.$l-1)<0.0010)return e/b;var g=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,i=0,a=2*Math.PI/(a.p.P.count*700);b>c&&(d=d+Math.PI/2);for(var j=0;;j++){var k=Math.sin(d+j*a),i=i+(b>c?b:c)*Math.sqrt(1-g*g*k*k)*a;if(i>=e)return j*a}return 0}
Vj.prototype.sort=function(a){switch(this.tf){case Yj:break;case Zj:a.reverse();break;case Wj:a.sort(this.Og);break;case Xj:a.sort(this.Og);a.reverse();break;case $j:for(var b=[],c=0;c<a.length;c++)b.push(0);for(var d=new z(Nm),c=0;c<a.length;c++){var e=-1,g=-1;if(c===0)for(var i=0;i<a.length;i++){var j=a.Z(i).fF;if(j>e){e=j;g=i}}else for(i=0;i<a.length;i++){j=b[i];if(j>e){e=j;g=i}}d.add(a.Z(g));b[g]=-1;g=a.Z(g);e=g.nb;for(g=g.mb;e.next();){i=e.value;i=i.G;i=a.indexOf(i);i<0||b[i]>=0&&b[i]++}for(;g.next();){i=
g.value;i=i.D;i=a.indexOf(i);i<0||b[i]>=0&&b[i]++}}a=[];for(b=0;b<d.length;b++){j=d.Z(b);a[b]=[];for(var c=j.mb,e=j.nb,k,l;c.next();){k=c.value;l=d.indexOf(k.D);l!==b&&a[b].indexOf(l)<0&&a[b].push(l)}for(;e.next();){k=e.value;l=d.indexOf(k.G);l!==b&&a[b].indexOf(l)<0&&a[b].push(l)}}j=[];for(b=0;b<a.length;b++)j[b]=0;for(var c=[],n=[],q=[],e=[],g=new z(Nm),i=b=0;b<a.length;b++){var p=a[b].length;if(p===1)e.push(b);else if(p===0)g.add(d.Z(b));else{if(i===0)c.push(b);else{for(var t=Infinity,w=Infinity,
A=-1,F=[],p=0;p<c.length;p++)if(a[c[p]].indexOf(c[p===c.length-1?0:p+1])<0)F.push(p===c.length-1?0:p+1);if(F.length===0)for(p=0;p<c.length;p++)F.push(p);for(p=0;p<F.length;p++){var H=F[p],x;l=a[b];k=n;x=q;for(var I=j,y=H,G=c,fa=0,R=0;R<k.length;R++){var S=I[k[R]],da=I[x[R]],ma=0,ua=0;if(S<da){ma=S;ua=da}else{ma=da;ua=S}if(ma<y&&y<=ua)for(S=0;S<l.length;S++){da=l[S];G.indexOf(da)<0||ma<I[da]&&I[da]<ua||(ma===I[da]||ua===I[da])||fa++}else for(S=0;S<l.length;S++){da=l[S];G.indexOf(da)<0||ma<I[da]&&I[da]<
ua&&!(ma===I[da]||ua===I[da])&&fa++}}x=fa;for(k=I=0;k<a[b].length;k++){l=c.indexOf(a[b][k]);if(l>=0){l=Math.abs(H-(l>=H?l+1:l));I=I+(l<c.length+1-l?l:c.length+1-l)}}for(k=0;k<n.length;k++){l=j[n[k]];y=j[q[k]];l>=H&&l++;y>=H&&y++;if(l>y){G=y;y=l;l=G}y-l<(c.length+2)/2^(l<H&&H<=y)||I++}if(x<t||x===t&&I<w){t=x;w=I;A=H}}c.splice(A,0,b);for(p=0;p<c.length;p++)j[c[p]]=p;for(p=0;p<a[b].length;p++){t=a[b][p];if(c.indexOf(t)>=0){n.push(b);q.push(t)}}}i++}}n=o;for(q=c.length;;){n=h;for(j=0;j<e.length;j++){b=
e[j];p=a[b][0];l=c.indexOf(p);if(l>=0){for(i=w=0;i<a[p].length;i++){t=a[p][i];t=c.indexOf(t);if(!(t<0||t===l)){A=t>l?t-l:l-t;w=w+(t<l^A>q-A?1:-1)}}c.splice(w<0?l:l+1,0,b);e.splice(j,1);j--}else n=o}if(n)break;else{c.push(e[0]);e.splice(0,1)}}for(b=0;b<c.length;b++){l=c[b];g.add(d.Z(l))}return g;default:u.g("Invalid sorting type.")}return a};u.a(Vj,"radius",Vj.prototype.AC);u.defineProperty(Vj,{AC:"radius"},r("Tp"),function(a){if(this.Tp!==a&&(a>0||isNaN(a))){this.Tp=a;this.r()}});
u.a(Vj,"aspectRatio",Vj.prototype.LA);u.defineProperty(Vj,{LA:"aspectRatio"},r("co"),function(a){if(this.co!==a&&a>0){this.co=a;this.r()}});u.a(Vj,"startAngle",Vj.prototype.hk);u.defineProperty(Vj,{hk:"startAngle"},r("Bg"),function(a){if(this.Bg!==a){this.Bg=a;this.r()}});u.a(Vj,"sweepAngle",Vj.prototype.Bl);u.defineProperty(Vj,{Bl:"sweepAngle"},r("Dg"),function(a){if(this.Dg!==a){this.Dg=a>0&&a<=360?a:360;this.r()}});u.a(Vj,"arrangement",Vj.prototype.Hd);
u.defineProperty(Vj,{Hd:"arrangement"},r("uc"),function(a){if(this.uc!==a){s&&u.c(a,ja,Vj,"arrangement");if(a===hk||a===gk||a===fk||a===ek){this.uc=a;this.r()}}});u.a(Vj,"direction",Vj.prototype.direction);u.defineProperty(Vj,{direction:"direction"},r("O"),function(a){if(this.O!==a){s&&u.c(a,ja,Vj,"direction");if(a===ck||a===dk||a===ak||a===bk){this.O=a;this.r()}}});u.a(Vj,"sorting",Vj.prototype.tf);
u.defineProperty(Vj,{tf:"sorting"},r("Sb"),function(a){if(this.Sb!==a){s&&u.c(a,ja,Vj,"sorting");if(a===Yj||a===Zj||a===Wj||Xj||a===$j){this.Sb=a;this.r()}}});u.a(Vj,"comparer",Vj.prototype.Og);u.defineProperty(Vj,{Og:"comparer"},r("Qb"),function(a){if(this.Qb!==a){s&&u.e(a,"function",Vj,"comparer");this.Qb=a;this.r()}});u.a(Vj,"spacing",Vj.prototype.Ti);u.defineProperty(Vj,{Ti:"spacing"},r("Ag"),function(a){if(this.Ag!==a){this.Ag=a;this.r()}});u.a(Vj,"nodeDiameterFormula",Vj.prototype.Er);
u.defineProperty(Vj,{Er:"nodeDiameterFormula"},r("Mp"),function(a){if(this.Mp!==a){s&&u.c(a,ja,Vj,"nodeDiameterFormula");if(a===jk||a===ik){this.Mp=a;this.r()}}});u.m(Vj,{iE:"actualXRadius"},r("Wb"));u.m(Vj,{jE:"actualYRadius"},r("Wd"));u.m(Vj,{RG:"actualSpacing"},r("mj"));u.m(Vj,{hE:"actualCenter"},function(){return isNaN(this.Kc.x)||isNaN(this.Kc.y)?new E(0,0):new E(this.Kc.x+this.iE,this.Kc.y+this.jE)});var gk;Vj.ConstantSpacing=gk=u.l(Vj,"ConstantSpacing",0);var fk;
Vj.ConstantDistance=fk=u.l(Vj,"ConstantDistance",1);var ek;Vj.ConstantAngle=ek=u.l(Vj,"ConstantAngle",2);var hk;Vj.Packed=hk=u.l(Vj,"Packed",3);var ck;Vj.Clockwise=ck=u.l(Vj,"Clockwise",4);var dk;Vj.Counterclockwise=dk=u.l(Vj,"Counterclockwise",5);var ak;Vj.BidirectionalLeft=ak=u.l(Vj,"BidirectionalLeft",6);var bk;Vj.BidirectionalRight=bk=u.l(Vj,"BidirectionalRight",7);var Yj;Vj.Forwards=Yj=u.l(Vj,"Forwards",8);var Zj;Vj.Reverse=Zj=u.l(Vj,"Reverse",9);var Wj;Vj.Ascending=Wj=u.l(Vj,"Ascending",10);
var Xj;Vj.Descending=Xj=u.l(Vj,"Descending",11);var $j;Vj.Optimized=$j=u.l(Vj,"Optimized",12);var jk;Vj.Pythagorean=jk=u.l(Vj,"Pythagorean",13);var ik;Vj.Circular=ik=u.l(Vj,"Circular",14);function Mm(){Am.call(this)}u.H("CircularNetwork",Mm);u.ma(Mm,Am);Mm.prototype.createVertex=Mm.prototype.Ci=function(){return new Nm};Mm.prototype.createEdge=Mm.prototype.$m=function(){return new $m};function Nm(){Em.call(this);this.bz=this.Zl=NaN}u.H("CircularVertex",Nm);u.ma(Nm,Em);
function Om(a,b){var c=a.p;if(c===m)return NaN;c=c.qb;if(c===m)return NaN;if(c.Hd===hk)if(c.Er===ik)a.Zl=Math.max(a.width,a.height);else{var c=Math.abs(Math.sin(b)),d=Math.abs(Math.cos(b));if(c===0)return a.width;if(d===0)return a.height;a.Zl=Math.min(a.height/c,a.width/d)}else a.Zl=c.Er===ik?Math.max(a.width,a.height):Math.sqrt(a.width*a.width+a.height*a.height);return a.Zl}u.a(Nm,"diameter",Nm.prototype.Je);u.defineProperty(Nm,{Je:"diameter"},r("Zl"),ba("Zl"));u.a(Nm,"actualAngle",Nm.prototype.St);
u.defineProperty(Nm,{St:"actualAngle"},r("bz"),ba("bz"));function $m(){Fm.call(this)}u.H("CircularEdge",$m);u.ma($m,Fm);function an(){Dh.call(this);this.df=m;this.lp=0;this.Ue=(new eb(100,100)).freeze();this.bo=o;this.cd=this.zg=h;this.qm=100;this.Go=1;this.Wo=1E3;this.yo=0.05;this.xo=50;this.vo=150;this.wo=0;this.to=20;this.so=25}u.H("ForceDirectedLayout",an);u.ma(an,Dh);
an.prototype.cloneProtected=an.prototype.eb=function(a){Dh.prototype.eb.call(this,a);a.Ue=this.Ue.B();a.bo=this.bo;a.zg=this.zg;a.cd=this.cd;a.qm=this.qm;a.Go=this.Go;a.Wo=this.Wo;a.yo=this.yo;a.xo=this.xo;a.vo=this.vo;a.wo=this.wo;a.to=this.to;a.so=this.so};an.prototype.createNetwork=an.prototype.eu=function(){var a=new bn;Bm(a,this);return a};
an.prototype.doLayout=an.prototype.$q=function(a){if(this.Bc===m)this.Bc=this.makeNetwork(a);a=this.Cu;if(this.p.P.count>0){this.p.iu();for(var b=this.p.P.f;b.next();){var c=b.value;c.di=this.electricalCharge(c);c.pm=this.gravitationalMass(c);var d=c.ya;if(d!==m){var e=d.oa.width,d=d.oa.height;c.width=e;c.height=d;c.su=e*0.5;c.tu=d*0.5}}for(b=this.p.Kb.f;b.next();){c=b.value;c.vq=this.springStiffness(c);c.sh=this.springLength(c)}this.lp=0;a:{if(!(this.p.P.count<3)){e=b=0;c=this.p.P.f;c.next();for(d=
c.value.A;c.next();){if(c.value.A.de(d)){b++;if(b>1){b=h;break a}}if(e>10)break;e++}}b=o}if(b){b=this.p;for(e=b.wG().f;e.next();){this.Bc=d=e.value;for(c=this.p.P.f;c.next();){for(var d=c.value,g=0,i=d.P;i.next();)g++;d.ue=g;d.pi=1;d.vk=m;d.Uf=m}cn(this,0,a)}this.Bc=b;e.reset();s&&u.c(b,bn,an,"arrangeConnectedGraphs:singletons");for(var c=this.Xt,j=e.count,d=h,i=g=0,k=[],l=0;l<j+b.P.count+2;l++)k[l]=m;j=0;for(e.reset();e.next();){var n=e.value,l=this.Yd(n);if(d){d=o;g=l.x+l.width/2;i=l.y+l.height/
2;k[0]=new E(l.right+c.width,l.top);k[1]=new E(l.left,l.bottom+c.height);j=2}else{var q=dn(k,j,new E(g,i),new eb(l.width,l.height),c),p=k[q],t=new E(p.x+l.width+c.width,p.y),w=new E(p.x,p.y+l.height+c.height);q+1<j&&k.splice(q+1,0,m);k[q]=t;k[q+1]=w;j++;q=p.x-l.x;l=p.y-l.y;for(n=n.P.f;n.next();){var A=n.value;A.za=A.za+q;A.Aa=A.Aa+l}}}for(n=b.P.f;n.next();){A=n.value;l=A.A;if(j<2){g=l.x+l.width/2;i=l.y+l.height/2;k[0]=new E(l.right+c.width,l.top);k[1]=new E(l.left,l.bottom+c.height);j=2}else{q=dn(k,
j,new E(g,i),new eb(l.width,l.height),c);p=k[q];t=new E(p.x+l.width+c.width,p.y);w=new E(p.x,p.y+l.height+c.height);q+1<j&&k.splice(q+1,0,m);k[q]=t;k[q+1]=w;j++;A.za=p.x+A.width/2;A.Aa=p.y+A.height/2}}for(e.reset();e.next();){d=e.value;for(g=d.P.f;g.next();){c=g.value;b.Qj(c)}for(d=d.Kb.f;d.next();){c=d.value;b.Lm(c)}}}en(this,a);this.updateParts()}this.qm=a;this.Bc=m;this.Ne=h};
an.prototype.Yd=function(a){s&&u.c(a,bn,an,"computeBounds:net");for(var b=new J,c=h,a=a.P.f;a.next();){var d=a.value;if(c){c=o;b.set(d.A)}else b.mk(d.A)}return b};function fn(a,b,c){if(s){u.i(b,an,"computeClusterLayoutIterations:level");u.i(c,an,"computeClusterLayoutIterations:maxiter")}return Math.max(Math.min(a.p.P.count,c*(b+1)/11),10)}
function cn(a,b,c){if(s){u.i(b,an,"layoutClusters:level");u.i(c,an,"layoutClusters:maxiter")}var d;s&&u.i(b,an,"hasClusters:level");if(b>10||a.p.P.count<3)d=o;else{a.df===m?a.df=new z(gn):a.df.clear();a.df.Xf(a.p.P);d=a.df;d.sort(function(a,b){return a===m||b===m||a===b?0:b.ue-a.ue});for(var e=d.count-1;e>=0&&d.j[e].ue<=1;)e--;d=d.count-e>1}if(d){d=a.pl;a.pl=a.pl*(1+1/(b+1));s&&u.i(b,an,"pushSubNetwork:level");for(var e=a.p,g=new bn,i=a.df.f;i.next();){var j=i.value;if(j.ue>1){g.Qj(j);var k={Xy:j.ue,
Yy:j.width,Wy:j.height,CD:j.z.x,DD:j.z.y};if(j.Uf===m)j.Uf=new z;j.Uf.add(k);j.Iw=j.Uf.count-1}else break}for(var l=e.Kb.f;l.next();){var n=l.value;if(n.G.p===g&&n.D.p===g)g.Lm(n);else if(n.G.p===g){var q=n.G.vk;if(q===m){q=new z(gn);n.G.vk=q}q.add(n.D);n.G.ue--;n.G.pi=n.G.pi+n.D.pi}else if(n.D.p===g){q=n.D.vk;if(q===m){q=new z(gn);n.D.vk=q}q.add(n.G);n.D.ue--;n.D.pi=n.D.pi+n.G.pi}}for(l=g.Kb.f;l.next();){n=l.value;n.sh=n.sh*Math.max(1,Math.sqrt((n.G.pi+n.D.pi)/(4*b+1)))}for(i=g.P.f;i.next();){j=
i.value;q=j.vk;if(q!==m&&q.count>0){k=j.Uf.j[j.Uf.count-1];k=k.Xy-j.ue;if(!(k<=0)){for(var p=0,t=0,w=q.count-k;w<q.count;w++){for(var A=q.j[w],n=m,l=A.Kb.f;l.next();){var F=l.value;if(F.oF(A)===j){n=F;break}}if(n!==m){t=t+n.sh;p=p+A.width*A.height}}q=j.za;l=j.Aa;n=j.width;w=j.height;A=j.z;F=n*w;F<1&&(F=1);p=Math.sqrt((p+F+t*t*4/(k*k))/F);k=(p-1)*n/2;p=(p-1)*w/2;j.fb=new J(q-A.x-k,l-A.y-p,n+k*2,w+p*2);j.focus=new E(A.x+k,A.y+p)}}}a.Bc=g;g=Math.max(0,fn(a,b,c));a.Cu=a.Cu+g;cn(a,b+1,c);en(a,g);if(s){u.c(e,
bn,an,"popNetwork:oldnet");u.i(b,an,"popNetwork:level")}for(c=a.p.P.f;c.next();){g=c.value;g.p=e;if(g.Uf!==m){i=g.Uf.j[g.Iw];g.ue=i.Xy;j=i.CD;k=i.DD;g.fb=new J(g.za-j,g.Aa-k,i.Yy,i.Wy);g.focus=new E(j,k);g.Iw--}}for(c=a.p.Kb.f;c.next();)c.value.p=e;a.Bc=e;c=a.df;c===m?c=new z(gn):c.clear();c.Xf(e.P);c.sort(function(a,b){return a===m||b===m||a===b?0:b.ue-a.ue});for(e=c.f;e.next();)hn(a,e.value,b);a.pl=d}}
function hn(a,b,c){if(s){u.c(b,gn,an,"surroundNode:oldnet");u.i(c,an,"surroundNode:level")}var d=b.vk;if(!(d===m||d.count===0)){var c=b.za,e=b.Aa,g=b.width,i=b.height;if(b.Uf!==m&&b.Uf.count>0){i=b.Uf.j[0];g=i.Yy;i=i.Wy}for(var g=Math.sqrt(g*g+i*i)/2,j=o,k=i=0,l=0,n=b.P.f;n.next();){var q=n.value;if(q.ue<=1)k++;else{j=h;l++;i=i+Math.atan2(b.Aa-q.Aa,b.za-q.za)}}if(k!==0){l>0&&(i=i/l);l=b=0;b=j?Math.PI*2/(k+1):Math.PI*2/k;k%2===0&&(l=b/2);d.count>1&&d.sort(function(a,b){return a===m||b===m||a===b?0:
b.width*b.height-a.width*a.height});j=k%2===0?0:1;for(n=d.f;n.next();){q=n.value;if(!(q.ue>1)&&!a.isFixed(q)){d=m;for(k=q.Kb.f;k.next();){d=k.value;break}var k=q.width,p=q.height,d=g+d.sh+Math.sqrt(k*k+p*p)/2,k=i+(b*(j/2>>1)+l)*(j%2==0?1:-1);q.za=c+d*Math.cos(k);q.Aa=e+d*Math.sin(k);j++}}}}}
function dn(a,b,c,d,e){var g=9E19,i=-1,j=0;a:for(;j<b;j++){var k=a[j],l=k.x-c.x,n=k.y-c.y,l=l*l+n*n;if(l<g){for(n=j-1;n>=0;n--)if(a[n].y>k.y&&a[n].x-k.x<d.width+e.width)continue a;for(n=j+1;n<b;n++)if(a[n].x>k.x&&a[n].y-k.y<d.height+e.height)continue a;i=j;g=l}}return i}an.prototype.AA=function(a){var b=a.ya;if(b!==m)for(b=b.vB();b.next();){var c=b.value;if(c.gd==="Comment"){var d=this.p.be(c);if(d===m){d=this.p.Mm(c);d.di=this.dB;c=this.p.rl(a,d,m);if(c!==m)c.sh=this.eB}}}};
function jn(a,b){if(s){u.c(a,gn,an,"getNodeDistance:vertexA");u.c(b,gn,an,"getNodeDistance:vertexB")}var c=a.fb,d=c.x,e=c.y,g=c.width,c=c.height,i=b.fb,j=i.x,k=i.y,l=i.width,i=i.height;if(d+g<j){if(e>k+i){d=d+g-j;e=e-k-i;return Math.sqrt(d*d+e*e)}if(e+c<k){d=d+g-j;e=e+c-k;return Math.sqrt(d*d+e*e)}return j-(d+g)}if(d>j+l){if(e>k+i){d=d-j-l;e=e-k-i;return Math.sqrt(d*d+e*e)}if(e+c<k){d=d-j-l;e=e+c-k;return Math.sqrt(d*d+e*e)}return d-(j+l)}return e>k+i?e-(k+i):e+c<k?k-(e+c):0.1}
function en(a,b){s&&u.i(b,an,"performIterations:num");a.df=m;for(var c=a.lp+b;a.lp<c;){a.lp++;if(!kn(a))break}a.df=m}
function kn(a){if(a.df===m){a.df=new z(gn);a.df.Xf(a.p.P)}var b=a.df;if(b.count<=0)return o;var c=b.j[0];c.md=0;c.nd=0;for(var d=c.za,e=d,g=c.Aa,i=g,c=1;c<b.count;c++){var j=b.j[c];j.md=0;j.nd=0;var k=j.za,j=j.Aa,d=Math.min(d,k),e=Math.max(e,k),g=Math.min(g,j),i=Math.max(i,j)}(i=e-d>i-g)?b.sort(function(a,b){return a===m||b===m||a===b?0:a.za-b.za}):b.sort(function(a,b){return a===m||b===m||a===b?0:a.Aa-b.Aa});for(var l=0,n=k=0,c=0;c<b.count;c++){j=b.j[c];d=j.za;e=j.Aa;k=j.di*a.electricalFieldX(d,
e);n=j.di*a.electricalFieldY(d,e);j.md=j.md+k;j.nd=j.nd+n;k=j.pm*a.gravitationalFieldX(d,e);n=j.pm*a.gravitationalFieldY(d,e);j.md=j.md+k;j.nd=j.nd+n;for(var q=a.pl,p=c+1;p<b.count;p++){g=b.j[p];if(g!==j){var n=g.za,t=g.Aa;if(Math.abs(d-n)>q){if(i)break}else if(Math.abs(e-t)>q){if(!i)break}else{var w=jn(j,g);if(w<1){if(d>n){k=Math.abs(g.A.right-j.A.left);k=ln(1+k)}else if(d<n){k=Math.abs(g.A.left-j.A.right);k=-ln(1+k)}else{k=Math.max(g.width,j.width);k=ln(1+k)-k/2}if(e>t){n=Math.abs(g.A.bottom-j.A.top);
n=ln(1+n)}else if(d<n){n=Math.abs(g.A.top-j.A.bottom);n=-ln(1+n)}else{n=Math.max(g.height,j.height);n=ln(1+n)-n/2}}else{l=-(j.di*g.di)/(w*w);k=l*((n-d)/w);n=l*((t-e)/w)}j.md=j.md+k;j.nd=j.nd+n;g.md=g.md-k;g.nd=g.nd-n}}}}for(c=a.p.Kb.f;c.next();){i=c.value;j=i.G;g=i.D;d=j.za;e=j.Aa;n=g.za;t=g.Aa;w=jn(j,g);if(w<1){k=(d>n?1:-1)*ln(1+Math.max(g.width,j.width));n=(e>t?1:-1)*ln(1+Math.max(g.height,j.height))}else{l=i.vq*(w-i.sh);k=l*((n-d)/w);n=l*((t-e)/w)}j.md=j.md+k;j.nd=j.nd+n;g.md=g.md-k;g.nd=g.nd-
n}c=0;d=Math.max(a.pl/20,50);for(e=0;e<b.count;e++){j=b.j[e];if(!a.isFixed(j)){g=j.md;i=j.nd;g<-d?g=-d:g>d&&(g=d);i<-d?i=-d:i>d&&(i=d);j.za=j.za+g;j.Aa=j.Aa+i;c=Math.max(c,g*g+i*i)}}return c>a.Jx*a.Jx}function ln(a){s&&u.i(a,an,"randNext:max");return Math.floor(a*Math.random())}an.prototype.commitLayout=an.prototype.au=function(){this.Fy();this.commitNodes();this.commitLinks()};an.prototype.Fy=function(){if(this.Al)for(var a=this.p.Kb.f;a.next();){var b=a.value.Ba;if(b!==m){b.Va=Ub;b.Xa=Ub}}};
an.prototype.commitNodes=an.prototype.zx=function(){var a=0,b=0;if(this.KA)var b=this.Yd(this.p),c=this.Kc,a=c.x-b.x,b=c.y-b.y;for(var c=new J,d=this.p.P.f;d.next();){var e=d.value;if(a!==0||b!==0){c.set(e.A);c.x=c.x+a;c.y=c.y+b;e.fb=c}e.Lh()}};an.prototype.commitLinks=an.prototype.yx=function(){for(var a=this.p.Kb.f;a.next();)a.value.Lh()};an.prototype.springStiffness=an.prototype.cK=function(a){a=a.vq;return!isNaN(a)?a:this.iB};
an.prototype.springLength=an.prototype.bK=function(a){a=a.sh;return!isNaN(a)?a:this.hB};an.prototype.electricalCharge=an.prototype.pI=function(a){a=a.di;return!isNaN(a)?a:this.fB};an.prototype.electricalFieldX=an.prototype.qI=ca(0);an.prototype.electricalFieldY=an.prototype.rI=ca(0);an.prototype.gravitationalMass=an.prototype.KI=function(a){a=a.pm;return!isNaN(a)?a:this.gB};an.prototype.gravitationalFieldX=an.prototype.II=ca(0);an.prototype.gravitationalFieldY=an.prototype.JI=ca(0);
an.prototype.isFixed=an.prototype.UB=function(a){return a.iw};u.m(an,{RH:"currentIteration"},r("lp"));u.a(an,"arrangementSpacing",an.prototype.Xt);u.defineProperty(an,{Xt:"arrangementSpacing"},r("Ue"),function(a){if(!this.Ue.u(a)){this.Ue.Oa(a);this.r()}});u.a(an,"arrangesToOrigin",an.prototype.KA);u.defineProperty(an,{KA:"arrangesToOrigin"},r("bo"),function(a){if(this.bo!==a){this.bo=a;this.r()}});u.a(an,"setsPortSpots",an.prototype.Al);
u.defineProperty(an,{Al:"setsPortSpots"},r("zg"),function(a){if(this.zg!==a){this.zg=a;this.r()}});u.a(an,"comments",an.prototype.xx);u.defineProperty(an,{xx:"comments"},r("cd"),function(a){if(this.cd!==a){this.cd=a;this.r()}});u.a(an,"maxIterations",an.prototype.Cu);u.defineProperty(an,{Cu:"maxIterations"},r("qm"),function(a){if(this.qm!==a&&a>=0){this.qm=a;this.r()}});u.a(an,"epsilonDistance",an.prototype.Jx);
u.defineProperty(an,{Jx:"epsilonDistance"},r("Go"),function(a){if(this.Go!==a&&a>0){this.Go=a;this.r()}});u.a(an,"infinityDistance",an.prototype.pl);u.defineProperty(an,{pl:"infinityDistance"},r("Wo"),function(a){if(this.Wo!==a&&a>1){this.Wo=a;this.r()}});u.a(an,"defaultSpringStiffness",an.prototype.iB);u.defineProperty(an,{iB:"defaultSpringStiffness"},r("yo"),function(a){if(this.yo!==a){this.yo=a;this.r()}});u.a(an,"defaultSpringLength",an.prototype.hB);
u.defineProperty(an,{hB:"defaultSpringLength"},r("xo"),function(a){if(this.xo!==a){this.xo=a;this.r()}});u.a(an,"defaultElectricalCharge",an.prototype.fB);u.defineProperty(an,{fB:"defaultElectricalCharge"},r("vo"),function(a){if(this.vo!==a){this.vo=a;this.r()}});u.a(an,"defaultGravitationalMass",an.prototype.gB);u.defineProperty(an,{gB:"defaultGravitationalMass"},r("wo"),function(a){if(this.wo!==a){this.wo=a;this.r()}});u.a(an,"defaultCommentSpringLength",an.prototype.eB);
u.defineProperty(an,{eB:"defaultCommentSpringLength"},r("to"),function(a){if(this.to!==a){this.to=a;this.r()}});u.a(an,"defaultCommentElectricalCharge",an.prototype.dB);u.defineProperty(an,{dB:"defaultCommentElectricalCharge"},r("so"),function(a){if(this.so!==a){this.so=a;this.r()}});function bn(){Am.call(this)}u.H("ForceDirectedNetwork",bn);u.ma(bn,Am);bn.prototype.createVertex=bn.prototype.Ci=function(){return new gn};bn.prototype.createEdge=bn.prototype.$m=function(){return new mn};
function gn(){Em.call(this);this.iw=o;this.pm=this.di=NaN;this.pi=this.ue=this.nd=this.md=0;this.Uf=this.vk=m;this.Iw=0}u.H("ForceDirectedVertex",gn);u.ma(gn,Em);u.a(gn,"isFixed",gn.prototype.UB);u.defineProperty(gn,{UB:"isFixed"},r("iw"),ba("iw"));u.a(gn,"charge",gn.prototype.ME);u.defineProperty(gn,{ME:"charge"},r("di"),ba("di"));u.a(gn,"mass",gn.prototype.QF);u.defineProperty(gn,{QF:"mass"},r("pm"),ba("pm"));u.a(gn,"forceX",gn.prototype.iF);u.defineProperty(gn,{iF:"forceX"},r("md"),ba("md"));
u.a(gn,"forceY",gn.prototype.jF);u.defineProperty(gn,{jF:"forceY"},r("nd"),ba("nd"));function mn(){Fm.call(this);this.sh=this.vq=NaN}u.H("ForceDirectedEdge",mn);u.ma(mn,Fm);u.a(mn,"stiffness",mn.prototype.yG);u.defineProperty(mn,{yG:"stiffness"},r("vq"),ba("vq"));u.a(mn,"length",mn.prototype.length);u.defineProperty(mn,{length:"length"},r("sh"),ba("sh"));
function Z(){Dh.call(this);this.Nc=this.dd=25;this.O=0;this.Ul=nn;this.lm=on;this.fm=pn;this.Jk=4;this.Ll=qn;this.zh=rn;this.zg=h;this.Ya=this.Ss=this.Ia=-1;this.te=this.Cp=0;this.Qc=this.se=this.Kf=this.vg=this.Pc=m;this.Jp=0;this.ct=this.Ok=m;this.af=0;this.Kp=m;this.Pf=[];this.Pf.length=100}u.H("LayeredDigraphLayout",Z);u.ma(Z,Dh);
Z.prototype.cloneProtected=Z.prototype.eb=function(a){Dh.prototype.eb.call(this,a);a.dd=this.dd;a.Nc=this.Nc;a.O=this.O;a.Ul=this.Ul;a.lm=this.lm;a.fm=this.fm;a.Jk=this.Jk;a.Ll=this.Ll;a.zh=this.zh;a.zg=this.zg};Z.prototype.createNetwork=Z.prototype.eu=function(){var a=new sn;Bm(a,this);return a};
Z.prototype.doLayout=Z.prototype.$q=function(a){if(this.Bc===m)this.Bc=this.makeNetwork(a);this.Kc=Dm(this,this.Kc);this.Ss=-1;this.te=this.Cp=0;this.Kp=this.ct=this.Ok=m;var b;for(b=0;b<this.Pf.length;b++)this.Pf[b]=m;if(this.p.P.count>0){this.p.iu();for(var c=this.p.Kb.f;c.next();)c.value.cb=o;switch(this.Ul){default:case tn:var d=0,e=this.p.P.count-1,g=[];g.length=e+1;for(var i=this.p.P.f;i.next();)i.value.ka=h;for(;un(this.p)!==m;){var j;for(j=vn(this.p);j!==m;){g[e]=j;e--;j.ka=o;j=vn(this.p)}for(j=
wn(this.p);j!==m;){g[d]=j;d++;j.ka=o;j=wn(this.p)}s&&u.c(this.p,Am,Z,"greedyCycleRemovalFindNodeMaxDegDiff:network");for(var k=m,l=0,n=this.p.P.f;n.next();){var q=n.value;if(q.ka){for(var p=0,t=q.mb;t.next();)t.value.D.ka&&p++;for(var w=0,A=q.nb;A.next();)A.value.G.ka&&w++;if(k===m||l<p-w){k=q;l=p-w}}}j=k;if(j!==m){g[d]=j;d++;j.ka=o}}var F;for(F=0;F<this.p.P.count;F++)g[F].T=F;for(var H=this.p.Kb.f;H.next();){var x=H.value;if(x.G.T>x.D.T){this.p.Lu(x);x.cb=h}}break;case nn:for(var I=this.p.P.f;I.next();){I.value.lj=
-1;I.value.bm=-1}for(var y=this.p.Kb.f;y.next();)y.value.Jo=o;this.Jp=0;for(I.reset();I.next();)I.value.nb.count===0&&xn(this,I.value);for(I.reset();I.next();)I.value.lj===-1&&xn(this,I.value);for(y.reset();y.next();){var G=y.value;if(!G.Jo){var fa=G.G,R=fa.bm,S=G.D,da=S.bm;if(S.lj<fa.lj&&R<da){this.p.Lu(G);G.cb=h}}}}for(var ma=this.p.P.f,ua;ma.next();){ua=ma.value;ua.s=-1;var sa=ua.ya;if(typeof sa!=="undefined"&&sa!==m){var ib=sa.oa.width,db=sa.oa.height;ua.width=ib;ua.height=db;ua.su=ib*0.5;ua.tu=
db*0.5}}this.Ia=-1;switch(this.lm){case yn:zn(this);break;case An:for(var $a,Oa=this.p.P.f;Oa.next();){$a=Bn(this,Oa.value);this.Ia=Math.max($a,this.Ia)}Oa.reset();for(var fb;Oa.next();){fb=Oa.value;fb.s=this.Ia-fb.s}break;default:case on:zn(this);for(var Va=this.p.P.f;Va.next();)Va.value.ka=o;for(Va.reset();Va.next();)Va.value.nb.count===0&&Cn(this,Va.value);var vc=Infinity;for(Va.reset();Va.next();)vc=Math.min(vc,Va.value.s);this.Ia=-1;for(Va.reset();Va.next();){Va.value.s=Va.value.s-vc;this.Ia=
Math.max(this.Ia,Va.value.s)}}for(ma.reset();ma.next();)this.Ia=Math.max(this.Ia,ma.value.s);for(var Cd=this.p.Kb.f,Wa,Fc=[];Cd.next();){Wa=Cd.value;Wa.ka=o;Fc.push(Wa)}for(var Dd=0;Dd<Fc.length;Dd++){Wa=Fc[Dd];if(!Wa.ka&&!((Wa.G.ya===m||Wa.D.ya===m)&&Wa.G.s===Wa.D.s)){var qc,Wb,gc,Gc;qc=Wb=gc=Gc=0;var Gb=Wa.G,Hb=Wa.D;if(Wa.Ba!==m){var Ib=Wa.Ba;if(Ib===m)continue;var Ce=Gb.ya,Oc=Hb.ya;if(Ce===m||Oc===m)continue;var nd=Ib.ca,Hc=Ib.ea,xc=Ib.zc,ed=Ib.ld;if(Wa.cb)var rb=nd,yc=xc,nd=Hc,xc=ed,Hc=rb,ed=
yc;var Ed=Gb.z.copy(),Fd=Wa.D.z.copy(),qa=Wa.cb?Hb.A.copy():Gb.A.copy(),Ea=isNaN(qa.x)?Ed.copy():jl(nd,xc,Zb);if(Ce!==nd&&!isNaN(qa.x)&&nd.gb()){var zc=Gb.A.copy();if(!isNaN(zc.x)){Ea.x=Ea.x+(qa.x-zc.x);Ea.y=Ea.y+(qa.y-zc.y)}}var lb=Wa.cb?Gb.A.copy():Hb.A.copy(),Pc=isNaN(lb.x)?Fd.copy():jl(Hc,ed,Zb);if(Oc!==Hc&&!isNaN(lb.x)&&Hc.gb()){var Gd=Hb.A;if(!isNaN(Gd.x)){Pc.x=Pc.x+(lb.x-Gd.x);Pc.y=Pc.y+(lb.y-Gd.y)}}if(this.O===90||this.O===270){qc=Math.round((Ea.x-Ed.x)/this.Nc);gc=Ea.x;Wb=Math.round((Pc.x-
Fd.x)/this.Nc);Gc=Pc.x}else{qc=Math.round((Ea.y-Ed.y)/this.Nc);gc=Ea.y;Wb=Math.round((Pc.y-Fd.y)/this.Nc);Gc=Pc.y}Wa.ve=qc;Wa.we=gc;Wa.Td=Wb;Wa.ye=Gc}else{Wa.ve=0;Wa.we=0;Wa.Td=0;Wa.ye=0}var od=Gb.s,Jb=Hb.s,vb,pd=Wa;s&&u.c(pd,Dn,Z,"_goesAround:edge");var Qc=0,Rc=pd.Ba;if(Rc!==m){if(Rc.zc!==m){var Ud=Rc.ca;Pl(Rc)===En(this,pd,h)?Qc=Qc+1:this.Al&&Ud!==m&&Ud.ports.count===1&&pd.cb&&(Qc=Qc+1)}if(Rc.ld!==m){var Vd=Rc.ea;Ql(Rc)===En(this,pd,o)?Qc=Qc+2:this.Al&&Vd!==m&&Vd.ports.count===1&&pd.cb&&(Qc=Qc+
2)}}vb=Qc;var hc=vb===1||vb===3?h:o,$b=vb===2||vb===3?h:o,Za,Cb;if($b){Cb=this.p.Ci();Cb.ya=m;Cb.rk=1;Cb.s=od;Cb.mi=Gb;this.p.Qj(Cb);Za=this.p.rl(Gb,Cb,Wa.Ba);Za.ka=o;Za.cb=Wa.cb;Za.ve=qc;Za.Td=0;Za.we=gc;Za.ye=0;Gb=Cb}var qd=1;hc&&qd--;if(od-Jb>qd&&od>0){Wa.ka=o;Cb=this.p.Ci();Cb.ya=m;Cb.rk=2;Cb.s=od-1;this.p.Qj(Cb);Za=this.p.rl(Gb,Cb,Wa.Ba);Za.ka=h;Za.cb=Wa.cb;Za.ve=$b?0:qc;Za.Td=0;Za.we=$b?0:gc;Za.ye=0;Gb=Cb;for(od--;od-Jb>qd&&od>0;){Cb=this.p.Ci();Cb.ya=m;Cb.rk=3;Cb.s=od-1;this.p.Qj(Cb);Za=this.p.rl(Gb,
Cb,Wa.Ba);Za.ka=h;Za.cb=Wa.cb;Za.ve=0;Za.Td=0;Za.we=0;Za.ye=0;Gb=Cb;od--}Za=this.p.rl(Cb,Hb,Wa.Ba);Za.ka=!hc;if(hc)Cb.mi=Hb;Za.cb=Wa.cb;Za.ve=0;Za.Td=Wb;Za.we=0;Za.ye=Gc}else Wa.ka=h}}var ac=this.Pc=[],wb;for(wb=0;wb<=this.Ia;wb++)ac[wb]=0;for(var Wd=this.p.P.f;Wd.next();)Wd.value.T=-1;switch(this.fm){default:case Fn:for(var Rb,bc=this.p.P.f;bc.next();){var Xd=bc.value;Rb=Xd.s;Xd.T=this.Pc[Rb];this.Pc[Rb]++}break;case pn:var De,rd=this.p.P.f;for(De=this.Ia;De>=0;De--){for(;rd.next();)rd.value.s===
De&&rd.value.T===-1&&Gn(this,rd.value);rd.reset()}break;case Hn:var fd,Ic=this.p.P.f;for(fd=0;fd<=this.Ia;fd++){for(;Ic.next();)Ic.value.s===fd&&Ic.value.T===-1&&In(this,Ic.value);Ic.reset()}}this.Ss=-1;for(wb=this.te=this.Cp=0;wb<=this.Ia;wb++){if(ac[wb]>ac[this.te]){this.Ss=ac[wb]-1;this.te=wb}if(ac[wb]<ac[this.Cp])this.Cp=wb}this.Kp=[];for(wb=0;wb<ac.length;wb++)this.Kp[wb]=[];Wd.reset();for(var cc,Hd;Wd.next();){Hd=Wd.value;cc=Hd.s;this.Kp[cc][Hd.T]=Hd}this.Ya=-1;for(var cf=0;cf<=this.Ia;cf++){for(var Yd=
Jn(this,cf),Zd=0,he=this.Pc[cf],sd=0;sd<he;sd++){var td=Yd[sd],Zd=Zd+Un(this,td,h);td.K=Zd;Zd=Zd+1;Zd=Zd+Un(this,td,o)}this.Ya=Math.max(this.Ya,Zd-1);ao(this,cf,Yd)}var gb=bo(this),ob=co(this),Zc,ha,Ta;for(Zc=0;Zc<this.Jk;Zc++){for(ha=0;ha<=this.Ia;ha++){eo(this,ha,1);fo(this,ha,1,1)}Ta=bo(this);if(Ta<gb){gb=Ta;ob=co(this)}for(ha=this.Ia;ha>=0;ha--){eo(this,ha,-1);fo(this,ha,-1,-1)}Ta=bo(this);if(Ta<gb){gb=Ta;ob=co(this)}}ho(this,ob);for(Zc=0;Zc<this.Jk;Zc++){for(ha=0;ha<=this.Ia;ha++){eo(this,ha,
0);fo(this,ha,0,0)}Ta=bo(this);if(Ta<gb){gb=Ta;ob=co(this)}for(ha=this.Ia;ha>=0;ha--){eo(this,ha,0);fo(this,ha,0,0)}Ta=bo(this);if(Ta<gb){gb=Ta;ob=co(this)}}ho(this,ob);var Ba,xb,ic,ud,vd;switch(this.Ll){case io:break;case jo:for(ud=gb+1;(vd=bo(this))<ud;){ud=vd;for(xb=this.Ia;xb>=0;xb--)for(ic=0;ic<=xb;ic++){for(Ba=h;Ba;){Ba=o;for(ha=xb;ha>=ic;ha--)Ba=fo(this,ha,-1,-1)||Ba}Ta=bo(this);if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=xb;ha>=ic;ha--)Ba=fo(this,ha,1,1)||Ba}Ta=
bo(this);if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=ic;ha<=xb;ha++)Ba=fo(this,ha,1,1)||Ba}if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=ic;ha<=xb;ha++)Ba=fo(this,ha,-1,-1)||Ba}if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=xb;ha>=ic;ha--)Ba=fo(this,ha,0,0)||Ba}if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=ic;ha<=xb;ha++)Ba=fo(this,ha,0,0)||Ba}if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}}}break;default:case qn:xb=
this.Ia;ic=0;for(ud=gb+1;(vd=bo(this))<ud;){ud=vd;for(Ba=h;Ba;){Ba=o;for(ha=xb;ha>=ic;ha--)Ba=fo(this,ha,-1,-1)||Ba}Ta=bo(this);if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=xb;ha>=ic;ha--)Ba=fo(this,ha,1,1)||Ba}Ta=bo(this);if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=ic;ha<=xb;ha++)Ba=fo(this,ha,1,1)||Ba}if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=ic;ha<=xb;ha++)Ba=fo(this,ha,-1,-1)||Ba}if(Ta>=gb)ho(this,ob);else{gb=Ta;
ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=xb;ha>=ic;ha--)Ba=fo(this,ha,0,0)||Ba}if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=ic;ha<=xb;ha++)Ba=fo(this,ha,0,0)||Ba}if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}}}ho(this,ob);var Qa,Sb,df=(this.zh&ko)!==0,Kf=this.zh===rn;this.p.Kb.count>1E3&&!Kf&&(df=o);if(df){var Ca=[],ia;for(ia=0;ia<=this.Ia;ia++)Ca[ia]=0;for(var ie=this.p.P.f,Id,Db;ie.next();){Id=ie.value;Qa=Id.s;Db=Id.K;var wd=Un(this,Id,o);Ca[Qa]=Math.max(Ca[Qa],Db+wd)}for(ie.reset();ie.next();){Id=
ie.value;Qa=Id.s;Db=Id.K;Id.K=((this.Ya-Ca[Qa])*8>>1)+Db*8}this.Ya=this.Ya*8}if((this.zh&lo)!==0)for(Sb=h;Sb;){Sb=o;for(Qa=this.te+1;Qa<=this.Ia;Qa++)Sb=mo(this,Qa,1)||Sb;for(Qa=this.te-1;Qa>=0;Qa--)Sb=mo(this,Qa,-1)||Sb;Sb=mo(this,this.te,0)||Sb}if((this.zh&no)!==0){for(Qa=this.te+1;Qa<=this.Ia;Qa++)oo(this,Qa,1);for(Qa=this.te-1;Qa>=0;Qa--)oo(this,Qa,-1);oo(this,this.te,0)}if(df){po(this,-1);po(this,1)}if((this.zh&lo)!==0)for(Sb=h;Sb;){Sb=o;Sb=mo(this,this.te,0)||Sb;for(Qa=this.te+1;Qa<=this.Ia;Qa++)Sb=
mo(this,Qa,0)||Sb;for(Qa=this.te-1;Qa>=0;Qa--)Sb=mo(this,Qa,0)||Sb}this.updateParts()}this.Bc=m;this.Ne=h};function qo(a){s&&u.c(a,Fm,Z,"linkMinLength:edge");for(var b=a.D,c=0,a=a.G.mb;a.next();)a.value.D===b&&c++;return c>1?2:1}function ro(a){s&&u.c(a,Fm,Z,"linkLengthWeight:edge");return 1}function so(a){s&&u.c(a,Fm,Z,"linkStraightenWeight:edge");var b=a.G.ya,a=a.D.ya;return b===m&&a===m?8:b===m||a===m?4:1}
function to(a,b,c){if(s){u.c(b,uo,Z,"nodeMinLayerSpace:v");u.e(c,"boolean",Z,"nodeMinLayerSpace:topleft")}return b.ya===m?0:a.O===90||a.O===270?c?b.z.y+10:b.A.height-b.z.y+10:c?b.z.x+10:b.A.width-b.z.x+10}
function Un(a,b,c){if(s){u.c(b,uo,Z,"nodeMinColumnSpace:v");u.e(c,"boolean",Z,"nodeMinColumnSpace:topleft")}if(b.ya===m)return 0;var d=c?b.tw:b.sw;if(d!==f)return d;d=a.O;return d===90||d===270?c?b.tw=b.z.x/a.Nc+1|0:b.sw=(b.A.width-b.z.x)/a.Nc+1|0:c?b.tw=b.z.y/a.Nc+1|0:b.sw=(b.A.height-b.z.y)/a.Nc+1|0}function co(a){if(a.Ok===m)a.Ok=[];for(var b=0,c=a.p.P.f,d;c.next();){d=c.value;a.Ok[b]=d.s;b++;a.Ok[b]=d.K;b++;a.Ok[b]=d.T;b++}return a.Ok}
function ho(a,b){s&&u.c(b,Array,Z,"restoreLayout:layout");for(var c=0,d=a.p.P.f,e;d.next();){e=d.value;e.s=b[c];c++;e.K=b[c];c++;e.T=b[c];c++}}
function vo(a,b,c){if(s){u.i(b,Z,"crossingMatrix:unfixedLayer");u.i(c,Z,"crossingMatrix:direction")}var d=Jn(a,b),e=a.Pc[b];if(!a.ct)a.ct=[];for(var g=a.ct,i,j=0;j<e;j++){i=0;var k=d[j],l=k.mi,n,q;if(l!==m&&l.s===k.s){k=l.T;if(k>j)for(q=j+1;q<k;q++){n=d[q];(n.mi!==l||n.rk!==l.rk)&&i++}else for(q=j-1;q>k;q--){n=d[q];(n.mi!==l||n.rk!==l.rk)&&i++}}var p,t,w,A,F,H;if(c>=0){k=d[j].bf;for(l=0;l<k.count;l++){p=k.j[l];if(p.ka&&p.G.s!==b){n=p.G.T;q=p.ye;p=p.we;for(t=l+1;t<k.count;t++){w=k.j[t];if(w.ka&&w.G.s!==
b){A=w.G.T;F=w.ye;w=w.we;q<F&&(n>A||n===A&&p>w)&&i++;F<q&&(A>n||A===n&&w>p)&&i++}}}}}if(c<=0){k=d[j].re;for(l=0;l<k.count;l++){p=k.j[l];if(p.ka&&p.D.s!==b){n=p.D.T;q=p.ye;p=p.we;for(t=l+1;t<k.count;t++){w=k.j[t];if(w.ka&&w.D.s!==b){A=w.D.T;F=w.ye;w=w.we;p<w&&(n>A||n===A&&q>F)&&i++;w<p&&(A>n||A===n&&F>q)&&i++}}}}}g[j*e+j]=i;for(k=j+1;k<e;k++){var x=0,I=0;if(c>=0){i=d[j].bf;H=d[k].bf;for(l=0;l<i.count;l++){p=i.j[l];if(p.ka&&p.G.s!==b){n=p.G.T;p=p.we;for(t=0;t<H.count;t++){w=H.j[t];if(w.ka&&w.G.s!==
b){A=w.G.T;w=w.we;(n<A||n===A&&p<w)&&I++;(A<n||A===n&&w<p)&&x++}}}}}if(c<=0){i=d[j].re;H=d[k].re;for(l=0;l<i.count;l++){p=i.j[l];if(p.ka&&p.D.s!==b){n=p.D.T;q=p.ye;for(t=0;t<H.count;t++){w=H.j[t];if(w.ka&&w.D.s!==b){A=w.D.T;F=w.ye;(n<A||n===A&&q<F)&&I++;(A<n||A===n&&F<q)&&x++}}}}}g[j*e+k]=x;g[k*e+j]=I}}ao(a,b,d);return g}function bo(a){var b,c=0,d,e;for(b=0;b<=a.Ia;b++){d=vo(a,b,1);e=a.Pc[b];for(var g=0;g<e;g++)for(var i=g;i<e;i++)c=c+d[g*e+i]}return c}
function wo(a){s&&u.e(h,"boolean",Z,"countBends:weighted");for(var b=0,c=0;c<=a.Ia;c++){var d=a,e=c;if(s){u.i(e,Z,"bends:unfixedLayer");u.i(1,Z,"bends:direction");u.e(h,"boolean",Z,"bends:weighted")}for(var g=Jn(d,e),i=d.Pc[e],j=0,k=f,k=0;k<i;k++){var l=g[k].re,n,q,p;if(typeof l!=="undefined")for(var t=0;t<l.count;t++){n=l.j[t];if(n.ka&&n.D.s!==e){q=n.G.K+n.ve;p=n.D.K+n.Td;j=j+(Math.abs(q-p)+1)*so(n)}}}ao(d,e,g);b=b+j}return b}
Z.prototype.normalize=function(){var a=Infinity;this.Ya=-1;for(var b=this.p.P.f,c;b.next();){c=b.value;a=Math.min(a,c.K-Un(this,c,h));this.Ya=Math.max(this.Ya,c.K+Un(this,c,o))}for(b.reset();b.next();)b.value.K=b.value.K-a;this.Ya=this.Ya-a};
function xo(a,b,c){if(s){u.i(b,Z,"barycenters:unfixedLayer");u.i(c,Z,"barycenters:direction")}var d=Jn(a,b),e=a.Pc[b],g=[],i;for(i=0;i<e;i++){var j=d[i],k=m;if(c<=0)k=j.bf;var l=m;if(c>=0)l=j.re;var n=0,q=0,p=j.mi;if(p!==m&&p.s===j.s){n=n+(p.K-1);q++}if(k!==m)for(p=0;p<k.count;p++){var j=k.j[p],t=j.G;if(j.ka&&!j.cb&&t.s!==b){n=n+(t.K+j.ve);q++}}if(l!==m)for(k=0;k<l.count;k++){j=l.j[k];p=j.D;if(j.ka&&!j.cb&&p.s!==b){n=n+(p.K+j.Td);q++}}g[i]=q===0?-1:n/q}ao(a,b,d);return g}
function yo(a,b,c){if(s){u.i(b,Z,"medians:unfixedLayer");u.i(c,Z,"medians:direction")}for(var d=Jn(a,b),e=a.Pc[b],g=[],i=0;i<e;i++){var j=d[i],k=m;if(c<=0)k=j.bf;var l=m;if(c>=0)l=j.re;var n=0,q=[],p=j.mi;if(p!==m&&p.s===j.s){q[n]=p.K-1;n++}if(k!==m)for(p=0;p<k.count;p++){var j=k.j[p],t=j.G;if(j.ka&&!j.cb&&t.s!==b){q[n]=t.K+j.ve;n++}}if(l!==m)for(k=0;k<l.count;k++){j=l.j[k];p=j.D;if(j.ka&&!j.cb&&p.s!==b){q[n]=p.K+j.Td;n++}}if(n===0)g[i]=-1;else{q.sort(function(a,b){return a-b});l=n>>1;g[i]=n&1?q[l]:
q[l-1]+q[l]>>1}}ao(a,b,d);return g}function zo(a,b,c,d,e,g){if(s){u.c(b,uo,Z,"tightComponentUnset:v");u.i(c,Z,"tightComponentUnset:component");u.i(d,Z,"tightComponentUnset:unset");u.e(e,"boolean",Z,"tightComponentUnset:forward");u.e(g,"boolean",Z,"tightComponentUnset:backward")}if(b.ob===d){b.ob=c;var i,j;if(e)for(var k=b.mb;k.next();){var l=k.value.D;i=b.s-l.s;j=qo(k.value);i===j&&zo(a,l,c,d,e,g)}if(g)for(k=b.nb;k.next();){l=k.value.G;i=l.s-b.s;j=qo(k.value);i===j&&zo(a,l,c,d,e,g)}}}
function Ao(a,b,c,d,e,g){if(s){u.c(b,uo,Z,"componentUnset:v");u.i(c,Z,"componentUnset:component");u.i(d,Z,"componentUnset:unset");u.e(e,"boolean",Z,"componentUnset:forward");u.e(g,"boolean",Z,"componentUnset:backward")}if(b.ob===d){b.ob=c;if(e)for(var i=b.mb,j;i.next();){j=i.value.D;Ao(a,j,c,d,e,g)}if(g)for(b=b.nb;b.next();){i=b.value.G;Ao(a,i,c,d,e,g)}}}function un(a){s&&u.c(a,Am,Z,"greedyCycleRemovalFindNode:network");for(a=a.P.f;a.next();){var b=a.value;if(b.ka)return b}return m}
function vn(a){s&&u.c(a,Am,Z,"greedyCycleRemovalFindSink:network");for(a=a.P.f;a.next();){var b=a.value;if(b.ka){for(var c=h,d=b.mb;d.next();)if(d.value.D.ka){c=o;break}if(c)return b}}return m}function wn(a){s&&u.c(a,Am,Z,"greedyCycleRemovalFindSource:network");for(a=a.P.f;a.next();){var b=a.value;if(b.ka){for(var c=h,d=b.nb;d.next();)if(d.value.G.ka){c=o;break}if(c)return b}}return m}
function xn(a,b){s&&u.c(b,uo,Z,"depthFirstSearchCycleRemovalVisit:v");b.lj=a.Jp;a.Jp++;for(var c=b.mb;c.next();){var d=c.value,e=d.D;if(e.lj===-1){d.Jo=h;xn(a,e)}}b.bm=a.Jp;a.Jp++}function zn(a){for(var b=a.p.P.f;b.next();){var c=Bo(a,b.value);a.Ia=Math.max(c,a.Ia)}}function Bo(a,b){s&&u.c(b,uo,Z,"longestPathSinkLayeringLength:v");var c=0;if(b.s===-1){for(var d=b.mb;d.next();)var e=d.value,g=qo(e),c=Math.max(c,Bo(a,e.D)+g);b.s=c}else c=b.s;return c}
function Bn(a,b){s&&u.c(b,uo,Z,"longestPathSourceLayeringLength:v");var c=0;if(b.s===-1){for(var d,e,g=b.nb;g.next();){e=g.value;d=qo(e);c=Math.max(c,Bn(a,e.G)+d)}b.s=c}else c=b.s;return c}
function Cn(a,b){s&&u.c(b,uo,Z,"optimalLinkLengthLayeringDepthFirstSearch:v");if(!b.ka){b.ka=h;for(var c=b.mb;c.next();)Cn(a,c.value.D);s&&u.c(b,uo,Z,"optimalLinkLengthLayeringPull:v");for(c=a.p.P.f;c.next();)c.value.ob=-1;for(var d=b.nb;d.next();){var e=d.value,g=qo(e);e.G.s-e.D.s>g&&zo(a,e.G,0,-1,h,o)}for(zo(a,b,1,-1,h,h);b.ob!==0;){for(var g=0,d=Infinity,i=0,j=m,k=a.p.P.f;k.next();){var l=k.value;if(l.ob===1){for(var n=0,q=o,p=l.nb;p.next();){var e=p.value,t=e.G,n=n+ro(e);if(t.ob!==1){g=g+ro(e);
t=t.s-l.s;e=qo(e);d=Math.min(d,t-e)}}for(e=l.mb;e.next();){p=e.value;t=p.D;n=n-ro(p);t.ob!==1?g=g-ro(p):q=h}if((j===m||n<i)&&!q){j=l;i=n}}}if(g>0){for(c.reset();c.next();){g=c.value;if(g.ob===1)g.s=g.s+d}b.ob=0}else j.ob=0}s&&u.c(b,uo,Z,"optimalLinkLengthLayeringPush:v");for(c=a.p.P.f;c.next();)c.value.ob=-1;for(zo(a,b,1,-1,h,o);b.ob!==0;){g=0;d=Infinity;i=0;j=m;for(k=a.p.P.f;k.next();){l=k.value;if(l.ob===1){n=0;q=o;for(e=l.nb;e.next();){p=e.value.G;n=n+ro(e.value);p.ob!==1?g=g+ro(e.value):q=h}for(e=
k.value.mb;e.next();){p=e.value;t=p.D;n=n-ro(p);if(t.ob!==1){g=g-ro(p);t=l.s-t.s;p=qo(p);d=Math.min(d,t-p)}}if((j===m||n>i)&&!q){j=l;i=n}}}if(g<0){for(c.reset();c.next();){g=c.value;if(g.ob===1)g.s=g.s-d}b.ob=0}else j.ob=0}}}function En(a,b,c){if(s){u.c(b,Dn,Z,"_oppositeSpotDir:edge");u.e(c,"boolean",Z,"_oppositeSpotDir:from")}return a.O===90?c&&!b.cb||!c&&b.cb?Xb:ec:a.O===180?c&&!b.cb||!c&&b.cb?oc:nc:a.O===270?c&&!b.cb||!c&&b.cb?ec:Xb:c&&!b.cb||!c&&b.cb?nc:oc}
function Gn(a,b){s&&u.c(b,uo,Z,"depthFirstOutInitializeIndicesVisit:v");var c=b.s;b.T=a.Pc[c];a.Pc[c]++;for(var c=b.re.xf(),d=h,e;d;){d=o;for(e=0;e<c.length-1;e++){var g=c[e],i=c[e+1];if(g.ve>i.ve){d=h;c[e]=i;c[e+1]=g}}}for(e=0;e<c.length;e++){d=c[e];if(d.ka){d=d.D;d.T===-1&&Gn(a,d)}}}
function In(a,b){s&&u.c(b,uo,Z,"depthFirstInInitializeIndicesVisit:v");var c=b.s;b.T=a.Pc[c];a.Pc[c]++;for(var c=b.bf.xf(),d=h,e;d;){d=o;for(e=0;e<c.length-1;e++){var g=c[e],i=c[e+1];if(g.Td>i.Td){d=h;c[e]=i;c[e+1]=g}}}for(e=0;e<c.length;e++){d=c[e];if(d.ka){d=d.G;d.T===-1&&In(a,d)}}}
function eo(a,b,c){if(s){u.i(b,Z,"medianBarycenterCrossingReduction:unfixedLayer");u.i(c,Z,"medianBarycenterCrossingReduction:direction")}for(var d=Jn(a,b),e=a.Pc[b],g=yo(a,b,c),i=xo(a,b,c),c=0;c<e;c++){if(i[c]===-1)i[c]=d[c].K;if(g[c]===-1)g[c]=d[c].K}for(var j=h,k;j;){j=o;for(c=0;c<e-1;c++)if(g[c+1]<g[c]||g[c+1]===g[c]&&i[c+1]<i[c]){j=h;k=g[c];g[c]=g[c+1];g[c+1]=k;k=i[c];i[c]=i[c+1];i[c+1]=k;k=d[c];d[c]=d[c+1];d[c+1]=k}}for(c=g=0;c<e;c++){k=d[c];k.T=c;g=g+Un(a,k,h);k.K=g;g=g+1;g=g+Un(a,k,o)}ao(a,
b,d)}
function fo(a,b,c,d){if(s){u.i(b,Z,"adjacentExchangeCrossingReductionBendStraighten:unfixedLayer");u.i(c,Z,"adjacentExchangeCrossingReductionBendStraighten:directionCR");u.e(o,"boolean",Z,"adjacentExchangeCrossingReductionBendStraighten:straighten");u.i(d,Z,"adjacentExchangeCrossingReductionBendStraighten:directionBS")}var d=Jn(a,b),e=a.Pc[b],c=vo(a,b,c),g,i;i=[];for(g=0;g<e;g++)i[g]=-1;var j;j=[];for(g=0;g<e;g++)j[g]=-1;for(var k=o,l=h;l;){l=o;for(g=0;g<e-1;g++){var n=c[d[g].T*e+d[g+1].T],q=c[d[g+
1].T*e+d[g].T],p=0,t=0,w=d[g].K,A=d[g+1].K,F=Un(a,d[g],h),H=Un(a,d[g],o),x=Un(a,d[g+1],h),I=Un(a,d[g+1],o),F=w-F+x,H=A-H+I,y=d[g].nb.f;for(y.reset();y.next();){I=y.value;if(I.ka&&I.G.s===b){I=I.G;for(x=0;d[x]!==I;)x++;if(x<g){p=p+2*(g-x);t=t+2*(g+1-x)}x===g+1&&(p=p+1);if(x>g+1){p=p+4*(x-g);t=t+4*(x-(g+1))}}}y=d[g].mb.f;for(y.reset();y.next();){I=y.value;if(I.ka&&I.D.s===b){I=I.D;for(x=0;d[x]!==I;)x++;x===g+1&&(t=t+1)}}y=d[g+1].nb.f;for(y.reset();y.next();){I=y.value;if(I.ka&&I.G.s===b){I=I.G;for(x=
0;d[x]!==I;)x++;if(x<g){p=p+2*(g+1-x);t=t+2*(g-x)}x===g&&(t=t+1);if(x>g+1){p=p+4*(x-(g+1));t=t+4*(x-g)}}}y=d[g+1].mb.f;for(y.reset();y.next();){I=y.value;if(I.ka&&I.D.s===b){I=I.D;for(x=0;d[x]!==I;)x++;x===g&&(p=p+1)}}var x=I=0,y=i[d[g].T],G=j[d[g].T],fa=i[d[g+1].T],R=j[d[g+1].T];if(y!==-1){I=I+Math.abs(y-w);x=x+Math.abs(y-H)}if(G!==-1){I=I+Math.abs(G-w);x=x+Math.abs(G-H)}if(fa!==-1){I=I+Math.abs(fa-A);x=x+Math.abs(fa-F)}if(R!==-1){I=I+Math.abs(R-A);x=x+Math.abs(R-F)}if(t<p-0.5||t===p&&q<n-0.5||t===
p&&q===n&&x<I-0.5){l=k=h;d[g].K=H;d[g+1].K=F;n=d[g];d[g]=d[g+1];d[g+1]=n}}}for(g=0;g<e;g++)d[g].T=g;ao(a,b,d);return k}function mo(a,b,c){if(s){u.i(b,Z,"bendStraighten:unfixedLayer");u.i(c,Z,"bendStraighten:direction")}for(var d=o;Co(a,b,c);)d=h;return d}
function Co(a,b,c){if(s){u.i(b,Z,"shiftbendStraighten:unfixedLayer");u.i(c,Z,"shiftbendStraighten:direction")}var d,e=Jn(a,b),g=a.Pc[b],i=xo(a,b,-1);if(c>0)for(d=0;d<g;d++)i[d]=-1;var j=xo(a,b,1);if(c<0)for(d=0;d<g;d++)j[d]=-1;for(var k=o,l=h;l;){l=o;for(d=0;d<g;d++){var n=e[d].K,q=Un(a,e[d],h),p=Un(a,e[d],o),q=d-1<0||n-e[d-1].K-1>q+Un(a,e[d-1],o)?n-1:n,p=d+1>=g||e[d+1].K-n-1>p+Un(a,e[d+1],h)?n+1:n,t=0,w=0,A=0,F,H,x,I;if(c<=0)for(var y=e[d].nb.f;y.next();){F=y.value;if(F.ka&&F.G.s!==b){H=so(F);x=
F.ve;I=F.Td;F=F.G.K;t=t+(Math.abs(n+I-(F+x))+1)*H;w=w+(Math.abs(q+I-(F+x))+1)*H;A=A+(Math.abs(p+I-(F+x))+1)*H}}if(c>=0)for(y=e[d].mb.f;y.next();){F=y.value;if(F.ka&&F.D.s!==b){H=so(F);x=F.ve;I=F.Td;F=F.D.K;t=t+(Math.abs(n+x-(F+I))+1)*H;w=w+(Math.abs(q+x-(F+I))+1)*H;A=A+(Math.abs(p+x-(F+I))+1)*H}}I=x=H=0;F=i[e[d].T];y=j[e[d].T];if(F!==-1){H=H+Math.abs(F-n);x=x+Math.abs(F-q);I=I+Math.abs(F-p)}if(y!==-1){H=H+Math.abs(y-n);x=x+Math.abs(y-q);I=I+Math.abs(y-p)}if(w<t||w===t&&x<H){l=k=h;e[d].K=q}if(A<t||
A===t&&I<H){l=k=h;e[d].K=p}}}ao(a,b,e);a.normalize();return k}
function oo(a,b,c){if(s){u.i(b,Z,"medianStraighten:unfixedLayer");u.i(c,Z,"medianStraighten:direction")}for(var d=Jn(a,b),e=a.Pc[b],g=yo(a,b,c),i=[],c=0;c<e;c++)i[c]=g[c];for(g=h;g;){g=o;for(c=0;c<e;c++){var j=d[c].K,k=Un(a,d[c],h),l=Un(a,d[c],o),n=0,q;if(i[c]===-1)if(c===0&&c===e-1)n=j;else if(c===0){q=d[c+1].K;n=q-j===l+Un(a,d[c+1],h)?j-1:j}else if(c===e-1){q=d[c-1].K;n=j-q===k+Un(a,d[c-1],o)?j+1:j}else{q=d[c-1].K;k=q+Un(a,d[c-1],o)+k+1;q=d[c+1].K;l=q-Un(a,d[c+1],h)-l-1;n=(k+l)/2|0}else if(c===
0&&c===e-1)n=i[c];else if(c===0){q=d[c+1].K;l=q-Un(a,d[c+1],h)-l-1;n=Math.min(i[c],l)}else if(c===e-1){q=d[c-1].K;k=q+Un(a,d[c-1],o)+k+1;n=Math.max(i[c],k)}else{q=d[c-1].K;k=q+Un(a,d[c-1],o)+k+1;q=d[c+1].K;l=q-Un(a,d[c+1],h)-l-1;k<i[c]&&i[c]<l?n=i[c]:k>=i[c]?n=k:l<=i[c]&&(n=l)}if(n!==j){g=h;d[c].K=n}}}ao(a,b,d);a.normalize()}
function Do(a,b){if(s){u.i(b,Z,"packAux:column");u.i(1,Z,"packAux:direction")}for(var c=h,d=a.p.P.f,e;d.next();){e=d.value;var g=Un(a,e,h),i=Un(a,e,o);if(e.K-g<=b&&e.K+i>=b){c=o;break}}g=o;if(c)for(d.reset();d.next();){e=d.value;if(e.K>b){e.K=e.K-1;g=h}}return g}
function Eo(a,b){if(s){u.i(b,Z,"tightPackAux:column");u.i(1,Z,"tightPackAux:direction")}var c=b,c=b+1,d,e=[],g=[];for(d=0;d<=a.Ia;d++){e[d]=o;g[d]=o}for(var i=a.p.P.f;i.next();){d=i.value;var j=d.K-Un(a,d,h),k=d.K+Un(a,d,o);j<=b&&k>=b&&(e[d.s]=h);j<=c&&k>=c&&(g[d.s]=h)}j=h;c=o;for(d=0;d<=a.Ia;d++)j=j&&!(e[d]&&g[d]);if(j)for(i.reset();i.next();){d=i.value;if(d.K>b){d.K=d.K-1;c=h}}return c}
function po(a,b){s&&u.i(b,Z,"componentPack:direction");for(var c=0;c<=a.Ya;c++)for(;Do(a,c););a.normalize();for(c=0;c<a.Ya;c++)for(;Eo(a,c););a.normalize();var d,e,g,i;if(b>0)for(c=0;c<=a.Ya;c++){d=co(a);e=wo(a);for(g=e+1;e<g;){g=e;Fo(a,c,1);i=wo(a);if(i>e)ho(a,d);else if(i<e){e=i;d=co(a)}}}if(b<0)for(c=a.Ya;c>=0;c--){d=co(a);e=wo(a);for(g=e+1;e<g;){g=e;Fo(a,c,-1);i=wo(a);if(i>e)ho(a,d);else if(i<e){e=i;d=co(a)}}}a.normalize()}
function Fo(a,b,c){if(s){u.i(b,Z,"componentPackAux:column");u.i(c,Z,"componentPackAux:direction")}a.af=0;for(var d=a.p.P.f,e;d.next();)d.value.ob=-1;if(c>0)for(d.reset();d.next();){e=d.value;if(e.K-Un(a,e,h)<=b)e.ob=a.af}if(c<0)for(d.reset();d.next();){e=d.value;if(e.K+Un(a,e,o)>=b)e.ob=a.af}a.af++;for(d.reset();d.next();){e=d.value;if(e.ob===-1){Ao(a,e,a.af,-1,h,h);a.af++}}b=[];for(e=0;e<a.af*a.af;e++)b[e]=o;var g=[];for(e=0;e<(a.Ia+1)*(a.Ya+1);e++)g[e]=-1;for(d.reset();d.next();){e=d.value;for(var i=
e.s,j=Math.max(0,e.K-Un(a,e,h)),k=Math.min(a.Ya,e.K+Un(a,e,o));j<=k;j++)g[i*(a.Ya+1)+j]=e.ob}for(e=0;e<=a.Ia;e++){if(c>0)for(j=0;j<a.Ya;j++)g[e*(a.Ya+1)+j]!==-1&&(g[e*(a.Ya+1)+j+1]!==-1&&g[e*(a.Ya+1)+j]!==g[e*(a.Ya+1)+j+1])&&(b[g[e*(a.Ya+1)+j]*a.af+g[e*(a.Ya+1)+j+1]]=h);if(c<0)for(j=a.Ya;j>0;j--)g[e*(a.Ya+1)+j]!==-1&&(g[e*(a.Ya+1)+j-1]!==-1&&g[e*(a.Ya+1)+j]!==g[e*(a.Ya+1)+j-1])&&(b[g[e*(a.Ya+1)+j]*a.af+g[e*(a.Ya+1)+j-1]]=h)}g=[];for(e=0;e<a.af;e++)g[e]=h;i=new z("number");for(i.add(0);i.count!==0;){k=
i.j[i.count-1];i.Se(i.count-1);if(g[k]){g[k]=o;for(e=0;e<a.af;e++)b[k*a.af+e]&&i.dc(0,e)}}if(c>0)for(d.reset();d.next();){e=d.value;if(g[e.ob])e.K=e.K-1}if(c<0)for(d.reset();d.next();){e=d.value;if(g[e.ob])e.K=e.K+1}}Z.prototype.commitLayout=Z.prototype.au=function(){if(this.Al){var a,b;if(this.O===270){a=mc;b=pc}else if(this.O===90){a=pc;b=mc}else if(this.O===180){a=nc;b=oc}else{a=oc;b=nc}for(var c=this.p.Kb.f,d;c.next();){d=c.value.Ba;if(d!==m){d.Va=a;d.Xa=b}}}this.commitNodes();this.commitLinks()};
Z.prototype.commitNodes=Z.prototype.zx=function(){this.vg=[];this.Kf=[];this.se=[];this.Qc=[];for(var a=0;a<=this.Ia;a++){this.vg[a]=0;this.Kf[a]=0;this.se[a]=0;this.Qc[a]=0}for(var a=this.p.P.f,b,c;a.next();){b=a.value;c=b.s;this.vg[c]=Math.max(this.vg[c],to(this,b,h));this.Kf[c]=Math.max(this.Kf[c],to(this,b,o))}b=0;for(var d=this.dd,e=0;e<=this.Ia;e++){c=d;this.vg[e]+this.Kf[e]<=0&&(c=0);e>0&&(b=b+c/2);if(this.O===90||this.O===0){b=b+this.Kf[e];this.se[e]=b;b=b+this.vg[e]}else{b=b+this.vg[e];this.se[e]=
b;b=b+this.Kf[e]}e<this.Ia&&(b=b+c/2);this.Qc[e]=b}d=this.Kc.copy();for(e=0;e<=this.Ia;e++)if(this.O===270){this.se[e]=d.y+this.se[e];this.Qc[e]=d.y+this.Qc[e]}else if(this.O===90){this.se[e]=d.y+b-this.se[e];this.Qc[e]=d.y+b-this.Qc[e]}else if(this.O===180){this.se[e]=d.x+this.se[e];this.Qc[e]=d.x+this.Qc[e]}else{this.se[e]=d.x+b-this.se[e];this.Qc[e]=d.x+b-this.Qc[e]}for(a.reset();a.next();){b=a.value;c=b.s;var g=b.K|0;if(this.O===270||this.O===90){e=d.x+this.Nc*g;c=this.se[c]}else{e=this.se[c];
c=d.y+this.Nc*g}b.za=e;b.Aa=c;b.Lh()}};
Z.prototype.commitLinks=Z.prototype.yx=function(){for(var a=this.p.Kb.f,b,c;a.next();){c=a.value.Ba;if(typeof c!=="undefined"&&c!==m){c.ik();c.Xm();c.Mh()}}for(a.reset();a.next();){c=a.value.Ba;typeof c!=="undefined"&&c!==m&&Jl(c)}for(a.reset();a.next();){b=a.value;c=b.Ba;if(!(typeof c==="undefined"&&c===m)){c.ik();var d=b.G.ya,e=b.D.ya,g=c,i=g.zc;if(typeof d==="Group"&&d!==g.ca)i=d.port;var j=g.ld;if(typeof e==="Group"&&e!==g.ea)j=e.port;if(b.ka){if(c.Ie===Gj&&c.Y===4){if(b.cb){g=d;d=e;e=g;g=i;i=
j;j=g}var k,l,n,q;if(b.G.K===b.D.K){k=c.Ld(d,i,Pl(c),h,o,e,j).copy();l=c.Ld(e,j,Ql(c),o,o,d,i).copy();n=new E((2*k.x+l.x)/3,(2*k.y+l.y)/3);q=new E((k.x+2*l.x)/3,(k.y+2*l.y)/3);c.Xm();c.Vc(k);c.Vc(n);c.Vc(q);c.Vc(l)}else{g=b=o;i!==m&&Pl(c)===Tb&&(b=h);j!==m&&Ql(c)===Tb&&(g=h);if(b||g){k=c.h(0).copy();n=c.h(1).copy();q=c.h(2).copy();l=c.h(3).copy()}if(b){if(this.O===90||this.O===270){n.x=k.x;n.y=(k.y+l.y)/2}else{n.x=(k.x+l.x)/2;n.y=k.y}c.w(1,n);c.w(0,c.Ld(d,i,Pl(c),h,o,e,j).copy())}if(g){if(this.O===
90||this.O===270){q.x=l.x;q.y=(k.y+l.y)/2}else{q.x=(k.x+l.x)/2;q.y=l.y}c.w(2,q);c.w(3,c.Ld(e,j,Ql(c),o,o,d,i).copy())}}}c.Mh()}else if(b.G.s===b.D.s)c.Mh();else{var p=o,t=o,w,A=c.ru+1;if(ug(c)){t=h;w=c.Y;w>4&&c.hb.removeRange(2,w-3)}else if(c.Ie===Gj){p=h;w=c.Y;w>4&&c.hb.removeRange(2,w-3);A=2}else{w=c.Y;var F=Pl(c)===Tb,H=Ql(c)===Tb;w>2&&F&&H?c.hb.removeRange(1,w-2):w>3&&F&&!H?c.hb.removeRange(1,w-3):w>3&&!F&&H?c.hb.removeRange(2,w-2):w>4&&(!F&&!H)&&c.hb.removeRange(2,w-3)}w=b.G;var H=b.D,x;if(b.cb){for(;H!==
m&&w!==H;){x=F=m;for(var I=H.nb.f;I.next();){y=I.value;if(y.Ba===b.Ba){F=y.G;x=y.D;if(F.ya===m)break}}if(F!==w){y=c.h(A-1).copy();I=new E(F.za,F.Aa);if(t)if(this.O===180||this.O===0)if(A===2){c.q(A++,new E(y.x,y.y));c.q(A++,new E(y.x,I.y))}else{x=x!==m?new E(x.za,x.Aa):y.copy();if(x.y!==I.y){x=this.Qc[F.s-1];c.q(A++,new E(x,y.y));c.q(A++,new E(x,I.y))}}else if(A===2){c.q(A++,new E(y.x,y.y));c.q(A++,new E(I.x,y.y))}else{x=x!==m?new E(x.za,x.Aa):y.copy();if(x.x!==I.x){x=this.Qc[F.s-1];c.q(A++,new E(y.x,
x));c.q(A++,new E(I.x,x))}}else if(A===2)if(p){x=Math.max(10,this.vg[H.s]);G=Math.max(10,this.Kf[H.s]);if(this.O===180){H=H.A.x;c.q(A++,new E(H-x,I.y));c.q(A++,new E(H,I.y));c.q(A++,new E(H+G,I.y))}else if(this.O===90){H=H.A.y+H.A.height;c.q(A++,new E(I.x,H+G));c.q(A++,new E(I.x,H));c.q(A++,new E(I.x,H-x))}else if(this.O===270){H=H.A.y;c.q(A++,new E(I.x,H-x));c.q(A++,new E(I.x,H));c.q(A++,new E(I.x,H+G))}else{H=H.A.x+H.A.width;c.q(A++,new E(H+G,I.y));c.q(A++,new E(H,I.y));c.q(A++,new E(H-x,I.y))}}else{c.q(A++,
y);this.O===180||this.O===0?c.q(A++,new E(y.x,I.y)):c.q(A++,new E(I.x,y.y));c.q(A++,new E(I.x,I.y))}else{x=Math.max(10,this.vg[F.s]);G=Math.max(10,this.Kf[F.s]);if(this.O===180){p&&c.q(A++,new E(I.x-x,I.y));c.q(A++,I);p&&c.q(A++,new E(I.x+G,I.y))}else if(this.O===90){p&&c.q(A++,new E(I.x,I.y+G));c.q(A++,I);p&&c.q(A++,new E(I.x,I.y-x))}else if(this.O===270){p&&c.q(A++,new E(I.x,I.y-x));c.q(A++,I);p&&c.q(A++,new E(I.x,I.y+G))}else{p&&c.q(A++,new E(I.x+G,I.y));c.q(A++,I);p&&c.q(A++,new E(I.x-x,I.y))}}}H=
F}if(j===m||!Ql(c).u(Tb)){y=c.h(A-1).copy();I=c.h(A).copy();if(t){F=this.Kf[w.s];if(this.O===180||this.O===0){t=y.y;if(t>=w.A.y&&t<=w.A.bottom){H=w.za+F;t=t<w.A.y+w.A.height/2?w.A.y-this.Nc/2:w.A.bottom+this.Nc/2;c.q(A++,new E(H,y.y));c.q(A++,new E(H,t))}c.q(A++,new E(I.x,t))}else{t=y.x;if(t>=w.A.x&&t<=w.A.right){H=w.Aa+F;t=t<w.A.x+w.A.width/2?w.A.x-this.Nc/2:w.A.right+this.Nc/2;c.q(A++,new E(y.x,H));c.q(A++,new E(t,H))}c.q(A++,new E(t,I.y))}c.q(A++,I)}else if(p){x=Math.max(10,this.vg[w.s]);G=Math.max(10,
this.Kf[w.s]);if(this.O===180){H=w.A.x+w.A.width;c.w(A-2,new E(H,y.y));c.w(A-1,new E(H+G,y.y))}else if(this.O===90){H=w.A.y;c.w(A-2,new E(y.x,H));c.w(A-1,new E(y.x,H-x))}else if(this.O===270){H=w.A.y+w.A.height;c.w(A-2,new E(y.x,H));c.w(A-1,new E(y.x,H+G))}else{H=w.A.x;c.w(A-2,new E(H,y.y));c.w(A-1,new E(H-x,y.y))}}else{this.O===180||this.O===0?c.q(A++,new E(I.x,y.y)):c.q(A++,new E(y.x,I.y));c.q(A++,I)}}}else{for(;w!==m&&w!==H;){x=F=m;w=w.mb.f;for(var y;w.next();){y=w.value;if(y.Ba===b.Ba){F=y.D;
x=y.G;x.ya!==m&&(x=m);if(F.ya===m)break}}var G;if(F!==H){y=c.h(A-1).copy();I=new E(F.za,F.Aa);if(t)if(this.O===180||this.O===0){x=x!==m?new E(x.za,x.Aa):y.copy();if(x.y!==I.y){x=this.Qc[F.s];A===2&&(x=this.O===0?Math.max(x,y.x):Math.min(x,y.x));c.q(A++,new E(x,y.y));c.q(A++,new E(x,I.y))}}else{x=x!==m?new E(x.za,x.Aa):y.copy();if(x.x!==I.x){x=this.Qc[F.s];A===2&&(x=this.O===90?Math.max(x,y.y):Math.min(x,y.y));c.q(A++,new E(y.x,x));c.q(A++,new E(I.x,x))}}else{x=Math.max(10,this.vg[F.s]);G=Math.max(10,
this.Kf[F.s]);if(this.O===180){c.q(A++,new E(I.x+G,I.y));p&&c.q(A++,I);c.q(A++,new E(I.x-x,I.y))}else if(this.O===90){c.q(A++,new E(I.x,I.y-x));p&&c.q(A++,I);c.q(A++,new E(I.x,I.y+G))}else if(this.O===270){c.q(A++,new E(I.x,I.y+G));p&&c.q(A++,I);c.q(A++,new E(I.x,I.y-x))}else{c.q(A++,new E(I.x-x,I.y));p&&c.q(A++,I);c.q(A++,new E(I.x+G,I.y))}}}w=F}if(t){y=c.h(A-1).copy();I=c.h(A).copy();if(this.O===180||this.O===0){if(y.y!==I.y){x=this.O===0?Math.min(Math.max((I.x+y.x)/2,this.Qc[H.s]),I.x):Math.max(Math.min((I.x+
y.x)/2,this.Qc[H.s]),I.x);c.q(A++,new E(x,y.y));c.q(A++,new E(x,I.y))}}else if(y.x!==I.x){x=this.O===90?Math.min(Math.max((I.y+y.y)/2,this.Qc[H.s]),I.y):Math.max(Math.min((I.y+y.y)/2,this.Qc[H.s]),I.y);c.q(A++,new E(y.x,x));c.q(A++,new E(I.x,x))}}}if(g!==m&&p){if(i!==m){if(Pb(Pl(c))){g=c.h(0).copy();p=c.h(2).copy();g.u(p)||c.w(1,new E((g.x+p.x)/2,(g.y+p.y)/2))}c.w(0,c.Ld(d,i,Tb,h,o,e,j))}if(j!==m){if(Pb(Ql(c))){g=c.h(c.Y-1);p=c.h(c.Y-3);g.u(p)||c.w(c.Y-2,new E((g.x+p.x)/2,(g.y+p.y)/2))}c.w(c.Y-1,
c.Ld(e,j,Tb,o,o,d,i))}}c.Mh();b.Lh()}}}d=new z(W);for(a=this.p.Kb.f;a.next();){c=a.value.Ba;c!==m&&(ug(c)&&!d.contains(c))&&d.add(c)}if(d.count>0)if(this.O===90||this.O===270){s&&u.c(d,z,Z,"adjustOverlapsH:routables");a=0;c=new z(Go);for(k=d.f;k.next();){e=k.value;if(e!==m&&ug(e))for(d=2;d<e.Y-3;d++){i=e.h(d).copy();j=e.h(d+1).copy();if(Ho(i.y,j.y)&&!Ho(i.x,j.x)){l=new Go;l.s=Math.floor(i.y/2);n=e.h(0).copy();q=e.h(e.Y-1).copy();l.ac=n.x*n.x+n.y;l.Zc=q.x*q.x+q.y;l.rd=Math.min(i.x,j.x);l.Wc=Math.max(i.x,
j.x);l.T=d;l.Ba=e;if(d+2<e.Y){n=e.h(d-1).copy();q=e.h(d+2).copy();b=0;n.y<i.y?b=q.y<i.y?3:i.x<j.x?2:1:n.y>i.y&&(b=q.y>i.y?0:j.x<i.x?2:1);l.bh=b}c.add(l)}}}if(c.count>1){c.sort(this.UC);for(k=0;k<c.count;){d=c.j[k].s;for(l=k+1;l<c.count&&c.j[l].s===d;)l++;if(l-k>1)for(e=k;e<l;){d=c.j[e].Wc;for(n=k+1;n<l&&c.j[n].rd<d;){d=Math.max(d,c.j[n].Wc);n++}i=n-e;if(i>1){c.Nn(this.Ou,e,e+i);j=1;q=c.j[e].Zc;for(d=e;d<n;d++){b=c.j[d];if(b.Zc!==q){j++;q=b.Zc}}c.Nn(this.TC,e,e+i);p=1;q=c.j[e].ac;for(d=e;d<n;d++){b=
c.j[d];if(b.ac!==q){p++;q=b.ac}}if(j<p){g=o;p=j;q=c.j[e].Zc;c.Nn(this.Ou,e,e+i)}else{g=h;q=c.j[e].ac}A=0;for(d=e;d<n;d++){b=c.j[d];if((g?b.ac:b.Zc)!==q){A++;q=g?b.ac:b.Zc}e=b.Ba;i=e.h(b.T).copy();j=e.h(b.T+1).copy();t=4*(A-(p-1)/2);if(e.Te!==Hf||Io(i.x,i.y+t,j.x,j.y+t)){a++;e.ik();e.w(b.T,new E(i.x,i.y+t));e.w(b.T+1,new E(j.x,j.y+t));e.Mh()}}}e=n}k=l}}}else{s&&u.c(d,z,Z,"adjustOverlapsV:routables");a=0;c=new z(Go);for(k=d.f;k.next();){e=k.value;if(e!==m&&ug(e))for(d=2;d<e.Y-3;d++){i=e.h(d).copy();
j=e.h(d+1).copy();if(Ho(i.x,j.x)&&!Ho(i.y,j.y)){l=new Go;l.s=Math.floor(i.x/2);n=e.h(0).copy();q=e.h(e.Y-1).copy();l.ac=n.x+n.y*n.y;l.Zc=q.x+q.y*q.y;l.rd=Math.min(i.y,j.y);l.Wc=Math.max(i.y,j.y);l.T=d;l.Ba=e;if(d+2<e.Y){n=e.h(d-1).copy();q=e.h(d+2).copy();b=0;n.x<i.x?b=q.x<i.x?3:i.y<j.y?2:1:n.x>i.x&&(b=q.x>i.x?0:j.y<i.y?2:1);l.bh=b}c.add(l)}}}if(c.count>1){c.sort(this.UC);for(k=0;k<c.count;){d=c.j[k].s;for(l=k+1;l<c.count&&c.j[l].s===d;)l++;if(l-k>1)for(e=k;e<l;){d=c.j[e].Wc;for(n=k+1;n<l&&c.j[n].rd<
d;){d=Math.max(d,c.j[n].Wc);n++}i=n-e;if(i>1){c.Nn(this.Ou,e,e+i);j=1;q=c.j[e].Zc;for(d=e;d<n;d++){b=c.j[d];if(b.Zc!==q){j++;q=b.Zc}}c.Nn(this.TC,e,e+i);p=1;q=c.j[e].ac;for(d=e;d<n;d++){b=c.j[d];if(b.ac!==q){p++;q=b.ac}}if(j<p){g=o;p=j;q=c.j[e].Zc;c.Nn(this.Ou,e,e+i)}else{g=h;q=c.j[e].ac}A=0;for(d=e;d<n;d++){b=c.j[d];if((g?b.ac:b.Zc)!==q){A++;q=g?b.ac:b.Zc}e=b.Ba;i=e.h(b.T).copy();j=e.h(b.T+1).copy();t=4*(A-(p-1)/2);if(e.Te!==Hf||Io(i.x+t,i.y,j.x+t,j.y)){a++;e.ik();e.w(b.T,new E(i.x+t,i.y));e.w(b.T+
1,new E(j.x+t,j.y));e.Mh()}}}e=n}k=l}}}};function Go(){this.T=this.Wc=this.rd=this.Zc=this.ac=this.s=0;this.Ba=m;this.bh=0}u.jd(Go,{ra:h,ac:h,Zc:h,rd:h,Wc:h,index:h,link:h,bh:h});Z.prototype.UC=function(a,b){return!(a instanceof Go)||!(b instanceof Go)||a===b?0:a.s<b.s?-1:a.s>b.s?1:a.rd<b.rd?-1:a.rd>b.rd?1:a.Wc<b.Wc?-1:a.Wc>b.Wc?1:0};
Z.prototype.TC=function(a,b){return!(a instanceof Go)||!(b instanceof Go)||a===b?0:a.ac<b.ac?-1:a.ac>b.ac||a.bh<b.bh?1:a.bh>b.bh||a.rd<b.rd?-1:a.rd>b.rd?1:a.Wc<b.Wc?-1:a.Wc>b.Wc?1:0};Z.prototype.Ou=function(a,b){return!(a instanceof Go)||!(b instanceof Go)||a===b?0:a.Zc<b.Zc?-1:a.Zc>b.Zc||a.bh<b.bh?1:a.bh>b.bh||a.rd<b.rd?-1:a.rd>b.rd?1:a.Wc<b.Wc?-1:a.Wc>b.Wc?1:0};function Ho(a,b){if(s){u.i(a,Z,"isApprox:a");u.i(b,Z,"isApprox:b")}var c=a-b;return c>-1&&c<1}
function Io(a,b,c,d){if(s){u.i(a,Z,"isUnoccupied2:px");u.i(b,Z,"isUnoccupied2:py");u.i(c,Z,"isUnoccupied2:qx");u.i(d,Z,"isUnoccupied2:qy")}return h}function Jn(a,b){var c,d=a.Pc[b];if(d>=a.Pf.length){c=[];var e;for(e=0;e<a.Pf.length;e++)c[e]=a.Pf[e];a.Pf=c}if(typeof a.Pf[d]==="undefined"||a.Pf[d]===m)c=[];else{c=a.Pf[d];a.Pf[d]=m}var d=a.Kp[b],g;for(e=0;e<d.length;e++){g=d[e];g instanceof uo&&(c[g.T]=g)}return c}function ao(a,b,c){a.Pf[a.Pc[b]]=c}u.a(Z,"layerSpacing",Z.prototype.tr);
u.defineProperty(Z,{tr:"layerSpacing"},r("dd"),function(a){if(this.dd!==a&&typeof a==="number"&&a>=0){this.dd=a;this.r()}});u.a(Z,"columnSpacing",Z.prototype.OE);u.defineProperty(Z,{OE:"columnSpacing"},r("Nc"),function(a){if(this.Nc!==a&&typeof a==="number"&&a>=0){this.Nc=a;this.r()}});u.a(Z,"direction",Z.prototype.direction);u.defineProperty(Z,{direction:"direction"},r("O"),function(a){if(this.O!==a&&typeof a==="number"){this.O=a;this.r()}});u.a(Z,"cycleRemoveOption",Z.prototype.cB);
u.defineProperty(Z,{cB:"cycleRemoveOption"},r("Ul"),function(a){if(this.Ul!==a){s&&u.c(a,ja,sn,"cycleRemoveOption");if(a===tn||a===nn){this.Ul=a;this.r()}}});u.a(Z,"layeringOption",Z.prototype.aC);u.defineProperty(Z,{aC:"layeringOption"},r("lm"),function(a){if(this.lm!==a){s&&u.c(a,ja,sn,"layeringOption");if(a===on||a===yn||a===An){this.lm=a;this.r()}}});u.a(Z,"initializeOption",Z.prototype.RB);
u.defineProperty(Z,{RB:"initializeOption"},r("fm"),function(a){if(this.fm!==a){s&&u.c(a,ja,sn,"initializeOption");if(a===pn||a===Hn||a===Fn){this.fm=a;this.r()}}});u.a(Z,"iterations",Z.prototype.HF);u.defineProperty(Z,{HF:"iterations"},r("Jk"),function(a){s&&u.i(a,sn,"iterations");if(this.Jk!==a&&typeof a==="number"&&a>=0){this.Jk=a;this.r()}});u.a(Z,"aggressiveOption",Z.prototype.GA);
u.defineProperty(Z,{GA:"aggressiveOption"},r("Ll"),function(a){if(this.Ll!==a){s&&u.c(a,ja,sn,"cycleRemoveOption");if(a===io||a===qn||a===jo){this.Ll=a;this.r()}}});u.a(Z,"packOption",Z.prototype.YF);u.defineProperty(Z,{YF:"packOption"},r("zh"),function(a){if(this.zh!==a&&typeof a==="number"&&a>=0&&a<8){this.zh=a;this.r()}});u.a(Z,"setsPortSpots",Z.prototype.Al);u.defineProperty(Z,{Al:"setsPortSpots"},r("zg"),function(a){if(this.zg!==a&&typeof a==="boolean"){this.zg=a;this.r()}});
u.m(Z,{pJ:"maxLayer"},r("Ia"));u.m(Z,{nJ:"maxIndex"},r("Ss"));u.m(Z,{mJ:"maxColumn"},r("Ya"));u.m(Z,{vJ:"minIndexLayer"},r("Cp"));u.m(Z,{oJ:"maxIndexLayer"},r("te"));var nn;Z.CycleDepthFirst=nn=u.l(Z,"CycleDepthFirst",0);var tn;Z.CycleGreedy=tn=u.l(Z,"CycleGreedy",1);var on;Z.LayerOptimalLinkLength=on=u.l(Z,"LayerOptimalLinkLength",0);var yn;Z.LayerLongestPathSink=yn=u.l(Z,"LayerLongestPathSink",1);var An;Z.LayerLongestPathSource=An=u.l(Z,"LayerLongestPathSource",2);var pn;
Z.InitDepthFirstOut=pn=u.l(Z,"InitDepthFirstOut",0);var Hn;Z.InitDepthFirstIn=Hn=u.l(Z,"InitDepthFirstIn",1);var Fn;Z.InitNaive=Fn=u.l(Z,"InitNaive",2);var io;Z.AggressiveNone=io=u.l(Z,"AggressiveNone",0);var qn;Z.AggressiveLess=qn=u.l(Z,"AggressiveLess",1);var jo;Z.AggressiveMore=jo=u.l(Z,"AggressiveMore",2);Z.PackNone=0;var ko;Z.PackExpand=ko=1;var lo;Z.PackStraighten=lo=2;var no;Z.PackMedian=no=4;var rn;Z.PackAll=rn=7;function sn(){Am.call(this)}u.H("LayeredDigraphNetwork",sn);u.ma(sn,Am);
sn.prototype.createVertex=sn.prototype.Ci=function(){return new uo};sn.prototype.createEdge=sn.prototype.$m=function(){return new Dn};function uo(){Em.call(this);this.T=this.K=this.s=-1;this.ka=o;this.ob=this.bm=this.lj=NaN;this.mi=m;this.rk=0;this.sw=this.tw=f}u.H("LayeredDigraphVertex",uo);u.ma(uo,Em);u.a(uo,"layer",uo.prototype.ra);u.defineProperty(uo,{ra:"layer"},r("s"),ba("s"));u.a(uo,"column",uo.prototype.hd);u.defineProperty(uo,{hd:"column"},r("K"),ba("K"));u.a(uo,"index",uo.prototype.index);
u.defineProperty(uo,{index:"index"},r("T"),ba("T"));u.a(uo,"valid",uo.prototype.valid);u.defineProperty(uo,{valid:"valid"},r("ka"),ba("ka"));u.a(uo,"discover",uo.prototype.ZE);u.defineProperty(uo,{ZE:"discover"},r("lj"),ba("lj"));u.a(uo,"finish",uo.prototype.finish);u.defineProperty(uo,{finish:"finish"},r("bm"),ba("bm"));u.a(uo,"component",uo.prototype.PE);u.defineProperty(uo,{PE:"component"},r("ob"),ba("ob"));u.a(uo,"near",uo.prototype.VF);
u.defineProperty(uo,{VF:"near"},r("mi"),function(a){a!==m&&u.c(a,uo,uo,"layeredDigraphVertex");this.mi=a});function Dn(){Fm.call(this);this.Jo=this.cb=this.ka=o;this.ye=this.we=NaN;this.Td=this.NG=0}u.H("LayeredDigraphEdge",Dn);u.ma(Dn,Fm);u.a(Dn,"valid",Dn.prototype.valid);u.defineProperty(Dn,{valid:"valid"},r("ka"),ba("ka"));u.a(Dn,"rev",Dn.prototype.rev);u.defineProperty(Dn,{rev:"rev"},r("cb"),ba("cb"));u.a(Dn,"forest",Dn.prototype.kF);u.defineProperty(Dn,{kF:"forest"},r("Jo"),ba("Jo"));
u.a(Dn,"portFromPos",Dn.prototype.$F);u.defineProperty(Dn,{$F:"portFromPos"},r("we"),ba("we"));u.a(Dn,"portToPos",Dn.prototype.bG);u.defineProperty(Dn,{bG:"portToPos"},r("ye"),ba("ye"));u.a(Dn,"portFromColOffset",Dn.prototype.ZF);u.defineProperty(Dn,{ZF:"portFromColOffset"},r("ve"),ba("ve"));u.a(Dn,"portToColOffset",Dn.prototype.aG);u.defineProperty(Dn,{aG:"portToColOffset"},r("Td"),ba("Td"));
function Y(){Dh.call(this);this.kc=new z(U);this.$b=Jo;this.wq=Ko;this.uc=Lo;this.Ue=(new eb(10,10)).freeze();this.S=new $;this.R=new $}u.H("TreeLayout",Y);u.ma(Y,Dh);Y.prototype.cloneProtected=Y.prototype.eb=function(a){Dh.prototype.eb.call(this,a);a.$b=this.$b;a.wq=this.wq;a.uc=this.uc;a.Ue=this.Ue.B();Mo(a.S,this.S);Mo(a.R,this.R)};Y.prototype.createNetwork=Y.prototype.eu=function(){var a=new No;Bm(a,this);return a};
Y.prototype.makeNetwork=Y.prototype.OF=function(a){var b=this.createNetwork();if(a instanceof B){Oo(this,b,a.ek,h);Oo(this,b,a.links,h)}else a instanceof V?Oo(this,b,a.ec,o):a.f&&Oo(this,b,a.f,o);return b};
function Oo(a,b,c,d){for(c=c.f;c.next();){var e=c.value;if(e instanceof U&&e.Uq()&&e.gd!=="Comment"&&(!d||e.rr))e.Li||(e instanceof V&&e.qb===m?Oo(a,b,e.ec,o):b.Mm(e))}for(c.reset();c.next();){e=c.value;if(e instanceof W&&e.Uq()&&e.gd!=="Comment"&&(!d||e.rr)){var g=e.ca,a=e.ea;if(!(g===m||a===m||g===a)&&g.gd!=="Comment"&&a.gd!=="Comment"){g=b.ou(g);a=b.ou(a);g!==m&&a!==m&&b.rl(g,a,e)}}}}
Y.prototype.doLayout=Y.prototype.$q=function(a){if(this.Bc===m)this.Bc=this.makeNetwork(a);if(this.kc===m)this.kc=new z(U);if(this.Hd!==Po)this.Kc=Dm(this,this.Kc);if(this.p.P.count>0){this.p.iu();for(var b=this.p.P.f;b.next();){a=b.value;a.sj=o;a.Kk=0;a.bb=m;a.xb=[]}for(var c=this.kc.f;c.next();){b=c.value;a=this.p.be(b);a===m&&this.kc.remove(b)}if(this.kc.length===0){for(a=this.p.P.f;a.next();){b=a.value;switch(this.$b){case Jo:b.nb.count===0&&this.kc.add(b.ya);break;case Qo:b.mb.count===0&&this.kc.add(b.ya);
break;default:u.g("Unhandled path value "+this.$b.toString())}}if(this.kc.count===0){a=999999;b=m;for(c=this.p.P.f;c.next();){var d=c.value;switch(this.$b){case Jo:if(d.nb.count<a){a=d.nb.count;b=d}break;case Qo:if(d.mb.count<a){a=d.mb.count;b=d}break;default:u.g("Unhandled path value "+this.$b.toString())}}b!==m&&this.kc.add(b.ya)}}for(c=this.kc.f;c.next();){b=c.value;a=this.p.be(b);if(a!==m&&!a.sj){a.sj=h;Ro(this,a)}}for(a=this.kc.f;a.next();){b=this.p.be(a.value);So(this,b)}for(a=this.kc.f;a.next();){b=
this.p.be(a.value);To(this,b)}for(a=this.kc.f;a.next();)Uo(this,this.p.be(a.value));for(a=this.p.P.f;a.next();)this.AA(a.value);for(a=this.kc.f;a.next();)Vo(this,this.p.be(a.value));if(this.uc===Po)for(a=this.kc.f;a.next();){c=a.value;b=this.p.be(c);d=c.position;c=d.x;d=d.y;isFinite(c)||(c=0);isFinite(d)||(d=0);Wo(this,b,c,d)}else{d=this.Kc.copy();for(a=this.kc.f;a.next();){c=a.value;b=this.p.be(c);if(b!==m){Wo(this,b,d.x+b.qa.x,d.y+b.qa.y);switch(this.uc){case Lo:d.y=d.y+(b.Ca.height+this.Ue.height);
break;case Xo:d.x=d.x+(b.Ca.width+this.Ue.width);break;default:u.g("Unhandled arrangement value "+this.uc.toString())}}}d.freeze()}this.updateParts()}this.kc=this.Bc=m;this.Ne=h};
function Ro(a,b){s&&u.c(b,$,Y,"walkTree:v");if(b!==m){var c,d,e;switch(a.$b){case Jo:if(b.mb.count>0){c=new z($);for(d=b.YE;d.next();){e=d.value;Yo(a,b,e)&&c.add(e)}if(c.count>0)b.xb=c.xf()}break;case Qo:if(b.nb.count>0){c=new z($);for(d=b.vG;d.next();){e=d.value;Yo(a,b,e)&&c.add(e)}if(c.count>0)b.xb=c.xf()}break;default:u.g("Unhandled path value"+a.$b.toString())}d=b.xb;var g=d.length;for(c=0;c<g;c++){e=d[c];e.sj=h;e.Kk=b.Kk+1;e.bb=b;a.kc.remove(e.ya)}for(c=0;c<g;c++){e=d[c];Ro(a,e)}}}
function Yo(a,b,c){s&&u.c(b,$,Y,"walkOK:v");s&&u.c(c,$,Y,"walkOK:c");if(c.sj){var d;s&&u.c(c,$,Y,"isAncestor:a");s&&u.c(b,$,Y,"isAncestor:b");if(b===m)d=o;else{for(d=b.bb;d!==m&&d!==c;)d=d.bb;d=d===c}if(d||c.Kk>b.Kk)return o;a.removeChild(c.bb,c)}return h}
Y.prototype.removeChild=function(a,b){s&&u.c(a,$,Y,"removeChild:p");s&&u.c(b,$,Y,"removeChild:c");if(a!==m&&b!==m){var c=a.xb,d=0,e;for(e=0;e<c.length;e++)c[e]===b&&d++;if(d>0){var d=Array(c.length-d),g=0;for(e=0;e<c.length;e++)c[e]!==b&&(d[g++]=c[e]);a.xb=d}}};
function So(a,b){s&&u.c(b,$,Y,"initializeTree:v");if(b!==m){s&&u.c(b,$,Y,"initializeTreeVertexValues:v");var c=Zo(a,b);Mo(b,c);if(b.bb!==m&&b.bb.ja===$o){for(var c=b.Ka,d=b.bb.xb,e=0;e<d.length;){if(b===d[e])break;e++}e%2===0?e!==d.length-1&&(c=c===90?180:c===180?270:c===270?180:270):c=c===90?0:c===180?90:c===270?0:90;b.Ka=c}d=b.ya;if(d!==m){c=d.fa.width;d=d.fa.height;b.width=c;b.height=d;b.su=c/2;b.tu=d/2}b.sj=h;b.ja===$o&&ap(b);for(var c=0,d=b.dl,e=0,g=b.xb,i=g.length,j=0;j<i;j++){var k=g[j];So(a,
k);c=c+(k.ws+1);d=Math.max(d,k.Rs);e=Math.max(e,k.uh)}b.ws=c;b.Rs=d;b.uh=d>0?e+1:0}}function Zo(a,b){s&&u.c(b,$,Y,"mom:v");switch(a.wq){default:case Ko:return b.bb!==m?b.bb:a.S;case bp:return b.bb===m?a.S:b.bb.bb===m?a.R:b.bb;case cp:if(b.bb!==m)return b.bb.bb!==m?b.bb.bb:a.R;case dp:var c=h;if(b.dl===0)c=o;else for(var d=b.xb,e=d.length,g=0;g<e;g++)if(d[g].dl>0){c=o;break}return c&&b.bb!==m?a.R:b.bb!==m?b.bb:a.S}}
function To(a,b){s&&u.c(b,$,Y,"assignTree:v");if(b!==m){s&&u.c(b,$,Y,"assignTreeVertexValues:v");for(var c=b.xb,d=c.length,e=0;e<d;e++)To(a,c[e])}}function Uo(a,b){s&&u.c(b,$,Y,"sortTree:v");if(b!==m){b.ja!==$o&&ap(b);for(var c=b.xb,d=c.length,e=0;e<d;e++)Uo(a,c[e])}}
function ap(a){s&&u.c(a,$,Y,"sortTreeVertexChildren:v");switch(a.Sb){case ep:break;case fp:a.xb.reverse();break;case gp:a.xb.sort(a.Qb);break;case hp:a.xb.sort(a.Qb);a.xb.reverse();break;default:u.g("Unhandled sorting value "+a.Sb.toString())}}
Y.prototype.AA=function(a){s&&u.c(a,$,Y,"addComments:v");var b=a.Mb,c=a.bb,d=0,e=ip,e=o;if(c!==m){d=c.Mb;e=c.ja;e=jp(e)}var b=b===90||b===270,d=d===90||d===270,c=a.dl===0,g=new J,i=g.width,g=g.height,j=0,k=a.bd;if(a.ya!==m)for(var l=a.ya.vB();l.next();){var n=l.value;if(n.gd==="Comment"&&n.gb()){if(a.cd===m)a.cd=[];a.cd.push(n);n.Sh();n=n.fa;if(b&&!c||!e&&!d&&c||e&&d&&c){i=Math.max(i,n.width);g=g+(n.height+Math.abs(j))}else{i=i+(n.width+Math.abs(j));g=Math.max(g,n.height)}j=k}}if(a.cd!==m){if(b&&
!c||!e&&!d&&c||e&&d&&c){i=i+Math.abs(a.Pb);g=Math.max(0,g-a.height)}else{g=g+Math.abs(a.Pb);i=Math.max(0,i-a.width)}a.fb=new J(0,0,a.A.width+i,a.A.height+g)}};function jp(a){return a===kp||a===$o||a===lp||a===mp}function np(a){return a===kp||a===$o}function op(a){s&&u.c(a,$,Y,"isLeftSideBus:v");var b=a.bb;if(b!==m){var c=b.kb;if(jp(c)){if(np(c)){b=b.children;for(c=0;c<b.length;){if(a===b[c])break;c++}return c%2===0}if(c===lp)return h}}return o}
function Vo(a,b){s&&u.c(b,$,Y,"layoutTree:v");if(b!==m){var c=b.xb,d=c.length,e,g;for(g=0;g<d;g++){e=c[g];Vo(a,e)}switch(b.Cf){case pp:qp(a,b);break;case rp:if(b.ja===$o)qp(a,b);else{s&&u.c(b,$,Y,"layoutTreeBlock:v");if(b.dl===0){e=b.bb;c=o;d=0;g=ip;if(e!==m){d=e.Mb;g=e.ja;c=jp(g)}e=op(b);b.N=new E(0,0);b.Ca=new eb(b.width,b.height);b.qa=b.bb!==m&&b.cd!==m&&((d===180||d===270)&&!c||e)?d===180&&!c||(d===90||d===270)&&e?new E(b.width-b.z.x*2,0):new E(0,b.height-b.z.y*2):new E(0,0);b.op=m;b.bq=m}else{var i=
sp(b),c=i===90||i===270,j=0,k,l,n=b.xb,q=n.length;for(k=0;k<q;k++){l=n[k];j=Math.max(j,c?l.Ca.width:l.Ca.height)}var p=b.ja;e=p===tp;var t=p===up,w=jp(p),A=Math.max(0,b.zf),d=vp(b),F=b.Uc,H=wp(b),x=b.Ud,I=0;if(e||t||b.Jj||b.Kj&&b.uh===1)I=Math.max(0,b.Jc);e=b.width;g=b.height;var y=0,G=0,fa=0,R=m,S=m,da=new eb(0,0),ma=0,ua=0,sa=0,ib=0,db=0,$a=0;l=0;w&&!np(p)&&i>135&&n.reverse();if(np(p))if(q>1)for(k=0;k<q;k++)k%2===0&&k!==q-1?$a=Math.max($a,c?n[k].Ca.width:n[k].Ca.height):k%2!==0&&(l=Math.max(l,c?
n[k].Ca.width:n[k].Ca.height));else q===1&&($a=c?n[0].Ca.width:n[0].Ca.height);var Oa;if(w){switch(p){case kp:k=i<135?xp(b,n,$a,y,G):yp(b,n,$a,y,G);$a=k[0];y=k[1];G=k[2];break;case lp:for(k=0;k<q;k++){l=n[k];Oa=l.Ca;R=ib===0?0:x;if(c){l.N=new E(j-Oa.width,ua+R);y=Math.max(y,Oa.width);G=Math.max(G,ua+R+Oa.height);ua=ua+(R+Oa.height)}else{l.N=new E(ma+R,j-Oa.height);y=Math.max(y,ma+R+Oa.width);G=Math.max(G,Oa.height);ma=ma+(R+Oa.width)}ib++}break;case mp:for(k=0;k<q;k++){l=n[k];Oa=l.Ca;R=ib===0?0:x;
if(c){l.N=new E(F/2+b.z.x,ua+R);y=Math.max(y,Oa.width);G=Math.max(G,ua+R+Oa.height);ua=ua+(R+Oa.height)}else{l.N=new E(ma+R,F/2+b.z.y);y=Math.max(y,ma+R+Oa.width);G=Math.max(G,Oa.height);ma=ma+(R+Oa.width)}ib++}}R=[];S=[];if(c){R[0]=new E(0,0);R[1]=new E(0,G);S[0]=new E(y,0)}else{R[0]=new E(0,0);R[1]=new E(y,0);S[0]=new E(0,G)}S[1]=new E(y,G)}else for(var fb,Va=0;Va<q;Va++){l=n[Va];Oa=l.Ca;if(c){if(A>0&&ib>0&&ma+F+Oa.width>A){ma<j&&zp(b,p,j-ma,0,db,Va-1);sa++;ib=0;db=Va;fa=G;ma=0;ua=i>135?-G-x:G+
x}Ap(a,l,new E(0,ua));fb=0;if(ib===0){R=l.op;S=l.bq;da=Oa.copy();if(R===m||S===m||i!==sp(l)){R=[];S=[];R[0]=new E(0,0);R[1]=new E(0,da.height);S[0]=new E(da.width,0);S[1]=new E(da.width,da.height)}}else{k=Gp(b,l,R,S,da.width,da.height);fb=k[0];R=k[1];S=k[2];da.width=k[3];da.height=k[4];if(ma<Oa.width&&fb<0){Hp(b,-fb,0,db,Va-1);Ip(R,-fb,0);Ip(S,-fb,0);fb=0}}l.N=new E(fb,ua);y=Math.max(y,da.width);G=Math.max(G,fa+(sa===0?0:x)+Oa.height);ma=da.width}else{if(A>0&&ib>0&&ua+F+Oa.height>A){ua<j&&zp(b,p,
0,j-ua,db,Va-1);sa++;ib=0;db=Va;fa=y;ua=0;ma=i>135?-y-x:y+x}Ap(a,l,new E(ma,0));fb=0;if(ib===0){R=l.op;S=l.bq;da=Oa.copy();if(R===m||S===m||i!==sp(l)){R=[];S=[];R[0]=new E(0,0);R[1]=new E(da.width,0);S[0]=new E(0,da.height);S[1]=new E(da.width,da.height)}}else{k=Gp(b,l,R,S,da.width,da.height);fb=k[0];R=k[1];S=k[2];da.width=k[3];da.height=k[4];if(ua<Oa.height&&fb<0){Hp(b,0,-fb,db,Va-1);Ip(R,0,-fb);Ip(S,0,-fb);fb=0}}l.N=new E(ma,fb);G=Math.max(G,da.height);y=Math.max(y,fa+(sa===0?0:x)+Oa.width);ua=
da.height}ib++}if(sa>0)if(c){G=G+Math.max(0,d);ma<y&&zp(b,p,y-ma,0,db,q-1);if(I>0){t||Hp(b,I,0,0,q-1);y=y+I}}else{y=y+Math.max(0,d);ua<G&&zp(b,p,0,G-ua,db,q-1);if(I>0){t||Hp(b,0,I,0,q-1);G=G+I}}j=new E(0,0);switch(p){case Jp:c?j.x=j.x+(y/2-b.z.x-H/2):j.y=j.y+(G/2-b.z.y-H/2);break;case ip:if(sa>0)c?j.x=j.x+(y/2-b.z.x-H/2):j.y=j.y+(G/2-b.z.y-H/2);else if(c){k=n[0].N.x+n[0].qa.x;t=n[q-1].N.x+n[q-1].qa.x+n[q-1].z.x*2;j.x=j.x+((t+k)/2-b.z.x-H/2)}else{k=n[0].N.y+n[0].qa.y;t=n[q-1].N.y+n[q-1].qa.y+n[q-1].z.y*
2;j.y=j.y+((t+k)/2-b.z.y-H/2)}break;case tp:if(c){j.x=j.x-H;y=y+H}else{j.y=j.y-H;G=G+H}break;case up:if(c){j.x=j.x+(y-b.width+H);y=y+H}else{j.y=j.y+(G-b.height+H);G=G+H}break;case kp:c?j.x=q>1?j.x+($a+F/2-b.z.x):j.x+(n[0].z.x-b.z.x+n[0].qa.x):j.y=q>1?j.y+($a+F/2-b.z.y):j.y+(n[0].z.y-b.z.y+n[0].qa.y);break;case lp:c?j.x=j.x+(y+F/2-b.z.x):j.y=j.y+(G+F/2-b.z.y);break;case mp:break;default:u.g("Unhandled alignment value "+p.toString())}for(k=0;k<q;k++){l=n[k];l.N=c?new E(l.N.x+l.qa.x-j.x,l.N.y+(i>135?
(w?-G:-l.Ca.height)+l.qa.y-d:g+d+l.qa.y)):new E(l.N.x+(i>135?(w?-y:-l.Ca.width)+l.qa.x-d:e+d+l.qa.x),l.N.y+l.qa.y-j.y)}n=new eb(0,0);if(w)if(c){y=Kp(b,y,j.x);if(j.x<0)j.x=0;if(i>135)j.y=j.y+(G+d);G=G+(g+d);if(p===mp)n.width=n.width+(F/2+b.z.x);n.height=n.height+(g+d)}else{if(i>135)j.x=j.x+(y+d);y=y+(e+d);G=Lp(b,G,j.y);if(j.y<0)j.y=0;if(p===mp)n.height=n.height+(F/2+b.z.y);n.width=n.width+(e+d)}else if(c){if(b.cd===m){if(e>y){p=Mp(p,e-y,0);n.width=p[0];n.height=p[1];y=e;j.x=0}}else y=Kp(b,y,j.x);if(j.x<
0){n.width=n.width-j.x;j.x=0}if(i>135)j.y=j.y+(G+d);G=Math.max(Math.max(G,g),G+g+d);n.height=n.height+(g+d)}else{if(i>135)j.x=j.x+(y+d);y=Math.max(Math.max(y,e),y+e+d);if(b.cd===m){if(g>G){p=Mp(p,0,g-G);n.width=p[0];n.height=p[1];G=g;j.y=0}}else G=Lp(b,G,j.y);if(j.y<0){n.height=n.height-j.y;j.y=0}n.width=n.width+(e+d)}if(sa>0){i=[];p=[];if(c){i[2]=new E(0,g+d);i[3]=new E(i[2].x,G);p[2]=new E(y,i[2].y);p[3]=new E(p[2].x,i[3].y)}else{i[2]=new E(e+d,0);i[3]=new E(y,i[2].y);p[2]=new E(i[2].x,G);p[3]=
new E(i[3].x,p[2].y)}}else{i=[];p=[];for(k=0;k<R.length;k++){w=R[k];i[k+2]=new E(w.x+n.width,w.y+n.height)}for(k=0;k<S.length;k++){w=S[k];p[k+2]=new E(w.x+n.width,w.y+n.height)}}if(c){i[0]=new E(j.x,0);i[1]=new E(i[0].x,g);i[2].y<i[1].y&&(i[2].x>i[0].x?i[2]=i[1].copy():i[1]=i[2].copy());i[3].y<i[2].y&&(i[3].x>i[0].x?i[3]=i[2].copy():i[2]=i[3].copy());p[0]=new E(j.x+e,0);p[1]=new E(p[0].x,g);p[2].y<p[1].y&&(p[2].x<p[0].x?p[2]=p[1].copy():p[1]=p[2].copy());p[3].y<p[2].y&&(p[3].x<p[0].x?p[3]=p[2].copy():
p[2]=p[3].copy());i[2].y=i[2].y-d/2;p[2].y=p[2].y-d/2}else{i[0]=new E(0,j.y);i[1]=new E(e,i[0].y);i[2].x<i[1].x&&(i[2].y>i[0].y?i[2]=i[1].copy():i[1]=i[2].copy());i[3].x<i[2].x&&(i[3].y>i[0].y?i[3]=i[2].copy():i[2]=i[3].copy());p[0]=new E(0,j.y+g);p[1]=new E(e,p[0].y);p[2].x<p[1].x&&(p[2].y<p[0].y?p[2]=p[1].copy():p[1]=p[2].copy());p[3].x<p[2].x&&(p[3].y<p[0].y?p[3]=p[2].copy():p[2]=p[3].copy());i[2].x=i[2].x-d/2;p[2].x=p[2].x-d/2}b.op=i;b.bq=p;b.qa=j;b.Ca=new eb(y,G)}}break;default:u.g("Unhandled compaction value "+
b.Cf.toString())}}}
function qp(a,b){s&&u.c(b,$,Y,"layoutTreeNone:v");if(b.dl===0){var c=b.bb,d=o,e=0,g=ip;if(c!==m){e=c.Mb;g=c.ja;d=jp(g)}c=op(b);b.N=new E(0,0);b.Ca=new eb(b.width,b.height);b.qa=b.bb!==m&&b.cd!==m&&((e===180||e===270)&&!d||c)?e===180&&!d||(e===90||e===270)&&c?new E(b.width-b.z.x*2,0):new E(0,b.height-b.z.y*2):new E(0,0)}else{var d=sp(b),e=d===90||d===270,i=0,j,k,c=b.xb,g=c.length,l;for(j=0;j<g;j++){k=c[j];i=Math.max(i,e?k.Ca.width:k.Ca.height)}var n=b.ja,q=n===tp,p=n===up,t=jp(n),w=Math.max(0,b.zf),
A=vp(b),F=b.Uc,H=wp(b),x=q||p?0:H/2,I=b.Ud,y=0;if(q||p||b.Jj||b.Kj&&b.uh===1)y=Math.max(0,b.Jc);var q=b.width,G=b.height,fa=0,R=0,S=0,da=0,ma=0,ua=0,sa=0,ib=0,db=0,$a=0;t&&!np(n)&&d>135&&c.reverse();if(np(n))if(g>1)for(j=0;j<g;j++){k=c[j];l=k.Ca;j%2===0&&j!==g-1?db=Math.max(db,(e?l.width:l.height)+Np(k)-F):j%2!==0&&($a=Math.max($a,(e?l.width:l.height)+Np(k)-F))}else g===1&&(db=e?c[0].Ca.width:c[0].Ca.height);if(t)switch(n){case kp:case $o:k=[];k=d<135?xp(b,c,db,fa,R):yp(b,c,db,fa,R);db=k[0];fa=k[1];
R=k[2];break;case lp:for(j=0;j<g;j++){k=c[j];l=k.Ca;w=sa===0?0:I;if(e){k.N=new E(i-l.width,ma+w);fa=Math.max(fa,l.width);R=Math.max(R,ma+w+l.height);ma=ma+(w+l.height)}else{k.N=new E(da+w,i-l.height);fa=Math.max(fa,da+w+l.width);R=Math.max(R,l.height);da=da+(w+l.width)}sa++}break;case mp:for(i=0;i<g;i++){k=c[i];l=k.Ca;w=sa===0?0:I;if(e){k.N=new E(F/2+b.z.x,ma+w);fa=Math.max(fa,l.width);R=Math.max(R,ma+w+l.height);ma=ma+(w+l.height)}else{k.N=new E(da+w,F/2+b.z.y);fa=Math.max(fa,da+w+l.width);R=Math.max(R,
l.height);da=da+(w+l.width)}sa++}}else for($a=0;$a<g;$a++){k=c[$a];l=k.Ca;if(e){if(w>0&&sa>0&&da+F+l.width>w){da<i&&zp(b,n,i-da,0,ib,$a-1);ua++;sa=0;ib=$a;S=R;da=0;ma=d>135?-R-I:R+I}j=sa===0?x:F;Ap(a,k,new E(0,ma));k.N=new E(da+j,ma);fa=Math.max(fa,da+j+l.width);R=Math.max(R,S+(ua===0?0:I)+l.height);da=da+(j+l.width)}else{if(w>0&&sa>0&&ma+F+l.height>w){ma<i&&zp(b,n,0,i-ma,ib,$a-1);ua++;sa=0;ib=$a;S=fa;ma=0;da=d>135?-fa-I:fa+I}j=sa===0?x:F;Ap(a,k,new E(da,0));k.N=new E(da,ma+j);R=Math.max(R,ma+j+l.height);
fa=Math.max(fa,S+(ua===0?0:I)+l.width);ma=ma+(j+l.height)}sa++}if(ua>0)if(e){R=R+Math.max(0,A);da<fa&&zp(b,n,fa-da,0,ib,g-1);if(y>0){p||Hp(b,y,0,0,g-1);fa=fa+y}}else{fa=fa+Math.max(0,A);ma<R&&zp(b,n,0,R-ma,ib,g-1);if(y>0){p||Hp(b,0,y,0,g-1);R=R+y}}p=new E(0,0);switch(n){case Jp:e?p.x=p.x+(fa/2-b.z.x-H/2):p.y=p.y+(R/2-b.z.y-H/2);break;case ip:if(ua>0)e?p.x=p.x+(fa/2-b.z.x-H/2):p.y=p.y+(R/2-b.z.y-H/2);else if(e){n=c[0].N.x+c[0].qa.x;F=c[g-1].N.x+c[g-1].qa.x+c[g-1].z.x*2;p.x=p.x+(n+(F-n)/2-b.z.x-H/2)}else{n=
c[0].N.y+c[0].qa.y;F=c[g-1].N.y+c[g-1].qa.y+c[g-1].z.y*2;p.y=p.y+(n+(F-n)/2-b.z.y-H/2)}break;case tp:if(e){p.x=p.x-H;fa=fa+H}else{p.y=p.y-H;R=R+H}break;case up:if(e){p.x=p.x+(fa-b.width+H);fa=fa+H}else{p.y=p.y+(R-b.height+H);R=R+H}break;case kp:case $o:e?p.x=g>1?p.x+(db+F/2-b.z.x):p.x+(c[0].z.x-b.z.x+c[0].qa.x):p.y=g>1?p.y+(db+F/2-b.z.y):p.y+(c[0].z.y-b.z.y+c[0].qa.y);break;case lp:e?p.x=p.x+(fa+F/2-b.z.x):p.y=p.y+(R+F/2-b.z.y);break;case mp:break;default:u.g("Unhandled alignment value "+n.toString())}for(j=
0;j<g;j++){k=c[j];k.N=e?new E(k.N.x+k.qa.x-p.x,k.N.y+(d>135?(t?-R:-k.Ca.height)+k.qa.y-A:G+A+k.qa.y)):new E(k.N.x+(d>135?(t?-fa:-k.Ca.width)+k.qa.x-A:q+A+k.qa.x),k.N.y+k.qa.y-p.y)}if(e){fa=Kp(b,fa,p.x);if(p.x<0)p.x=0;if(d>135)p.y=p.y+(R+A);R=R+(G+A)}else{if(d>135)p.x=p.x+(fa+A);fa=fa+(q+A);R=Lp(b,R,p.y);if(p.y<0)p.y=0}b.qa=p;b.Ca=new eb(fa,R)}}
function xp(a,b,c,d,e){s&&u.c(a,$,Y,"layoutBusChildrenPosDir:v");var g=b.length,i,j;if(g===0)return a=[c,d,e];if(g===1){i=b[0];j=i.Ca;d=j.width;e=j.height;return a=[c,d,e]}var k=a.Uc,l=a.Ud,n=sp(a)===90,q=0,p=0,t=0,w=0,A=0,F=0,w=F=0,H,x;for(H=0;H<g;H++)if(!(H%2!==0||g>1&&H===g-1)){i=b[H];j=i.Ca;x=q===0?0:l;if(n){F=Np(i)-k;i.N=new E(c-(j.width+F),t+x);d=Math.max(d,j.width+F);e=Math.max(e,t+x+j.height);t=t+(x+j.height)}else{F=Np(i)-k;i.N=new E(p+x,c-(j.height+F));e=Math.max(e,j.height+F);d=Math.max(d,
p+x+j.width);p=p+(x+j.width)}q++}q=0;w=p;A=t;if(n){p=c+k;t=0}else{p=0;t=c+k}for(H=0;H<g;H++)if(H%2!==0){i=b[H];j=i.Ca;x=q===0?0:l;if(n){F=Np(i)-k;i.N=new E(p+F,t+x);d=Math.max(d,p+j.width+F);e=Math.max(e,t+x+j.height);t=t+(x+j.height)}else{F=Np(i)-k;i.N=new E(p+x,t+F);d=Math.max(d,p+x+j.width);e=Math.max(e,t+j.height+F);p=p+(x+j.width)}q++}if(g>1&&g%2===1){i=b[g-1];j=i.Ca;if(n){b=Op(i,Math.max(Math.abs(A),Math.abs(t)));i.N=new E(c+k/2-i.z.x-i.qa.x,e+b);w=c+k/2-i.z.x-i.qa.x;d=Math.max(d,w+j.width);
w<0&&(d=d-w);e=Math.max(e,Math.max(A,t)+b+j.height);i.N.x<0&&(c=Pp(a,i.N.x,o,c,k))}else{b=Op(i,Math.max(Math.abs(w),Math.abs(p)));i.N=new E(d+b,c+k/2-i.z.y-i.qa.y);d=Math.max(d,Math.max(w,p)+b+j.width);w=c+k/2-i.z.y-i.qa.y;e=Math.max(e,w+j.height);w<0&&(e=e-w);i.N.y<0&&(c=Pp(a,i.N.y,h,c,k))}}return a=[c,d,e]}
function yp(a,b,c,d,e){s&&u.c(a,$,Y,"layoutBusChildrenNegDir:v");var g=b.length,i,j;if(g===0)return a=[c,d,e];if(g===1){i=b[0];j=i.Ca;d=j.width;e=j.height;return a=[c,d,e]}var k=a.Uc,l=a.Ud,n=sp(a)===270,q=0,p=0,t=0,w=0,A=0,F=0,w=F=0,H,x;for(H=0;H<g;H++)if(!(H%2!==0||g>1&&H===g-1)){i=b[H];j=i.Ca;x=q===0?0:l;if(n){F=Np(i)-k;t=t-(x+j.height);i.N=new E(c-(j.width+F),t);d=Math.max(d,j.width+F);e=Math.max(e,Math.abs(t))}else{F=Np(i)-k;p=p-(x+j.width);i.N=new E(p,c-(j.height+F));e=Math.max(e,j.height+F);
d=Math.max(d,Math.abs(p))}q++}q=0;w=p;A=t;if(n){p=c+k;t=0}else{p=0;t=c+k}for(H=0;H<g;H++)if(H%2!==0){i=b[H];j=i.Ca;x=q===0?0:l;if(n){F=Np(i)-k;t=t-(x+j.height);i.N=new E(p+F,t);d=Math.max(d,p+j.width+F);e=Math.max(e,Math.abs(t))}else{F=Np(i)-k;p=p-(x+j.width);i.N=new E(p,t+F);e=Math.max(e,t+j.height+F);d=Math.max(d,Math.abs(p))}q++}if(g>1&&g%2===1){i=b[g-1];j=i.Ca;if(n){l=Op(i,Math.max(Math.abs(A),Math.abs(t)));i.N=new E(c+k/2-i.z.x-i.qa.x,-e-j.height-l);w=c+k/2-i.z.x-i.qa.x;d=Math.max(d,w+j.width);
w<0&&(d=d-w);e=Math.max(e,Math.abs(Math.min(A,t))+l+j.height);i.N.x<0&&(c=Pp(a,i.N.x,o,c,k))}else{l=Op(i,Math.max(Math.abs(p),Math.abs(p)));i.N=new E(-d-j.width-l,c+k/2-i.z.y-i.qa.y);d=Math.max(d,Math.abs(Math.min(w,p))+l+j.width);w=c+k/2-i.z.y-i.qa.y;e=Math.max(e,w+j.height);w<0&&(e=e-w);i.N.y<0&&(c=Pp(a,i.N.y,h,c,k))}}for(H=0;H<g;H++){i=b[H];i.N=n?new E(i.N.x,i.N.y+e):new E(i.N.x+d,i.N.y)}return a=[c,d,e]}
function Np(a){s&&u.c(a,$,Y,"fixRelativePostions:child");return a.parent===m?0:a.parent.Du}function Op(a){s&&u.c(a,$,Y,"fixRelativePostions:lastchild");return a.parent===m?0:a.parent.Nu}function Pp(a,b,c,d,e){s&&u.c(a,$,Y,"fixRelativePostions:v");for(var a=a.xb,g=a.length,i=0;i<g;i++)a[i].N=c?new E(a[i].N.x,a[i].N.y-b):new E(a[i].N.x-b,a[i].N.y);b=a[g-1];return Math.max(d,c?b.qa.y-b.z.y-e/2:b.qa.x-b.z.x-e/2)}
function Kp(a,b,c){s&&u.c(a,$,Y,"calculateSubwidth:v");switch(a.ja){case ip:case Jp:var d=b;c+a.width>d&&(d=c+a.width);c<0&&(d=d-c);return d;case tp:return a.width>b?a.width:b;case up:return a.z.x*2>b?a.width:b+a.width-a.z.x*2;case kp:case $o:d=Math.min(0,c);c=Math.max(b,c+a.width);return Math.max(a.width,c-d);case lp:return a.width-a.z.x+a.Uc/2+b;case mp:return Math.max(a.width,a.z.x+a.Uc/2+b);default:return b}}
function Lp(a,b,c){s&&u.c(a,$,Y,"calculateSubheight:v");switch(a.ja){case ip:case Jp:var d=b;c+a.height>d&&(d=c+a.height);c<0&&(d=d-c);return d;case tp:return a.height>b?a.height:b;case up:return a.z.y*2>b?a.height:b+a.height-a.z.y*2;case kp:case $o:d=Math.min(0,c);c=Math.max(b,c+a.height);return Math.max(a.height,c-d);case lp:return a.height-a.z.y+a.Uc/2+b;case mp:return Math.max(a.height,a.z.y+a.Uc/2+b);default:return b}}
function Mp(a,b,c){s&&u.c(a,ja,Y,"alignOffset:align");switch(a){case Jp:b=b/2;c=c/2;break;case ip:b=b/2;c=c/2;break;case tp:c=b=0;break;case up:break;default:u.g("Unhandled alignment value "+a.toString())}return[b,c]}function zp(a,b,c,d,e,g){s&&u.c(a,$,Y,"shiftRelPosAlign:v");s&&u.c(b,ja,Y,"shiftRelPosAlign:align");b=Mp(b,c,d);Hp(a,b[0],b[1],e,g)}function Hp(a,b,c,d,e){s&&u.c(a,$,Y,"shiftRelPos:v");if(!(b===0&&c===0))for(a=a.xb;d<=e;d++){var g=a[d];g.N.x=g.N.x+b;g.N.y=g.N.y+c}}
function Ap(a,b,c){s&&u.c(b,$,Y,"recordMidPoints:v");s&&u.c(c,E,Y,"recordMidPoints:p");var d=b.bb;switch(a.$b){case Jo:for(a=b.nb;a.next();){b=a.value;if(b.G===d)b.Up=c}break;case Qo:for(a=b.mb;a.next();){b=a.value;if(b.D===d)b.Up=c}break;default:u.g("Unhandled path value "+a.$b.toString())}}function Ip(a,b,c){for(var d=0;d<a.length;d++){a[d].x=a[d].x+b;a[d].y=a[d].y+c}}
function Gp(a,b,c,d,e,g){s&&u.c(a,$,Y,"mergeFringes:parent");s&&u.c(b,$,Y,"mergeFringes:child");var i=sp(a),j=i===90||i===270,k=a.Uc,l=e,n=g,q=b.op,e=b.bq,g=b.Ca,a=j?Math.max(n,g.height):Math.max(l,g.width);if(q===m||i!==sp(b)){q=[];e=[];if(j){q[0]=new E(0,0);q[1]=new E(0,g.height);e[0]=new E(g.width,0);e[1]=new E(e[0].x,q[1].y)}else{q[0]=new E(0,0);q[1]=new E(g.width,0);e[0]=new E(0,g.height);e[1]=new E(q[1].x,e[0].y)}}if(j){b=j=l;i=q;l=9999999;if(!(d===m||d.length<2||i===m||i.length<2))for(var p=
n=0;n<d.length&&p<i.length;){var t=d[n],w=i[p].copy();w.x=w.x+j;var A=t;n+1<d.length&&(A=d[n+1]);var F=w;if(p+1<i.length){F=i[p+1].copy();F.x=F.x+j}var H=l;t.y===w.y?H=w.x-t.x:t.y>w.y&&t.y<F.y?H=w.x+(t.y-w.y)/(F.y-w.y)*(F.x-w.x)-t.x:w.y>t.y&&w.y<A.y&&(H=w.x-(t.x+(w.y-t.y)/(A.y-t.y)*(A.x-t.x)));H<l&&(l=H);if(A.y<=t.y)n++;else if(F.y<=w.y)p++;else{A.y<=F.y&&n++;F.y<=A.y&&p++}}k=b-l+k;b=k;if(c===m||c.length<2||q===m||q.length<2)c=m;else{i=[];for(l=j=p=0;j<q.length&&q[j].y<c[0].y;){n=q[j++].copy();n.x=
n.x+b;i[l++]=n}for(;p<c.length;){n=c[p++];i[l++]=n}for(c=c[c.length-1].y;j<q.length&&q[j].y<=c;)j++;for(;j<q.length&&q[j].y>c;){n=q[j++].copy();n.x=n.x+b;i[l++]=n}c=i}j=e;l=k;if(d===m||d.length<2||j===m||j.length<2)d=m;else{e=[];for(b=n=q=0;q<d.length&&d[q].y<j[0].y;){i=d[q++];e[b++]=i}for(;n<j.length;){i=j[n++].copy();i.x=i.x+l;e[b++]=i}for(j=j[j.length-1].y;q<d.length&&d[q].y<=j;)q++;for(;q<d.length&&d[q].y>j;){i=d[q++];e[b++]=i}d=e}e=Math.max(0,k)+g.width;return[k,c,d,e,a]}b=j=n;i=q;l=9999999;
if(!(d===m||d.length<2||i===m||i.length<2))for(p=n=0;n<d.length&&p<i.length;){t=d[n];w=i[p].copy();w.y=w.y+j;A=t;n+1<d.length&&(A=d[n+1]);F=w;if(p+1<i.length){F=i[p+1].copy();F.y=F.y+j}H=l;t.x===w.x?H=w.y-t.y:t.x>w.x&&t.x<F.x?H=w.y+(t.x-w.x)/(F.x-w.x)*(F.y-w.y)-t.y:w.x>t.x&&w.x<A.x&&(H=w.y-(t.y+(w.x-t.x)/(A.x-t.x)*(A.y-t.y)));H<l&&(l=H);if(A.x<=t.x)n++;else if(F.x<=w.x)p++;else{A.x<=F.x&&n++;F.x<=A.x&&p++}}k=b-l+k;b=k;if(c===m||c.length<2||q===m||q.length<2)c=m;else{i=[];for(l=j=p=0;j<q.length&&q[j].x<
c[0].x;){n=q[j++].copy();n.y=n.y+b;i[l++]=n}for(;p<c.length;){n=c[p++];i[l++]=n}for(c=c[c.length-1].x;j<q.length&&q[j].x<=c;)j++;for(;j<q.length&&q[j].x>c;){n=q[j++].copy();n.y=n.y+b;i[l++]=n}c=i}j=e;l=k;if(d===m||d.length<2||j===m||j.length<2)d=m;else{e=[];for(b=n=q=0;q<d.length&&d[q].x<j[0].x;){i=d[q++];e[b++]=i}for(;n<j.length;){i=j[n++].copy();i.y=i.y+l;e[b++]=i}for(j=j[j.length-1].x;q<d.length&&d[q].x<=j;)q++;for(;q<d.length&&d[q].x>j;){i=d[q++];e[b++]=i}d=e}e=a;g=Math.max(0,k)+g.height;return[k,
c,d,e,g]}function Wo(a,b,c,d){s&&u.c(b,$,Y,"assignAbsolutePositions:v");if(b!==m){b.x=c;b.y=d;for(var b=b.xb,e=b.length,g=0;g<e;g++){var i=b[g];Wo(a,i,c+i.N.x,d+i.N.y)}}}Y.prototype.commitLayout=Y.prototype.au=function(){this.Fy();this.commitNodes();this.commitLinks()};
Y.prototype.commitNodes=Y.prototype.zx=function(){for(var a=this.p.P.f,b;a.next();){b=a.value;b.commit()}for(a.reset();a.next();){b=a.value;s&&u.c(b,$,Y,"layoutComments:v");if(b.cd!==m){var c=b.Wg.oa,d=b.bb,e=f,e=f,e=b.Mb,g=0,i=ip,i=o;if(d!==m){g=d.Mb;i=d.ja;i=jp(i)}for(var d=e===90||e===270,j=g===90||g===270,k=b.dl===0,l=op(b),n=0,q=b.cd,p=q.length,t=0;t<p;t++){var e=q[t],w=e.fa,A;if(d&&!k||!i&&!j&&k||i&&j&&k){if(g>135&&!i||j&&l)if(b.Pb>=0){e.location=new E(b.A.x-b.Pb-w.width,b.A.y+n);for(A=e.gf();A.next();){e=
A.value;e.Va=nc;e.Xa=oc}}else{e.location=new E(b.A.x+b.z.x*2-b.Pb,b.A.y+n);for(A=e.gf();A.next();){e=A.value;e.Va=oc;e.Xa=nc}}else if(b.Pb>=0){e.location=new E(b.A.x+b.z.x*2+b.Pb,b.A.y+n);for(A=e.gf();A.next();){e=A.value;e.Va=oc;e.Xa=nc}}else{e.location=new E(b.A.x+b.Pb-w.width,b.A.y+n);for(A=e.gf();A.next();){e=A.value;e.Va=nc;e.Xa=oc}}n=b.bd>=0?n+(w.height+b.bd):n+(b.bd-w.height)}else{if(g>135&&!i||!j&&l)if(b.Pb>=0){e.location=new E(b.A.x+n,b.A.y-b.Pb-w.height);for(A=e.gf();A.next();){e=A.value;
e.Va=Xb;e.Xa=ec}}else{e.location=new E(b.A.x+n,b.A.y+b.z.y*2-b.Pb);for(A=e.gf();A.next();){e=A.value;e.Va=ec;e.Xa=Xb}}else if(b.Pb>=0){e.location=new E(b.A.x+n,b.A.y+b.z.y*2+b.Pb);for(A=e.gf();A.next();){e=A.value;e.Va=ec;e.Xa=Xb}}else{e.location=new E(b.A.x+n,b.A.y+b.Pb-w.height);for(A=e.gf();A.next();){e=A.value;e.Va=Xb;e.Xa=ec}}n=b.bd>=0?n+(w.width+b.bd):n+(b.bd-w.width)}}c=n-b.bd-(d?c.height:c.width);if(this.path===Jo)for(b=b.mb;b.next();){e=b.value;if((e=e.link)&&e.Te!==Hf)e.$j=c>0?c:NaN}else for(b=
b.nb;b.next();){e=b.value;if((e=e.link)&&e.Te!==Hf)e.jk=c>0?c:NaN}}}};Y.prototype.commitLinks=Y.prototype.yx=function(){for(var a=this.p.Kb.f;a.next();)a.value.commit()};Y.prototype.Fy=function(){for(var a=this.kc.f;a.next();){var b=this.p.be(a.value);Qp(this,b)}};
function Qp(a,b){s&&u.c(b,$,Y,"setPortSpotsTree:v");if(b!==m){s&&u.c(b,$,Y,"setPortSpots:v");var c=b.ja;if(jp(c)){s&&u.c(b,$,Y,"setPortSpotsBus:v");s&&u.c(c,ja,Y,"setPortSpots:align");var d=a.$b===Jo,e=sp(b),g;switch(e){case 0:g=oc;break;case 90:g=ec;break;case 180:g=nc;break;default:g=Xb}var i,j,k,l=b.xb,n=l.length;switch(c){case kp:case $o:for(c=0;c<n;c++){i=l[c];j=d?i.nb:i.mb;j.next();k=j.value;if(k!==m){k=k.Ba;if(k!==m){i=e===90||e===270?nc:Xb;if(n===1||c===n-1&&n%2===1)switch(e){case 0:i=nc;
break;case 90:i=Xb;break;case 180:i=oc;break;default:i=ec}else c%2===0&&(i=e===90||e===270?oc:ec);if(d){if(b.Si)k.Va=g;if(b.Ri)k.Xa=i}else{if(b.Si)k.Va=i;if(b.Ri)k.Xa=g}}}}break;case lp:i=e===90||e===270?oc:ec;for(j=d?b.mb:b.nb;j.next();){k=j.value;k=k.Ba;if(k!==m)if(d){if(b.Si)k.Va=g;if(b.Ri)k.Xa=i}else{if(b.Si)k.Va=i;if(b.Ri)k.Xa=g}}break;case mp:i=e===90||e===270?nc:Xb;for(j=d?b.mb:b.nb;j.next();){k=j.value;k=k.Ba;if(k!==m)if(d){if(b.Si)k.Va=g;if(b.Ri)k.Xa=i}else{if(b.Si)k.Va=i;if(b.Ri)k.Xa=g}}}}else{d=
sp(b);if(a.$b===Jo)for(e=b.mb;e.next();){g=e.value;g=g.Ba;if(g!==m){if(b.Wf)if(Qb(b.xe))switch(d){case 0:g.Va=oc;break;case 90:g.Va=ec;break;case 180:g.Va=nc;break;default:g.Va=Xb}else g.Va=b.xe;if(b.Vf)if(Qb(b.pe))switch(d){case 0:g.Xa=nc;break;case 90:g.Xa=Xb;break;case 180:g.Xa=oc;break;default:g.Xa=ec}else g.Xa=b.pe}}else for(e=b.nb;e.next();){g=e.value;g=g.Ba;if(g!==m){if(b.Wf)if(Qb(b.xe))switch(d){case 0:g.Xa=oc;break;case 90:g.Xa=ec;break;case 180:g.Xa=nc;break;default:g.Xa=Xb}else g.Xa=b.xe;
if(b.Vf)if(Qb(b.pe))switch(d){case 0:g.Va=nc;break;case 90:g.Va=Xb;break;case 180:g.Va=oc;break;default:g.Va=ec}else g.Va=b.pe}}}d=b.xb;e=d.length;for(g=0;g<e;g++)Qp(a,d[g])}}function sp(a){s&&u.c(a,$,Y,"orthoAngle:v");a=a.Mb;return a<=45?0:a<=135?90:a<=225?180:a<=315?270:0}function vp(a){s&&u.c(a,$,Y,"computeLayerSpacing:v");var b=sp(a),b=b===90||b===270,c=a.dd;if(a.Lf>0)var d=Math.min(1,a.Lf),c=c-(b?a.height*d:a.width*d);if(c<(b?-a.height:-a.width))c=b?-a.height:-a.width;return c}
function wp(a){s&&u.c(a,$,Y,"computeNodeIndent:v");var b=sp(a),b=b===90||b===270,c=a.yg;if(a.Sf>0)var d=Math.min(1,a.Sf),c=c+(b?a.width*d:a.height*d);return c=Math.max(0,c)}u.a(Y,"roots",Y.prototype.nG);u.defineProperty(Y,{nG:"roots"},r("kc"),function(a){if(this.kc!==a){this.kc=a;this.r()}});u.a(Y,"path",Y.prototype.path);u.defineProperty(Y,{path:"path"},r("$b"),function(a){if(this.$b!==a){s&&u.c(a,ja,Y,"path");if(a===Jo||a===Qo){this.$b=a;this.r()}}});u.a(Y,"treeStyle",Y.prototype.tD);
u.defineProperty(Y,{tD:"treeStyle"},r("wq"),function(a){if(this.uc!==a){s&&u.c(a,ja,Y,"treeStyle");if(a===Ko||a===cp||a===dp||a===bp){this.wq=a;this.r()}}});u.a(Y,"arrangement",Y.prototype.Hd);u.defineProperty(Y,{Hd:"arrangement"},r("uc"),function(a){if(this.uc!==a){s&&u.c(a,ja,Y,"arrangement");if(a===Lo||a===Xo||a===Po){this.uc=a;this.r()}}});u.a(Y,"arrangementSpacing",Y.prototype.Xt);u.defineProperty(Y,{Xt:"arrangementSpacing"},r("Ue"),function(a){if(!this.Ue.u(a)){this.Ue.Oa(a);this.r()}});
u.a(Y,"rootDefaults",Y.prototype.mG);u.defineProperty(Y,{mG:"rootDefaults"},r("S"),function(a){if(this.S!==a){s&&u.c(a,$,Y,"rootDefaults");this.S=a;this.r()}});u.a(Y,"alternateDefaults",Y.prototype.wE);u.defineProperty(Y,{wE:"alternateDefaults"},r("R"),function(a){if(this.R!==a){s&&u.c(a,$,Y,"alternateDefaults");this.R=a;this.r()}});u.a(Y,"sorting",Y.prototype.tf);
u.defineProperty(Y,{tf:"sorting"},function(){return this.S.Sb},function(a){if(this.S.Sb!==a){s&&u.c(a,ja,Y,"sorting");if(a===ep||a===fp||a===gp||hp){this.S.Sb=a;this.r()}}});u.a(Y,"comparer",Y.prototype.Og);u.defineProperty(Y,{Og:"comparer"},function(){return this.S.Qb},function(a){if(this.S.Qb!==a){s&&u.e(a,"function",Y,"comparer");this.S.Qb=a;this.r()}});u.a(Y,"angle",Y.prototype.Ka);
u.defineProperty(Y,{Ka:"angle"},function(){return this.S.Mb},function(a){if(this.S.Mb!==a&&(a===0||a===90||a===180||a===270)){this.S.Mb=a;this.r()}});u.a(Y,"alignment",Y.prototype.kb);u.defineProperty(Y,{kb:"alignment"},function(){return this.S.ja},function(a){if(this.S.ja!==a){s&&u.Sa(a,Y,Y,"alignment");this.S.ja=a;this.r()}});u.a(Y,"nodeIndent",Y.prototype.py);u.defineProperty(Y,{py:"nodeIndent"},function(){return this.S.yg},function(a){if(this.S.yg!==a&&a>=0){this.S.yg=a;this.r()}});
u.a(Y,"nodeIndentPastParent",Y.prototype.qy);u.defineProperty(Y,{qy:"nodeIndentPastParent"},function(){return this.S.Sf},function(a){if(this.S.Sf!==a&&a>=0&&a<=1){this.S.Sf=a;this.r()}});u.a(Y,"nodeSpacing",Y.prototype.Du);u.defineProperty(Y,{Du:"nodeSpacing"},function(){return this.S.Uc},function(a){if(this.S.Uc!==a){this.S.Uc=a;this.r()}});u.a(Y,"layerSpacing",Y.prototype.tr);u.defineProperty(Y,{tr:"layerSpacing"},function(){return this.S.dd},function(a){if(this.S.dd!==a){this.S.dd=a;this.r()}});
u.a(Y,"layerSpacingParentOverlap",Y.prototype.fy);u.defineProperty(Y,{fy:"layerSpacingParentOverlap"},function(){return this.S.Lf},function(a){if(this.S.Lf!==a&&a>=0&&a<=1){this.S.Lf=a;this.r()}});u.a(Y,"compaction",Y.prototype.bu);u.defineProperty(Y,{bu:"compaction"},function(){return this.S.Cf},function(a){if(this.S.Cf!==a){s&&u.c(a,ja,Y,"compaction");if(a===pp||a===rp){this.S.Cf=a;this.r()}}});u.a(Y,"breadthLimit",Y.prototype.px);
u.defineProperty(Y,{px:"breadthLimit"},function(){return this.S.zf},function(a){if(this.S.zf!==a&&a>=0){this.S.zf=a;this.r()}});u.a(Y,"rowSpacing",Y.prototype.Nu);u.defineProperty(Y,{Nu:"rowSpacing"},function(){return this.S.Ud},function(a){if(this.S.Ud!==a){this.S.Ud=a;this.r()}});u.a(Y,"rowIndent",Y.prototype.zy);u.defineProperty(Y,{zy:"rowIndent"},function(){return this.S.Jc},function(a){if(this.S.Jc!==a&&a>=0){this.S.Jc=a;this.r()}});u.a(Y,"commentSpacing",Y.prototype.wx);
u.defineProperty(Y,{wx:"commentSpacing"},function(){return this.S.bd},function(a){if(this.S.bd!==a){this.S.bd=a;this.r()}});u.a(Y,"commentMargin",Y.prototype.vx);u.defineProperty(Y,{vx:"commentMargin"},function(){return this.S.Pb},function(a){if(this.S.Pb!==a){this.S.Pb=a;this.r()}});u.a(Y,"setsPortSpot",Y.prototype.Si);u.defineProperty(Y,{Si:"setsPortSpot"},function(){return this.S.Wf},function(a){if(this.S.Wf!==a){this.S.Wf=a;this.r()}});u.a(Y,"portSpot",Y.prototype.uy);
u.defineProperty(Y,{uy:"portSpot"},function(){return this.S.xe},function(a){if(!this.S.xe.u(a)){this.S.xe=a;this.r()}});u.a(Y,"setsChildPortSpot",Y.prototype.Ri);u.defineProperty(Y,{Ri:"setsChildPortSpot"},function(){return this.S.Vf},function(a){if(this.S.Vf!==a){this.S.Vf=a;this.r()}});u.a(Y,"childPortSpot",Y.prototype.tx);u.defineProperty(Y,{tx:"childPortSpot"},function(){return this.S.pe},function(a){if(!this.S.pe.u(a)){this.S.pe=a;this.r()}});u.a(Y,"alternateSorting",Y.prototype.HE);
u.defineProperty(Y,{HE:"alternateSorting"},function(){return this.R.Sb},function(a){if(this.R.Sb!==a){s&&u.c(a,ja,Y,"alternateSorting");if(a===ep||a===fp||a===gp||hp){this.R.Sb=a;this.r()}}});u.a(Y,"alternateComparer",Y.prototype.vE);u.defineProperty(Y,{vE:"alternateComparer"},function(){return this.R.Qb},function(a){if(this.R.Qb!==a){s&&u.e(a,"function",Y,"alternateComparer");this.R.Qb=a;this.r()}});u.a(Y,"alternateAngle",Y.prototype.pE);
u.defineProperty(Y,{pE:"alternateAngle"},function(){return this.R.Mb},function(a){if(this.R.Mb!==a&&(a===0||a===90||a===180||a===270)){this.R.Mb=a;this.r()}});u.a(Y,"alternateAlignment",Y.prototype.oE);u.defineProperty(Y,{oE:"alternateAlignment"},function(){return this.R.ja},function(a){if(this.R.ja!==a){s&&u.Sa(a,Y,Y,"alternateAlignment");this.R.ja=a;this.r()}});u.a(Y,"alternateNodeIndent",Y.prototype.zE);
u.defineProperty(Y,{zE:"alternateNodeIndent"},function(){return this.R.yg},function(a){if(this.R.yg!==a&&a>=0){this.R.yg=a;this.r()}});u.a(Y,"alternateNodeIndentPastParent",Y.prototype.AE);u.defineProperty(Y,{AE:"alternateNodeIndentPastParent"},function(){return this.R.Sf},function(a){if(this.R.Sf!==a&&a>=0&&a<=1){this.R.Sf=a;this.r()}});u.a(Y,"alternateNodeSpacing",Y.prototype.BE);
u.defineProperty(Y,{BE:"alternateNodeSpacing"},function(){return this.R.Uc},function(a){if(this.R.Uc!==a){this.R.Uc=a;this.r()}});u.a(Y,"alternateLayerSpacing",Y.prototype.xE);u.defineProperty(Y,{xE:"alternateLayerSpacing"},function(){return this.R.dd},function(a){if(this.R.dd!==a){this.R.dd=a;this.r()}});u.a(Y,"alternateLayerSpacingParentOverlap",Y.prototype.yE);
u.defineProperty(Y,{yE:"alternateLayerSpacingParentOverlap"},function(){return this.R.Lf},function(a){if(this.R.Lf!==a&&a>=0&&a<=1){this.R.Lf=a;this.r()}});u.a(Y,"alternateCompaction",Y.prototype.uE);u.defineProperty(Y,{uE:"alternateCompaction"},function(){return this.R.Cf},function(a){if(this.R.Cf!==a){s&&u.c(a,ja,Y,"alternateCompaction");if(a===pp||a===rp){this.R.Cf=a;this.r()}}});u.a(Y,"alternateBreadthLimit",Y.prototype.qE);
u.defineProperty(Y,{qE:"alternateBreadthLimit"},function(){return this.R.zf},function(a){if(this.R.zf!==a&&a>=0){this.R.zf=a;this.r()}});u.a(Y,"alternateRowSpacing",Y.prototype.EE);u.defineProperty(Y,{EE:"alternateRowSpacing"},function(){return this.R.Ud},function(a){if(this.R.Ud!==a){this.R.Ud=a;this.r()}});u.a(Y,"alternateRowIndent",Y.prototype.DE);u.defineProperty(Y,{DE:"alternateRowIndent"},function(){return this.R.Jc},function(a){if(this.R.Jc!==a&&a>=0){this.R.Jc=a;this.r()}});
u.a(Y,"alternateCommentSpacing",Y.prototype.tE);u.defineProperty(Y,{tE:"alternateCommentSpacing"},function(){return this.R.bd},function(a){if(this.R.bd!==a){this.R.bd=a;this.r()}});u.a(Y,"alternateCommentMargin",Y.prototype.sE);u.defineProperty(Y,{sE:"alternateCommentMargin"},function(){return this.R.Pb},function(a){if(this.R.Pb!==a){this.R.Pb=a;this.r()}});u.a(Y,"alternateSetsPortSpot",Y.prototype.GE);
u.defineProperty(Y,{GE:"alternateSetsPortSpot"},function(){return this.R.Wf},function(a){if(this.R.Wf!==a){this.R.Wf=a;this.r()}});u.a(Y,"alternatePortSpot",Y.prototype.CE);u.defineProperty(Y,{CE:"alternatePortSpot"},function(){return this.R.xe},function(a){if(!this.R.xe.u(a)){this.R.xe=a;this.r()}});u.a(Y,"alternateSetsChildPortSpot",Y.prototype.FE);u.defineProperty(Y,{FE:"alternateSetsChildPortSpot"},function(){return this.R.Vf},function(a){if(this.R.Vf!==a){this.R.Vf=a;this.r()}});
u.a(Y,"alternateChildPortSpot",Y.prototype.rE);u.defineProperty(Y,{rE:"alternateChildPortSpot"},function(){return this.R.pe},function(a){if(!this.R.pe.u(a)){this.R.pe=a;this.r()}});var Jo;Y.PathDestination=Jo=u.l(Y,"PathDestination",0);var Qo;Y.PathSource=Qo=u.l(Y,"PathSource",1);var ep;Y.SortingForwards=ep=u.l(Y,"SortingForwards",10);var fp;Y.SortingReverse=fp=u.l(Y,"SortingReverse",11);var gp;Y.SortingAscending=gp=u.l(Y,"SortingAscending",12);var hp;
Y.SortingDescending=hp=u.l(Y,"SortingDescending",13);var Jp;Y.AlignmentCenterSubtrees=Jp=u.l(Y,"AlignmentCenterSubtrees",20);var ip;Y.AlignmentCenterChildren=ip=u.l(Y,"AlignmentCenterChildren",21);var tp;Y.AlignmentStart=tp=u.l(Y,"AlignmentStart",22);var up;Y.AlignmentEnd=up=u.l(Y,"AlignmentEnd",23);var kp;Y.AlignmentBus=kp=u.l(Y,"AlignmentBus",24);var $o;Y.AlignmentBusBranching=$o=u.l(Y,"AlignmentBusBranching",25);var lp;Y.AlignmentTopLeftBus=lp=u.l(Y,"AlignmentTopLeftBus",26);var mp;
Y.AlignmentBottomRightBus=mp=u.l(Y,"AlignmentBottomRightBus",27);var pp;Y.CompactionNone=pp=u.l(Y,"CompactionNone",30);var rp;Y.CompactionBlock=rp=u.l(Y,"CompactionBlock",31);var Ko;Y.StyleLayered=Ko=u.l(Y,"StyleLayered",40);var dp;Y.StyleLastParents=dp=u.l(Y,"StyleLastParents",41);var cp;Y.StyleAlternating=cp=u.l(Y,"StyleAlternating",42);var bp;Y.StyleRootOnly=bp=u.l(Y,"StyleRootOnly",43);var Lo;Y.ArrangementVertical=Lo=u.l(Y,"ArrangementVertical",50);var Xo;
Y.ArrangementHorizontal=Xo=u.l(Y,"ArrangementHorizontal",51);var Po;Y.ArrangementFixedRoots=Po=u.l(Y,"ArrangementFixedRoots",52);function No(){Am.call(this)}u.H("TreeNetwork",No);u.ma(No,Am);No.prototype.createVertex=No.prototype.Ci=function(){return new $};No.prototype.createEdge=No.prototype.$m=function(){return new Rp};
function $(){Em.call(this);this.sj=o;this.bb=m;this.xb=[];this.uh=this.Rs=this.ws=this.Kk=this.IG=0;this.bq=this.op=this.cd=this.qa=this.Ca=this.N=m;this.Kj=this.Jj=this.Hw=o;this.Sb=ep;this.Qb=Jm;this.Mb=0;this.ja=ip;this.Sf=this.yg=0;this.Uc=20;this.dd=50;this.Lf=0;this.Cf=rp;this.zf=0;this.Ud=25;this.bd=this.Jc=10;this.Pb=20;this.Wf=h;this.xe=Ub;this.Vf=h;this.pe=Ub}u.H("TreeVertex",$);u.ma($,Em);
function Mo(a,b){if(b!==m){a.Sb=b.Sb;a.Qb=b.Qb;a.Mb=b.Mb;a.ja=b.ja;a.yg=b.yg;a.Sf=b.Sf;a.Uc=b.Uc;a.dd=b.dd;a.Lf=b.Lf;a.Cf=b.Cf;a.zf=b.zf;a.Ud=b.Ud;a.Jc=b.Jc;a.bd=b.bd;a.Pb=b.Pb;a.Wf=b.Wf;a.xe=b.xe;a.Vf=b.Vf;a.pe=b.pe}}u.a($,"initialized",$.prototype.yF);u.defineProperty($,{yF:"initialized"},r("sj"),ba("sj"));u.a($,"parent",$.prototype.parent);u.defineProperty($,{parent:"parent"},r("bb"),ba("bb"));u.a($,"children",$.prototype.children);u.defineProperty($,{children:"children"},r("xb"),ba("xb"));
u.m($,{dl:"childrenCount"},function(){return this.xb.length});u.a($,"level",$.prototype.LF);u.defineProperty($,{LF:"level"},r("Kk"),ba("Kk"));u.a($,"descendantCount",$.prototype.XE);u.defineProperty($,{XE:"descendantCount"},r("ws"),ba("ws"));u.a($,"maxChildrenCount",$.prototype.RF);u.defineProperty($,{RF:"maxChildrenCount"},r("Rs"),ba("Rs"));u.a($,"maxGenerationCount",$.prototype.SF);u.defineProperty($,{SF:"maxGenerationCount"},r("uh"),ba("uh"));u.a($,"relativePosition",$.prototype.fG);
u.defineProperty($,{fG:"relativePosition"},r("N"),function(a){u.c(a,E,$,"relativePosition");this.N=a});u.a($,"subtreeSize",$.prototype.BG);u.defineProperty($,{BG:"subtreeSize"},r("Ca"),function(a){u.c(a,eb,$,"subtreeSize");this.Ca=a});u.a($,"subtreeOffset",$.prototype.AG);u.defineProperty($,{AG:"subtreeOffset"},r("qa"),function(a){u.c(a,E,$,"subtreeOffset");this.qa=a});u.a($,"comments",$.prototype.xx);u.defineProperty($,{xx:"comments"},r("cd"),ba("cd"));u.a($,"sorting",$.prototype.tf);
u.defineProperty($,{tf:"sorting"},r("Sb"),ba("Sb"));u.a($,"comparer",$.prototype.Og);u.defineProperty($,{Og:"comparer"},r("Qb"),ba("Qb"));u.a($,"angle",$.prototype.Ka);u.defineProperty($,{Ka:"angle"},r("Mb"),ba("Mb"));u.a($,"alignment",$.prototype.kb);u.defineProperty($,{kb:"alignment"},r("ja"),ba("ja"));u.a($,"nodeIndent",$.prototype.py);u.defineProperty($,{py:"nodeIndent"},r("yg"),ba("yg"));u.a($,"nodeIndentPastParent",$.prototype.qy);u.defineProperty($,{qy:"nodeIndentPastParent"},r("Sf"),ba("Sf"));
u.a($,"nodeSpacing",$.prototype.Du);u.defineProperty($,{Du:"nodeSpacing"},r("Uc"),ba("Uc"));u.a($,"layerSpacing",$.prototype.tr);u.defineProperty($,{tr:"layerSpacing"},r("dd"),ba("dd"));u.a($,"layerSpacingParentOverlap",$.prototype.fy);u.defineProperty($,{fy:"layerSpacingParentOverlap"},r("Lf"),ba("Lf"));u.a($,"compaction",$.prototype.bu);u.defineProperty($,{bu:"compaction"},r("Cf"),ba("Cf"));u.a($,"breadthLimit",$.prototype.px);u.defineProperty($,{px:"breadthLimit"},r("zf"),ba("zf"));
u.a($,"rowSpacing",$.prototype.Nu);u.defineProperty($,{Nu:"rowSpacing"},r("Ud"),ba("Ud"));u.a($,"rowIndent",$.prototype.zy);u.defineProperty($,{zy:"rowIndent"},r("Jc"),ba("Jc"));u.a($,"commentSpacing",$.prototype.wx);u.defineProperty($,{wx:"commentSpacing"},r("bd"),ba("bd"));u.a($,"commentMargin",$.prototype.vx);u.defineProperty($,{vx:"commentMargin"},r("Pb"),ba("Pb"));u.a($,"setsPortSpot",$.prototype.Si);u.defineProperty($,{Si:"setsPortSpot"},r("Wf"),ba("Wf"));u.a($,"portSpot",$.prototype.uy);
u.defineProperty($,{uy:"portSpot"},r("xe"),ba("xe"));u.a($,"setsChildPortSpot",$.prototype.Ri);u.defineProperty($,{Ri:"setsChildPortSpot"},r("Vf"),ba("Vf"));u.a($,"childPortSpot",$.prototype.tx);u.defineProperty($,{tx:"childPortSpot"},r("pe"),ba("pe"));u.a($,"routeFirstRow",$.prototype.rG);u.defineProperty($,{rG:"routeFirstRow"},r("Hw"),ba("Hw"));u.a($,"routeAroundCentered",$.prototype.pG);u.defineProperty($,{pG:"routeAroundCentered"},r("Jj"),ba("Jj"));u.a($,"routeAroundLastParent",$.prototype.qG);
u.defineProperty($,{qG:"routeAroundLastParent"},r("Kj"),ba("Kj"));function Rp(){Fm.call(this);this.Up=new E(0,0)}u.H("TreeEdge",Rp);u.ma(Rp,Fm);
Rp.prototype.commit=Rp.prototype.Lh=function(){var a=this.Ba;if(a!==m&&a.Te!==Hf){var b=this.p.qb,c=m,d=m;switch(b.$b){case Jo:c=this.G;d=this.D;break;case Qo:c=this.D;d=this.G;break;default:u.g("Unhandled path value "+b.$b.toString())}if(!(c===m||d===m)){b=this.Up;if(b.x===0&&b.y===0&&!c.Hw){var e=c;s&&u.c(e,$,Rp,"adjustRouteForAngleChange:parent");s&&u.c(d,$,Rp,"adjustRouteForAngleChange:child");a=this.Ba;c=sp(e);b=sp(d);if(c!==b){b=vp(e);e=e.fb;d=d.fb;if(!(c===0&&d.left-e.right<b+1||c===90&&d.top-
e.bottom<b+1||c===180&&e.left-d.right<b+1||c===270&&e.top-d.bottom<b+1)){Jl(a);var d=a.Ie===Gj,g=a.Te===oh,i=jp(this.G.ja);a.ik();if(c===0){c=e.right+b/2;if(d){if(a.Y===4){b=a.h(3).y;a.w(1,new E(c-20,a.h(1).y));a.q(2,new E(c-20,b));a.q(3,new E(c,b));a.q(4,new E(c+20,b));a.w(5,new E(a.h(5).x,b))}}else if(g)if(i)a.w(3,new E(a.h(2).x,a.h(4).y));else{if(a.Y===6){a.w(2,new E(c,a.h(2).y));a.w(3,new E(c,a.h(3).y))}}else a.Y===4?a.q(2,new E(c,a.h(2).y)):a.Y===3?a.w(1,new E(c,a.h(2).y)):a.Y===2&&a.q(1,new E(c,
a.h(1).y))}else if(c===90){b=e.bottom+b/2;if(d){if(a.Y===4){c=a.h(3).x;a.w(1,new E(a.h(1).x,b-20));a.q(2,new E(c,b-20));a.q(3,new E(c,b));a.q(4,new E(c,b+20));a.w(5,new E(c,a.h(5).y))}}else if(g)if(i)a.w(3,new E(a.h(2).x,a.h(4).y));else{if(a.Y===6){a.w(2,new E(a.h(2).x,b));a.w(3,new E(a.h(3).x,b))}}else a.Y===4?a.q(2,new E(a.h(2).x,b)):a.Y===3?a.w(1,new E(a.h(2).x,b)):a.Y===2&&a.q(1,new E(a.h(1).x,b))}else if(c===180){c=e.left-b/2;if(d){if(a.Y===4){b=a.h(3).y;a.w(1,new E(c+20,a.h(1).y));a.q(2,new E(c+
20,b));a.q(3,new E(c,b));a.q(4,new E(c-20,b));a.w(5,new E(a.h(5).x,b))}}else if(g)if(i)a.w(3,new E(a.h(2).x,a.h(4).y));else{if(a.Y===6){a.w(2,new E(c,a.h(2).y));a.w(3,new E(c,a.h(3).y))}}else a.Y===4?a.q(2,new E(c,a.h(2).y)):a.Y===3?a.w(1,new E(c,a.h(2).y)):a.Y===2&&a.q(1,new E(c,a.h(1).y))}else if(c===270){b=e.top-b/2;if(d){if(a.Y===4){c=a.h(3).x;a.w(1,new E(a.h(1).x,b+20));a.q(2,new E(c,b+20));a.q(3,new E(c,b));a.q(4,new E(c,b-20));a.w(5,new E(c,a.h(5).y))}}else if(g)if(i)a.w(3,new E(a.h(2).x,a.h(4).y));
else{if(a.Y===6){a.w(2,new E(a.h(2).x,b));a.w(3,new E(a.h(3).x,b))}}else a.Y===4?a.q(2,new E(a.h(2).x,b)):a.Y===3?a.w(1,new E(a.h(2).x,b)):a.Y===2&&a.q(1,new E(a.h(1).x,b))}a.Mh()}}}else{var e=c.fb,j=sp(c),d=vp(c),g=c.Ud;Jl(a);var i=a.Ie===Gj,k=a.Te===oh,l,n,q,p;a.ik();if(k||i){for(l=2;a.Y>4;)a.HC(2);n=a.h(1);q=a.h(2)}else{for(l=1;a.Y>3;)a.HC(1);n=a.h(0);q=a.h(a.Y-1)}p=a.h(a.Y-1);if(j===0){if(c.ja===up){j=e.bottom+b.y;b.y===0&&n.y>p.y+c.Jc&&(j=Math.min(j,Math.max(n.y,j-wp(c))))}else if(c.ja===tp){j=
e.top+b.y;b.y===0&&n.y<p.y-c.Jc&&(j=Math.max(j,Math.min(n.y,j+wp(c))))}else j=c.Jj||c.Kj&&c.uh===1?e.top-c.qa.y+b.y:e.y+e.height/2+b.y;if(i){a.q(l,new E(n.x,j));l++;a.q(l,new E(e.right+d,j));l++;a.q(l,new E(e.right+d+(b.x-g)/3,j));l++;a.q(l,new E(e.right+d+(b.x-g)*2/3,j));l++;a.q(l,new E(e.right+d+(b.x-g),j));l++;a.q(l,new E(q.x,j))}else{if(k){a.q(l,new E(e.right+d/2,n.y));l++}a.q(l,new E(e.right+d/2,j));l++;a.q(l,new E(e.right+d+b.x-(k?g/2:g),j));l++;k&&a.q(l,new E(a.h(l-1).x,q.y))}}else if(j===
90){if(c.ja===up){j=e.right+b.x;b.x===0&&n.x>p.x+c.Jc&&(j=Math.min(j,Math.max(n.x,j-wp(c))))}else if(c.ja===tp){j=e.left+b.x;b.x===0&&n.x<p.x-c.Jc&&(j=Math.max(j,Math.min(n.x,j+wp(c))))}else j=c.Jj||c.Kj&&c.uh===1?e.left-c.qa.x+b.x:e.x+e.width/2+b.x;if(i){a.q(l,new E(j,n.y));l++;a.q(l,new E(j,e.bottom+d));l++;a.q(l,new E(j,e.bottom+d+(b.y-g)/3));l++;a.q(l,new E(j,e.bottom+d+(b.y-g)*2/3));l++;a.q(l,new E(j,e.bottom+d+(b.y-g)));l++;a.q(l,new E(j,q.y))}else{if(k){a.q(l,new E(n.x,e.bottom+d/2));l++}a.q(l,
new E(j,e.bottom+d/2));l++;a.q(l,new E(j,e.bottom+d+b.y-(k?g/2:g)));l++;k&&a.q(l,new E(q.x,a.h(l-1).y))}}else if(j===180){if(c.ja===up){j=e.bottom+b.y;b.y===0&&n.y>p.y+c.Jc&&(j=Math.min(j,Math.max(n.y,j-wp(c))))}else if(c.ja===tp){j=e.top+b.y;b.y===0&&n.y<p.y-c.Jc&&(j=Math.max(j,Math.min(n.y,j+wp(c))))}else j=c.Jj||c.Kj&&c.uh===1?e.top-c.qa.y+b.y:e.y+e.height/2+b.y;if(i){a.q(l,new E(n.x,j));l++;a.q(l,new E(e.left-d,j));l++;a.q(l,new E(e.left-d+(b.x+g)/3,j));l++;a.q(l,new E(e.left-d+(b.x+g)*2/3,j));
l++;a.q(l,new E(e.left-d+(b.x+g),j));l++;a.q(l,new E(q.x,j))}else{if(k){a.q(l,new E(e.left-d/2,n.y));l++}a.q(l,new E(e.left-d/2,j));l++;a.q(l,new E(e.left-d+b.x+(k?g/2:g),j));l++;k&&a.q(l,new E(a.h(l-1).x,q.y))}}else if(j===270){if(c.ja===up){j=e.right+b.x;b.x===0&&n.x>p.x+c.Jc&&(j=Math.min(j,Math.max(n.x,j-wp(c))))}else if(c.ja===tp){j=e.left+b.x;b.x===0&&n.x<p.x-c.Jc&&(j=Math.max(j,Math.min(n.x,j+wp(c))))}else j=c.Jj||c.Kj&&c.uh===1?e.left-c.qa.x+b.x:e.x+e.width/2+b.x;if(i){a.q(l,new E(j,n.y));
l++;a.q(l,new E(j,e.top-d));l++;a.q(l,new E(j,e.top-d+(b.y+g)/3));l++;a.q(l,new E(j,e.top-d+(b.y+g)*2/3));l++;a.q(l,new E(j,e.top-d+(b.y+g)));l++;a.q(l,new E(j,q.y))}else{if(k){a.q(l,new E(n.x,e.top-d/2));l++}a.q(l,new E(j,e.top-d/2));l++;a.q(l,new E(j,e.top-d+b.y+(k?g/2:g)));l++;k&&a.q(l,new E(q.x,a.h(l-1).y))}}else u.g("Invalid angle "+j);a.Mh()}}}};u.a(Rp,"relativePoint",Rp.prototype.eG);u.defineProperty(Rp,{eG:"relativePoint"},r("Up"),ba("Up"));window.go=ga;ga.version="0.9.0rc"; })(window);
